function IN(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function db(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Xp={},DN={get exports(){return Xp},set exports(n){Xp=n}},Vy={},L={},LN={get exports(){return L},set exports(n){L=n}},Zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm=Symbol.for("react.element"),FN=Symbol.for("react.portal"),kN=Symbol.for("react.fragment"),ON=Symbol.for("react.strict_mode"),UN=Symbol.for("react.profiler"),NN=Symbol.for("react.provider"),zN=Symbol.for("react.context"),GN=Symbol.for("react.forward_ref"),HN=Symbol.for("react.suspense"),VN=Symbol.for("react.memo"),WN=Symbol.for("react.lazy"),vC=Symbol.iterator;function jN(n){return n===null||typeof n!="object"?null:(n=vC&&n[vC]||n["@@iterator"],typeof n=="function"?n:null)}var AI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MI=Object.assign,EI={};function Od(n,e,t){this.props=n,this.context=e,this.refs=EI,this.updater=t||AI}Od.prototype.isReactComponent={};Od.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Od.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function CI(){}CI.prototype=Od.prototype;function hb(n,e,t){this.props=n,this.context=e,this.refs=EI,this.updater=t||AI}var pb=hb.prototype=new CI;pb.constructor=hb;MI(pb,Od.prototype);pb.isPureReactComponent=!0;var yC=Array.isArray,TI=Object.prototype.hasOwnProperty,mb={current:null},RI={key:!0,ref:!0,__self:!0,__source:!0};function PI(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)TI.call(e,r)&&!RI.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Dm,type:n,key:s,ref:o,props:i,_owner:mb.current}}function $N(n,e){return{$$typeof:Dm,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function gb(n){return typeof n=="object"&&n!==null&&n.$$typeof===Dm}function JN(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var _C=/\/+/g;function R_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?JN(""+n.key):e.toString(36)}function wv(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Dm:case FN:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+R_(o,0):r,yC(i)?(t="",n!=null&&(t=n.replace(_C,"$&/")+"/"),wv(i,e,t,"",function(u){return u})):i!=null&&(gb(i)&&(i=$N(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_C,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",yC(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+R_(s,a);o+=wv(s,e,t,l,i)}else if(l=jN(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+R_(s,a++),o+=wv(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qg(n,e,t){if(n==null)return n;var r=[],i=0;return wv(n,r,"","",function(s){return e.call(t,s,i++)}),r}function XN(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Di={current:null},Sv={transition:null},KN={ReactCurrentDispatcher:Di,ReactCurrentBatchConfig:Sv,ReactCurrentOwner:mb};Zt.Children={map:qg,forEach:function(n,e,t){qg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return qg(n,function(){e++}),e},toArray:function(n){return qg(n,function(e){return e})||[]},only:function(n){if(!gb(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Zt.Component=Od;Zt.Fragment=kN;Zt.Profiler=UN;Zt.PureComponent=hb;Zt.StrictMode=ON;Zt.Suspense=HN;Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KN;Zt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=MI({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=mb.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)TI.call(e,l)&&!RI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Dm,type:n.type,key:i,ref:s,props:r,_owner:o}};Zt.createContext=function(n){return n={$$typeof:zN,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:NN,_context:n},n.Consumer=n};Zt.createElement=PI;Zt.createFactory=function(n){var e=PI.bind(null,n);return e.type=n,e};Zt.createRef=function(){return{current:null}};Zt.forwardRef=function(n){return{$$typeof:GN,render:n}};Zt.isValidElement=gb;Zt.lazy=function(n){return{$$typeof:WN,_payload:{_status:-1,_result:n},_init:XN}};Zt.memo=function(n,e){return{$$typeof:VN,type:n,compare:e===void 0?null:e}};Zt.startTransition=function(n){var e=Sv.transition;Sv.transition={};try{n()}finally{Sv.transition=e}};Zt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Zt.useCallback=function(n,e){return Di.current.useCallback(n,e)};Zt.useContext=function(n){return Di.current.useContext(n)};Zt.useDebugValue=function(){};Zt.useDeferredValue=function(n){return Di.current.useDeferredValue(n)};Zt.useEffect=function(n,e){return Di.current.useEffect(n,e)};Zt.useId=function(){return Di.current.useId()};Zt.useImperativeHandle=function(n,e,t){return Di.current.useImperativeHandle(n,e,t)};Zt.useInsertionEffect=function(n,e){return Di.current.useInsertionEffect(n,e)};Zt.useLayoutEffect=function(n,e){return Di.current.useLayoutEffect(n,e)};Zt.useMemo=function(n,e){return Di.current.useMemo(n,e)};Zt.useReducer=function(n,e,t){return Di.current.useReducer(n,e,t)};Zt.useRef=function(n){return Di.current.useRef(n)};Zt.useState=function(n){return Di.current.useState(n)};Zt.useSyncExternalStore=function(n,e,t){return Di.current.useSyncExternalStore(n,e,t)};Zt.useTransition=function(){return Di.current.useTransition()};Zt.version="18.2.0";(function(n){n.exports=Zt})(LN);const le=db(L),YN=IN({__proto__:null,default:le},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QN=L,ZN=Symbol.for("react.element"),qN=Symbol.for("react.fragment"),ez=Object.prototype.hasOwnProperty,tz=QN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nz={key:!0,ref:!0,__self:!0,__source:!0};function BI(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ez.call(e,r)&&!nz.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:ZN,type:n,key:s,ref:o,props:i,_owner:tz.current}}Vy.Fragment=qN;Vy.jsx=BI;Vy.jsxs=BI;(function(n){n.exports=Vy})(DN);const vb=Xp.Fragment,Pt=Xp.jsx,$i=Xp.jsxs;var Bw={},Xv={},rz={get exports(){return Xv},set exports(n){Xv=n}},Ss={},Iw={},iz={get exports(){return Iw},set exports(n){Iw=n}},II={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(G,j){var Y=G.length;G.push(j);e:for(;0<Y;){var X=Y-1>>>1,K=G[X];if(0<i(K,j))G[X]=j,G[Y]=K,Y=X;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var j=G[0],Y=G.pop();if(Y!==j){G[0]=Y;e:for(var X=0,K=G.length,ce=K>>>1;X<ce;){var he=2*(X+1)-1,te=G[he],me=he+1,pe=G[me];if(0>i(te,Y))me<K&&0>i(pe,te)?(G[X]=pe,G[me]=Y,X=me):(G[X]=te,G[he]=Y,X=he);else if(me<K&&0>i(pe,Y))G[X]=pe,G[me]=Y,X=me;else break e}}return j}function i(G,j){var Y=G.sortIndex-j.sortIndex;return Y!==0?Y:G.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,h=3,m=!1,y=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(G){for(var j=t(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=G)r(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=t(u)}}function A(G){if(g=!1,w(G),!y)if(t(l)!==null)y=!0,Q(R);else{var j=t(u);j!==null&&re(A,j.startTime-G)}}function R(G,j){y=!1,g&&(g=!1,x(b),b=-1),m=!0;var Y=h;try{for(w(j),f=t(l);f!==null&&(!(f.expirationTime>j)||G&&!I());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var K=X(f.expirationTime<=j);j=n.unstable_now(),typeof K=="function"?f.callback=K:f===t(l)&&r(l),w(j)}else r(l);f=t(l)}if(f!==null)var ce=!0;else{var he=t(u);he!==null&&re(A,he.startTime-j),ce=!1}return ce}finally{f=null,h=Y,m=!1}}var M=!1,P=null,b=-1,C=5,T=-1;function I(){return!(n.unstable_now()-T<C)}function D(){if(P!==null){var G=n.unstable_now();T=G;var j=!0;try{j=P(!0,G)}finally{j?z():(M=!1,P=null)}}else M=!1}var z;if(typeof _=="function")z=function(){_(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,J=N.port2;N.port1.onmessage=D,z=function(){J.postMessage(null)}}else z=function(){v(D,0)};function Q(G){P=G,M||(M=!0,z())}function re(G,j){b=v(function(){G(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,Q(R))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var Y=h;h=j;try{return G()}finally{h=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,j){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Y=h;h=G;try{return j()}finally{h=Y}},n.unstable_scheduleCallback=function(G,j,Y){var X=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?X+Y:X):Y=X,G){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=Y+K,G={id:c++,callback:j,priorityLevel:G,startTime:Y,expirationTime:K,sortIndex:-1},Y>X?(G.sortIndex=Y,e(u,G),t(l)===null&&G===t(u)&&(g?(x(b),b=-1):g=!0,re(A,Y-X))):(G.sortIndex=K,e(l,G),y||m||(y=!0,Q(R))),G},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(G){var j=h;return function(){var Y=h;h=j;try{return G.apply(this,arguments)}finally{h=Y}}}})(II);(function(n){n.exports=II})(iz);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DI=L,_s=Iw;function Ze(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var LI=new Set,Kp={};function Rc(n,e){dd(n,e),dd(n+"Capture",e)}function dd(n,e){for(Kp[n]=e,n=0;n<e.length;n++)LI.add(e[n])}var Na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dw=Object.prototype.hasOwnProperty,sz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xC={},wC={};function oz(n){return Dw.call(wC,n)?!0:Dw.call(xC,n)?!1:sz.test(n)?wC[n]=!0:(xC[n]=!0,!1)}function az(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function lz(n,e,t,r){if(e===null||typeof e>"u"||az(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Li(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ei[n]=new Li(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ei[e]=new Li(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ei[n]=new Li(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ei[n]=new Li(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ei[n]=new Li(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ei[n]=new Li(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ei[n]=new Li(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ei[n]=new Li(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ei[n]=new Li(n,5,!1,n.toLowerCase(),null,!1,!1)});var yb=/[\-:]([a-z])/g;function _b(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(yb,_b);ei[e]=new Li(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(yb,_b);ei[e]=new Li(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(yb,_b);ei[e]=new Li(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ei[n]=new Li(n,1,!1,n.toLowerCase(),null,!1,!1)});ei.xlinkHref=new Li("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ei[n]=new Li(n,1,!1,n.toLowerCase(),null,!0,!0)});function xb(n,e,t,r){var i=ei.hasOwnProperty(e)?ei[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lz(e,t,i,r)&&(t=null),r||i===null?oz(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Xa=DI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,e0=Symbol.for("react.element"),Bf=Symbol.for("react.portal"),If=Symbol.for("react.fragment"),wb=Symbol.for("react.strict_mode"),Lw=Symbol.for("react.profiler"),FI=Symbol.for("react.provider"),kI=Symbol.for("react.context"),Sb=Symbol.for("react.forward_ref"),Fw=Symbol.for("react.suspense"),kw=Symbol.for("react.suspense_list"),bb=Symbol.for("react.memo"),Ml=Symbol.for("react.lazy"),OI=Symbol.for("react.offscreen"),SC=Symbol.iterator;function Th(n){return n===null||typeof n!="object"?null:(n=SC&&n[SC]||n["@@iterator"],typeof n=="function"?n:null)}var qn=Object.assign,P_;function gp(n){if(P_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);P_=e&&e[1]||""}return`
`+P_+n}var B_=!1;function I_(n,e){if(!n||B_)return"";B_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{B_=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?gp(n):""}function uz(n){switch(n.tag){case 5:return gp(n.type);case 16:return gp("Lazy");case 13:return gp("Suspense");case 19:return gp("SuspenseList");case 0:case 2:case 15:return n=I_(n.type,!1),n;case 11:return n=I_(n.type.render,!1),n;case 1:return n=I_(n.type,!0),n;default:return""}}function Ow(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case If:return"Fragment";case Bf:return"Portal";case Lw:return"Profiler";case wb:return"StrictMode";case Fw:return"Suspense";case kw:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case kI:return(n.displayName||"Context")+".Consumer";case FI:return(n._context.displayName||"Context")+".Provider";case Sb:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case bb:return e=n.displayName||null,e!==null?e:Ow(n.type)||"Memo";case Ml:e=n._payload,n=n._init;try{return Ow(n(e))}catch{}}return null}function cz(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ow(e);case 8:return e===wb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ql(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function UI(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fz(n){var e=UI(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function t0(n){n._valueTracker||(n._valueTracker=fz(n))}function NI(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=UI(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Kv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Uw(n,e){var t=e.checked;return qn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function bC(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=ql(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zI(n,e){e=e.checked,e!=null&&xb(n,"checked",e,!1)}function Nw(n,e){zI(n,e);var t=ql(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?zw(n,e.type,t):e.hasOwnProperty("defaultValue")&&zw(n,e.type,ql(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function AC(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function zw(n,e,t){(e!=="number"||Kv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var vp=Array.isArray;function Qf(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+ql(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Gw(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ze(91));return qn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function MC(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ze(92));if(vp(t)){if(1<t.length)throw Error(Ze(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ql(t)}}function GI(n,e){var t=ql(e.value),r=ql(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function EC(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function HI(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hw(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?HI(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var n0,VI=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(n0=n0||document.createElement("div"),n0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=n0.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Yp(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ap={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dz=["Webkit","ms","Moz","O"];Object.keys(Ap).forEach(function(n){dz.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ap[e]=Ap[n]})});function WI(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ap.hasOwnProperty(n)&&Ap[n]?(""+e).trim():e+"px"}function jI(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=WI(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var hz=qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vw(n,e){if(e){if(hz[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ze(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ze(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ze(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ze(62))}}function Ww(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jw=null;function Ab(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var $w=null,Zf=null,qf=null;function CC(n){if(n=km(n)){if(typeof $w!="function")throw Error(Ze(280));var e=n.stateNode;e&&(e=Xy(e),$w(n.stateNode,n.type,e))}}function $I(n){Zf?qf?qf.push(n):qf=[n]:Zf=n}function JI(){if(Zf){var n=Zf,e=qf;if(qf=Zf=null,CC(n),e)for(n=0;n<e.length;n++)CC(e[n])}}function XI(n,e){return n(e)}function KI(){}var D_=!1;function YI(n,e,t){if(D_)return n(e,t);D_=!0;try{return XI(n,e,t)}finally{D_=!1,(Zf!==null||qf!==null)&&(KI(),JI())}}function Qp(n,e){var t=n.stateNode;if(t===null)return null;var r=Xy(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ze(231,e,typeof t));return t}var Jw=!1;if(Na)try{var Rh={};Object.defineProperty(Rh,"passive",{get:function(){Jw=!0}}),window.addEventListener("test",Rh,Rh),window.removeEventListener("test",Rh,Rh)}catch{Jw=!1}function pz(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var Mp=!1,Yv=null,Qv=!1,Xw=null,mz={onError:function(n){Mp=!0,Yv=n}};function gz(n,e,t,r,i,s,o,a,l){Mp=!1,Yv=null,pz.apply(mz,arguments)}function vz(n,e,t,r,i,s,o,a,l){if(gz.apply(this,arguments),Mp){if(Mp){var u=Yv;Mp=!1,Yv=null}else throw Error(Ze(198));Qv||(Qv=!0,Xw=u)}}function Pc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function QI(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function TC(n){if(Pc(n)!==n)throw Error(Ze(188))}function yz(n){var e=n.alternate;if(!e){if(e=Pc(n),e===null)throw Error(Ze(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return TC(i),n;if(s===r)return TC(i),e;s=s.sibling}throw Error(Ze(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Ze(189))}}if(t.alternate!==r)throw Error(Ze(190))}if(t.tag!==3)throw Error(Ze(188));return t.stateNode.current===t?n:e}function ZI(n){return n=yz(n),n!==null?qI(n):null}function qI(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=qI(n);if(e!==null)return e;n=n.sibling}return null}var eD=_s.unstable_scheduleCallback,RC=_s.unstable_cancelCallback,_z=_s.unstable_shouldYield,xz=_s.unstable_requestPaint,ur=_s.unstable_now,wz=_s.unstable_getCurrentPriorityLevel,Mb=_s.unstable_ImmediatePriority,tD=_s.unstable_UserBlockingPriority,Zv=_s.unstable_NormalPriority,Sz=_s.unstable_LowPriority,nD=_s.unstable_IdlePriority,Wy=null,Zo=null;function bz(n){if(Zo&&typeof Zo.onCommitFiberRoot=="function")try{Zo.onCommitFiberRoot(Wy,n,void 0,(n.current.flags&128)===128)}catch{}}var Ao=Math.clz32?Math.clz32:Ez,Az=Math.log,Mz=Math.LN2;function Ez(n){return n>>>=0,n===0?32:31-(Az(n)/Mz|0)|0}var r0=64,i0=4194304;function yp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function qv(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=yp(a):(s&=o,s!==0&&(r=yp(s)))}else o=t&~i,o!==0?r=yp(o):s!==0&&(r=yp(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Ao(e),i=1<<t,r|=n[t],e&=~i;return r}function Cz(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tz(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Ao(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=Cz(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Kw(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function rD(){var n=r0;return r0<<=1,!(r0&4194240)&&(r0=64),n}function L_(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Lm(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ao(e),n[e]=t}function Rz(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Ao(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function Eb(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Ao(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var _n=0;function iD(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var sD,Cb,oD,aD,lD,Yw=!1,s0=[],Nl=null,zl=null,Gl=null,Zp=new Map,qp=new Map,Rl=[],Pz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PC(n,e){switch(n){case"focusin":case"focusout":Nl=null;break;case"dragenter":case"dragleave":zl=null;break;case"mouseover":case"mouseout":Gl=null;break;case"pointerover":case"pointerout":Zp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qp.delete(e.pointerId)}}function Ph(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=km(e),e!==null&&Cb(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Bz(n,e,t,r,i){switch(e){case"focusin":return Nl=Ph(Nl,n,e,t,r,i),!0;case"dragenter":return zl=Ph(zl,n,e,t,r,i),!0;case"mouseover":return Gl=Ph(Gl,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Zp.set(s,Ph(Zp.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qp.set(s,Ph(qp.get(s)||null,n,e,t,r,i)),!0}return!1}function uD(n){var e=Qu(n.target);if(e!==null){var t=Pc(e);if(t!==null){if(e=t.tag,e===13){if(e=QI(t),e!==null){n.blockedOn=e,lD(n.priority,function(){oD(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function bv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Qw(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);jw=r,t.target.dispatchEvent(r),jw=null}else return e=km(t),e!==null&&Cb(e),n.blockedOn=t,!1;e.shift()}return!0}function BC(n,e,t){bv(n)&&t.delete(e)}function Iz(){Yw=!1,Nl!==null&&bv(Nl)&&(Nl=null),zl!==null&&bv(zl)&&(zl=null),Gl!==null&&bv(Gl)&&(Gl=null),Zp.forEach(BC),qp.forEach(BC)}function Bh(n,e){n.blockedOn===e&&(n.blockedOn=null,Yw||(Yw=!0,_s.unstable_scheduleCallback(_s.unstable_NormalPriority,Iz)))}function em(n){function e(i){return Bh(i,n)}if(0<s0.length){Bh(s0[0],n);for(var t=1;t<s0.length;t++){var r=s0[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Nl!==null&&Bh(Nl,n),zl!==null&&Bh(zl,n),Gl!==null&&Bh(Gl,n),Zp.forEach(e),qp.forEach(e),t=0;t<Rl.length;t++)r=Rl[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Rl.length&&(t=Rl[0],t.blockedOn===null);)uD(t),t.blockedOn===null&&Rl.shift()}var ed=Xa.ReactCurrentBatchConfig,ey=!0;function Dz(n,e,t,r){var i=_n,s=ed.transition;ed.transition=null;try{_n=1,Tb(n,e,t,r)}finally{_n=i,ed.transition=s}}function Lz(n,e,t,r){var i=_n,s=ed.transition;ed.transition=null;try{_n=4,Tb(n,e,t,r)}finally{_n=i,ed.transition=s}}function Tb(n,e,t,r){if(ey){var i=Qw(n,e,t,r);if(i===null)W_(n,e,r,ty,t),PC(n,r);else if(Bz(i,n,e,t,r))r.stopPropagation();else if(PC(n,r),e&4&&-1<Pz.indexOf(n)){for(;i!==null;){var s=km(i);if(s!==null&&sD(s),s=Qw(n,e,t,r),s===null&&W_(n,e,r,ty,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else W_(n,e,r,null,t)}}var ty=null;function Qw(n,e,t,r){if(ty=null,n=Ab(r),n=Qu(n),n!==null)if(e=Pc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=QI(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return ty=n,null}function cD(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wz()){case Mb:return 1;case tD:return 4;case Zv:case Sz:return 16;case nD:return 536870912;default:return 16}default:return 16}}var Bl=null,Rb=null,Av=null;function fD(){if(Av)return Av;var n,e=Rb,t=e.length,r,i="value"in Bl?Bl.value:Bl.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Av=i.slice(n,1<r?1-r:void 0)}function Mv(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function o0(){return!0}function IC(){return!1}function bs(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?o0:IC,this.isPropagationStopped=IC,this}return qn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=o0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=o0)},persist:function(){},isPersistent:o0}),e}var Ud={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pb=bs(Ud),Fm=qn({},Ud,{view:0,detail:0}),Fz=bs(Fm),F_,k_,Ih,jy=qn({},Fm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bb,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ih&&(Ih&&n.type==="mousemove"?(F_=n.screenX-Ih.screenX,k_=n.screenY-Ih.screenY):k_=F_=0,Ih=n),F_)},movementY:function(n){return"movementY"in n?n.movementY:k_}}),DC=bs(jy),kz=qn({},jy,{dataTransfer:0}),Oz=bs(kz),Uz=qn({},Fm,{relatedTarget:0}),O_=bs(Uz),Nz=qn({},Ud,{animationName:0,elapsedTime:0,pseudoElement:0}),zz=bs(Nz),Gz=qn({},Ud,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Hz=bs(Gz),Vz=qn({},Ud,{data:0}),LC=bs(Vz),Wz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jz(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=$z[n])?!!e[n]:!1}function Bb(){return Jz}var Xz=qn({},Fm,{key:function(n){if(n.key){var e=Wz[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Mv(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?jz[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bb,charCode:function(n){return n.type==="keypress"?Mv(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Mv(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Kz=bs(Xz),Yz=qn({},jy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),FC=bs(Yz),Qz=qn({},Fm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bb}),Zz=bs(Qz),qz=qn({},Ud,{propertyName:0,elapsedTime:0,pseudoElement:0}),e5=bs(qz),t5=qn({},jy,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),n5=bs(t5),r5=[9,13,27,32],Ib=Na&&"CompositionEvent"in window,Ep=null;Na&&"documentMode"in document&&(Ep=document.documentMode);var i5=Na&&"TextEvent"in window&&!Ep,dD=Na&&(!Ib||Ep&&8<Ep&&11>=Ep),kC=String.fromCharCode(32),OC=!1;function hD(n,e){switch(n){case"keyup":return r5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pD(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Df=!1;function s5(n,e){switch(n){case"compositionend":return pD(e);case"keypress":return e.which!==32?null:(OC=!0,kC);case"textInput":return n=e.data,n===kC&&OC?null:n;default:return null}}function o5(n,e){if(Df)return n==="compositionend"||!Ib&&hD(n,e)?(n=fD(),Av=Rb=Bl=null,Df=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dD&&e.locale!=="ko"?null:e.data;default:return null}}var a5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function UC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!a5[n.type]:e==="textarea"}function mD(n,e,t,r){$I(r),e=ny(e,"onChange"),0<e.length&&(t=new Pb("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Cp=null,tm=null;function l5(n){ED(n,0)}function $y(n){var e=kf(n);if(NI(e))return n}function u5(n,e){if(n==="change")return e}var gD=!1;if(Na){var U_;if(Na){var N_="oninput"in document;if(!N_){var NC=document.createElement("div");NC.setAttribute("oninput","return;"),N_=typeof NC.oninput=="function"}U_=N_}else U_=!1;gD=U_&&(!document.documentMode||9<document.documentMode)}function zC(){Cp&&(Cp.detachEvent("onpropertychange",vD),tm=Cp=null)}function vD(n){if(n.propertyName==="value"&&$y(tm)){var e=[];mD(e,tm,n,Ab(n)),YI(l5,e)}}function c5(n,e,t){n==="focusin"?(zC(),Cp=e,tm=t,Cp.attachEvent("onpropertychange",vD)):n==="focusout"&&zC()}function f5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return $y(tm)}function d5(n,e){if(n==="click")return $y(e)}function h5(n,e){if(n==="input"||n==="change")return $y(e)}function p5(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var To=typeof Object.is=="function"?Object.is:p5;function nm(n,e){if(To(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Dw.call(e,i)||!To(n[i],e[i]))return!1}return!0}function GC(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function HC(n,e){var t=GC(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=GC(t)}}function yD(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?yD(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function _D(){for(var n=window,e=Kv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Kv(n.document)}return e}function Db(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function m5(n){var e=_D(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&yD(t.ownerDocument.documentElement,t)){if(r!==null&&Db(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=HC(t,s);var o=HC(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var g5=Na&&"documentMode"in document&&11>=document.documentMode,Lf=null,Zw=null,Tp=null,qw=!1;function VC(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;qw||Lf==null||Lf!==Kv(r)||(r=Lf,"selectionStart"in r&&Db(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Tp&&nm(Tp,r)||(Tp=r,r=ny(Zw,"onSelect"),0<r.length&&(e=new Pb("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Lf)))}function a0(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Ff={animationend:a0("Animation","AnimationEnd"),animationiteration:a0("Animation","AnimationIteration"),animationstart:a0("Animation","AnimationStart"),transitionend:a0("Transition","TransitionEnd")},z_={},xD={};Na&&(xD=document.createElement("div").style,"AnimationEvent"in window||(delete Ff.animationend.animation,delete Ff.animationiteration.animation,delete Ff.animationstart.animation),"TransitionEvent"in window||delete Ff.transitionend.transition);function Jy(n){if(z_[n])return z_[n];if(!Ff[n])return n;var e=Ff[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in xD)return z_[n]=e[t];return n}var wD=Jy("animationend"),SD=Jy("animationiteration"),bD=Jy("animationstart"),AD=Jy("transitionend"),MD=new Map,WC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function uu(n,e){MD.set(n,e),Rc(e,[n])}for(var G_=0;G_<WC.length;G_++){var H_=WC[G_],v5=H_.toLowerCase(),y5=H_[0].toUpperCase()+H_.slice(1);uu(v5,"on"+y5)}uu(wD,"onAnimationEnd");uu(SD,"onAnimationIteration");uu(bD,"onAnimationStart");uu("dblclick","onDoubleClick");uu("focusin","onFocus");uu("focusout","onBlur");uu(AD,"onTransitionEnd");dd("onMouseEnter",["mouseout","mouseover"]);dd("onMouseLeave",["mouseout","mouseover"]);dd("onPointerEnter",["pointerout","pointerover"]);dd("onPointerLeave",["pointerout","pointerover"]);Rc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _p="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_5=new Set("cancel close invalid load scroll toggle".split(" ").concat(_p));function jC(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,vz(r,e,void 0,n),n.currentTarget=null}function ED(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;jC(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;jC(i,a,u),s=l}}}if(Qv)throw n=Xw,Qv=!1,Xw=null,n}function In(n,e){var t=e[iS];t===void 0&&(t=e[iS]=new Set);var r=n+"__bubble";t.has(r)||(CD(e,n,2,!1),t.add(r))}function V_(n,e,t){var r=0;e&&(r|=4),CD(t,n,r,e)}var l0="_reactListening"+Math.random().toString(36).slice(2);function rm(n){if(!n[l0]){n[l0]=!0,LI.forEach(function(t){t!=="selectionchange"&&(_5.has(t)||V_(t,!1,n),V_(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[l0]||(e[l0]=!0,V_("selectionchange",!1,e))}}function CD(n,e,t,r){switch(cD(e)){case 1:var i=Dz;break;case 4:i=Lz;break;default:i=Tb}t=i.bind(null,e,t,n),i=void 0,!Jw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function W_(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Qu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}YI(function(){var u=s,c=Ab(t),f=[];e:{var h=MD.get(n);if(h!==void 0){var m=Pb,y=n;switch(n){case"keypress":if(Mv(t)===0)break e;case"keydown":case"keyup":m=Kz;break;case"focusin":y="focus",m=O_;break;case"focusout":y="blur",m=O_;break;case"beforeblur":case"afterblur":m=O_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=DC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Oz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Zz;break;case wD:case SD:case bD:m=zz;break;case AD:m=e5;break;case"scroll":m=Fz;break;case"wheel":m=n5;break;case"copy":case"cut":case"paste":m=Hz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=FC}var g=(e&4)!==0,v=!g&&n==="scroll",x=g?h!==null?h+"Capture":null:h;g=[];for(var _=u,w;_!==null;){w=_;var A=w.stateNode;if(w.tag===5&&A!==null&&(w=A,x!==null&&(A=Qp(_,x),A!=null&&g.push(im(_,A,w)))),v)break;_=_.return}0<g.length&&(h=new m(h,y,null,t,c),f.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",h&&t!==jw&&(y=t.relatedTarget||t.fromElement)&&(Qu(y)||y[za]))break e;if((m||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=u,y=y?Qu(y):null,y!==null&&(v=Pc(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(g=DC,A="onMouseLeave",x="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(g=FC,A="onPointerLeave",x="onPointerEnter",_="pointer"),v=m==null?h:kf(m),w=y==null?h:kf(y),h=new g(A,_+"leave",m,t,c),h.target=v,h.relatedTarget=w,A=null,Qu(c)===u&&(g=new g(x,_+"enter",y,t,c),g.target=w,g.relatedTarget=v,A=g),v=A,m&&y)t:{for(g=m,x=y,_=0,w=g;w;w=tf(w))_++;for(w=0,A=x;A;A=tf(A))w++;for(;0<_-w;)g=tf(g),_--;for(;0<w-_;)x=tf(x),w--;for(;_--;){if(g===x||x!==null&&g===x.alternate)break t;g=tf(g),x=tf(x)}g=null}else g=null;m!==null&&$C(f,h,m,g,!1),y!==null&&v!==null&&$C(f,v,y,g,!0)}}e:{if(h=u?kf(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var R=u5;else if(UC(h))if(gD)R=h5;else{R=f5;var M=c5}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(R=d5);if(R&&(R=R(n,u))){mD(f,R,t,c);break e}M&&M(n,h,u),n==="focusout"&&(M=h._wrapperState)&&M.controlled&&h.type==="number"&&zw(h,"number",h.value)}switch(M=u?kf(u):window,n){case"focusin":(UC(M)||M.contentEditable==="true")&&(Lf=M,Zw=u,Tp=null);break;case"focusout":Tp=Zw=Lf=null;break;case"mousedown":qw=!0;break;case"contextmenu":case"mouseup":case"dragend":qw=!1,VC(f,t,c);break;case"selectionchange":if(g5)break;case"keydown":case"keyup":VC(f,t,c)}var P;if(Ib)e:{switch(n){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Df?hD(n,t)&&(b="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(b="onCompositionStart");b&&(dD&&t.locale!=="ko"&&(Df||b!=="onCompositionStart"?b==="onCompositionEnd"&&Df&&(P=fD()):(Bl=c,Rb="value"in Bl?Bl.value:Bl.textContent,Df=!0)),M=ny(u,b),0<M.length&&(b=new LC(b,n,null,t,c),f.push({event:b,listeners:M}),P?b.data=P:(P=pD(t),P!==null&&(b.data=P)))),(P=i5?s5(n,t):o5(n,t))&&(u=ny(u,"onBeforeInput"),0<u.length&&(c=new LC("onBeforeInput","beforeinput",null,t,c),f.push({event:c,listeners:u}),c.data=P))}ED(f,e)})}function im(n,e,t){return{instance:n,listener:e,currentTarget:t}}function ny(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Qp(n,t),s!=null&&r.unshift(im(n,s,i)),s=Qp(n,e),s!=null&&r.push(im(n,s,i))),n=n.return}return r}function tf(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function $C(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Qp(t,s),l!=null&&o.unshift(im(t,l,a))):i||(l=Qp(t,s),l!=null&&o.push(im(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var x5=/\r\n?/g,w5=/\u0000|\uFFFD/g;function JC(n){return(typeof n=="string"?n:""+n).replace(x5,`
`).replace(w5,"")}function u0(n,e,t){if(e=JC(e),JC(n)!==e&&t)throw Error(Ze(425))}function ry(){}var eS=null,tS=null;function nS(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rS=typeof setTimeout=="function"?setTimeout:void 0,S5=typeof clearTimeout=="function"?clearTimeout:void 0,XC=typeof Promise=="function"?Promise:void 0,b5=typeof queueMicrotask=="function"?queueMicrotask:typeof XC<"u"?function(n){return XC.resolve(null).then(n).catch(A5)}:rS;function A5(n){setTimeout(function(){throw n})}function j_(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),em(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);em(e)}function Hl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function KC(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Nd=Math.random().toString(36).slice(2),Ko="__reactFiber$"+Nd,sm="__reactProps$"+Nd,za="__reactContainer$"+Nd,iS="__reactEvents$"+Nd,M5="__reactListeners$"+Nd,E5="__reactHandles$"+Nd;function Qu(n){var e=n[Ko];if(e)return e;for(var t=n.parentNode;t;){if(e=t[za]||t[Ko]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=KC(n);n!==null;){if(t=n[Ko])return t;n=KC(n)}return e}n=t,t=n.parentNode}return null}function km(n){return n=n[Ko]||n[za],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function kf(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ze(33))}function Xy(n){return n[sm]||null}var sS=[],Of=-1;function cu(n){return{current:n}}function Ln(n){0>Of||(n.current=sS[Of],sS[Of]=null,Of--)}function Pn(n,e){Of++,sS[Of]=n.current,n.current=e}var eu={},gi=cu(eu),Ji=cu(!1),yc=eu;function hd(n,e){var t=n.type.contextTypes;if(!t)return eu;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Xi(n){return n=n.childContextTypes,n!=null}function iy(){Ln(Ji),Ln(gi)}function YC(n,e,t){if(gi.current!==eu)throw Error(Ze(168));Pn(gi,e),Pn(Ji,t)}function TD(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ze(108,cz(n)||"Unknown",i));return qn({},t,r)}function sy(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||eu,yc=gi.current,Pn(gi,n),Pn(Ji,Ji.current),!0}function QC(n,e,t){var r=n.stateNode;if(!r)throw Error(Ze(169));t?(n=TD(n,e,yc),r.__reactInternalMemoizedMergedChildContext=n,Ln(Ji),Ln(gi),Pn(gi,n)):Ln(Ji),Pn(Ji,t)}var Ca=null,Ky=!1,$_=!1;function RD(n){Ca===null?Ca=[n]:Ca.push(n)}function C5(n){Ky=!0,RD(n)}function fu(){if(!$_&&Ca!==null){$_=!0;var n=0,e=_n;try{var t=Ca;for(_n=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Ca=null,Ky=!1}catch(i){throw Ca!==null&&(Ca=Ca.slice(n+1)),eD(Mb,fu),i}finally{_n=e,$_=!1}}return null}var Uf=[],Nf=0,oy=null,ay=0,zs=[],Gs=0,_c=null,Ia=1,Da="";function Wu(n,e){Uf[Nf++]=ay,Uf[Nf++]=oy,oy=n,ay=e}function PD(n,e,t){zs[Gs++]=Ia,zs[Gs++]=Da,zs[Gs++]=_c,_c=n;var r=Ia;n=Da;var i=32-Ao(r)-1;r&=~(1<<i),t+=1;var s=32-Ao(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ia=1<<32-Ao(e)+i|t<<i|r,Da=s+n}else Ia=1<<s|t<<i|r,Da=n}function Lb(n){n.return!==null&&(Wu(n,1),PD(n,1,0))}function Fb(n){for(;n===oy;)oy=Uf[--Nf],Uf[Nf]=null,ay=Uf[--Nf],Uf[Nf]=null;for(;n===_c;)_c=zs[--Gs],zs[Gs]=null,Da=zs[--Gs],zs[Gs]=null,Ia=zs[--Gs],zs[Gs]=null}var ms=null,ps=null,Un=!1,wo=null;function BD(n,e){var t=js(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function ZC(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ms=n,ps=Hl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ms=n,ps=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=_c!==null?{id:Ia,overflow:Da}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=js(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ms=n,ps=null,!0):!1;default:return!1}}function oS(n){return(n.mode&1)!==0&&(n.flags&128)===0}function aS(n){if(Un){var e=ps;if(e){var t=e;if(!ZC(n,e)){if(oS(n))throw Error(Ze(418));e=Hl(t.nextSibling);var r=ms;e&&ZC(n,e)?BD(r,t):(n.flags=n.flags&-4097|2,Un=!1,ms=n)}}else{if(oS(n))throw Error(Ze(418));n.flags=n.flags&-4097|2,Un=!1,ms=n}}}function qC(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ms=n}function c0(n){if(n!==ms)return!1;if(!Un)return qC(n),Un=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!nS(n.type,n.memoizedProps)),e&&(e=ps)){if(oS(n))throw ID(),Error(Ze(418));for(;e;)BD(n,e),e=Hl(e.nextSibling)}if(qC(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ze(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ps=Hl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ps=null}}else ps=ms?Hl(n.stateNode.nextSibling):null;return!0}function ID(){for(var n=ps;n;)n=Hl(n.nextSibling)}function pd(){ps=ms=null,Un=!1}function kb(n){wo===null?wo=[n]:wo.push(n)}var T5=Xa.ReactCurrentBatchConfig;function yo(n,e){if(n&&n.defaultProps){e=qn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var ly=cu(null),uy=null,zf=null,Ob=null;function Ub(){Ob=zf=uy=null}function Nb(n){var e=ly.current;Ln(ly),n._currentValue=e}function lS(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function td(n,e){uy=n,Ob=zf=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Wi=!0),n.firstContext=null)}function Zs(n){var e=n._currentValue;if(Ob!==n)if(n={context:n,memoizedValue:e,next:null},zf===null){if(uy===null)throw Error(Ze(308));zf=n,uy.dependencies={lanes:0,firstContext:n}}else zf=zf.next=n;return e}var Zu=null;function zb(n){Zu===null?Zu=[n]:Zu.push(n)}function DD(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,zb(e)):(t.next=i.next,i.next=t),e.interleaved=t,Ga(n,r)}function Ga(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var El=!1;function Gb(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LD(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ka(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Vl(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,dn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ga(n,t)}return i=r.interleaved,i===null?(e.next=e,zb(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ga(n,t)}function Ev(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Eb(n,t)}}function eT(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function cy(n,e,t,r){var i=n.updateQueue;El=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,m=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,g=a;switch(h=e,m=t,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(m,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,h=typeof y=="function"?y.call(m,f,h):y,h==null)break e;f=qn({},f,h);break e;case 2:El=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else m={eventTime:m,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=f):c=c.next=m,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);wc|=o,n.lanes=o,n.memoizedState=f}}function tT(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Ze(191,i));i.call(r)}}}var FD=new DI.Component().refs;function uS(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:qn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Yy={isMounted:function(n){return(n=n._reactInternals)?Pc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Ii(),i=jl(n),s=ka(r,i);s.payload=e,t!=null&&(s.callback=t),e=Vl(n,s,i),e!==null&&(Mo(e,n,i,r),Ev(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Ii(),i=jl(n),s=ka(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Vl(n,s,i),e!==null&&(Mo(e,n,i,r),Ev(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ii(),r=jl(n),i=ka(t,r);i.tag=2,e!=null&&(i.callback=e),e=Vl(n,i,r),e!==null&&(Mo(e,n,r,t),Ev(e,n,r))}};function nT(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!nm(t,r)||!nm(i,s):!0}function kD(n,e,t){var r=!1,i=eu,s=e.contextType;return typeof s=="object"&&s!==null?s=Zs(s):(i=Xi(e)?yc:gi.current,r=e.contextTypes,s=(r=r!=null)?hd(n,i):eu),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yy,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function rT(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Yy.enqueueReplaceState(e,e.state,null)}function cS(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=FD,Gb(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Zs(s):(s=Xi(e)?yc:gi.current,i.context=hd(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(uS(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Yy.enqueueReplaceState(i,i.state,null),cy(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Dh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ze(309));var r=t.stateNode}if(!r)throw Error(Ze(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===FD&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ze(284));if(!t._owner)throw Error(Ze(290,n))}return n}function f0(n,e){throw n=Object.prototype.toString.call(e),Error(Ze(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function iT(n){var e=n._init;return e(n._payload)}function OD(n){function e(x,_){if(n){var w=x.deletions;w===null?(x.deletions=[_],x.flags|=16):w.push(_)}}function t(x,_){if(!n)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function i(x,_){return x=$l(x,_),x.index=0,x.sibling=null,x}function s(x,_,w){return x.index=w,n?(w=x.alternate,w!==null?(w=w.index,w<_?(x.flags|=2,_):w):(x.flags|=2,_)):(x.flags|=1048576,_)}function o(x){return n&&x.alternate===null&&(x.flags|=2),x}function a(x,_,w,A){return _===null||_.tag!==6?(_=q_(w,x.mode,A),_.return=x,_):(_=i(_,w),_.return=x,_)}function l(x,_,w,A){var R=w.type;return R===If?c(x,_,w.props.children,A,w.key):_!==null&&(_.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ml&&iT(R)===_.type)?(A=i(_,w.props),A.ref=Dh(x,_,w),A.return=x,A):(A=Iv(w.type,w.key,w.props,null,x.mode,A),A.ref=Dh(x,_,w),A.return=x,A)}function u(x,_,w,A){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=ex(w,x.mode,A),_.return=x,_):(_=i(_,w.children||[]),_.return=x,_)}function c(x,_,w,A,R){return _===null||_.tag!==7?(_=lc(w,x.mode,A,R),_.return=x,_):(_=i(_,w),_.return=x,_)}function f(x,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=q_(""+_,x.mode,w),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case e0:return w=Iv(_.type,_.key,_.props,null,x.mode,w),w.ref=Dh(x,null,_),w.return=x,w;case Bf:return _=ex(_,x.mode,w),_.return=x,_;case Ml:var A=_._init;return f(x,A(_._payload),w)}if(vp(_)||Th(_))return _=lc(_,x.mode,w,null),_.return=x,_;f0(x,_)}return null}function h(x,_,w,A){var R=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return R!==null?null:a(x,_,""+w,A);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case e0:return w.key===R?l(x,_,w,A):null;case Bf:return w.key===R?u(x,_,w,A):null;case Ml:return R=w._init,h(x,_,R(w._payload),A)}if(vp(w)||Th(w))return R!==null?null:c(x,_,w,A,null);f0(x,w)}return null}function m(x,_,w,A,R){if(typeof A=="string"&&A!==""||typeof A=="number")return x=x.get(w)||null,a(_,x,""+A,R);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case e0:return x=x.get(A.key===null?w:A.key)||null,l(_,x,A,R);case Bf:return x=x.get(A.key===null?w:A.key)||null,u(_,x,A,R);case Ml:var M=A._init;return m(x,_,w,M(A._payload),R)}if(vp(A)||Th(A))return x=x.get(w)||null,c(_,x,A,R,null);f0(_,A)}return null}function y(x,_,w,A){for(var R=null,M=null,P=_,b=_=0,C=null;P!==null&&b<w.length;b++){P.index>b?(C=P,P=null):C=P.sibling;var T=h(x,P,w[b],A);if(T===null){P===null&&(P=C);break}n&&P&&T.alternate===null&&e(x,P),_=s(T,_,b),M===null?R=T:M.sibling=T,M=T,P=C}if(b===w.length)return t(x,P),Un&&Wu(x,b),R;if(P===null){for(;b<w.length;b++)P=f(x,w[b],A),P!==null&&(_=s(P,_,b),M===null?R=P:M.sibling=P,M=P);return Un&&Wu(x,b),R}for(P=r(x,P);b<w.length;b++)C=m(P,x,b,w[b],A),C!==null&&(n&&C.alternate!==null&&P.delete(C.key===null?b:C.key),_=s(C,_,b),M===null?R=C:M.sibling=C,M=C);return n&&P.forEach(function(I){return e(x,I)}),Un&&Wu(x,b),R}function g(x,_,w,A){var R=Th(w);if(typeof R!="function")throw Error(Ze(150));if(w=R.call(w),w==null)throw Error(Ze(151));for(var M=R=null,P=_,b=_=0,C=null,T=w.next();P!==null&&!T.done;b++,T=w.next()){P.index>b?(C=P,P=null):C=P.sibling;var I=h(x,P,T.value,A);if(I===null){P===null&&(P=C);break}n&&P&&I.alternate===null&&e(x,P),_=s(I,_,b),M===null?R=I:M.sibling=I,M=I,P=C}if(T.done)return t(x,P),Un&&Wu(x,b),R;if(P===null){for(;!T.done;b++,T=w.next())T=f(x,T.value,A),T!==null&&(_=s(T,_,b),M===null?R=T:M.sibling=T,M=T);return Un&&Wu(x,b),R}for(P=r(x,P);!T.done;b++,T=w.next())T=m(P,x,b,T.value,A),T!==null&&(n&&T.alternate!==null&&P.delete(T.key===null?b:T.key),_=s(T,_,b),M===null?R=T:M.sibling=T,M=T);return n&&P.forEach(function(D){return e(x,D)}),Un&&Wu(x,b),R}function v(x,_,w,A){if(typeof w=="object"&&w!==null&&w.type===If&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case e0:e:{for(var R=w.key,M=_;M!==null;){if(M.key===R){if(R=w.type,R===If){if(M.tag===7){t(x,M.sibling),_=i(M,w.props.children),_.return=x,x=_;break e}}else if(M.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ml&&iT(R)===M.type){t(x,M.sibling),_=i(M,w.props),_.ref=Dh(x,M,w),_.return=x,x=_;break e}t(x,M);break}else e(x,M);M=M.sibling}w.type===If?(_=lc(w.props.children,x.mode,A,w.key),_.return=x,x=_):(A=Iv(w.type,w.key,w.props,null,x.mode,A),A.ref=Dh(x,_,w),A.return=x,x=A)}return o(x);case Bf:e:{for(M=w.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){t(x,_.sibling),_=i(_,w.children||[]),_.return=x,x=_;break e}else{t(x,_);break}else e(x,_);_=_.sibling}_=ex(w,x.mode,A),_.return=x,x=_}return o(x);case Ml:return M=w._init,v(x,_,M(w._payload),A)}if(vp(w))return y(x,_,w,A);if(Th(w))return g(x,_,w,A);f0(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(t(x,_.sibling),_=i(_,w),_.return=x,x=_):(t(x,_),_=q_(w,x.mode,A),_.return=x,x=_),o(x)):t(x,_)}return v}var md=OD(!0),UD=OD(!1),Om={},qo=cu(Om),om=cu(Om),am=cu(Om);function qu(n){if(n===Om)throw Error(Ze(174));return n}function Hb(n,e){switch(Pn(am,e),Pn(om,n),Pn(qo,Om),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hw(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Hw(e,n)}Ln(qo),Pn(qo,e)}function gd(){Ln(qo),Ln(om),Ln(am)}function ND(n){qu(am.current);var e=qu(qo.current),t=Hw(e,n.type);e!==t&&(Pn(om,n),Pn(qo,t))}function Vb(n){om.current===n&&(Ln(qo),Ln(om))}var $n=cu(0);function fy(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var J_=[];function Wb(){for(var n=0;n<J_.length;n++)J_[n]._workInProgressVersionPrimary=null;J_.length=0}var Cv=Xa.ReactCurrentDispatcher,X_=Xa.ReactCurrentBatchConfig,xc=0,Qn=null,Cr=null,Nr=null,dy=!1,Rp=!1,lm=0,R5=0;function oi(){throw Error(Ze(321))}function jb(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!To(n[t],e[t]))return!1;return!0}function $b(n,e,t,r,i,s){if(xc=s,Qn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cv.current=n===null||n.memoizedState===null?D5:L5,n=t(r,i),Rp){s=0;do{if(Rp=!1,lm=0,25<=s)throw Error(Ze(301));s+=1,Nr=Cr=null,e.updateQueue=null,Cv.current=F5,n=t(r,i)}while(Rp)}if(Cv.current=hy,e=Cr!==null&&Cr.next!==null,xc=0,Nr=Cr=Qn=null,dy=!1,e)throw Error(Ze(300));return n}function Jb(){var n=lm!==0;return lm=0,n}function Xo(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nr===null?Qn.memoizedState=Nr=n:Nr=Nr.next=n,Nr}function qs(){if(Cr===null){var n=Qn.alternate;n=n!==null?n.memoizedState:null}else n=Cr.next;var e=Nr===null?Qn.memoizedState:Nr.next;if(e!==null)Nr=e,Cr=n;else{if(n===null)throw Error(Ze(310));Cr=n,n={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},Nr===null?Qn.memoizedState=Nr=n:Nr=Nr.next=n}return Nr}function um(n,e){return typeof e=="function"?e(n):e}function K_(n){var e=qs(),t=e.queue;if(t===null)throw Error(Ze(311));t.lastRenderedReducer=n;var r=Cr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((xc&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Qn.lanes|=c,wc|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,To(r,e.memoizedState)||(Wi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Qn.lanes|=s,wc|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Y_(n){var e=qs(),t=e.queue;if(t===null)throw Error(Ze(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);To(s,e.memoizedState)||(Wi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function zD(){}function GD(n,e){var t=Qn,r=qs(),i=e(),s=!To(r.memoizedState,i);if(s&&(r.memoizedState=i,Wi=!0),r=r.queue,Xb(WD.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Nr!==null&&Nr.memoizedState.tag&1){if(t.flags|=2048,cm(9,VD.bind(null,t,r,i,e),void 0,null),Hr===null)throw Error(Ze(349));xc&30||HD(t,e,i)}return i}function HD(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Qn.updateQueue,e===null?(e={lastEffect:null,stores:null},Qn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function VD(n,e,t,r){e.value=t,e.getSnapshot=r,jD(e)&&$D(n)}function WD(n,e,t){return t(function(){jD(e)&&$D(n)})}function jD(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!To(n,t)}catch{return!0}}function $D(n){var e=Ga(n,1);e!==null&&Mo(e,n,1,-1)}function sT(n){var e=Xo();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:um,lastRenderedState:n},e.queue=n,n=n.dispatch=I5.bind(null,Qn,n),[e.memoizedState,n]}function cm(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Qn.updateQueue,e===null?(e={lastEffect:null,stores:null},Qn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function JD(){return qs().memoizedState}function Tv(n,e,t,r){var i=Xo();Qn.flags|=n,i.memoizedState=cm(1|e,t,void 0,r===void 0?null:r)}function Qy(n,e,t,r){var i=qs();r=r===void 0?null:r;var s=void 0;if(Cr!==null){var o=Cr.memoizedState;if(s=o.destroy,r!==null&&jb(r,o.deps)){i.memoizedState=cm(e,t,s,r);return}}Qn.flags|=n,i.memoizedState=cm(1|e,t,s,r)}function oT(n,e){return Tv(8390656,8,n,e)}function Xb(n,e){return Qy(2048,8,n,e)}function XD(n,e){return Qy(4,2,n,e)}function KD(n,e){return Qy(4,4,n,e)}function YD(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function QD(n,e,t){return t=t!=null?t.concat([n]):null,Qy(4,4,YD.bind(null,e,n),t)}function Kb(){}function ZD(n,e){var t=qs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&jb(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function qD(n,e){var t=qs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&jb(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function eL(n,e,t){return xc&21?(To(t,e)||(t=rD(),Qn.lanes|=t,wc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Wi=!0),n.memoizedState=t)}function P5(n,e){var t=_n;_n=t!==0&&4>t?t:4,n(!0);var r=X_.transition;X_.transition={};try{n(!1),e()}finally{_n=t,X_.transition=r}}function tL(){return qs().memoizedState}function B5(n,e,t){var r=jl(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},nL(n))rL(e,t);else if(t=DD(n,e,t,r),t!==null){var i=Ii();Mo(t,n,r,i),iL(t,e,r)}}function I5(n,e,t){var r=jl(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(nL(n))rL(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,To(a,o)){var l=e.interleaved;l===null?(i.next=i,zb(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=DD(n,e,i,r),t!==null&&(i=Ii(),Mo(t,n,r,i),iL(t,e,r))}}function nL(n){var e=n.alternate;return n===Qn||e!==null&&e===Qn}function rL(n,e){Rp=dy=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function iL(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Eb(n,t)}}var hy={readContext:Zs,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useInsertionEffect:oi,useLayoutEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useMutableSource:oi,useSyncExternalStore:oi,useId:oi,unstable_isNewReconciler:!1},D5={readContext:Zs,useCallback:function(n,e){return Xo().memoizedState=[n,e===void 0?null:e],n},useContext:Zs,useEffect:oT,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Tv(4194308,4,YD.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Tv(4194308,4,n,e)},useInsertionEffect:function(n,e){return Tv(4,2,n,e)},useMemo:function(n,e){var t=Xo();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Xo();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=B5.bind(null,Qn,n),[r.memoizedState,n]},useRef:function(n){var e=Xo();return n={current:n},e.memoizedState=n},useState:sT,useDebugValue:Kb,useDeferredValue:function(n){return Xo().memoizedState=n},useTransition:function(){var n=sT(!1),e=n[0];return n=P5.bind(null,n[1]),Xo().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Qn,i=Xo();if(Un){if(t===void 0)throw Error(Ze(407));t=t()}else{if(t=e(),Hr===null)throw Error(Ze(349));xc&30||HD(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,oT(WD.bind(null,r,s,n),[n]),r.flags|=2048,cm(9,VD.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Xo(),e=Hr.identifierPrefix;if(Un){var t=Da,r=Ia;t=(r&~(1<<32-Ao(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=lm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=R5++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},L5={readContext:Zs,useCallback:ZD,useContext:Zs,useEffect:Xb,useImperativeHandle:QD,useInsertionEffect:XD,useLayoutEffect:KD,useMemo:qD,useReducer:K_,useRef:JD,useState:function(){return K_(um)},useDebugValue:Kb,useDeferredValue:function(n){var e=qs();return eL(e,Cr.memoizedState,n)},useTransition:function(){var n=K_(um)[0],e=qs().memoizedState;return[n,e]},useMutableSource:zD,useSyncExternalStore:GD,useId:tL,unstable_isNewReconciler:!1},F5={readContext:Zs,useCallback:ZD,useContext:Zs,useEffect:Xb,useImperativeHandle:QD,useInsertionEffect:XD,useLayoutEffect:KD,useMemo:qD,useReducer:Y_,useRef:JD,useState:function(){return Y_(um)},useDebugValue:Kb,useDeferredValue:function(n){var e=qs();return Cr===null?e.memoizedState=n:eL(e,Cr.memoizedState,n)},useTransition:function(){var n=Y_(um)[0],e=qs().memoizedState;return[n,e]},useMutableSource:zD,useSyncExternalStore:GD,useId:tL,unstable_isNewReconciler:!1};function vd(n,e){try{var t="",r=e;do t+=uz(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Q_(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function fS(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var k5=typeof WeakMap=="function"?WeakMap:Map;function sL(n,e,t){t=ka(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){my||(my=!0,wS=r),fS(n,e)},t}function oL(n,e,t){t=ka(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){fS(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){fS(n,e),typeof r!="function"&&(Wl===null?Wl=new Set([this]):Wl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function aT(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new k5;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Y5.bind(null,n,e,t),e.then(n,n))}function lT(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function uT(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ka(-1,1),e.tag=2,Vl(t,e,1))),t.lanes|=1),n)}var O5=Xa.ReactCurrentOwner,Wi=!1;function Ci(n,e,t,r){e.child=n===null?UD(e,null,t,r):md(e,n.child,t,r)}function cT(n,e,t,r,i){t=t.render;var s=e.ref;return td(e,i),r=$b(n,e,t,r,s,i),t=Jb(),n!==null&&!Wi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ha(n,e,i)):(Un&&t&&Lb(e),e.flags|=1,Ci(n,e,r,i),e.child)}function fT(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!rA(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,aL(n,e,s,r,i)):(n=Iv(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:nm,t(o,r)&&n.ref===e.ref)return Ha(n,e,i)}return e.flags|=1,n=$l(s,r),n.ref=e.ref,n.return=e,e.child=n}function aL(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(nm(s,r)&&n.ref===e.ref)if(Wi=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Wi=!0);else return e.lanes=n.lanes,Ha(n,e,i)}return dS(n,e,t,r,i)}function lL(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pn(Hf,fs),fs|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Pn(Hf,fs),fs|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Pn(Hf,fs),fs|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Pn(Hf,fs),fs|=r;return Ci(n,e,i,t),e.child}function uL(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function dS(n,e,t,r,i){var s=Xi(t)?yc:gi.current;return s=hd(e,s),td(e,i),t=$b(n,e,t,r,s,i),r=Jb(),n!==null&&!Wi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ha(n,e,i)):(Un&&r&&Lb(e),e.flags|=1,Ci(n,e,t,i),e.child)}function dT(n,e,t,r,i){if(Xi(t)){var s=!0;sy(e)}else s=!1;if(td(e,i),e.stateNode===null)Rv(n,e),kD(e,t,r),cS(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Zs(u):(u=Xi(t)?yc:gi.current,u=hd(e,u));var c=t.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&rT(e,o,r,u),El=!1;var h=e.memoizedState;o.state=h,cy(e,r,o,i),l=e.memoizedState,a!==r||h!==l||Ji.current||El?(typeof c=="function"&&(uS(e,t,c,r),l=e.memoizedState),(a=El||nT(e,t,a,r,h,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,LD(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:yo(e.type,a),o.props=u,f=e.pendingProps,h=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Zs(l):(l=Xi(t)?yc:gi.current,l=hd(e,l));var m=t.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&rT(e,o,r,l),El=!1,h=e.memoizedState,o.state=h,cy(e,r,o,i);var y=e.memoizedState;a!==f||h!==y||Ji.current||El?(typeof m=="function"&&(uS(e,t,m,r),y=e.memoizedState),(u=El||nT(e,t,u,r,h,y,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),r=!1)}return hS(n,e,t,r,s,i)}function hS(n,e,t,r,i,s){uL(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&QC(e,t,!1),Ha(n,e,s);r=e.stateNode,O5.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=md(e,n.child,null,s),e.child=md(e,null,a,s)):Ci(n,e,a,s),e.memoizedState=r.state,i&&QC(e,t,!0),e.child}function cL(n){var e=n.stateNode;e.pendingContext?YC(n,e.pendingContext,e.pendingContext!==e.context):e.context&&YC(n,e.context,!1),Hb(n,e.containerInfo)}function hT(n,e,t,r,i){return pd(),kb(i),e.flags|=256,Ci(n,e,t,r),e.child}var pS={dehydrated:null,treeContext:null,retryLane:0};function mS(n){return{baseLanes:n,cachePool:null,transitions:null}}function fL(n,e,t){var r=e.pendingProps,i=$n.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Pn($n,i&1),n===null)return aS(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=e1(o,r,0,null),n=lc(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=mS(t),e.memoizedState=pS,n):Yb(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return U5(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=$l(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=$l(a,s):(s=lc(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?mS(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=pS,r}return s=n.child,n=s.sibling,r=$l(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Yb(n,e){return e=e1({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function d0(n,e,t,r){return r!==null&&kb(r),md(e,n.child,null,t),n=Yb(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function U5(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=Q_(Error(Ze(422))),d0(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=e1({mode:"visible",children:r.children},i,0,null),s=lc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&md(e,n.child,null,o),e.child.memoizedState=mS(o),e.memoizedState=pS,s);if(!(e.mode&1))return d0(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ze(419)),r=Q_(s,r,void 0),d0(n,e,o,r)}if(a=(o&n.childLanes)!==0,Wi||a){if(r=Hr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ga(n,i),Mo(r,n,i,-1))}return nA(),r=Q_(Error(Ze(421))),d0(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=Q5.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,ps=Hl(i.nextSibling),ms=e,Un=!0,wo=null,n!==null&&(zs[Gs++]=Ia,zs[Gs++]=Da,zs[Gs++]=_c,Ia=n.id,Da=n.overflow,_c=e),e=Yb(e,r.children),e.flags|=4096,e)}function pT(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),lS(n.return,e,t)}function Z_(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function dL(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ci(n,e,r.children,t),r=$n.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&pT(n,t,e);else if(n.tag===19)pT(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Pn($n,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&fy(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Z_(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&fy(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Z_(e,!0,t,null,s);break;case"together":Z_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rv(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ha(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),wc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ze(153));if(e.child!==null){for(n=e.child,t=$l(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=$l(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function N5(n,e,t){switch(e.tag){case 3:cL(e),pd();break;case 5:ND(e);break;case 1:Xi(e.type)&&sy(e);break;case 4:Hb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Pn(ly,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pn($n,$n.current&1),e.flags|=128,null):t&e.child.childLanes?fL(n,e,t):(Pn($n,$n.current&1),n=Ha(n,e,t),n!==null?n.sibling:null);Pn($n,$n.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return dL(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pn($n,$n.current),r)break;return null;case 22:case 23:return e.lanes=0,lL(n,e,t)}return Ha(n,e,t)}var hL,gS,pL,mL;hL=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};gS=function(){};pL=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,qu(qo.current);var s=null;switch(t){case"input":i=Uw(n,i),r=Uw(n,r),s=[];break;case"select":i=qn({},i,{value:void 0}),r=qn({},r,{value:void 0}),s=[];break;case"textarea":i=Gw(n,i),r=Gw(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=ry)}Vw(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Kp.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Kp.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&In("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};mL=function(n,e,t,r){t!==r&&(e.flags|=4)};function Lh(n,e){if(!Un)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function ai(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function z5(n,e,t){var r=e.pendingProps;switch(Fb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ai(e),null;case 1:return Xi(e.type)&&iy(),ai(e),null;case 3:return r=e.stateNode,gd(),Ln(Ji),Ln(gi),Wb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(c0(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wo!==null&&(AS(wo),wo=null))),gS(n,e),ai(e),null;case 5:Vb(e);var i=qu(am.current);if(t=e.type,n!==null&&e.stateNode!=null)pL(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ze(166));return ai(e),null}if(n=qu(qo.current),c0(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Ko]=e,r[sm]=s,n=(e.mode&1)!==0,t){case"dialog":In("cancel",r),In("close",r);break;case"iframe":case"object":case"embed":In("load",r);break;case"video":case"audio":for(i=0;i<_p.length;i++)In(_p[i],r);break;case"source":In("error",r);break;case"img":case"image":case"link":In("error",r),In("load",r);break;case"details":In("toggle",r);break;case"input":bC(r,s),In("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},In("invalid",r);break;case"textarea":MC(r,s),In("invalid",r)}Vw(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&u0(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&u0(r.textContent,a,n),i=["children",""+a]):Kp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&In("scroll",r)}switch(t){case"input":t0(r),AC(r,s,!0);break;case"textarea":t0(r),EC(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ry)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=HI(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Ko]=e,n[sm]=r,hL(n,e,!1,!1),e.stateNode=n;e:{switch(o=Ww(t,r),t){case"dialog":In("cancel",n),In("close",n),i=r;break;case"iframe":case"object":case"embed":In("load",n),i=r;break;case"video":case"audio":for(i=0;i<_p.length;i++)In(_p[i],n);i=r;break;case"source":In("error",n),i=r;break;case"img":case"image":case"link":In("error",n),In("load",n),i=r;break;case"details":In("toggle",n),i=r;break;case"input":bC(n,r),i=Uw(n,r),In("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=qn({},r,{value:void 0}),In("invalid",n);break;case"textarea":MC(n,r),i=Gw(n,r),In("invalid",n);break;default:i=r}Vw(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?jI(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&VI(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Yp(n,l):typeof l=="number"&&Yp(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Kp.hasOwnProperty(s)?l!=null&&s==="onScroll"&&In("scroll",n):l!=null&&xb(n,s,l,o))}switch(t){case"input":t0(n),AC(n,r,!1);break;case"textarea":t0(n),EC(n);break;case"option":r.value!=null&&n.setAttribute("value",""+ql(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Qf(n,!!r.multiple,s,!1):r.defaultValue!=null&&Qf(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=ry)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ai(e),null;case 6:if(n&&e.stateNode!=null)mL(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ze(166));if(t=qu(am.current),qu(qo.current),c0(e)){if(r=e.stateNode,t=e.memoizedProps,r[Ko]=e,(s=r.nodeValue!==t)&&(n=ms,n!==null))switch(n.tag){case 3:u0(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&u0(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Ko]=e,e.stateNode=r}return ai(e),null;case 13:if(Ln($n),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Un&&ps!==null&&e.mode&1&&!(e.flags&128))ID(),pd(),e.flags|=98560,s=!1;else if(s=c0(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Ze(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ze(317));s[Ko]=e}else pd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ai(e),s=!1}else wo!==null&&(AS(wo),wo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||$n.current&1?Rr===0&&(Rr=3):nA())),e.updateQueue!==null&&(e.flags|=4),ai(e),null);case 4:return gd(),gS(n,e),n===null&&rm(e.stateNode.containerInfo),ai(e),null;case 10:return Nb(e.type._context),ai(e),null;case 17:return Xi(e.type)&&iy(),ai(e),null;case 19:if(Ln($n),s=e.memoizedState,s===null)return ai(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Lh(s,!1);else{if(Rr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=fy(n),o!==null){for(e.flags|=128,Lh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Pn($n,$n.current&1|2),e.child}n=n.sibling}s.tail!==null&&ur()>yd&&(e.flags|=128,r=!0,Lh(s,!1),e.lanes=4194304)}else{if(!r)if(n=fy(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Lh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Un)return ai(e),null}else 2*ur()-s.renderingStartTime>yd&&t!==1073741824&&(e.flags|=128,r=!0,Lh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ur(),e.sibling=null,t=$n.current,Pn($n,r?t&1|2:t&1),e):(ai(e),null);case 22:case 23:return tA(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fs&1073741824&&(ai(e),e.subtreeFlags&6&&(e.flags|=8192)):ai(e),null;case 24:return null;case 25:return null}throw Error(Ze(156,e.tag))}function G5(n,e){switch(Fb(e),e.tag){case 1:return Xi(e.type)&&iy(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return gd(),Ln(Ji),Ln(gi),Wb(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Vb(e),null;case 13:if(Ln($n),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ze(340));pd()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ln($n),null;case 4:return gd(),null;case 10:return Nb(e.type._context),null;case 22:case 23:return tA(),null;case 24:return null;default:return null}}var h0=!1,fi=!1,H5=typeof WeakSet=="function"?WeakSet:Set,ht=null;function Gf(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){nr(n,e,r)}else t.current=null}function vS(n,e,t){try{t()}catch(r){nr(n,e,r)}}var mT=!1;function V5(n,e){if(eS=ey,n=_D(),Db(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=n,h=null;t:for(;;){for(var m;f!==t||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===n)break t;if(h===t&&++u===i&&(a=o),h===s&&++c===r&&(l=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(tS={focusedElem:n,selectionRange:t},ey=!1,ht=e;ht!==null;)if(e=ht,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ht=n;else for(;ht!==null;){e=ht;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,v=y.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?g:yo(e.type,g),v);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ze(163))}}catch(A){nr(e,e.return,A)}if(n=e.sibling,n!==null){n.return=e.return,ht=n;break}ht=e.return}return y=mT,mT=!1,y}function Pp(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&vS(e,t,s)}i=i.next}while(i!==r)}}function Zy(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function yS(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function gL(n){var e=n.alternate;e!==null&&(n.alternate=null,gL(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ko],delete e[sm],delete e[iS],delete e[M5],delete e[E5])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function vL(n){return n.tag===5||n.tag===3||n.tag===4}function gT(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||vL(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function _S(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=ry));else if(r!==4&&(n=n.child,n!==null))for(_S(n,e,t),n=n.sibling;n!==null;)_S(n,e,t),n=n.sibling}function xS(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(xS(n,e,t),n=n.sibling;n!==null;)xS(n,e,t),n=n.sibling}var Jr=null,_o=!1;function hl(n,e,t){for(t=t.child;t!==null;)yL(n,e,t),t=t.sibling}function yL(n,e,t){if(Zo&&typeof Zo.onCommitFiberUnmount=="function")try{Zo.onCommitFiberUnmount(Wy,t)}catch{}switch(t.tag){case 5:fi||Gf(t,e);case 6:var r=Jr,i=_o;Jr=null,hl(n,e,t),Jr=r,_o=i,Jr!==null&&(_o?(n=Jr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Jr.removeChild(t.stateNode));break;case 18:Jr!==null&&(_o?(n=Jr,t=t.stateNode,n.nodeType===8?j_(n.parentNode,t):n.nodeType===1&&j_(n,t),em(n)):j_(Jr,t.stateNode));break;case 4:r=Jr,i=_o,Jr=t.stateNode.containerInfo,_o=!0,hl(n,e,t),Jr=r,_o=i;break;case 0:case 11:case 14:case 15:if(!fi&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&vS(t,e,o),i=i.next}while(i!==r)}hl(n,e,t);break;case 1:if(!fi&&(Gf(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){nr(t,e,a)}hl(n,e,t);break;case 21:hl(n,e,t);break;case 22:t.mode&1?(fi=(r=fi)||t.memoizedState!==null,hl(n,e,t),fi=r):hl(n,e,t);break;default:hl(n,e,t)}}function vT(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new H5),e.forEach(function(r){var i=Z5.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function co(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Jr=a.stateNode,_o=!1;break e;case 3:Jr=a.stateNode.containerInfo,_o=!0;break e;case 4:Jr=a.stateNode.containerInfo,_o=!0;break e}a=a.return}if(Jr===null)throw Error(Ze(160));yL(s,o,i),Jr=null,_o=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){nr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_L(e,n),e=e.sibling}function _L(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(co(e,n),jo(n),r&4){try{Pp(3,n,n.return),Zy(3,n)}catch(g){nr(n,n.return,g)}try{Pp(5,n,n.return)}catch(g){nr(n,n.return,g)}}break;case 1:co(e,n),jo(n),r&512&&t!==null&&Gf(t,t.return);break;case 5:if(co(e,n),jo(n),r&512&&t!==null&&Gf(t,t.return),n.flags&32){var i=n.stateNode;try{Yp(i,"")}catch(g){nr(n,n.return,g)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&zI(i,s),Ww(a,o);var u=Ww(a,s);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?jI(i,f):c==="dangerouslySetInnerHTML"?VI(i,f):c==="children"?Yp(i,f):xb(i,c,f,u)}switch(a){case"input":Nw(i,s);break;case"textarea":GI(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Qf(i,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?Qf(i,!!s.multiple,s.defaultValue,!0):Qf(i,!!s.multiple,s.multiple?[]:"",!1))}i[sm]=s}catch(g){nr(n,n.return,g)}}break;case 6:if(co(e,n),jo(n),r&4){if(n.stateNode===null)throw Error(Ze(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(g){nr(n,n.return,g)}}break;case 3:if(co(e,n),jo(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{em(e.containerInfo)}catch(g){nr(n,n.return,g)}break;case 4:co(e,n),jo(n);break;case 13:co(e,n),jo(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(qb=ur())),r&4&&vT(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(fi=(u=fi)||c,co(e,n),fi=u):co(e,n),jo(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(ht=n,c=n.child;c!==null;){for(f=ht=c;ht!==null;){switch(h=ht,m=h.child,h.tag){case 0:case 11:case 14:case 15:Pp(4,h,h.return);break;case 1:Gf(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,t=h.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){nr(r,t,g)}}break;case 5:Gf(h,h.return);break;case 22:if(h.memoizedState!==null){_T(f);continue}}m!==null?(m.return=h,ht=m):_T(f)}c=c.sibling}e:for(c=null,f=n;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=WI("display",o))}catch(g){nr(n,n.return,g)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){nr(n,n.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:co(e,n),jo(n),r&4&&vT(n);break;case 21:break;default:co(e,n),jo(n)}}function jo(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(vL(t)){var r=t;break e}t=t.return}throw Error(Ze(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Yp(i,""),r.flags&=-33);var s=gT(n);xS(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=gT(n);_S(n,a,o);break;default:throw Error(Ze(161))}}catch(l){nr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function W5(n,e,t){ht=n,xL(n)}function xL(n,e,t){for(var r=(n.mode&1)!==0;ht!==null;){var i=ht,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||h0;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||fi;a=h0;var u=fi;if(h0=o,(fi=l)&&!u)for(ht=i;ht!==null;)o=ht,l=o.child,o.tag===22&&o.memoizedState!==null?xT(i):l!==null?(l.return=o,ht=l):xT(i);for(;s!==null;)ht=s,xL(s),s=s.sibling;ht=i,h0=a,fi=u}yT(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ht=s):yT(n)}}function yT(n){for(;ht!==null;){var e=ht;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fi||Zy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!fi)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:yo(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&tT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}tT(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&em(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ze(163))}fi||e.flags&512&&yS(e)}catch(h){nr(e,e.return,h)}}if(e===n){ht=null;break}if(t=e.sibling,t!==null){t.return=e.return,ht=t;break}ht=e.return}}function _T(n){for(;ht!==null;){var e=ht;if(e===n){ht=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ht=t;break}ht=e.return}}function xT(n){for(;ht!==null;){var e=ht;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Zy(4,e)}catch(l){nr(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){nr(e,i,l)}}var s=e.return;try{yS(e)}catch(l){nr(e,s,l)}break;case 5:var o=e.return;try{yS(e)}catch(l){nr(e,o,l)}}}catch(l){nr(e,e.return,l)}if(e===n){ht=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ht=a;break}ht=e.return}}var j5=Math.ceil,py=Xa.ReactCurrentDispatcher,Qb=Xa.ReactCurrentOwner,Qs=Xa.ReactCurrentBatchConfig,dn=0,Hr=null,xr=null,Zr=0,fs=0,Hf=cu(0),Rr=0,fm=null,wc=0,qy=0,Zb=0,Bp=null,Hi=null,qb=0,yd=1/0,Ma=null,my=!1,wS=null,Wl=null,p0=!1,Il=null,gy=0,Ip=0,SS=null,Pv=-1,Bv=0;function Ii(){return dn&6?ur():Pv!==-1?Pv:Pv=ur()}function jl(n){return n.mode&1?dn&2&&Zr!==0?Zr&-Zr:T5.transition!==null?(Bv===0&&(Bv=rD()),Bv):(n=_n,n!==0||(n=window.event,n=n===void 0?16:cD(n.type)),n):1}function Mo(n,e,t,r){if(50<Ip)throw Ip=0,SS=null,Error(Ze(185));Lm(n,t,r),(!(dn&2)||n!==Hr)&&(n===Hr&&(!(dn&2)&&(qy|=t),Rr===4&&Pl(n,Zr)),Ki(n,r),t===1&&dn===0&&!(e.mode&1)&&(yd=ur()+500,Ky&&fu()))}function Ki(n,e){var t=n.callbackNode;Tz(n,e);var r=qv(n,n===Hr?Zr:0);if(r===0)t!==null&&RC(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&RC(t),e===1)n.tag===0?C5(wT.bind(null,n)):RD(wT.bind(null,n)),b5(function(){!(dn&6)&&fu()}),t=null;else{switch(iD(r)){case 1:t=Mb;break;case 4:t=tD;break;case 16:t=Zv;break;case 536870912:t=nD;break;default:t=Zv}t=TL(t,wL.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function wL(n,e){if(Pv=-1,Bv=0,dn&6)throw Error(Ze(327));var t=n.callbackNode;if(nd()&&n.callbackNode!==t)return null;var r=qv(n,n===Hr?Zr:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=vy(n,r);else{e=r;var i=dn;dn|=2;var s=bL();(Hr!==n||Zr!==e)&&(Ma=null,yd=ur()+500,ac(n,e));do try{X5();break}catch(a){SL(n,a)}while(1);Ub(),py.current=s,dn=i,xr!==null?e=0:(Hr=null,Zr=0,e=Rr)}if(e!==0){if(e===2&&(i=Kw(n),i!==0&&(r=i,e=bS(n,i))),e===1)throw t=fm,ac(n,0),Pl(n,r),Ki(n,ur()),t;if(e===6)Pl(n,r);else{if(i=n.current.alternate,!(r&30)&&!$5(i)&&(e=vy(n,r),e===2&&(s=Kw(n),s!==0&&(r=s,e=bS(n,s))),e===1))throw t=fm,ac(n,0),Pl(n,r),Ki(n,ur()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Ze(345));case 2:ju(n,Hi,Ma);break;case 3:if(Pl(n,r),(r&130023424)===r&&(e=qb+500-ur(),10<e)){if(qv(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Ii(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=rS(ju.bind(null,n,Hi,Ma),e);break}ju(n,Hi,Ma);break;case 4:if(Pl(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Ao(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ur()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*j5(r/1960))-r,10<r){n.timeoutHandle=rS(ju.bind(null,n,Hi,Ma),r);break}ju(n,Hi,Ma);break;case 5:ju(n,Hi,Ma);break;default:throw Error(Ze(329))}}}return Ki(n,ur()),n.callbackNode===t?wL.bind(null,n):null}function bS(n,e){var t=Bp;return n.current.memoizedState.isDehydrated&&(ac(n,e).flags|=256),n=vy(n,e),n!==2&&(e=Hi,Hi=t,e!==null&&AS(e)),n}function AS(n){Hi===null?Hi=n:Hi.push.apply(Hi,n)}function $5(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!To(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pl(n,e){for(e&=~Zb,e&=~qy,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ao(e),r=1<<t;n[t]=-1,e&=~r}}function wT(n){if(dn&6)throw Error(Ze(327));nd();var e=qv(n,0);if(!(e&1))return Ki(n,ur()),null;var t=vy(n,e);if(n.tag!==0&&t===2){var r=Kw(n);r!==0&&(e=r,t=bS(n,r))}if(t===1)throw t=fm,ac(n,0),Pl(n,e),Ki(n,ur()),t;if(t===6)throw Error(Ze(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ju(n,Hi,Ma),Ki(n,ur()),null}function eA(n,e){var t=dn;dn|=1;try{return n(e)}finally{dn=t,dn===0&&(yd=ur()+500,Ky&&fu())}}function Sc(n){Il!==null&&Il.tag===0&&!(dn&6)&&nd();var e=dn;dn|=1;var t=Qs.transition,r=_n;try{if(Qs.transition=null,_n=1,n)return n()}finally{_n=r,Qs.transition=t,dn=e,!(dn&6)&&fu()}}function tA(){fs=Hf.current,Ln(Hf)}function ac(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,S5(t)),xr!==null)for(t=xr.return;t!==null;){var r=t;switch(Fb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&iy();break;case 3:gd(),Ln(Ji),Ln(gi),Wb();break;case 5:Vb(r);break;case 4:gd();break;case 13:Ln($n);break;case 19:Ln($n);break;case 10:Nb(r.type._context);break;case 22:case 23:tA()}t=t.return}if(Hr=n,xr=n=$l(n.current,null),Zr=fs=e,Rr=0,fm=null,Zb=qy=wc=0,Hi=Bp=null,Zu!==null){for(e=0;e<Zu.length;e++)if(t=Zu[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Zu=null}return n}function SL(n,e){do{var t=xr;try{if(Ub(),Cv.current=hy,dy){for(var r=Qn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}dy=!1}if(xc=0,Nr=Cr=Qn=null,Rp=!1,lm=0,Qb.current=null,t===null||t.return===null){Rr=1,fm=e,xr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Zr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=lT(o);if(m!==null){m.flags&=-257,uT(m,o,a,s,e),m.mode&1&&aT(s,u,e),e=m,l=u;var y=e.updateQueue;if(y===null){var g=new Set;g.add(l),e.updateQueue=g}else y.add(l);break e}else{if(!(e&1)){aT(s,u,e),nA();break e}l=Error(Ze(426))}}else if(Un&&a.mode&1){var v=lT(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),uT(v,o,a,s,e),kb(vd(l,a));break e}}s=l=vd(l,a),Rr!==4&&(Rr=2),Bp===null?Bp=[s]:Bp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=sL(s,l,e);eT(s,x);break e;case 1:a=l;var _=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Wl===null||!Wl.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=oL(s,a,e);eT(s,A);break e}}s=s.return}while(s!==null)}ML(t)}catch(R){e=R,xr===t&&t!==null&&(xr=t=t.return);continue}break}while(1)}function bL(){var n=py.current;return py.current=hy,n===null?hy:n}function nA(){(Rr===0||Rr===3||Rr===2)&&(Rr=4),Hr===null||!(wc&268435455)&&!(qy&268435455)||Pl(Hr,Zr)}function vy(n,e){var t=dn;dn|=2;var r=bL();(Hr!==n||Zr!==e)&&(Ma=null,ac(n,e));do try{J5();break}catch(i){SL(n,i)}while(1);if(Ub(),dn=t,py.current=r,xr!==null)throw Error(Ze(261));return Hr=null,Zr=0,Rr}function J5(){for(;xr!==null;)AL(xr)}function X5(){for(;xr!==null&&!_z();)AL(xr)}function AL(n){var e=CL(n.alternate,n,fs);n.memoizedProps=n.pendingProps,e===null?ML(n):xr=e,Qb.current=null}function ML(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=G5(t,e),t!==null){t.flags&=32767,xr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Rr=6,xr=null;return}}else if(t=z5(t,e,fs),t!==null){xr=t;return}if(e=e.sibling,e!==null){xr=e;return}xr=e=n}while(e!==null);Rr===0&&(Rr=5)}function ju(n,e,t){var r=_n,i=Qs.transition;try{Qs.transition=null,_n=1,K5(n,e,t,r)}finally{Qs.transition=i,_n=r}return null}function K5(n,e,t,r){do nd();while(Il!==null);if(dn&6)throw Error(Ze(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ze(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Rz(n,s),n===Hr&&(xr=Hr=null,Zr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||p0||(p0=!0,TL(Zv,function(){return nd(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Qs.transition,Qs.transition=null;var o=_n;_n=1;var a=dn;dn|=4,Qb.current=null,V5(n,t),_L(t,n),m5(tS),ey=!!eS,tS=eS=null,n.current=t,W5(t),xz(),dn=a,_n=o,Qs.transition=s}else n.current=t;if(p0&&(p0=!1,Il=n,gy=i),s=n.pendingLanes,s===0&&(Wl=null),bz(t.stateNode),Ki(n,ur()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(my)throw my=!1,n=wS,wS=null,n;return gy&1&&n.tag!==0&&nd(),s=n.pendingLanes,s&1?n===SS?Ip++:(Ip=0,SS=n):Ip=0,fu(),null}function nd(){if(Il!==null){var n=iD(gy),e=Qs.transition,t=_n;try{if(Qs.transition=null,_n=16>n?16:n,Il===null)var r=!1;else{if(n=Il,Il=null,gy=0,dn&6)throw Error(Ze(331));var i=dn;for(dn|=4,ht=n.current;ht!==null;){var s=ht,o=s.child;if(ht.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ht=u;ht!==null;){var c=ht;switch(c.tag){case 0:case 11:case 15:Pp(8,c,s)}var f=c.child;if(f!==null)f.return=c,ht=f;else for(;ht!==null;){c=ht;var h=c.sibling,m=c.return;if(gL(c),c===u){ht=null;break}if(h!==null){h.return=m,ht=h;break}ht=m}}}var y=s.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}ht=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ht=o;else e:for(;ht!==null;){if(s=ht,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Pp(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,ht=x;break e}ht=s.return}}var _=n.current;for(ht=_;ht!==null;){o=ht;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ht=w;else e:for(o=_;ht!==null;){if(a=ht,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zy(9,a)}}catch(R){nr(a,a.return,R)}if(a===o){ht=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,ht=A;break e}ht=a.return}}if(dn=i,fu(),Zo&&typeof Zo.onPostCommitFiberRoot=="function")try{Zo.onPostCommitFiberRoot(Wy,n)}catch{}r=!0}return r}finally{_n=t,Qs.transition=e}}return!1}function ST(n,e,t){e=vd(t,e),e=sL(n,e,1),n=Vl(n,e,1),e=Ii(),n!==null&&(Lm(n,1,e),Ki(n,e))}function nr(n,e,t){if(n.tag===3)ST(n,n,t);else for(;e!==null;){if(e.tag===3){ST(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wl===null||!Wl.has(r))){n=vd(t,n),n=oL(e,n,1),e=Vl(e,n,1),n=Ii(),e!==null&&(Lm(e,1,n),Ki(e,n));break}}e=e.return}}function Y5(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Ii(),n.pingedLanes|=n.suspendedLanes&t,Hr===n&&(Zr&t)===t&&(Rr===4||Rr===3&&(Zr&130023424)===Zr&&500>ur()-qb?ac(n,0):Zb|=t),Ki(n,e)}function EL(n,e){e===0&&(n.mode&1?(e=i0,i0<<=1,!(i0&130023424)&&(i0=4194304)):e=1);var t=Ii();n=Ga(n,e),n!==null&&(Lm(n,e,t),Ki(n,t))}function Q5(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),EL(n,t)}function Z5(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Ze(314))}r!==null&&r.delete(e),EL(n,t)}var CL;CL=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ji.current)Wi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Wi=!1,N5(n,e,t);Wi=!!(n.flags&131072)}else Wi=!1,Un&&e.flags&1048576&&PD(e,ay,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Rv(n,e),n=e.pendingProps;var i=hd(e,gi.current);td(e,t),i=$b(null,e,r,n,i,t);var s=Jb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xi(r)?(s=!0,sy(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Gb(e),i.updater=Yy,e.stateNode=i,i._reactInternals=e,cS(e,r,n,t),e=hS(null,e,r,!0,s,t)):(e.tag=0,Un&&s&&Lb(e),Ci(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Rv(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=e6(r),n=yo(r,n),i){case 0:e=dS(null,e,r,n,t);break e;case 1:e=dT(null,e,r,n,t);break e;case 11:e=cT(null,e,r,n,t);break e;case 14:e=fT(null,e,r,yo(r.type,n),t);break e}throw Error(Ze(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yo(r,i),dS(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yo(r,i),dT(n,e,r,i,t);case 3:e:{if(cL(e),n===null)throw Error(Ze(387));r=e.pendingProps,s=e.memoizedState,i=s.element,LD(n,e),cy(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=vd(Error(Ze(423)),e),e=hT(n,e,r,t,i);break e}else if(r!==i){i=vd(Error(Ze(424)),e),e=hT(n,e,r,t,i);break e}else for(ps=Hl(e.stateNode.containerInfo.firstChild),ms=e,Un=!0,wo=null,t=UD(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(pd(),r===i){e=Ha(n,e,t);break e}Ci(n,e,r,t)}e=e.child}return e;case 5:return ND(e),n===null&&aS(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,nS(r,i)?o=null:s!==null&&nS(r,s)&&(e.flags|=32),uL(n,e),Ci(n,e,o,t),e.child;case 6:return n===null&&aS(e),null;case 13:return fL(n,e,t);case 4:return Hb(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=md(e,null,r,t):Ci(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yo(r,i),cT(n,e,r,i,t);case 7:return Ci(n,e,e.pendingProps,t),e.child;case 8:return Ci(n,e,e.pendingProps.children,t),e.child;case 12:return Ci(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Pn(ly,r._currentValue),r._currentValue=o,s!==null)if(To(s.value,o)){if(s.children===i.children&&!Ji.current){e=Ha(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ka(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),lS(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ze(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),lS(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ci(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,td(e,t),i=Zs(i),r=r(i),e.flags|=1,Ci(n,e,r,t),e.child;case 14:return r=e.type,i=yo(r,e.pendingProps),i=yo(r.type,i),fT(n,e,r,i,t);case 15:return aL(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yo(r,i),Rv(n,e),e.tag=1,Xi(r)?(n=!0,sy(e)):n=!1,td(e,t),kD(e,r,i),cS(e,r,i,t),hS(null,e,r,!0,n,t);case 19:return dL(n,e,t);case 22:return lL(n,e,t)}throw Error(Ze(156,e.tag))};function TL(n,e){return eD(n,e)}function q5(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function js(n,e,t,r){return new q5(n,e,t,r)}function rA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function e6(n){if(typeof n=="function")return rA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Sb)return 11;if(n===bb)return 14}return 2}function $l(n,e){var t=n.alternate;return t===null?(t=js(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Iv(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")rA(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case If:return lc(t.children,i,s,e);case wb:o=8,i|=8;break;case Lw:return n=js(12,t,e,i|2),n.elementType=Lw,n.lanes=s,n;case Fw:return n=js(13,t,e,i),n.elementType=Fw,n.lanes=s,n;case kw:return n=js(19,t,e,i),n.elementType=kw,n.lanes=s,n;case OI:return e1(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case FI:o=10;break e;case kI:o=9;break e;case Sb:o=11;break e;case bb:o=14;break e;case Ml:o=16,r=null;break e}throw Error(Ze(130,n==null?n:typeof n,""))}return e=js(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function lc(n,e,t,r){return n=js(7,n,r,e),n.lanes=t,n}function e1(n,e,t,r){return n=js(22,n,r,e),n.elementType=OI,n.lanes=t,n.stateNode={isHidden:!1},n}function q_(n,e,t){return n=js(6,n,null,e),n.lanes=t,n}function ex(n,e,t){return e=js(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function t6(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=L_(0),this.expirationTimes=L_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function iA(n,e,t,r,i,s,o,a,l){return n=new t6(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=js(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gb(s),n}function n6(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bf,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function RL(n){if(!n)return eu;n=n._reactInternals;e:{if(Pc(n)!==n||n.tag!==1)throw Error(Ze(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ze(171))}if(n.tag===1){var t=n.type;if(Xi(t))return TD(n,t,e)}return e}function PL(n,e,t,r,i,s,o,a,l){return n=iA(t,r,!0,n,i,s,o,a,l),n.context=RL(null),t=n.current,r=Ii(),i=jl(t),s=ka(r,i),s.callback=e??null,Vl(t,s,i),n.current.lanes=i,Lm(n,i,r),Ki(n,r),n}function t1(n,e,t,r){var i=e.current,s=Ii(),o=jl(i);return t=RL(t),e.context===null?e.context=t:e.pendingContext=t,e=ka(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Vl(i,e,o),n!==null&&(Mo(n,i,o,s),Ev(n,i,o)),o}function yy(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function bT(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function sA(n,e){bT(n,e),(n=n.alternate)&&bT(n,e)}function r6(){return null}var BL=typeof reportError=="function"?reportError:function(n){console.error(n)};function oA(n){this._internalRoot=n}n1.prototype.render=oA.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ze(409));t1(n,e,null,null)};n1.prototype.unmount=oA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Sc(function(){t1(null,n,null,null)}),e[za]=null}};function n1(n){this._internalRoot=n}n1.prototype.unstable_scheduleHydration=function(n){if(n){var e=aD();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Rl.length&&e!==0&&e<Rl[t].priority;t++);Rl.splice(t,0,n),t===0&&uD(n)}};function aA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function r1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function AT(){}function i6(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=yy(o);s.call(u)}}var o=PL(e,r,n,0,null,!1,!1,"",AT);return n._reactRootContainer=o,n[za]=o.current,rm(n.nodeType===8?n.parentNode:n),Sc(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=yy(l);a.call(u)}}var l=iA(n,0,!1,null,null,!1,!1,"",AT);return n._reactRootContainer=l,n[za]=l.current,rm(n.nodeType===8?n.parentNode:n),Sc(function(){t1(e,l,t,r)}),l}function i1(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=yy(o);a.call(l)}}t1(e,o,n,i)}else o=i6(t,e,n,i,r);return yy(o)}sD=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=yp(e.pendingLanes);t!==0&&(Eb(e,t|1),Ki(e,ur()),!(dn&6)&&(yd=ur()+500,fu()))}break;case 13:Sc(function(){var r=Ga(n,1);if(r!==null){var i=Ii();Mo(r,n,1,i)}}),sA(n,1)}};Cb=function(n){if(n.tag===13){var e=Ga(n,134217728);if(e!==null){var t=Ii();Mo(e,n,134217728,t)}sA(n,134217728)}};oD=function(n){if(n.tag===13){var e=jl(n),t=Ga(n,e);if(t!==null){var r=Ii();Mo(t,n,e,r)}sA(n,e)}};aD=function(){return _n};lD=function(n,e){var t=_n;try{return _n=n,e()}finally{_n=t}};$w=function(n,e,t){switch(e){case"input":if(Nw(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Xy(r);if(!i)throw Error(Ze(90));NI(r),Nw(r,i)}}}break;case"textarea":GI(n,t);break;case"select":e=t.value,e!=null&&Qf(n,!!t.multiple,e,!1)}};XI=eA;KI=Sc;var s6={usingClientEntryPoint:!1,Events:[km,kf,Xy,$I,JI,eA]},Fh={findFiberByHostInstance:Qu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},o6={bundleType:Fh.bundleType,version:Fh.version,rendererPackageName:Fh.rendererPackageName,rendererConfig:Fh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xa.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ZI(n),n===null?null:n.stateNode},findFiberByHostInstance:Fh.findFiberByHostInstance||r6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var m0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!m0.isDisabled&&m0.supportsFiber)try{Wy=m0.inject(o6),Zo=m0}catch{}}Ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s6;Ss.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aA(e))throw Error(Ze(200));return n6(n,e,null,t)};Ss.createRoot=function(n,e){if(!aA(n))throw Error(Ze(299));var t=!1,r="",i=BL;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=iA(n,1,!1,null,null,t,!1,r,i),n[za]=e.current,rm(n.nodeType===8?n.parentNode:n),new oA(e)};Ss.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ze(188)):(n=Object.keys(n).join(","),Error(Ze(268,n)));return n=ZI(e),n=n===null?null:n.stateNode,n};Ss.flushSync=function(n){return Sc(n)};Ss.hydrate=function(n,e,t){if(!r1(e))throw Error(Ze(200));return i1(null,n,e,!0,t)};Ss.hydrateRoot=function(n,e,t){if(!aA(n))throw Error(Ze(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=BL;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=PL(e,null,n,1,t??null,i,!1,s,o),n[za]=e.current,rm(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new n1(e)};Ss.render=function(n,e,t){if(!r1(e))throw Error(Ze(200));return i1(null,n,e,!1,t)};Ss.unmountComponentAtNode=function(n){if(!r1(n))throw Error(Ze(40));return n._reactRootContainer?(Sc(function(){i1(null,null,n,!1,function(){n._reactRootContainer=null,n[za]=null})}),!0):!1};Ss.unstable_batchedUpdates=eA;Ss.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!r1(t))throw Error(Ze(200));if(n==null||n._reactInternals===void 0)throw Error(Ze(38));return i1(n,e,t,!1,r)};Ss.version="18.2.0-next-9e3b772b8-20220608";(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=Ss})(rz);const IL=db(Xv);var MT=Xv;Bw.createRoot=MT.createRoot,Bw.hydrateRoot=MT.hydrateRoot;function vn(){return vn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},vn.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ka="150",a6={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},l6={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},DL=0,MS=1,LL=2,u6=3,FL=0,s1=1,Dp=2,ec=3,eo=0,fr=1,Gr=2,c6=2,qr=0,uc=1,_y=2,ES=3,CS=4,kL=5,Ku=100,OL=101,UL=102,TS=103,RS=104,NL=200,zL=201,GL=202,HL=203,lA=204,uA=205,VL=206,WL=207,jL=208,$L=209,JL=210,XL=0,KL=1,YL=2,xy=3,QL=4,ZL=5,qL=6,e4=7,Um=0,t4=1,n4=2,Eo=0,r4=1,i4=2,s4=3,cA=4,o4=5,o1=300,Va=301,tu=302,_d=303,dm=304,zd=306,nu=1e3,Kr=1001,xd=1002,Sn=1003,hm=1004,f6=1004,rd=1005,d6=1005,rn=1006,a1=1007,h6=1007,Ro=1008,p6=1008,vi=1009,a4=1010,l4=1011,fA=1012,u4=1013,La=1014,Yr=1015,Qr=1016,c4=1017,f4=1018,Jl=1020,d4=1021,Ri=1023,h4=1024,p4=1025,Xl=1026,ru=1027,dA=1028,m4=1029,g4=1030,v4=1031,y4=1033,Dv=33776,Lv=33777,Fv=33778,kv=33779,PS=35840,BS=35841,IS=35842,DS=35843,_4=36196,LS=37492,FS=37496,kS=37808,OS=37809,US=37810,NS=37811,zS=37812,GS=37813,HS=37814,VS=37815,WS=37816,jS=37817,$S=37818,JS=37819,XS=37820,KS=37821,Ov=36492,x4=36283,YS=36284,QS=36285,ZS=36286,w4=2200,S4=2201,b4=2202,wd=2300,bc=2301,Uv=2302,tc=2400,nc=2401,pm=2402,l1=2500,hA=2501,A4=0,pA=1,wy=2,Po=3e3,It=3001,du=3200,mA=3201,hu=0,M4=1,m6="",xo="srgb",Sd="srgb-linear",gA="display-p3",g6=0,Nv=7680,v6=7681,y6=7682,_6=7683,x6=34055,w6=34056,S6=5386,b6=512,A6=513,M6=514,E6=515,C6=516,T6=517,R6=518,E4=519,mm=35044,qS=35048,P6=35040,B6=35045,I6=35049,D6=35041,L6=35046,F6=35050,k6=35042,O6="100",e2="300 es",Sy=1035;class io{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const li=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ET=1234567;const cc=Math.PI/180,gm=180/Math.PI;function gs(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(li[n&255]+li[n>>8&255]+li[n>>16&255]+li[n>>24&255]+"-"+li[e&255]+li[e>>8&255]+"-"+li[e>>16&15|64]+li[e>>24&255]+"-"+li[t&63|128]+li[t>>8&255]+"-"+li[t>>16&255]+li[t>>24&255]+li[r&255]+li[r>>8&255]+li[r>>16&255]+li[r>>24&255]).toLowerCase()}function cr(n,e,t){return Math.max(e,Math.min(t,n))}function vA(n,e){return(n%e+e)%e}function U6(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function N6(n,e,t){return n!==e?(t-n)/(e-n):0}function Lp(n,e,t){return(1-t)*n+t*e}function z6(n,e,t,r){return Lp(n,e,1-Math.exp(-t*r))}function G6(n,e=1){return e-Math.abs(vA(n,e*2)-e)}function H6(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function V6(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function W6(n,e){return n+Math.floor(Math.random()*(e-n+1))}function j6(n,e){return n+Math.random()*(e-n)}function $6(n){return n*(.5-Math.random())}function J6(n){n!==void 0&&(ET=n);let e=ET+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function X6(n){return n*cc}function K6(n){return n*gm}function t2(n){return(n&n-1)===0&&n!==0}function C4(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function T4(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Y6(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+r)/2),c=o((e+r)/2),f=s((e-r)/2),h=o((e-r)/2),m=s((r-e)/2),y=o((r-e)/2);switch(i){case"XYX":n.set(a*c,l*f,l*h,a*u);break;case"YZY":n.set(l*h,a*c,l*f,a*u);break;case"ZXZ":n.set(l*f,l*h,a*c,a*u);break;case"XZX":n.set(a*c,l*y,l*m,a*u);break;case"YXY":n.set(l*m,a*c,l*y,a*u);break;case"ZYZ":n.set(l*y,l*m,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Fa(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Cn(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const $s={DEG2RAD:cc,RAD2DEG:gm,generateUUID:gs,clamp:cr,euclideanModulo:vA,mapLinear:U6,inverseLerp:N6,lerp:Lp,damp:z6,pingpong:G6,smoothstep:H6,smootherstep:V6,randInt:W6,randFloat:j6,randFloatSpread:$6,seededRandom:J6,degToRad:X6,radToDeg:K6,isPowerOfTwo:t2,ceilPowerOfTwo:C4,floorPowerOfTwo:T4,setQuaternionFromProperEuler:Y6,normalize:Cn,denormalize:Fa};class De{constructor(e=0,t=0){De.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Pr{constructor(){Pr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],c=r[4],f=r[7],h=r[2],m=r[5],y=r[8],g=i[0],v=i[3],x=i[6],_=i[1],w=i[4],A=i[7],R=i[2],M=i[5],P=i[8];return s[0]=o*g+a*_+l*R,s[3]=o*v+a*w+l*M,s[6]=o*x+a*A+l*P,s[1]=u*g+c*_+f*R,s[4]=u*v+c*w+f*M,s[7]=u*x+c*A+f*P,s[2]=h*g+m*_+y*R,s[5]=h*v+m*w+y*M,s[8]=h*x+m*A+y*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-r*s*c+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=c*o-a*u,h=a*l-c*s,m=u*s-o*l,y=t*f+r*h+i*m;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/y;return e[0]=f*g,e[1]=(i*u-c*r)*g,e[2]=(a*r-i*o)*g,e[3]=h*g,e[4]=(c*t-i*l)*g,e[5]=(i*s-a*t)*g,e[6]=m*g,e[7]=(r*l-u*t)*g,e[8]=(o*t-r*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(tx.makeScale(e,t)),this}rotate(e){return this.premultiply(tx.makeRotation(-e)),this}translate(e,t){return this.premultiply(tx.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const tx=new Pr;function R4(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Q6={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Vf(n,e){return new Q6[n](e)}function vm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}class Zn{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],u=r[i+1],c=r[i+2],f=r[i+3];const h=s[o+0],m=s[o+1],y=s[o+2],g=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f;return}if(a===1){e[t+0]=h,e[t+1]=m,e[t+2]=y,e[t+3]=g;return}if(f!==g||l!==h||u!==m||c!==y){let v=1-a;const x=l*h+u*m+c*y+f*g,_=x>=0?1:-1,w=1-x*x;if(w>Number.EPSILON){const R=Math.sqrt(w),M=Math.atan2(R,x*_);v=Math.sin(v*M)/R,a=Math.sin(a*M)/R}const A=a*_;if(l=l*v+h*A,u=u*v+m*A,c=c*v+y*A,f=f*v+g*A,v===1-a){const R=1/Math.sqrt(l*l+u*u+c*c+f*f);l*=R,u*=R,c*=R,f*=R}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],c=r[i+3],f=s[o],h=s[o+1],m=s[o+2],y=s[o+3];return e[t]=a*y+c*f+l*m-u*h,e[t+1]=l*y+c*h+u*f-a*m,e[t+2]=u*y+c*m+a*h-l*f,e[t+3]=c*y-a*f-l*h-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),c=a(i/2),f=a(s/2),h=l(r/2),m=l(i/2),y=l(s/2);switch(o){case"XYZ":this._x=h*c*f+u*m*y,this._y=u*m*f-h*c*y,this._z=u*c*y+h*m*f,this._w=u*c*f-h*m*y;break;case"YXZ":this._x=h*c*f+u*m*y,this._y=u*m*f-h*c*y,this._z=u*c*y-h*m*f,this._w=u*c*f+h*m*y;break;case"ZXY":this._x=h*c*f-u*m*y,this._y=u*m*f+h*c*y,this._z=u*c*y+h*m*f,this._w=u*c*f-h*m*y;break;case"ZYX":this._x=h*c*f-u*m*y,this._y=u*m*f+h*c*y,this._z=u*c*y-h*m*f,this._w=u*c*f+h*m*y;break;case"YZX":this._x=h*c*f+u*m*y,this._y=u*m*f+h*c*y,this._z=u*c*y-h*m*f,this._w=u*c*f-h*m*y;break;case"XZY":this._x=h*c*f-u*m*y,this._y=u*m*f-h*c*y,this._z=u*c*y+h*m*f,this._w=u*c*f+h*m*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],c=t[6],f=t[10],h=r+a+f;if(h>0){const m=.5/Math.sqrt(h+1);this._w=.25/m,this._x=(c-l)*m,this._y=(s-u)*m,this._z=(o-i)*m}else if(r>a&&r>f){const m=2*Math.sqrt(1+r-a-f);this._w=(c-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+u)/m}else if(a>f){const m=2*Math.sqrt(1+a-r-f);this._w=(s-u)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+c)/m}else{const m=2*Math.sqrt(1+f-r-a);this._w=(o-i)/m,this._x=(s+u)/m,this._y=(l+c)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(cr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+o*a+i*u-s*l,this._y=i*c+o*l+s*a-r*u,this._z=s*c+o*u+r*l-i*a,this._w=o*c-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),f=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=o*f+this._w*h,this._x=r*f+this._x*h,this._y=i*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class V{constructor(e=0,t=0,r=0){V.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(CT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(CT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*t+o*i-a*r,c=l*r+a*t-s*i,f=l*i+s*r-o*t,h=-s*t-o*r-a*i;return this.x=u*l+h*-s+c*-a-f*-o,this.y=c*l+h*-o+f*-s-u*-a,this.z=f*l+h*-a+u*-o-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return nx.copy(this).projectOnVector(e),this.sub(nx)}reflect(e){return this.sub(nx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(cr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const nx=new V,CT=new Zn;function id(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function rx(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const Z6=new Pr().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),q6=new Pr().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),Dl=new V;function eG(n){return n.convertSRGBToLinear(),Dl.set(n.r,n.g,n.b).applyMatrix3(q6),n.setRGB(Dl.x,Dl.y,Dl.z)}function tG(n){return Dl.set(n.r,n.g,n.b).applyMatrix3(Z6),n.setRGB(Dl.x,Dl.y,Dl.z).convertLinearToSRGB()}const nG={[Sd]:n=>n,[xo]:n=>n.convertSRGBToLinear(),[gA]:eG},rG={[Sd]:n=>n,[xo]:n=>n.convertLinearToSRGB(),[gA]:tG},ci={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Sd},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=nG[e],i=rG[t];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let nf;class yA{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{nf===void 0&&(nf=vm("canvas")),nf.width=e.width,nf.height=e.height;const r=nf.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=nf}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=vm("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=id(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(id(t[r]/255)*255):t[r]=id(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class rc{constructor(e=null){this.isSource=!0,this.uuid=gs(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(ix(i[o].image)):s.push(ix(i[o]))}else s=ix(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function ix(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?yA.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let iG=0;class xn extends io{constructor(e=xn.DEFAULT_IMAGE,t=xn.DEFAULT_MAPPING,r=Kr,i=Kr,s=rn,o=Ro,a=Ri,l=vi,u=xn.DEFAULT_ANISOTROPY,c=Po){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:iG++}),this.uuid=gs(),this.name="",this.source=new rc(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new De(0,0),this.repeat=new De(1,1),this.center=new De(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==o1)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case nu:e.x=e.x-Math.floor(e.x);break;case Kr:e.x=e.x<0?0:1;break;case xd:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case nu:e.y=e.y-Math.floor(e.y);break;case Kr:e.y=e.y<0?0:1;break;case xd:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}xn.DEFAULT_IMAGE=null;xn.DEFAULT_MAPPING=o1;xn.DEFAULT_ANISOTROPY=1;class jt{constructor(e=0,t=0,r=0,i=1){jt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,u=l[0],c=l[4],f=l[8],h=l[1],m=l[5],y=l[9],g=l[2],v=l[6],x=l[10];if(Math.abs(c-h)<.01&&Math.abs(f-g)<.01&&Math.abs(y-v)<.01){if(Math.abs(c+h)<.1&&Math.abs(f+g)<.1&&Math.abs(y+v)<.1&&Math.abs(u+m+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(u+1)/2,A=(m+1)/2,R=(x+1)/2,M=(c+h)/4,P=(f+g)/4,b=(y+v)/4;return w>A&&w>R?w<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(w),i=M/r,s=P/r):A>R?A<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(A),r=M/i,s=b/i):R<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(R),r=P/s,i=b/s),this.set(r,i,s,t),this}let _=Math.sqrt((v-y)*(v-y)+(f-g)*(f-g)+(h-c)*(h-c));return Math.abs(_)<.001&&(_=1),this.x=(v-y)/_,this.y=(f-g)/_,this.z=(h-c)/_,this.w=Math.acos((u+m+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Fn extends io{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new jt(0,0,e,t),this.scissorTest=!1,this.viewport=new jt(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new xn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:rn,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new rc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class u1 extends xn{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Sn,this.minFilter=Sn,this.wrapR=Kr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class sG extends Fn{constructor(e=1,t=1,r=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new u1(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class _A extends xn{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Sn,this.minFilter=Sn,this.wrapR=Kr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class oG extends Fn{constructor(e=1,t=1,r=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new _A(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class aG extends Fn{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Ya{constructor(e=new V(1/0,1/0,1/0),t=new V(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,u=e.length;l<u;l+=3){const c=e[l],f=e[l+1],h=e[l+2];c<t&&(t=c),f<r&&(r=f),h<i&&(i=h),c>s&&(s=c),f>o&&(o=f),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,u=e.count;l<u;l++){const c=e.getX(l),f=e.getY(l),h=e.getZ(l);c<t&&(t=c),f<r&&(r=f),h<i&&(i=h),c>s&&(s=c),f>o&&(o=f),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Pu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Pu.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Pu)}else r.boundingBox===null&&r.computeBoundingBox(),sx.copy(r.boundingBox),sx.applyMatrix4(e.matrixWorld),this.union(sx);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Pu),Pu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(kh),g0.subVectors(this.max,kh),rf.subVectors(e.a,kh),sf.subVectors(e.b,kh),of.subVectors(e.c,kh),pl.subVectors(sf,rf),ml.subVectors(of,sf),Bu.subVectors(rf,of);let t=[0,-pl.z,pl.y,0,-ml.z,ml.y,0,-Bu.z,Bu.y,pl.z,0,-pl.x,ml.z,0,-ml.x,Bu.z,0,-Bu.x,-pl.y,pl.x,0,-ml.y,ml.x,0,-Bu.y,Bu.x,0];return!ox(t,rf,sf,of,g0)||(t=[1,0,0,0,1,0,0,0,1],!ox(t,rf,sf,of,g0))?!1:(v0.crossVectors(pl,ml),t=[v0.x,v0.y,v0.z],ox(t,rf,sf,of,g0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Pu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Pu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ga[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ga[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ga[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ga[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ga[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ga[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ga[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ga[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ga),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ga=[new V,new V,new V,new V,new V,new V,new V,new V],Pu=new V,sx=new Ya,rf=new V,sf=new V,of=new V,pl=new V,ml=new V,Bu=new V,kh=new V,g0=new V,v0=new V,Iu=new V;function ox(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Iu.fromArray(n,s);const a=i.x*Math.abs(Iu.x)+i.y*Math.abs(Iu.y)+i.z*Math.abs(Iu.z),l=e.dot(Iu),u=t.dot(Iu),c=r.dot(Iu);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const lG=new Ya,Oh=new V,ax=new V;let Qa=class{constructor(e=new V,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):lG.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Oh.subVectors(e,this.center);const t=Oh.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Oh,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(ax.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Oh.copy(e.center).add(ax)),this.expandByPoint(Oh.copy(e.center).sub(ax))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const va=new V,lx=new V,y0=new V,gl=new V,ux=new V,_0=new V,cx=new V;class Nm{constructor(e=new V,t=new V(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,va)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=va.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(va.copy(this.origin).addScaledVector(this.direction,t),va.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){lx.copy(e).add(t).multiplyScalar(.5),y0.copy(t).sub(e).normalize(),gl.copy(this.origin).sub(lx);const s=e.distanceTo(t)*.5,o=-this.direction.dot(y0),a=gl.dot(this.direction),l=-gl.dot(y0),u=gl.lengthSq(),c=Math.abs(1-o*o);let f,h,m,y;if(c>0)if(f=o*l-a,h=o*a-l,y=s*c,f>=0)if(h>=-y)if(h<=y){const g=1/c;f*=g,h*=g,m=f*(f+o*h+2*a)+h*(o*f+h+2*l)+u}else h=s,f=Math.max(0,-(o*h+a)),m=-f*f+h*(h+2*l)+u;else h=-s,f=Math.max(0,-(o*h+a)),m=-f*f+h*(h+2*l)+u;else h<=-y?(f=Math.max(0,-(-o*s+a)),h=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+h*(h+2*l)+u):h<=y?(f=0,h=Math.min(Math.max(-s,-l),s),m=h*(h+2*l)+u):(f=Math.max(0,-(o*s+a)),h=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+h*(h+2*l)+u);else h=o>0?-s:s,f=Math.max(0,-(o*h+a)),m=-f*f+h*(h+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(lx).addScaledVector(y0,h),m}intersectSphere(e,t){va.subVectors(e.center,this.origin);const r=va.dot(this.direction),i=va.dot(va)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,h=this.origin;return u>=0?(r=(e.min.x-h.x)*u,i=(e.max.x-h.x)*u):(r=(e.max.x-h.x)*u,i=(e.min.x-h.x)*u),c>=0?(s=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(s=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(a=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,va)!==null}intersectTriangle(e,t,r,i,s){ux.subVectors(t,e),_0.subVectors(r,e),cx.crossVectors(ux,_0);let o=this.direction.dot(cx),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;gl.subVectors(this.origin,e);const l=a*this.direction.dot(_0.crossVectors(gl,_0));if(l<0)return null;const u=a*this.direction.dot(ux.cross(gl));if(u<0||l+u>o)return null;const c=-a*gl.dot(cx);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class bt{constructor(){bt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,s,o,a,l,u,c,f,h,m,y,g,v){const x=this.elements;return x[0]=e,x[4]=t,x[8]=r,x[12]=i,x[1]=s,x[5]=o,x[9]=a,x[13]=l,x[2]=u,x[6]=c,x[10]=f,x[14]=h,x[3]=m,x[7]=y,x[11]=g,x[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new bt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/af.setFromMatrixColumn(e,0).length(),s=1/af.setFromMatrixColumn(e,1).length(),o=1/af.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=o*c,m=o*f,y=a*c,g=a*f;t[0]=l*c,t[4]=-l*f,t[8]=u,t[1]=m+y*u,t[5]=h-g*u,t[9]=-a*l,t[2]=g-h*u,t[6]=y+m*u,t[10]=o*l}else if(e.order==="YXZ"){const h=l*c,m=l*f,y=u*c,g=u*f;t[0]=h+g*a,t[4]=y*a-m,t[8]=o*u,t[1]=o*f,t[5]=o*c,t[9]=-a,t[2]=m*a-y,t[6]=g+h*a,t[10]=o*l}else if(e.order==="ZXY"){const h=l*c,m=l*f,y=u*c,g=u*f;t[0]=h-g*a,t[4]=-o*f,t[8]=y+m*a,t[1]=m+y*a,t[5]=o*c,t[9]=g-h*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const h=o*c,m=o*f,y=a*c,g=a*f;t[0]=l*c,t[4]=y*u-m,t[8]=h*u+g,t[1]=l*f,t[5]=g*u+h,t[9]=m*u-y,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const h=o*l,m=o*u,y=a*l,g=a*u;t[0]=l*c,t[4]=g-h*f,t[8]=y*f+m,t[1]=f,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=m*f+y,t[10]=h-g*f}else if(e.order==="XZY"){const h=o*l,m=o*u,y=a*l,g=a*u;t[0]=l*c,t[4]=-f,t[8]=u*c,t[1]=h*f+g,t[5]=o*c,t[9]=m*f-y,t[2]=y*f-m,t[6]=a*c,t[10]=g*f+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(uG,e,cG)}lookAt(e,t,r){const i=this.elements;return us.subVectors(e,t),us.lengthSq()===0&&(us.z=1),us.normalize(),vl.crossVectors(r,us),vl.lengthSq()===0&&(Math.abs(r.z)===1?us.x+=1e-4:us.z+=1e-4,us.normalize(),vl.crossVectors(r,us)),vl.normalize(),x0.crossVectors(us,vl),i[0]=vl.x,i[4]=x0.x,i[8]=us.x,i[1]=vl.y,i[5]=x0.y,i[9]=us.y,i[2]=vl.z,i[6]=x0.z,i[10]=us.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],c=r[1],f=r[5],h=r[9],m=r[13],y=r[2],g=r[6],v=r[10],x=r[14],_=r[3],w=r[7],A=r[11],R=r[15],M=i[0],P=i[4],b=i[8],C=i[12],T=i[1],I=i[5],D=i[9],z=i[13],N=i[2],J=i[6],Q=i[10],re=i[14],G=i[3],j=i[7],Y=i[11],X=i[15];return s[0]=o*M+a*T+l*N+u*G,s[4]=o*P+a*I+l*J+u*j,s[8]=o*b+a*D+l*Q+u*Y,s[12]=o*C+a*z+l*re+u*X,s[1]=c*M+f*T+h*N+m*G,s[5]=c*P+f*I+h*J+m*j,s[9]=c*b+f*D+h*Q+m*Y,s[13]=c*C+f*z+h*re+m*X,s[2]=y*M+g*T+v*N+x*G,s[6]=y*P+g*I+v*J+x*j,s[10]=y*b+g*D+v*Q+x*Y,s[14]=y*C+g*z+v*re+x*X,s[3]=_*M+w*T+A*N+R*G,s[7]=_*P+w*I+A*J+R*j,s[11]=_*b+w*D+A*Q+R*Y,s[15]=_*C+w*z+A*re+R*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],f=e[6],h=e[10],m=e[14],y=e[3],g=e[7],v=e[11],x=e[15];return y*(+s*l*f-i*u*f-s*a*h+r*u*h+i*a*m-r*l*m)+g*(+t*l*m-t*u*h+s*o*h-i*o*m+i*u*c-s*l*c)+v*(+t*u*f-t*a*m-s*o*f+r*o*m+s*a*c-r*u*c)+x*(-i*a*c-t*l*f+t*a*h+i*o*f-r*o*h+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],m=e[11],y=e[12],g=e[13],v=e[14],x=e[15],_=f*v*u-g*h*u+g*l*m-a*v*m-f*l*x+a*h*x,w=y*h*u-c*v*u-y*l*m+o*v*m+c*l*x-o*h*x,A=c*g*u-y*f*u+y*a*m-o*g*m-c*a*x+o*f*x,R=y*f*l-c*g*l-y*a*h+o*g*h+c*a*v-o*f*v,M=t*_+r*w+i*A+s*R;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/M;return e[0]=_*P,e[1]=(g*h*s-f*v*s-g*i*m+r*v*m+f*i*x-r*h*x)*P,e[2]=(a*v*s-g*l*s+g*i*u-r*v*u-a*i*x+r*l*x)*P,e[3]=(f*l*s-a*h*s-f*i*u+r*h*u+a*i*m-r*l*m)*P,e[4]=w*P,e[5]=(c*v*s-y*h*s+y*i*m-t*v*m-c*i*x+t*h*x)*P,e[6]=(y*l*s-o*v*s-y*i*u+t*v*u+o*i*x-t*l*x)*P,e[7]=(o*h*s-c*l*s+c*i*u-t*h*u-o*i*m+t*l*m)*P,e[8]=A*P,e[9]=(y*f*s-c*g*s-y*r*m+t*g*m+c*r*x-t*f*x)*P,e[10]=(o*g*s-y*a*s+y*r*u-t*g*u-o*r*x+t*a*x)*P,e[11]=(c*a*s-o*f*s-c*r*u+t*f*u+o*r*m-t*a*m)*P,e[12]=R*P,e[13]=(c*g*i-y*f*i+y*r*h-t*g*h-c*r*v+t*f*v)*P,e[14]=(y*a*i-o*g*i-y*r*l+t*g*l+o*r*v-t*a*v)*P,e[15]=(o*f*i-c*a*i+c*r*l-t*f*l-o*r*h+t*a*h)*P,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+r,c*l-i*o,0,u*l-i*a,c*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,c=o+o,f=a+a,h=s*u,m=s*c,y=s*f,g=o*c,v=o*f,x=a*f,_=l*u,w=l*c,A=l*f,R=r.x,M=r.y,P=r.z;return i[0]=(1-(g+x))*R,i[1]=(m+A)*R,i[2]=(y-w)*R,i[3]=0,i[4]=(m-A)*M,i[5]=(1-(h+x))*M,i[6]=(v+_)*M,i[7]=0,i[8]=(y+w)*P,i[9]=(v-_)*P,i[10]=(1-(h+g))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=af.set(i[0],i[1],i[2]).length();const o=af.set(i[4],i[5],i[6]).length(),a=af.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],fo.copy(this);const u=1/s,c=1/o,f=1/a;return fo.elements[0]*=u,fo.elements[1]*=u,fo.elements[2]*=u,fo.elements[4]*=c,fo.elements[5]*=c,fo.elements[6]*=c,fo.elements[8]*=f,fo.elements[9]*=f,fo.elements[10]*=f,t.setFromRotationMatrix(fo),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){const a=this.elements,l=2*s/(t-e),u=2*s/(r-i),c=(t+e)/(t-e),f=(r+i)/(r-i),h=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,l=1/(t-e),u=1/(r-i),c=1/(o-s),f=(t+e)*l,h=(r+i)*u,m=(o+s)*c;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const af=new V,fo=new bt,uG=new V(0,0,0),cG=new V(1,1,1),vl=new V,x0=new V,us=new V,TT=new bt,RT=new Zn;class Er{constructor(e=0,t=0,r=0,i=Er.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],c=i[9],f=i[2],h=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(cr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-cr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(cr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-cr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(cr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-cr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return TT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(TT,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return RT.setFromEuler(this),this.setFromQuaternion(RT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Er.DEFAULT_ORDER="XYZ";class fc{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let fG=0;const PT=new V,lf=new Zn,ya=new bt,w0=new V,Uh=new V,dG=new V,hG=new Zn,BT=new V(1,0,0),IT=new V(0,1,0),DT=new V(0,0,1),pG={type:"added"},LT={type:"removed"};class un extends io{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:fG++}),this.uuid=gs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=un.DEFAULT_UP.clone();const e=new V,t=new Er,r=new Zn,i=new V(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new bt},normalMatrix:{value:new Pr}}),this.matrix=new bt,this.matrixWorld=new bt,this.matrixAutoUpdate=un.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=un.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new fc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return lf.setFromAxisAngle(e,t),this.quaternion.multiply(lf),this}rotateOnWorldAxis(e,t){return lf.setFromAxisAngle(e,t),this.quaternion.premultiply(lf),this}rotateX(e){return this.rotateOnAxis(BT,e)}rotateY(e){return this.rotateOnAxis(IT,e)}rotateZ(e){return this.rotateOnAxis(DT,e)}translateOnAxis(e,t){return PT.copy(e).applyQuaternion(this.quaternion),this.position.add(PT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(BT,e)}translateY(e){return this.translateOnAxis(IT,e)}translateZ(e){return this.translateOnAxis(DT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ya.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?w0.copy(e):w0.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Uh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ya.lookAt(Uh,w0,this.up):ya.lookAt(w0,Uh,this.up),this.quaternion.setFromRotationMatrix(ya),i&&(ya.extractRotation(i.matrixWorld),lf.setFromRotationMatrix(ya),this.quaternion.premultiply(lf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(pG)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(LT)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(LT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ya.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ya.multiply(e.parent.matrixWorld)),e.applyMatrix4(ya),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Uh,e,dG),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Uh,hG,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const f=l[u];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),f=o(e.shapes),h=o(e.skeletons),m=o(e.animations),y=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),f.length>0&&(r.shapes=f),h.length>0&&(r.skeletons=h),m.length>0&&(r.animations=m),y.length>0&&(r.nodes=y)}return r.object=i,r;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}un.DEFAULT_UP=new V(0,1,0);un.DEFAULT_MATRIX_AUTO_UPDATE=!0;un.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ho=new V,_a=new V,fx=new V,xa=new V,uf=new V,cf=new V,FT=new V,dx=new V,hx=new V,px=new V;class Vs{constructor(e=new V,t=new V,r=new V){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),ho.subVectors(e,t),i.cross(ho);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){ho.subVectors(i,t),_a.subVectors(r,t),fx.subVectors(e,t);const o=ho.dot(ho),a=ho.dot(_a),l=ho.dot(fx),u=_a.dot(_a),c=_a.dot(fx),f=o*u-a*a;if(f===0)return s.set(-2,-1,-1);const h=1/f,m=(u*l-a*c)*h,y=(o*c-a*l)*h;return s.set(1-m-y,y,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,xa),xa.x>=0&&xa.y>=0&&xa.x+xa.y<=1}static getUV(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,xa),l.set(0,0),l.addScaledVector(s,xa.x),l.addScaledVector(o,xa.y),l.addScaledVector(a,xa.z),l}static isFrontFacing(e,t,r,i){return ho.subVectors(r,t),_a.subVectors(e,t),ho.cross(_a).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ho.subVectors(this.c,this.b),_a.subVectors(this.a,this.b),ho.cross(_a).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Vs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Vs.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return Vs.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Vs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Vs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;uf.subVectors(i,r),cf.subVectors(s,r),dx.subVectors(e,r);const l=uf.dot(dx),u=cf.dot(dx);if(l<=0&&u<=0)return t.copy(r);hx.subVectors(e,i);const c=uf.dot(hx),f=cf.dot(hx);if(c>=0&&f<=c)return t.copy(i);const h=l*f-c*u;if(h<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(r).addScaledVector(uf,o);px.subVectors(e,s);const m=uf.dot(px),y=cf.dot(px);if(y>=0&&m<=y)return t.copy(s);const g=m*u-l*y;if(g<=0&&u>=0&&y<=0)return a=u/(u-y),t.copy(r).addScaledVector(cf,a);const v=c*y-m*f;if(v<=0&&f-c>=0&&m-y>=0)return FT.subVectors(s,i),a=(f-c)/(f-c+(m-y)),t.copy(i).addScaledVector(FT,a);const x=1/(v+g+h);return o=g*x,a=h*x,t.copy(r).addScaledVector(uf,o).addScaledVector(cf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let mG=0;class zn extends io{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:mG++}),this.uuid=gs(),this.name="",this.type="Material",this.blending=uc,this.side=eo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=lA,this.blendDst=uA,this.blendEquation=Ku,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=xy,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=E4,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Nv,this.stencilZFail=Nv,this.stencilZPass=Nv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==uc&&(r.blending=this.blending),this.side!==eo&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const P4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},po={h:0,s:0,l:0},S0={h:0,s:0,l:0};function mx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let qe=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=xo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ci.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=ci.workingColorSpace){return this.r=e,this.g=t,this.b=r,ci.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=ci.workingColorSpace){if(e=vA(e,1),t=cr(t,0,1),r=cr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=mx(o,s,e+1/3),this.g=mx(o,s,e),this.b=mx(o,s,e-1/3)}return ci.toWorkingColorSpace(this,i),this}setStyle(e,t=xo){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,ci.toWorkingColorSpace(this,t),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,ci.toWorkingColorSpace(this,t),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,u=parseFloat(s[2])/100,c=parseFloat(s[3])/100;return r(s[4]),this.setHSL(l,u,c,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,ci.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,ci.toWorkingColorSpace(this,t),this;console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=xo){const r=P4[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=id(e.r),this.g=id(e.g),this.b=id(e.b),this}copyLinearToSRGB(e){return this.r=rx(e.r),this.g=rx(e.g),this.b=rx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=xo){return ci.fromWorkingColorSpace(ui.copy(this),e),cr(ui.r*255,0,255)<<16^cr(ui.g*255,0,255)<<8^cr(ui.b*255,0,255)<<0}getHexString(e=xo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ci.workingColorSpace){ci.fromWorkingColorSpace(ui.copy(this),t);const r=ui.r,i=ui.g,s=ui.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const f=o-a;switch(u=c<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=ci.workingColorSpace){return ci.fromWorkingColorSpace(ui.copy(this),t),e.r=ui.r,e.g=ui.g,e.b=ui.b,e}getStyle(e=xo){ci.fromWorkingColorSpace(ui.copy(this),e);const t=ui.r,r=ui.g,i=ui.b;return e!==xo?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${t*255|0},${r*255|0},${i*255|0})`}offsetHSL(e,t,r){return this.getHSL(po),po.h+=e,po.s+=t,po.l+=r,this.setHSL(po.h,po.s,po.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(po),e.getHSL(S0);const r=Lp(po.h,S0.h,t),i=Lp(po.s,S0.s,t),s=Lp(po.l,S0.l,t);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const ui=new qe;qe.NAMES=P4;class Pi extends zn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Um,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const vr=new V,b0=new De;class Qt{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=mm,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)b0.fromBufferAttribute(this,t),b0.applyMatrix3(e),this.setXY(t,b0.x,b0.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)vr.fromBufferAttribute(this,t),vr.applyMatrix3(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)vr.fromBufferAttribute(this,t),vr.applyMatrix4(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)vr.fromBufferAttribute(this,t),vr.applyNormalMatrix(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)vr.fromBufferAttribute(this,t),vr.transformDirection(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Fa(t,this.array)),t}setX(e,t){return this.normalized&&(t=Cn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Fa(t,this.array)),t}setY(e,t){return this.normalized&&(t=Cn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Fa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Cn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Fa(t,this.array)),t}setW(e,t){return this.normalized&&(t=Cn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Cn(t,this.array),r=Cn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Cn(t,this.array),r=Cn(r,this.array),i=Cn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Cn(t,this.array),r=Cn(r,this.array),i=Cn(i,this.array),s=Cn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==mm&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class gG extends Qt{constructor(e,t,r){super(new Int8Array(e),t,r)}}class vG extends Qt{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class yG extends Qt{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class _G extends Qt{constructor(e,t,r){super(new Int16Array(e),t,r)}}class xA extends Qt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class xG extends Qt{constructor(e,t,r){super(new Int32Array(e),t,r)}}class wA extends Qt{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class wG extends Qt{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}}class vt extends Qt{constructor(e,t,r){super(new Float32Array(e),t,r)}}class SG extends Qt{constructor(e,t,r){super(new Float64Array(e),t,r)}}let bG=0;const Ls=new bt,gx=new un,ff=new V,cs=new Ya,Nh=new Ya,Ur=new V;class Lt extends io{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:bG++}),this.uuid=gs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(R4(e)?wA:xA)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Pr().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ls.makeRotationFromQuaternion(e),this.applyMatrix4(Ls),this}rotateX(e){return Ls.makeRotationX(e),this.applyMatrix4(Ls),this}rotateY(e){return Ls.makeRotationY(e),this.applyMatrix4(Ls),this}rotateZ(e){return Ls.makeRotationZ(e),this.applyMatrix4(Ls),this}translate(e,t,r){return Ls.makeTranslation(e,t,r),this.applyMatrix4(Ls),this}scale(e,t,r){return Ls.makeScale(e,t,r),this.applyMatrix4(Ls),this}lookAt(e){return gx.lookAt(e),gx.updateMatrix(),this.applyMatrix4(gx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ff).negate(),this.translate(ff.x,ff.y,ff.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new vt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ya);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];cs.setFromBufferAttribute(s),this.morphTargetsRelative?(Ur.addVectors(this.boundingBox.min,cs.min),this.boundingBox.expandByPoint(Ur),Ur.addVectors(this.boundingBox.max,cs.max),this.boundingBox.expandByPoint(Ur)):(this.boundingBox.expandByPoint(cs.min),this.boundingBox.expandByPoint(cs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new V,1/0);return}if(e){const r=this.boundingSphere.center;if(cs.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Nh.setFromBufferAttribute(a),this.morphTargetsRelative?(Ur.addVectors(cs.min,Nh.min),cs.expandByPoint(Ur),Ur.addVectors(cs.max,Nh.max),cs.expandByPoint(Ur)):(cs.expandByPoint(Nh.min),cs.expandByPoint(Nh.max))}cs.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Ur.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Ur));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)Ur.fromBufferAttribute(a,u),l&&(ff.fromBufferAttribute(e,u),Ur.add(ff)),i=Math.max(i,r.distanceToSquared(Ur))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Qt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let T=0;T<a;T++)u[T]=new V,c[T]=new V;const f=new V,h=new V,m=new V,y=new De,g=new De,v=new De,x=new V,_=new V;function w(T,I,D){f.fromArray(i,T*3),h.fromArray(i,I*3),m.fromArray(i,D*3),y.fromArray(o,T*2),g.fromArray(o,I*2),v.fromArray(o,D*2),h.sub(f),m.sub(f),g.sub(y),v.sub(y);const z=1/(g.x*v.y-v.x*g.y);isFinite(z)&&(x.copy(h).multiplyScalar(v.y).addScaledVector(m,-g.y).multiplyScalar(z),_.copy(m).multiplyScalar(g.x).addScaledVector(h,-v.x).multiplyScalar(z),u[T].add(x),u[I].add(x),u[D].add(x),c[T].add(_),c[I].add(_),c[D].add(_))}let A=this.groups;A.length===0&&(A=[{start:0,count:r.length}]);for(let T=0,I=A.length;T<I;++T){const D=A[T],z=D.start,N=D.count;for(let J=z,Q=z+N;J<Q;J+=3)w(r[J+0],r[J+1],r[J+2])}const R=new V,M=new V,P=new V,b=new V;function C(T){P.fromArray(s,T*3),b.copy(P);const I=u[T];R.copy(I),R.sub(P.multiplyScalar(P.dot(I))).normalize(),M.crossVectors(b,I);const z=M.dot(c[T])<0?-1:1;l[T*4]=R.x,l[T*4+1]=R.y,l[T*4+2]=R.z,l[T*4+3]=z}for(let T=0,I=A.length;T<I;++T){const D=A[T],z=D.start,N=D.count;for(let J=z,Q=z+N;J<Q;J+=3)C(r[J+0]),C(r[J+1]),C(r[J+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Qt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let h=0,m=r.count;h<m;h++)r.setXYZ(h,0,0,0);const i=new V,s=new V,o=new V,a=new V,l=new V,u=new V,c=new V,f=new V;if(e)for(let h=0,m=e.count;h<m;h+=3){const y=e.getX(h+0),g=e.getX(h+1),v=e.getX(h+2);i.fromBufferAttribute(t,y),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,v),c.subVectors(o,s),f.subVectors(i,s),c.cross(f),a.fromBufferAttribute(r,y),l.fromBufferAttribute(r,g),u.fromBufferAttribute(r,v),a.add(c),l.add(c),u.add(c),r.setXYZ(y,a.x,a.y,a.z),r.setXYZ(g,l.x,l.y,l.z),r.setXYZ(v,u.x,u.y,u.z)}else for(let h=0,m=t.count;h<m;h+=3)i.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),c.subVectors(o,s),f.subVectors(i,s),c.cross(f),r.setXYZ(h+0,c.x,c.y,c.z),r.setXYZ(h+1,c.x,c.y,c.z),r.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Ur.fromBufferAttribute(e,t),Ur.normalize(),e.setXYZ(t,Ur.x,Ur.y,Ur.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,f=a.normalized,h=new u.constructor(l.length*c);let m=0,y=0;for(let g=0,v=l.length;g<v;g++){a.isInterleavedBufferAttribute?m=l[g]*a.data.stride+a.offset:m=l[g]*c;for(let x=0;x<c;x++)h[y++]=u[m++]}return new Qt(h,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Lt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,f=u.length;c<f;c++){const h=u[c],m=e(h,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let f=0,h=u.length;f<h;f++){const m=u[f];c.push(m.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],f=s[u];for(let h=0,m=f.length;h<m;h++)c.push(f[h].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const f=o[u];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const kT=new bt,$o=new Nm,A0=new Qa,OT=new V,zh=new V,Gh=new V,Hh=new V,vx=new V,M0=new V,E0=new De,C0=new De,T0=new De,yx=new V,R0=new V;class Nn extends un{constructor(e=new Lt,t=new Pi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){M0.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],f=s[l];c!==0&&(vx.fromBufferAttribute(f,e),o?M0.addScaledVector(vx,c):M0.addScaledVector(vx.sub(t),c))}t.add(M0)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),A0.copy(r.boundingSphere),A0.applyMatrix4(s),$o.copy(e.ray).recast(e.near),A0.containsPoint($o.origin)===!1&&($o.intersectSphere(A0,OT)===null||$o.origin.distanceToSquared(OT)>(e.far-e.near)**2))||(kT.copy(s).invert(),$o.copy(e.ray).applyMatrix4(kT),r.boundingBox!==null&&$o.intersectsBox(r.boundingBox)===!1))return;let o;const a=r.index,l=r.attributes.position,u=r.attributes.uv,c=r.attributes.uv2,f=r.groups,h=r.drawRange;if(a!==null)if(Array.isArray(i))for(let m=0,y=f.length;m<y;m++){const g=f[m],v=i[g.materialIndex],x=Math.max(g.start,h.start),_=Math.min(a.count,Math.min(g.start+g.count,h.start+h.count));for(let w=x,A=_;w<A;w+=3){const R=a.getX(w),M=a.getX(w+1),P=a.getX(w+2);o=P0(this,v,e,$o,u,c,R,M,P),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{const m=Math.max(0,h.start),y=Math.min(a.count,h.start+h.count);for(let g=m,v=y;g<v;g+=3){const x=a.getX(g),_=a.getX(g+1),w=a.getX(g+2);o=P0(this,i,e,$o,u,c,x,_,w),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(i))for(let m=0,y=f.length;m<y;m++){const g=f[m],v=i[g.materialIndex],x=Math.max(g.start,h.start),_=Math.min(l.count,Math.min(g.start+g.count,h.start+h.count));for(let w=x,A=_;w<A;w+=3){const R=w,M=w+1,P=w+2;o=P0(this,v,e,$o,u,c,R,M,P),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{const m=Math.max(0,h.start),y=Math.min(l.count,h.start+h.count);for(let g=m,v=y;g<v;g+=3){const x=g,_=g+1,w=g+2;o=P0(this,i,e,$o,u,c,x,_,w),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}}}function AG(n,e,t,r,i,s,o,a){let l;if(e.side===fr?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===eo,a),l===null)return null;R0.copy(a),R0.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(R0);return u<t.near||u>t.far?null:{distance:u,point:R0.clone(),object:n}}function P0(n,e,t,r,i,s,o,a,l){n.getVertexPosition(o,zh),n.getVertexPosition(a,Gh),n.getVertexPosition(l,Hh);const u=AG(n,e,t,r,zh,Gh,Hh,yx);if(u){i&&(E0.fromBufferAttribute(i,o),C0.fromBufferAttribute(i,a),T0.fromBufferAttribute(i,l),u.uv=Vs.getUV(yx,zh,Gh,Hh,E0,C0,T0,new De)),s&&(E0.fromBufferAttribute(s,o),C0.fromBufferAttribute(s,a),T0.fromBufferAttribute(s,l),u.uv2=Vs.getUV(yx,zh,Gh,Hh,E0,C0,T0,new De));const c={a:o,b:a,c:l,normal:new V,materialIndex:0};Vs.getNormal(zh,Gh,Hh,c.normal),u.face=c}return u}class pu extends Lt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],f=[];let h=0,m=0;y("z","y","x",-1,-1,r,t,e,o,s,0),y("z","y","x",1,-1,r,t,-e,o,s,1),y("x","z","y",1,1,e,r,t,i,o,2),y("x","z","y",1,-1,e,r,-t,i,o,3),y("x","y","z",1,-1,e,t,r,i,s,4),y("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new vt(u,3)),this.setAttribute("normal",new vt(c,3)),this.setAttribute("uv",new vt(f,2));function y(g,v,x,_,w,A,R,M,P,b,C){const T=A/P,I=R/b,D=A/2,z=R/2,N=M/2,J=P+1,Q=b+1;let re=0,G=0;const j=new V;for(let Y=0;Y<Q;Y++){const X=Y*I-z;for(let K=0;K<J;K++){const ce=K*T-D;j[g]=ce*_,j[v]=X*w,j[x]=N,u.push(j.x,j.y,j.z),j[g]=0,j[v]=0,j[x]=M>0?1:-1,c.push(j.x,j.y,j.z),f.push(K/P),f.push(1-Y/b),re+=1}}for(let Y=0;Y<b;Y++)for(let X=0;X<P;X++){const K=h+X+J*Y,ce=h+X+J*(Y+1),he=h+(X+1)+J*(Y+1),te=h+(X+1)+J*Y;l.push(K,ce,te),l.push(ce,he,te),G+=6}a.addGroup(m,G,C),m+=G,h+=re}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function bd(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Ei(n){const e={};for(let t=0;t<n.length;t++){const r=bd(n[t]);for(const i in r)e[i]=r[i]}return e}function MG(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function B4(n){return n.getRenderTarget()===null&&n.outputEncoding===It?xo:Sd}const SA={clone:bd,merge:Ei};var EG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,CG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class wr extends zn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=EG,this.fragmentShader=CG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=bd(e.uniforms),this.uniformsGroups=MG(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class Gd extends un{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new bt,this.projectionMatrix=new bt,this.projectionMatrixInverse=new bt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let yr=class extends Gd{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=gm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(cc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return gm*2*Math.atan(Math.tan(cc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(cc*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const df=-90,hf=1;class I4 extends un{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new yr(df,hf,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new yr(df,hf,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new yr(df,hf,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new yr(df,hf,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new yr(df,hf,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const u=new yr(df,hf,e,t);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,-1),this.add(u)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,u]=this.children,c=e.getRenderTarget(),f=e.toneMapping,h=e.xr.enabled;e.toneMapping=Eo,e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5),e.render(t,u),e.setRenderTarget(c),e.toneMapping=f,e.xr.enabled=h,r.texture.needsPMREMUpdate=!0}}class zm extends xn{constructor(e,t,r,i,s,o,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:Va,super(e,t,r,i,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class bA extends Fn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new zm(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:rn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new pu(5,5,5),s=new wr({name:"CubemapFromEquirect",uniforms:bd(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:fr,blending:qr});s.uniforms.tEquirect.value=t;const o=new Nn(i,s),a=t.minFilter;return t.minFilter===Ro&&(t.minFilter=rn),new I4(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const _x=new V,TG=new V,RG=new Pr;class Cl{constructor(e=new V(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=_x.subVectors(r,t).cross(TG.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(_x),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||RG.getNormalMatrix(e),i=this.coplanarPoint(_x).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const pf=new Qa,B0=new V;class c1{constructor(e=new Cl,t=new Cl,r=new Cl,i=new Cl,s=new Cl,o=new Cl){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],u=r[5],c=r[6],f=r[7],h=r[8],m=r[9],y=r[10],g=r[11],v=r[12],x=r[13],_=r[14],w=r[15];return t[0].setComponents(a-i,f-l,g-h,w-v).normalize(),t[1].setComponents(a+i,f+l,g+h,w+v).normalize(),t[2].setComponents(a+s,f+u,g+m,w+x).normalize(),t[3].setComponents(a-s,f-u,g-m,w-x).normalize(),t[4].setComponents(a-o,f-c,g-y,w-_).normalize(),t[5].setComponents(a+o,f+c,g+y,w+_).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),pf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(pf)}intersectsSprite(e){return pf.center.set(0,0,0),pf.radius=.7071067811865476,pf.applyMatrix4(e.matrixWorld),this.intersectsSphere(pf)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(B0.x=i.normal.x>0?e.max.x:e.min.x,B0.y=i.normal.y>0?e.max.y:e.min.y,B0.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(B0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function D4(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function PG(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,c){const f=u.array,h=u.usage,m=n.createBuffer();n.bindBuffer(c,m),n.bufferData(c,f,h),u.onUploadCallback();let y;if(f instanceof Float32Array)y=5126;else if(f instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)y=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=5123;else if(f instanceof Int16Array)y=5122;else if(f instanceof Uint32Array)y=5125;else if(f instanceof Int32Array)y=5124;else if(f instanceof Int8Array)y=5120;else if(f instanceof Uint8Array)y=5121;else if(f instanceof Uint8ClampedArray)y=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:m,type:y,bytesPerElement:f.BYTES_PER_ELEMENT,version:u.version}}function s(u,c,f){const h=c.array,m=c.updateRange;n.bindBuffer(f,u),m.count===-1?n.bufferSubData(f,0,h):(t?n.bufferSubData(f,m.offset*h.BYTES_PER_ELEMENT,h,m.offset,m.count):n.bufferSubData(f,m.offset*h.BYTES_PER_ELEMENT,h.subarray(m.offset,m.offset+m.count)),m.count=-1),c.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(n.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const h=r.get(u);(!h||h.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const f=r.get(u);f===void 0?r.set(u,i(u,c)):f.version<u.version&&(s(f.buffer,u,c),f.version=u.version)}return{get:o,remove:a,update:l}}class Za extends Lt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,c=l+1,f=e/a,h=t/l,m=[],y=[],g=[],v=[];for(let x=0;x<c;x++){const _=x*h-o;for(let w=0;w<u;w++){const A=w*f-s;y.push(A,-_,0),g.push(0,0,1),v.push(w/a),v.push(1-x/l)}}for(let x=0;x<l;x++)for(let _=0;_<a;_++){const w=_+u*x,A=_+u*(x+1),R=_+1+u*(x+1),M=_+1+u*x;m.push(w,A,M),m.push(A,R,M)}this.setIndex(m),this.setAttribute("position",new vt(y,3)),this.setAttribute("normal",new vt(g,3)),this.setAttribute("uv",new vt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Za(e.width,e.height,e.widthSegments,e.heightSegments)}}var BG=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,IG=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,DG=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,LG=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,FG=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,kG=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,OG="vec3 transformed = vec3( position );",UG=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,NG=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,zG=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,GG=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,HG=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,VG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,WG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,jG=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,$G=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,JG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,XG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,KG=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,YG=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,QG=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,ZG=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,qG=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,e8=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,t8=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,n8=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,r8="gl_FragColor = linearToOutputTexel( gl_FragColor );",i8=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,s8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,o8=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,a8=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,l8=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,u8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,c8=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,f8=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,d8=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,h8=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,p8=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,m8=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,g8=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,v8=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,y8=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,_8=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,x8=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,w8=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,S8=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,b8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,A8=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,M8=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,E8=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,C8=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,T8=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,R8=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,P8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,B8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,I8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,D8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,L8=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,F8=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,k8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,O8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,U8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,N8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,z8=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,G8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,H8=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,V8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,W8=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,j8=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,$8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,J8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,X8=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,K8=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Y8=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Q8=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Z8=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,q8=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,eH=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,tH=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,nH=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,rH=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,iH=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,sH=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,oH=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,aH=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,lH=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,uH=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,cH=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,fH=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,dH=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,hH=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,pH=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,mH=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,gH=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,vH=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,yH=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,_H=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,xH=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,wH=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,SH=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,bH=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,AH=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,MH=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,EH=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,CH=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,TH=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const RH=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,PH=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,BH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,IH=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,DH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,LH=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,FH=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,kH=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,OH=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,UH=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,NH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,zH=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,GH=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,HH=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,VH=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,WH=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$H=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,XH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,YH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,QH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ZH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qH=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,e9=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,t9=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,n9=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,r9=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,i9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,s9=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,o9=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,a9=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,l9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Nt={alphamap_fragment:BG,alphamap_pars_fragment:IG,alphatest_fragment:DG,alphatest_pars_fragment:LG,aomap_fragment:FG,aomap_pars_fragment:kG,begin_vertex:OG,beginnormal_vertex:UG,bsdfs:NG,iridescence_fragment:zG,bumpmap_pars_fragment:GG,clipping_planes_fragment:HG,clipping_planes_pars_fragment:VG,clipping_planes_pars_vertex:WG,clipping_planes_vertex:jG,color_fragment:$G,color_pars_fragment:JG,color_pars_vertex:XG,color_vertex:KG,common:YG,cube_uv_reflection_fragment:QG,defaultnormal_vertex:ZG,displacementmap_pars_vertex:qG,displacementmap_vertex:e8,emissivemap_fragment:t8,emissivemap_pars_fragment:n8,encodings_fragment:r8,encodings_pars_fragment:i8,envmap_fragment:s8,envmap_common_pars_fragment:o8,envmap_pars_fragment:a8,envmap_pars_vertex:l8,envmap_physical_pars_fragment:x8,envmap_vertex:u8,fog_vertex:c8,fog_pars_vertex:f8,fog_fragment:d8,fog_pars_fragment:h8,gradientmap_pars_fragment:p8,lightmap_fragment:m8,lightmap_pars_fragment:g8,lights_lambert_fragment:v8,lights_lambert_pars_fragment:y8,lights_pars_begin:_8,lights_toon_fragment:w8,lights_toon_pars_fragment:S8,lights_phong_fragment:b8,lights_phong_pars_fragment:A8,lights_physical_fragment:M8,lights_physical_pars_fragment:E8,lights_fragment_begin:C8,lights_fragment_maps:T8,lights_fragment_end:R8,logdepthbuf_fragment:P8,logdepthbuf_pars_fragment:B8,logdepthbuf_pars_vertex:I8,logdepthbuf_vertex:D8,map_fragment:L8,map_pars_fragment:F8,map_particle_fragment:k8,map_particle_pars_fragment:O8,metalnessmap_fragment:U8,metalnessmap_pars_fragment:N8,morphcolor_vertex:z8,morphnormal_vertex:G8,morphtarget_pars_vertex:H8,morphtarget_vertex:V8,normal_fragment_begin:W8,normal_fragment_maps:j8,normal_pars_fragment:$8,normal_pars_vertex:J8,normal_vertex:X8,normalmap_pars_fragment:K8,clearcoat_normal_fragment_begin:Y8,clearcoat_normal_fragment_maps:Q8,clearcoat_pars_fragment:Z8,iridescence_pars_fragment:q8,output_fragment:eH,packing:tH,premultiplied_alpha_fragment:nH,project_vertex:rH,dithering_fragment:iH,dithering_pars_fragment:sH,roughnessmap_fragment:oH,roughnessmap_pars_fragment:aH,shadowmap_pars_fragment:lH,shadowmap_pars_vertex:uH,shadowmap_vertex:cH,shadowmask_pars_fragment:fH,skinbase_vertex:dH,skinning_pars_vertex:hH,skinning_vertex:pH,skinnormal_vertex:mH,specularmap_fragment:gH,specularmap_pars_fragment:vH,tonemapping_fragment:yH,tonemapping_pars_fragment:_H,transmission_fragment:xH,transmission_pars_fragment:wH,uv_pars_fragment:SH,uv_pars_vertex:bH,uv_vertex:AH,uv2_pars_fragment:MH,uv2_pars_vertex:EH,uv2_vertex:CH,worldpos_vertex:TH,background_vert:RH,background_frag:PH,backgroundCube_vert:BH,backgroundCube_frag:IH,cube_vert:DH,cube_frag:LH,depth_vert:FH,depth_frag:kH,distanceRGBA_vert:OH,distanceRGBA_frag:UH,equirect_vert:NH,equirect_frag:zH,linedashed_vert:GH,linedashed_frag:HH,meshbasic_vert:VH,meshbasic_frag:WH,meshlambert_vert:jH,meshlambert_frag:$H,meshmatcap_vert:JH,meshmatcap_frag:XH,meshnormal_vert:KH,meshnormal_frag:YH,meshphong_vert:QH,meshphong_frag:ZH,meshphysical_vert:qH,meshphysical_frag:e9,meshtoon_vert:t9,meshtoon_frag:n9,points_vert:r9,points_frag:i9,shadow_vert:s9,shadow_frag:o9,sprite_vert:a9,sprite_frag:l9},ot={common:{diffuse:{value:new qe(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Pr},uv2Transform:{value:new Pr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new De(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pr}},sprite:{diffuse:{value:new qe(16777215)},opacity:{value:1},center:{value:new De(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pr}}},So={basic:{uniforms:Ei([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:Nt.meshbasic_vert,fragmentShader:Nt.meshbasic_frag},lambert:{uniforms:Ei([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new qe(0)}}]),vertexShader:Nt.meshlambert_vert,fragmentShader:Nt.meshlambert_frag},phong:{uniforms:Ei([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new qe(0)},specular:{value:new qe(1118481)},shininess:{value:30}}]),vertexShader:Nt.meshphong_vert,fragmentShader:Nt.meshphong_frag},standard:{uniforms:Ei([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new qe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Nt.meshphysical_vert,fragmentShader:Nt.meshphysical_frag},toon:{uniforms:Ei([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new qe(0)}}]),vertexShader:Nt.meshtoon_vert,fragmentShader:Nt.meshtoon_frag},matcap:{uniforms:Ei([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:Nt.meshmatcap_vert,fragmentShader:Nt.meshmatcap_frag},points:{uniforms:Ei([ot.points,ot.fog]),vertexShader:Nt.points_vert,fragmentShader:Nt.points_frag},dashed:{uniforms:Ei([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Nt.linedashed_vert,fragmentShader:Nt.linedashed_frag},depth:{uniforms:Ei([ot.common,ot.displacementmap]),vertexShader:Nt.depth_vert,fragmentShader:Nt.depth_frag},normal:{uniforms:Ei([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:Nt.meshnormal_vert,fragmentShader:Nt.meshnormal_frag},sprite:{uniforms:Ei([ot.sprite,ot.fog]),vertexShader:Nt.sprite_vert,fragmentShader:Nt.sprite_frag},background:{uniforms:{uvTransform:{value:new Pr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Nt.background_vert,fragmentShader:Nt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Nt.backgroundCube_vert,fragmentShader:Nt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Nt.cube_vert,fragmentShader:Nt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Nt.equirect_vert,fragmentShader:Nt.equirect_frag},distanceRGBA:{uniforms:Ei([ot.common,ot.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Nt.distanceRGBA_vert,fragmentShader:Nt.distanceRGBA_frag},shadow:{uniforms:Ei([ot.lights,ot.fog,{color:{value:new qe(0)},opacity:{value:1}}]),vertexShader:Nt.shadow_vert,fragmentShader:Nt.shadow_frag}};So.physical={uniforms:Ei([So.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new De(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new qe(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new De},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new qe(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new qe(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Nt.meshphysical_vert,fragmentShader:Nt.meshphysical_frag};const I0={r:0,b:0,g:0};function u9(n,e,t,r,i,s,o){const a=new qe(0);let l=s===!0?0:1,u,c,f=null,h=0,m=null;function y(v,x){let _=!1,w=x.isScene===!0?x.background:null;w&&w.isTexture&&(w=(x.backgroundBlurriness>0?t:e).get(w));const A=n.xr,R=A.getSession&&A.getSession();R&&R.environmentBlendMode==="additive"&&(w=null),w===null?g(a,l):w&&w.isColor&&(g(w,1),_=!0),(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),w&&(w.isCubeTexture||w.mapping===zd)?(c===void 0&&(c=new Nn(new pu(1,1,1),new wr({name:"BackgroundCubeMaterial",uniforms:bd(So.backgroundCube.uniforms),vertexShader:So.backgroundCube.vertexShader,fragmentShader:So.backgroundCube.fragmentShader,side:fr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(M,P,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=w,c.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,c.material.toneMapped=w.encoding!==It,(f!==w||h!==w.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=w,h=w.version,m=n.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null)):w&&w.isTexture&&(u===void 0&&(u=new Nn(new Za(2,2),new wr({name:"BackgroundMaterial",uniforms:bd(So.background.uniforms),vertexShader:So.background.vertexShader,fragmentShader:So.background.fragmentShader,side:eo,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=w,u.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,u.material.toneMapped=w.encoding!==It,w.matrixAutoUpdate===!0&&w.updateMatrix(),u.material.uniforms.uvTransform.value.copy(w.matrix),(f!==w||h!==w.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,f=w,h=w.version,m=n.toneMapping),u.layers.enableAll(),v.unshift(u,u.geometry,u.material,0,0,null))}function g(v,x){v.getRGB(I0,B4(n)),r.buffers.color.setClear(I0.r,I0.g,I0.b,x,o)}return{getClearColor:function(){return a},setClearColor:function(v,x=1){a.set(v),l=x,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,g(a,l)},render:y}}function c9(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=v(null);let u=l,c=!1;function f(N,J,Q,re,G){let j=!1;if(o){const Y=g(re,Q,J);u!==Y&&(u=Y,m(u.object)),j=x(N,re,Q,G),j&&_(N,re,Q,G)}else{const Y=J.wireframe===!0;(u.geometry!==re.id||u.program!==Q.id||u.wireframe!==Y)&&(u.geometry=re.id,u.program=Q.id,u.wireframe=Y,j=!0)}G!==null&&t.update(G,34963),(j||c)&&(c=!1,b(N,J,Q,re),G!==null&&n.bindBuffer(34963,t.get(G).buffer))}function h(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(N){return r.isWebGL2?n.bindVertexArray(N):s.bindVertexArrayOES(N)}function y(N){return r.isWebGL2?n.deleteVertexArray(N):s.deleteVertexArrayOES(N)}function g(N,J,Q){const re=Q.wireframe===!0;let G=a[N.id];G===void 0&&(G={},a[N.id]=G);let j=G[J.id];j===void 0&&(j={},G[J.id]=j);let Y=j[re];return Y===void 0&&(Y=v(h()),j[re]=Y),Y}function v(N){const J=[],Q=[],re=[];for(let G=0;G<i;G++)J[G]=0,Q[G]=0,re[G]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:J,enabledAttributes:Q,attributeDivisors:re,object:N,attributes:{},index:null}}function x(N,J,Q,re){const G=u.attributes,j=J.attributes;let Y=0;const X=Q.getAttributes();for(const K in X)if(X[K].location>=0){const he=G[K];let te=j[K];if(te===void 0&&(K==="instanceMatrix"&&N.instanceMatrix&&(te=N.instanceMatrix),K==="instanceColor"&&N.instanceColor&&(te=N.instanceColor)),he===void 0||he.attribute!==te||te&&he.data!==te.data)return!0;Y++}return u.attributesNum!==Y||u.index!==re}function _(N,J,Q,re){const G={},j=J.attributes;let Y=0;const X=Q.getAttributes();for(const K in X)if(X[K].location>=0){let he=j[K];he===void 0&&(K==="instanceMatrix"&&N.instanceMatrix&&(he=N.instanceMatrix),K==="instanceColor"&&N.instanceColor&&(he=N.instanceColor));const te={};te.attribute=he,he&&he.data&&(te.data=he.data),G[K]=te,Y++}u.attributes=G,u.attributesNum=Y,u.index=re}function w(){const N=u.newAttributes;for(let J=0,Q=N.length;J<Q;J++)N[J]=0}function A(N){R(N,0)}function R(N,J){const Q=u.newAttributes,re=u.enabledAttributes,G=u.attributeDivisors;Q[N]=1,re[N]===0&&(n.enableVertexAttribArray(N),re[N]=1),G[N]!==J&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](N,J),G[N]=J)}function M(){const N=u.newAttributes,J=u.enabledAttributes;for(let Q=0,re=J.length;Q<re;Q++)J[Q]!==N[Q]&&(n.disableVertexAttribArray(Q),J[Q]=0)}function P(N,J,Q,re,G,j){r.isWebGL2===!0&&(Q===5124||Q===5125)?n.vertexAttribIPointer(N,J,Q,G,j):n.vertexAttribPointer(N,J,Q,re,G,j)}function b(N,J,Q,re){if(r.isWebGL2===!1&&(N.isInstancedMesh||re.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;w();const G=re.attributes,j=Q.getAttributes(),Y=J.defaultAttributeValues;for(const X in j){const K=j[X];if(K.location>=0){let ce=G[X];if(ce===void 0&&(X==="instanceMatrix"&&N.instanceMatrix&&(ce=N.instanceMatrix),X==="instanceColor"&&N.instanceColor&&(ce=N.instanceColor)),ce!==void 0){const he=ce.normalized,te=ce.itemSize,me=t.get(ce);if(me===void 0)continue;const pe=me.buffer,oe=me.type,U=me.bytesPerElement;if(ce.isInterleavedBufferAttribute){const W=ce.data,Z=W.stride,q=ce.offset;if(W.isInstancedInterleavedBuffer){for(let se=0;se<K.locationSize;se++)R(K.location+se,W.meshPerAttribute);N.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let se=0;se<K.locationSize;se++)A(K.location+se);n.bindBuffer(34962,pe);for(let se=0;se<K.locationSize;se++)P(K.location+se,te/K.locationSize,oe,he,Z*U,(q+te/K.locationSize*se)*U)}else{if(ce.isInstancedBufferAttribute){for(let W=0;W<K.locationSize;W++)R(K.location+W,ce.meshPerAttribute);N.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let W=0;W<K.locationSize;W++)A(K.location+W);n.bindBuffer(34962,pe);for(let W=0;W<K.locationSize;W++)P(K.location+W,te/K.locationSize,oe,he,te*U,te/K.locationSize*W*U)}}else if(Y!==void 0){const he=Y[X];if(he!==void 0)switch(he.length){case 2:n.vertexAttrib2fv(K.location,he);break;case 3:n.vertexAttrib3fv(K.location,he);break;case 4:n.vertexAttrib4fv(K.location,he);break;default:n.vertexAttrib1fv(K.location,he)}}}}M()}function C(){D();for(const N in a){const J=a[N];for(const Q in J){const re=J[Q];for(const G in re)y(re[G].object),delete re[G];delete J[Q]}delete a[N]}}function T(N){if(a[N.id]===void 0)return;const J=a[N.id];for(const Q in J){const re=J[Q];for(const G in re)y(re[G].object),delete re[G];delete J[Q]}delete a[N.id]}function I(N){for(const J in a){const Q=a[J];if(Q[N.id]===void 0)continue;const re=Q[N.id];for(const G in re)y(re[G].object),delete re[G];delete Q[N.id]}}function D(){z(),c=!0,u!==l&&(u=l,m(u.object))}function z(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:D,resetDefaultState:z,dispose:C,releaseStatesOfGeometry:T,releaseStatesOfProgram:I,initAttributes:w,enableAttribute:A,disableUnusedAttributes:M}}function f9(n,e,t,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,c){n.drawArrays(s,u,c),t.update(c,s,1)}function l(u,c,f){if(f===0)return;let h,m;if(i)h=n,m="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[m](s,u,c,f),t.update(c,s,f)}this.setMode=o,this.render=a,this.renderInstances=l}function d9(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(P){if(P==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,f=n.getParameter(34930),h=n.getParameter(35660),m=n.getParameter(3379),y=n.getParameter(34076),g=n.getParameter(34921),v=n.getParameter(36347),x=n.getParameter(36348),_=n.getParameter(36349),w=h>0,A=o||e.has("OES_texture_float"),R=w&&A,M=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:f,maxVertexTextures:h,maxTextureSize:m,maxCubemapSize:y,maxAttributes:g,maxVertexUniforms:v,maxVaryings:x,maxFragmentUniforms:_,vertexTextures:w,floatFragmentTextures:A,floatVertexTextures:R,maxSamples:M}}function h9(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Cl,a=new Pr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const m=f.length!==0||h||r!==0||i;return i=h,r=f.length,m},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,h){t=c(f,h,0)},this.setState=function(f,h,m){const y=f.clippingPlanes,g=f.clipIntersection,v=f.clipShadows,x=n.get(f);if(!i||y===null||y.length===0||s&&!v)s?c(null):u();else{const _=s?0:r,w=_*4;let A=x.clippingState||null;l.value=A,A=c(y,h,w,m);for(let R=0;R!==w;++R)A[R]=t[R];x.clippingState=A,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=_}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(f,h,m,y){const g=f!==null?f.length:0;let v=null;if(g!==0){if(v=l.value,y!==!0||v===null){const x=m+g*4,_=h.matrixWorldInverse;a.getNormalMatrix(_),(v===null||v.length<x)&&(v=new Float32Array(x));for(let w=0,A=m;w!==g;++w,A+=4)o.copy(f[w]).applyMatrix4(_,a),o.normal.toArray(v,A),v[A+3]=o.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,v}}function p9(n){let e=new WeakMap;function t(o,a){return a===_d?o.mapping=Va:a===dm&&(o.mapping=tu),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===_d||a===dm)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new bA(l.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Hd extends Gd{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Wf=4,UT=[.125,.215,.35,.446,.526,.582],Yu=20,xx=new Hd,NT=new qe;let wx=null;const $u=(1+Math.sqrt(5))/2,mf=1/$u,zT=[new V(1,1,1),new V(-1,1,1),new V(1,1,-1),new V(-1,1,-1),new V(0,$u,mf),new V(0,$u,-mf),new V(mf,0,$u),new V(-mf,0,$u),new V($u,mf,0),new V(-$u,mf,0)];class n2{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){wx=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=VT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=HT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(wx),e.scissorTest=!1,D0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Va||e.mapping===tu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),wx=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:rn,minFilter:rn,generateMipmaps:!1,type:Qr,format:Ri,encoding:Po,depthBuffer:!1},i=GT(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=GT(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=m9(s)),this._blurMaterial=g9(s,e,t)}return i}_compileMaterial(e){const t=new Nn(this._lodPlanes[0],e);this._renderer.compile(t,xx)}_sceneToCubeUV(e,t,r,i){const a=new yr(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,f=c.autoClear,h=c.toneMapping;c.getClearColor(NT),c.toneMapping=Eo,c.autoClear=!1;const m=new Pi({name:"PMREM.Background",side:fr,depthWrite:!1,depthTest:!1}),y=new Nn(new pu,m);let g=!1;const v=e.background;v?v.isColor&&(m.color.copy(v),e.background=null,g=!0):(m.color.copy(NT),g=!0);for(let x=0;x<6;x++){const _=x%3;_===0?(a.up.set(0,l[x],0),a.lookAt(u[x],0,0)):_===1?(a.up.set(0,0,l[x]),a.lookAt(0,u[x],0)):(a.up.set(0,l[x],0),a.lookAt(0,0,u[x]));const w=this._cubeSize;D0(i,_*w,x>2?w:0,w,w),c.setRenderTarget(i),g&&c.render(y,a),c.render(e,a)}y.geometry.dispose(),y.material.dispose(),c.toneMapping=h,c.autoClear=f,e.background=v}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Va||e.mapping===tu;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=VT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=HT());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Nn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;D0(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,xx)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=zT[(i-1)%zT.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,f=new Nn(this._lodPlanes[i],u),h=u.uniforms,m=this._sizeLods[r]-1,y=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Yu-1),g=s/y,v=isFinite(s)?1+Math.floor(c*g):Yu;v>Yu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Yu}`);const x=[];let _=0;for(let P=0;P<Yu;++P){const b=P/g,C=Math.exp(-b*b/2);x.push(C),P===0?_+=C:P<v&&(_+=2*C)}for(let P=0;P<x.length;P++)x[P]=x[P]/_;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=x,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:w}=this;h.dTheta.value=y,h.mipInt.value=w-r;const A=this._sizeLods[i],R=3*A*(i>w-Wf?i-w+Wf:0),M=4*(this._cubeSize-A);D0(t,R,M,3*A,2*A),l.setRenderTarget(t),l.render(f,xx)}}function m9(n){const e=[],t=[],r=[];let i=n;const s=n-Wf+1+UT.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Wf?l=UT[o-n+Wf-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),c=-u,f=1+u,h=[c,c,f,c,f,f,c,c,f,f,c,f],m=6,y=6,g=3,v=2,x=1,_=new Float32Array(g*y*m),w=new Float32Array(v*y*m),A=new Float32Array(x*y*m);for(let M=0;M<m;M++){const P=M%3*2/3-1,b=M>2?0:-1,C=[P,b,0,P+2/3,b,0,P+2/3,b+1,0,P,b,0,P+2/3,b+1,0,P,b+1,0];_.set(C,g*y*M),w.set(h,v*y*M);const T=[M,M,M,M,M,M];A.set(T,x*y*M)}const R=new Lt;R.setAttribute("position",new Qt(_,g)),R.setAttribute("uv",new Qt(w,v)),R.setAttribute("faceIndex",new Qt(A,x)),e.push(R),i>Wf&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function GT(n,e,t){const r=new Fn(n,e,t);return r.texture.mapping=zd,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function D0(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function g9(n,e,t){const r=new Float32Array(Yu),i=new V(0,1,0);return new wr({name:"SphericalGaussianBlur",defines:{n:Yu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:AA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:qr,depthTest:!1,depthWrite:!1})}function HT(){return new wr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:AA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:qr,depthTest:!1,depthWrite:!1})}function VT(){return new wr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:AA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:qr,depthTest:!1,depthWrite:!1})}function AA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function v9(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===_d||l===dm,c=l===Va||l===tu;if(u||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return t===null&&(t=new n2(n)),f=u?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(u&&f&&f.height>0||c&&f&&i(f)){t===null&&(t=new n2(n));const h=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function y9(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function _9(n,e,t,r){const i={},s=new WeakMap;function o(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const y in h.attributes)e.remove(h.attributes[y]);h.removeEventListener("dispose",o),delete i[h.id];const m=s.get(h);m&&(e.remove(m),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(f,h){return i[h.id]===!0||(h.addEventListener("dispose",o),i[h.id]=!0,t.memory.geometries++),h}function l(f){const h=f.attributes;for(const y in h)e.update(h[y],34962);const m=f.morphAttributes;for(const y in m){const g=m[y];for(let v=0,x=g.length;v<x;v++)e.update(g[v],34962)}}function u(f){const h=[],m=f.index,y=f.attributes.position;let g=0;if(m!==null){const _=m.array;g=m.version;for(let w=0,A=_.length;w<A;w+=3){const R=_[w+0],M=_[w+1],P=_[w+2];h.push(R,M,M,P,P,R)}}else{const _=y.array;g=y.version;for(let w=0,A=_.length/3-1;w<A;w+=3){const R=w+0,M=w+1,P=w+2;h.push(R,M,M,P,P,R)}}const v=new(R4(h)?wA:xA)(h,1);v.version=g;const x=s.get(f);x&&e.remove(x),s.set(f,v)}function c(f){const h=s.get(f);if(h){const m=f.index;m!==null&&h.version<m.version&&u(f)}else u(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:c}}function x9(n,e,t,r){const i=r.isWebGL2;let s;function o(h){s=h}let a,l;function u(h){a=h.type,l=h.bytesPerElement}function c(h,m){n.drawElements(s,m,a,h*l),t.update(m,s,1)}function f(h,m,y){if(y===0)return;let g,v;if(i)g=n,v="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[v](s,m,a,h*l,y),t.update(m,s,y)}this.setMode=o,this.setIndex=u,this.render=c,this.renderInstances=f}function w9(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function S9(n,e){return n[0]-e[0]}function b9(n,e){return Math.abs(e[1])-Math.abs(n[1])}function A9(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new jt,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,c,f){const h=u.morphTargetInfluences;if(e.isWebGL2===!0){const y=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,g=y!==void 0?y.length:0;let v=s.get(c);if(v===void 0||v.count!==g){let J=function(){z.dispose(),s.delete(c),c.removeEventListener("dispose",J)};var m=J;v!==void 0&&v.texture.dispose();const w=c.morphAttributes.position!==void 0,A=c.morphAttributes.normal!==void 0,R=c.morphAttributes.color!==void 0,M=c.morphAttributes.position||[],P=c.morphAttributes.normal||[],b=c.morphAttributes.color||[];let C=0;w===!0&&(C=1),A===!0&&(C=2),R===!0&&(C=3);let T=c.attributes.position.count*C,I=1;T>e.maxTextureSize&&(I=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const D=new Float32Array(T*I*4*g),z=new u1(D,T,I,g);z.type=Yr,z.needsUpdate=!0;const N=C*4;for(let Q=0;Q<g;Q++){const re=M[Q],G=P[Q],j=b[Q],Y=T*I*4*Q;for(let X=0;X<re.count;X++){const K=X*N;w===!0&&(o.fromBufferAttribute(re,X),D[Y+K+0]=o.x,D[Y+K+1]=o.y,D[Y+K+2]=o.z,D[Y+K+3]=0),A===!0&&(o.fromBufferAttribute(G,X),D[Y+K+4]=o.x,D[Y+K+5]=o.y,D[Y+K+6]=o.z,D[Y+K+7]=0),R===!0&&(o.fromBufferAttribute(j,X),D[Y+K+8]=o.x,D[Y+K+9]=o.y,D[Y+K+10]=o.z,D[Y+K+11]=j.itemSize===4?o.w:1)}}v={count:g,texture:z,size:new De(T,I)},s.set(c,v),c.addEventListener("dispose",J)}let x=0;for(let w=0;w<h.length;w++)x+=h[w];const _=c.morphTargetsRelative?1:1-x;f.getUniforms().setValue(n,"morphTargetBaseInfluence",_),f.getUniforms().setValue(n,"morphTargetInfluences",h),f.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}else{const y=h===void 0?0:h.length;let g=r[c.id];if(g===void 0||g.length!==y){g=[];for(let A=0;A<y;A++)g[A]=[A,0];r[c.id]=g}for(let A=0;A<y;A++){const R=g[A];R[0]=A,R[1]=h[A]}g.sort(b9);for(let A=0;A<8;A++)A<y&&g[A][1]?(a[A][0]=g[A][0],a[A][1]=g[A][1]):(a[A][0]=Number.MAX_SAFE_INTEGER,a[A][1]=0);a.sort(S9);const v=c.morphAttributes.position,x=c.morphAttributes.normal;let _=0;for(let A=0;A<8;A++){const R=a[A],M=R[0],P=R[1];M!==Number.MAX_SAFE_INTEGER&&P?(v&&c.getAttribute("morphTarget"+A)!==v[M]&&c.setAttribute("morphTarget"+A,v[M]),x&&c.getAttribute("morphNormal"+A)!==x[M]&&c.setAttribute("morphNormal"+A,x[M]),i[A]=P,_+=P):(v&&c.hasAttribute("morphTarget"+A)===!0&&c.deleteAttribute("morphTarget"+A),x&&c.hasAttribute("morphNormal"+A)===!0&&c.deleteAttribute("morphNormal"+A),i[A]=0)}const w=c.morphTargetsRelative?1:1-_;f.getUniforms().setValue(n,"morphTargetBaseInfluence",w),f.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function M9(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,c=l.geometry,f=e.get(l,c);return i.get(f)!==u&&(e.update(f),i.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),f}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const L4=new xn,F4=new u1,k4=new _A,O4=new zm,WT=[],jT=[],$T=new Float32Array(16),JT=new Float32Array(9),XT=new Float32Array(4);function Vd(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=WT[i];if(s===void 0&&(s=new Float32Array(i),WT[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Ir(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Dr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function f1(n,e){let t=jT[e];t===void 0&&(t=new Int32Array(e),jT[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function E9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function C9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ir(t,e))return;n.uniform2fv(this.addr,e),Dr(t,e)}}function T9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ir(t,e))return;n.uniform3fv(this.addr,e),Dr(t,e)}}function R9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ir(t,e))return;n.uniform4fv(this.addr,e),Dr(t,e)}}function P9(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ir(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Dr(t,e)}else{if(Ir(t,r))return;XT.set(r),n.uniformMatrix2fv(this.addr,!1,XT),Dr(t,r)}}function B9(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ir(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Dr(t,e)}else{if(Ir(t,r))return;JT.set(r),n.uniformMatrix3fv(this.addr,!1,JT),Dr(t,r)}}function I9(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ir(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Dr(t,e)}else{if(Ir(t,r))return;$T.set(r),n.uniformMatrix4fv(this.addr,!1,$T),Dr(t,r)}}function D9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function L9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ir(t,e))return;n.uniform2iv(this.addr,e),Dr(t,e)}}function F9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ir(t,e))return;n.uniform3iv(this.addr,e),Dr(t,e)}}function k9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ir(t,e))return;n.uniform4iv(this.addr,e),Dr(t,e)}}function O9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function U9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ir(t,e))return;n.uniform2uiv(this.addr,e),Dr(t,e)}}function N9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ir(t,e))return;n.uniform3uiv(this.addr,e),Dr(t,e)}}function z9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ir(t,e))return;n.uniform4uiv(this.addr,e),Dr(t,e)}}function G9(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||L4,i)}function H9(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||k4,i)}function V9(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||O4,i)}function W9(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||F4,i)}function j9(n){switch(n){case 5126:return E9;case 35664:return C9;case 35665:return T9;case 35666:return R9;case 35674:return P9;case 35675:return B9;case 35676:return I9;case 5124:case 35670:return D9;case 35667:case 35671:return L9;case 35668:case 35672:return F9;case 35669:case 35673:return k9;case 5125:return O9;case 36294:return U9;case 36295:return N9;case 36296:return z9;case 35678:case 36198:case 36298:case 36306:case 35682:return G9;case 35679:case 36299:case 36307:return H9;case 35680:case 36300:case 36308:case 36293:return V9;case 36289:case 36303:case 36311:case 36292:return W9}}function $9(n,e){n.uniform1fv(this.addr,e)}function J9(n,e){const t=Vd(e,this.size,2);n.uniform2fv(this.addr,t)}function X9(n,e){const t=Vd(e,this.size,3);n.uniform3fv(this.addr,t)}function K9(n,e){const t=Vd(e,this.size,4);n.uniform4fv(this.addr,t)}function Y9(n,e){const t=Vd(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Q9(n,e){const t=Vd(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Z9(n,e){const t=Vd(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function q9(n,e){n.uniform1iv(this.addr,e)}function eV(n,e){n.uniform2iv(this.addr,e)}function tV(n,e){n.uniform3iv(this.addr,e)}function nV(n,e){n.uniform4iv(this.addr,e)}function rV(n,e){n.uniform1uiv(this.addr,e)}function iV(n,e){n.uniform2uiv(this.addr,e)}function sV(n,e){n.uniform3uiv(this.addr,e)}function oV(n,e){n.uniform4uiv(this.addr,e)}function aV(n,e,t){const r=this.cache,i=e.length,s=f1(t,i);Ir(r,s)||(n.uniform1iv(this.addr,s),Dr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||L4,s[o])}function lV(n,e,t){const r=this.cache,i=e.length,s=f1(t,i);Ir(r,s)||(n.uniform1iv(this.addr,s),Dr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||k4,s[o])}function uV(n,e,t){const r=this.cache,i=e.length,s=f1(t,i);Ir(r,s)||(n.uniform1iv(this.addr,s),Dr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||O4,s[o])}function cV(n,e,t){const r=this.cache,i=e.length,s=f1(t,i);Ir(r,s)||(n.uniform1iv(this.addr,s),Dr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||F4,s[o])}function fV(n){switch(n){case 5126:return $9;case 35664:return J9;case 35665:return X9;case 35666:return K9;case 35674:return Y9;case 35675:return Q9;case 35676:return Z9;case 5124:case 35670:return q9;case 35667:case 35671:return eV;case 35668:case 35672:return tV;case 35669:case 35673:return nV;case 5125:return rV;case 36294:return iV;case 36295:return sV;case 36296:return oV;case 35678:case 36198:case 36298:case 36306:case 35682:return aV;case 35679:case 36299:case 36307:return lV;case 35680:case 36300:case 36308:case 36293:return uV;case 36289:case 36303:case 36311:case 36292:return cV}}class dV{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=j9(t.type)}}class hV{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=fV(t.type)}}class pV{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const Sx=/(\w+)(\])?(\[|\.)?/g;function KT(n,e){n.seq.push(e),n.map[e.id]=e}function mV(n,e,t){const r=n.name,i=r.length;for(Sx.lastIndex=0;;){const s=Sx.exec(r),o=Sx.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){KT(t,u===void 0?new dV(a,n,e):new hV(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new pV(a),KT(t,f)),t=f}}}class zv{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);mV(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function YT(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let gV=0;function vV(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function yV(n){switch(n){case Po:return["Linear","( value )"];case It:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function QT(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+vV(n.getShaderSource(e),o)}else return i}function _V(n,e){const t=yV(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function xV(n,e){let t;switch(e){case r4:t="Linear";break;case i4:t="Reinhard";break;case s4:t="OptimizedCineon";break;case cA:t="ACESFilmic";break;case o4:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function wV(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(xp).join(`
`)}function SV(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function bV(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function xp(n){return n!==""}function ZT(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function qT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const AV=/^[ \t]*#include +<([\w\d./]+)>/gm;function r2(n){return n.replace(AV,MV)}function MV(n,e){const t=Nt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return r2(t)}const EV=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function e3(n){return n.replace(EV,CV)}function CV(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function t3(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function TV(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===s1?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Dp?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ec&&(e="SHADOWMAP_TYPE_VSM"),e}function RV(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Va:case tu:e="ENVMAP_TYPE_CUBE";break;case zd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function PV(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case tu:e="ENVMAP_MODE_REFRACTION";break}return e}function BV(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Um:e="ENVMAP_BLENDING_MULTIPLY";break;case t4:e="ENVMAP_BLENDING_MIX";break;case n4:e="ENVMAP_BLENDING_ADD";break}return e}function IV(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function DV(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=TV(t),u=RV(t),c=PV(t),f=BV(t),h=IV(t),m=t.isWebGL2?"":wV(t),y=SV(s),g=i.createProgram();let v,x,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=[y].filter(xp).join(`
`),v.length>0&&(v+=`
`),x=[m,y].filter(xp).join(`
`),x.length>0&&(x+=`
`)):(v=[t3(t),"#define SHADER_NAME "+t.shaderName,y,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(xp).join(`
`),x=[m,t3(t),"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Eo?"#define TONE_MAPPING":"",t.toneMapping!==Eo?Nt.tonemapping_pars_fragment:"",t.toneMapping!==Eo?xV("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Nt.encodings_pars_fragment,_V("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(xp).join(`
`)),o=r2(o),o=ZT(o,t),o=qT(o,t),a=r2(a),a=ZT(a,t),a=qT(a,t),o=e3(o),a=e3(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,x=["#define varying in",t.glslVersion===e2?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===e2?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const w=_+v+o,A=_+x+a,R=YT(i,35633,w),M=YT(i,35632,A);if(i.attachShader(g,R),i.attachShader(g,M),t.index0AttributeName!==void 0?i.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g),n.debug.checkShaderErrors){const C=i.getProgramInfoLog(g).trim(),T=i.getShaderInfoLog(R).trim(),I=i.getShaderInfoLog(M).trim();let D=!0,z=!0;if(i.getProgramParameter(g,35714)===!1){D=!1;const N=QT(i,R,"vertex"),J=QT(i,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(g,35715)+`

Program Info Log: `+C+`
`+N+`
`+J)}else C!==""?console.warn("THREE.WebGLProgram: Program Info Log:",C):(T===""||I==="")&&(z=!1);z&&(this.diagnostics={runnable:D,programLog:C,vertexShader:{log:T,prefix:v},fragmentShader:{log:I,prefix:x}})}i.deleteShader(R),i.deleteShader(M);let P;this.getUniforms=function(){return P===void 0&&(P=new zv(i,g)),P};let b;return this.getAttributes=function(){return b===void 0&&(b=bV(i,g)),b},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.name=t.shaderName,this.id=gV++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=R,this.fragmentShader=M,this}let LV=0;class FV{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new kV(e),t.set(e,r)),r}}class kV{constructor(e){this.id=LV++,this.code=e,this.usedTimes=0}}function OV(n,e,t,r,i,s,o){const a=new fc,l=new FV,u=[],c=i.isWebGL2,f=i.logarithmicDepthBuffer,h=i.vertexTextures;let m=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(b,C,T,I,D){const z=I.fog,N=D.geometry,J=b.isMeshStandardMaterial?I.environment:null,Q=(b.isMeshStandardMaterial?t:e).get(b.envMap||J),re=Q&&Q.mapping===zd?Q.image.height:null,G=y[b.type];b.precision!==null&&(m=i.getMaxPrecision(b.precision),m!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",m,"instead."));const j=N.morphAttributes.position||N.morphAttributes.normal||N.morphAttributes.color,Y=j!==void 0?j.length:0;let X=0;N.morphAttributes.position!==void 0&&(X=1),N.morphAttributes.normal!==void 0&&(X=2),N.morphAttributes.color!==void 0&&(X=3);let K,ce,he,te;if(G){const Z=So[G];K=Z.vertexShader,ce=Z.fragmentShader}else K=b.vertexShader,ce=b.fragmentShader,l.update(b),he=l.getVertexShaderID(b),te=l.getFragmentShaderID(b);const me=n.getRenderTarget(),pe=b.alphaTest>0,oe=b.clearcoat>0,U=b.iridescence>0;return{isWebGL2:c,shaderID:G,shaderName:b.type,vertexShader:K,fragmentShader:ce,defines:b.defines,customVertexShaderID:he,customFragmentShaderID:te,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:m,instancing:D.isInstancedMesh===!0,instancingColor:D.isInstancedMesh===!0&&D.instanceColor!==null,supportsVertexTextures:h,outputEncoding:me===null?n.outputEncoding:me.isXRRenderTarget===!0?me.texture.encoding:Po,map:!!b.map,matcap:!!b.matcap,envMap:!!Q,envMapMode:Q&&Q.mapping,envMapCubeUVHeight:re,lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,objectSpaceNormalMap:b.normalMapType===M4,tangentSpaceNormalMap:b.normalMapType===hu,decodeVideoTexture:!!b.map&&b.map.isVideoTexture===!0&&b.map.encoding===It,clearcoat:oe,clearcoatMap:oe&&!!b.clearcoatMap,clearcoatRoughnessMap:oe&&!!b.clearcoatRoughnessMap,clearcoatNormalMap:oe&&!!b.clearcoatNormalMap,iridescence:U,iridescenceMap:U&&!!b.iridescenceMap,iridescenceThicknessMap:U&&!!b.iridescenceThicknessMap,displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,specularIntensityMap:!!b.specularIntensityMap,specularColorMap:!!b.specularColorMap,opaque:b.transparent===!1&&b.blending===uc,alphaMap:!!b.alphaMap,alphaTest:pe,gradientMap:!!b.gradientMap,sheen:b.sheen>0,sheenColorMap:!!b.sheenColorMap,sheenRoughnessMap:!!b.sheenRoughnessMap,transmission:b.transmission>0,transmissionMap:!!b.transmissionMap,thicknessMap:!!b.thicknessMap,combine:b.combine,vertexTangents:!!b.normalMap&&!!N.attributes.tangent,vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!N.attributes.color&&N.attributes.color.itemSize===4,vertexUvs:!!b.map||!!b.bumpMap||!!b.normalMap||!!b.specularMap||!!b.alphaMap||!!b.emissiveMap||!!b.roughnessMap||!!b.metalnessMap||!!b.clearcoatMap||!!b.clearcoatRoughnessMap||!!b.clearcoatNormalMap||!!b.iridescenceMap||!!b.iridescenceThicknessMap||!!b.displacementMap||!!b.transmissionMap||!!b.thicknessMap||!!b.specularIntensityMap||!!b.specularColorMap||!!b.sheenColorMap||!!b.sheenRoughnessMap,uvsVertexOnly:!(b.map||b.bumpMap||b.normalMap||b.specularMap||b.alphaMap||b.emissiveMap||b.roughnessMap||b.metalnessMap||b.clearcoatNormalMap||b.iridescenceMap||b.iridescenceThicknessMap||b.transmission>0||b.transmissionMap||b.thicknessMap||b.specularIntensityMap||b.specularColorMap||b.sheen>0||b.sheenColorMap||b.sheenRoughnessMap)&&!!b.displacementMap,fog:!!z,useFog:b.fog===!0,fogExp2:z&&z.isFogExp2,flatShading:!!b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:f,skinning:D.isSkinnedMesh===!0,morphTargets:N.morphAttributes.position!==void 0,morphNormals:N.morphAttributes.normal!==void 0,morphColors:N.morphAttributes.color!==void 0,morphTargetsCount:Y,morphTextureStride:X,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:b.dithering,shadowMapEnabled:n.shadowMap.enabled&&T.length>0,shadowMapType:n.shadowMap.type,toneMapping:b.toneMapped?n.toneMapping:Eo,useLegacyLights:n.useLegacyLights,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===Gr,flipSided:b.side===fr,useDepthPacking:!!b.depthPacking,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionDerivatives:b.extensions&&b.extensions.derivatives,extensionFragDepth:b.extensions&&b.extensions.fragDepth,extensionDrawBuffers:b.extensions&&b.extensions.drawBuffers,extensionShaderTextureLOD:b.extensions&&b.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:b.customProgramCacheKey()}}function v(b){const C=[];if(b.shaderID?C.push(b.shaderID):(C.push(b.customVertexShaderID),C.push(b.customFragmentShaderID)),b.defines!==void 0)for(const T in b.defines)C.push(T),C.push(b.defines[T]);return b.isRawShaderMaterial===!1&&(x(C,b),_(C,b),C.push(n.outputEncoding)),C.push(b.customProgramCacheKey),C.join()}function x(b,C){b.push(C.precision),b.push(C.outputEncoding),b.push(C.envMapMode),b.push(C.envMapCubeUVHeight),b.push(C.combine),b.push(C.vertexUvs),b.push(C.fogExp2),b.push(C.sizeAttenuation),b.push(C.morphTargetsCount),b.push(C.morphAttributeCount),b.push(C.numDirLights),b.push(C.numPointLights),b.push(C.numSpotLights),b.push(C.numSpotLightMaps),b.push(C.numHemiLights),b.push(C.numRectAreaLights),b.push(C.numDirLightShadows),b.push(C.numPointLightShadows),b.push(C.numSpotLightShadows),b.push(C.numSpotLightShadowsWithMaps),b.push(C.shadowMapType),b.push(C.toneMapping),b.push(C.numClippingPlanes),b.push(C.numClipIntersection),b.push(C.depthPacking)}function _(b,C){a.disableAll(),C.isWebGL2&&a.enable(0),C.supportsVertexTextures&&a.enable(1),C.instancing&&a.enable(2),C.instancingColor&&a.enable(3),C.map&&a.enable(4),C.matcap&&a.enable(5),C.envMap&&a.enable(6),C.lightMap&&a.enable(7),C.aoMap&&a.enable(8),C.emissiveMap&&a.enable(9),C.bumpMap&&a.enable(10),C.normalMap&&a.enable(11),C.objectSpaceNormalMap&&a.enable(12),C.tangentSpaceNormalMap&&a.enable(13),C.clearcoat&&a.enable(14),C.clearcoatMap&&a.enable(15),C.clearcoatRoughnessMap&&a.enable(16),C.clearcoatNormalMap&&a.enable(17),C.iridescence&&a.enable(18),C.iridescenceMap&&a.enable(19),C.iridescenceThicknessMap&&a.enable(20),C.displacementMap&&a.enable(21),C.specularMap&&a.enable(22),C.roughnessMap&&a.enable(23),C.metalnessMap&&a.enable(24),C.gradientMap&&a.enable(25),C.alphaMap&&a.enable(26),C.alphaTest&&a.enable(27),C.vertexColors&&a.enable(28),C.vertexAlphas&&a.enable(29),C.vertexUvs&&a.enable(30),C.vertexTangents&&a.enable(31),C.uvsVertexOnly&&a.enable(32),b.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.skinning&&a.enable(4),C.morphTargets&&a.enable(5),C.morphNormals&&a.enable(6),C.morphColors&&a.enable(7),C.premultipliedAlpha&&a.enable(8),C.shadowMapEnabled&&a.enable(9),C.useLegacyLights&&a.enable(10),C.doubleSided&&a.enable(11),C.flipSided&&a.enable(12),C.useDepthPacking&&a.enable(13),C.dithering&&a.enable(14),C.specularIntensityMap&&a.enable(15),C.specularColorMap&&a.enable(16),C.transmission&&a.enable(17),C.transmissionMap&&a.enable(18),C.thicknessMap&&a.enable(19),C.sheen&&a.enable(20),C.sheenColorMap&&a.enable(21),C.sheenRoughnessMap&&a.enable(22),C.decodeVideoTexture&&a.enable(23),C.opaque&&a.enable(24),b.push(a.mask)}function w(b){const C=y[b.type];let T;if(C){const I=So[C];T=SA.clone(I.uniforms)}else T=b.uniforms;return T}function A(b,C){let T;for(let I=0,D=u.length;I<D;I++){const z=u[I];if(z.cacheKey===C){T=z,++T.usedTimes;break}}return T===void 0&&(T=new DV(n,C,b,s),u.push(T)),T}function R(b){if(--b.usedTimes===0){const C=u.indexOf(b);u[C]=u[u.length-1],u.pop(),b.destroy()}}function M(b){l.remove(b)}function P(){l.dispose()}return{getParameters:g,getProgramCacheKey:v,getUniforms:w,acquireProgram:A,releaseProgram:R,releaseShaderCache:M,programs:u,dispose:P}}function UV(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function NV(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function n3(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function r3(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(f,h,m,y,g,v){let x=n[e];return x===void 0?(x={id:f.id,object:f,geometry:h,material:m,groupOrder:y,renderOrder:f.renderOrder,z:g,group:v},n[e]=x):(x.id=f.id,x.object=f,x.geometry=h,x.material=m,x.groupOrder=y,x.renderOrder=f.renderOrder,x.z=g,x.group=v),e++,x}function a(f,h,m,y,g,v){const x=o(f,h,m,y,g,v);m.transmission>0?r.push(x):m.transparent===!0?i.push(x):t.push(x)}function l(f,h,m,y,g,v){const x=o(f,h,m,y,g,v);m.transmission>0?r.unshift(x):m.transparent===!0?i.unshift(x):t.unshift(x)}function u(f,h){t.length>1&&t.sort(f||NV),r.length>1&&r.sort(h||n3),i.length>1&&i.sort(h||n3)}function c(){for(let f=e,h=n.length;f<h;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:c,sort:u}}function zV(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new r3,n.set(r,[o])):i>=s.length?(o=new r3,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function GV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new V,color:new qe};break;case"SpotLight":t={position:new V,direction:new V,color:new qe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new V,color:new qe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new V,skyColor:new qe,groundColor:new qe};break;case"RectAreaLight":t={color:new qe,position:new V,halfWidth:new V,halfHeight:new V};break}return n[e.id]=t,t}}}function HV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let VV=0;function WV(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function jV(n,e){const t=new GV,r=HV(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)i.probe.push(new V);const s=new V,o=new bt,a=new bt;function l(c,f){let h=0,m=0,y=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let g=0,v=0,x=0,_=0,w=0,A=0,R=0,M=0,P=0,b=0;c.sort(WV);const C=f===!0?Math.PI:1;for(let I=0,D=c.length;I<D;I++){const z=c[I],N=z.color,J=z.intensity,Q=z.distance,re=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)h+=N.r*J*C,m+=N.g*J*C,y+=N.b*J*C;else if(z.isLightProbe)for(let G=0;G<9;G++)i.probe[G].addScaledVector(z.sh.coefficients[G],J);else if(z.isDirectionalLight){const G=t.get(z);if(G.color.copy(z.color).multiplyScalar(z.intensity*C),z.castShadow){const j=z.shadow,Y=r.get(z);Y.shadowBias=j.bias,Y.shadowNormalBias=j.normalBias,Y.shadowRadius=j.radius,Y.shadowMapSize=j.mapSize,i.directionalShadow[g]=Y,i.directionalShadowMap[g]=re,i.directionalShadowMatrix[g]=z.shadow.matrix,A++}i.directional[g]=G,g++}else if(z.isSpotLight){const G=t.get(z);G.position.setFromMatrixPosition(z.matrixWorld),G.color.copy(N).multiplyScalar(J*C),G.distance=Q,G.coneCos=Math.cos(z.angle),G.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),G.decay=z.decay,i.spot[x]=G;const j=z.shadow;if(z.map&&(i.spotLightMap[P]=z.map,P++,j.updateMatrices(z),z.castShadow&&b++),i.spotLightMatrix[x]=j.matrix,z.castShadow){const Y=r.get(z);Y.shadowBias=j.bias,Y.shadowNormalBias=j.normalBias,Y.shadowRadius=j.radius,Y.shadowMapSize=j.mapSize,i.spotShadow[x]=Y,i.spotShadowMap[x]=re,M++}x++}else if(z.isRectAreaLight){const G=t.get(z);G.color.copy(N).multiplyScalar(J),G.halfWidth.set(z.width*.5,0,0),G.halfHeight.set(0,z.height*.5,0),i.rectArea[_]=G,_++}else if(z.isPointLight){const G=t.get(z);if(G.color.copy(z.color).multiplyScalar(z.intensity*C),G.distance=z.distance,G.decay=z.decay,z.castShadow){const j=z.shadow,Y=r.get(z);Y.shadowBias=j.bias,Y.shadowNormalBias=j.normalBias,Y.shadowRadius=j.radius,Y.shadowMapSize=j.mapSize,Y.shadowCameraNear=j.camera.near,Y.shadowCameraFar=j.camera.far,i.pointShadow[v]=Y,i.pointShadowMap[v]=re,i.pointShadowMatrix[v]=z.shadow.matrix,R++}i.point[v]=G,v++}else if(z.isHemisphereLight){const G=t.get(z);G.skyColor.copy(z.color).multiplyScalar(J*C),G.groundColor.copy(z.groundColor).multiplyScalar(J*C),i.hemi[w]=G,w++}}_>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ot.LTC_FLOAT_1,i.rectAreaLTC2=ot.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=ot.LTC_HALF_1,i.rectAreaLTC2=ot.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=m,i.ambient[2]=y;const T=i.hash;(T.directionalLength!==g||T.pointLength!==v||T.spotLength!==x||T.rectAreaLength!==_||T.hemiLength!==w||T.numDirectionalShadows!==A||T.numPointShadows!==R||T.numSpotShadows!==M||T.numSpotMaps!==P)&&(i.directional.length=g,i.spot.length=x,i.rectArea.length=_,i.point.length=v,i.hemi.length=w,i.directionalShadow.length=A,i.directionalShadowMap.length=A,i.pointShadow.length=R,i.pointShadowMap.length=R,i.spotShadow.length=M,i.spotShadowMap.length=M,i.directionalShadowMatrix.length=A,i.pointShadowMatrix.length=R,i.spotLightMatrix.length=M+P-b,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=b,T.directionalLength=g,T.pointLength=v,T.spotLength=x,T.rectAreaLength=_,T.hemiLength=w,T.numDirectionalShadows=A,T.numPointShadows=R,T.numSpotShadows=M,T.numSpotMaps=P,i.version=VV++)}function u(c,f){let h=0,m=0,y=0,g=0,v=0;const x=f.matrixWorldInverse;for(let _=0,w=c.length;_<w;_++){const A=c[_];if(A.isDirectionalLight){const R=i.directional[h];R.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),R.direction.sub(s),R.direction.transformDirection(x),h++}else if(A.isSpotLight){const R=i.spot[y];R.position.setFromMatrixPosition(A.matrixWorld),R.position.applyMatrix4(x),R.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),R.direction.sub(s),R.direction.transformDirection(x),y++}else if(A.isRectAreaLight){const R=i.rectArea[g];R.position.setFromMatrixPosition(A.matrixWorld),R.position.applyMatrix4(x),a.identity(),o.copy(A.matrixWorld),o.premultiply(x),a.extractRotation(o),R.halfWidth.set(A.width*.5,0,0),R.halfHeight.set(0,A.height*.5,0),R.halfWidth.applyMatrix4(a),R.halfHeight.applyMatrix4(a),g++}else if(A.isPointLight){const R=i.point[m];R.position.setFromMatrixPosition(A.matrixWorld),R.position.applyMatrix4(x),m++}else if(A.isHemisphereLight){const R=i.hemi[v];R.direction.setFromMatrixPosition(A.matrixWorld),R.direction.transformDirection(x),v++}}}return{setup:l,setupView:u,state:i}}function i3(n,e){const t=new jV(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(f){r.push(f)}function a(f){i.push(f)}function l(f){t.setup(r,f)}function u(f){t.setupView(r,f)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function $V(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new i3(n,e),t.set(s,[l])):o>=a.length?(l=new i3(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class d1 extends zn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=du,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class h1 extends zn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new V,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const JV=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,XV=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function KV(n,e,t){let r=new c1;const i=new De,s=new De,o=new jt,a=new d1({depthPacking:mA}),l=new h1,u={},c=t.maxTextureSize,f={[eo]:fr,[fr]:eo,[Gr]:Gr},h=new wr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new De},radius:{value:4}},vertexShader:JV,fragmentShader:XV}),m=h.clone();m.defines.HORIZONTAL_PASS=1;const y=new Lt;y.setAttribute("position",new Qt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Nn(y,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=s1,this.render=function(A,R,M){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||A.length===0)return;const P=n.getRenderTarget(),b=n.getActiveCubeFace(),C=n.getActiveMipmapLevel(),T=n.state;T.setBlending(qr),T.buffers.color.setClear(1,1,1,1),T.buffers.depth.setTest(!0),T.setScissorTest(!1);for(let I=0,D=A.length;I<D;I++){const z=A[I],N=z.shadow;if(N===void 0){console.warn("THREE.WebGLShadowMap:",z,"has no shadow.");continue}if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;i.copy(N.mapSize);const J=N.getFrameExtents();if(i.multiply(J),s.copy(N.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/J.x),i.x=s.x*J.x,N.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/J.y),i.y=s.y*J.y,N.mapSize.y=s.y)),N.map===null){const re=this.type!==ec?{minFilter:Sn,magFilter:Sn}:{};N.map=new Fn(i.x,i.y,re),N.map.texture.name=z.name+".shadowMap",N.camera.updateProjectionMatrix()}n.setRenderTarget(N.map),n.clear();const Q=N.getViewportCount();for(let re=0;re<Q;re++){const G=N.getViewport(re);o.set(s.x*G.x,s.y*G.y,s.x*G.z,s.y*G.w),T.viewport(o),N.updateMatrices(z,re),r=N.getFrustum(),w(R,M,N.camera,z,this.type)}N.isPointLightShadow!==!0&&this.type===ec&&x(N,M),N.needsUpdate=!1}v.needsUpdate=!1,n.setRenderTarget(P,b,C)};function x(A,R){const M=e.update(g);h.defines.VSM_SAMPLES!==A.blurSamples&&(h.defines.VSM_SAMPLES=A.blurSamples,m.defines.VSM_SAMPLES=A.blurSamples,h.needsUpdate=!0,m.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new Fn(i.x,i.y)),h.uniforms.shadow_pass.value=A.map.texture,h.uniforms.resolution.value=A.mapSize,h.uniforms.radius.value=A.radius,n.setRenderTarget(A.mapPass),n.clear(),n.renderBufferDirect(R,null,M,h,g,null),m.uniforms.shadow_pass.value=A.mapPass.texture,m.uniforms.resolution.value=A.mapSize,m.uniforms.radius.value=A.radius,n.setRenderTarget(A.map),n.clear(),n.renderBufferDirect(R,null,M,m,g,null)}function _(A,R,M,P,b,C){let T=null;const I=M.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(I!==void 0)T=I;else if(T=M.isPointLight===!0?l:a,n.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const D=T.uuid,z=R.uuid;let N=u[D];N===void 0&&(N={},u[D]=N);let J=N[z];J===void 0&&(J=T.clone(),N[z]=J),T=J}return T.visible=R.visible,T.wireframe=R.wireframe,C===ec?T.side=R.shadowSide!==null?R.shadowSide:R.side:T.side=R.shadowSide!==null?R.shadowSide:f[R.side],T.alphaMap=R.alphaMap,T.alphaTest=R.alphaTest,T.map=R.map,T.clipShadows=R.clipShadows,T.clippingPlanes=R.clippingPlanes,T.clipIntersection=R.clipIntersection,T.displacementMap=R.displacementMap,T.displacementScale=R.displacementScale,T.displacementBias=R.displacementBias,T.wireframeLinewidth=R.wireframeLinewidth,T.linewidth=R.linewidth,M.isPointLight===!0&&T.isMeshDistanceMaterial===!0&&(T.referencePosition.setFromMatrixPosition(M.matrixWorld),T.nearDistance=P,T.farDistance=b),T}function w(A,R,M,P,b){if(A.visible===!1)return;if(A.layers.test(R.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&b===ec)&&(!A.frustumCulled||r.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,A.matrixWorld);const I=e.update(A),D=A.material;if(Array.isArray(D)){const z=I.groups;for(let N=0,J=z.length;N<J;N++){const Q=z[N],re=D[Q.materialIndex];if(re&&re.visible){const G=_(A,re,P,M.near,M.far,b);n.renderBufferDirect(M,null,I,G,A,Q)}}}else if(D.visible){const z=_(A,D,P,M.near,M.far,b);n.renderBufferDirect(M,null,I,z,A,null)}}const T=A.children;for(let I=0,D=T.length;I<D;I++)w(T[I],R,M,P,b)}}function YV(n,e,t){const r=t.isWebGL2;function i(){let ue=!1;const de=new jt;let He=null;const st=new jt(0,0,0,0);return{setMask:function(lt){He!==lt&&!ue&&(n.colorMask(lt,lt,lt,lt),He=lt)},setLocked:function(lt){ue=lt},setClear:function(lt,Gt,Yt,cn,$t){$t===!0&&(lt*=cn,Gt*=cn,Yt*=cn),de.set(lt,Gt,Yt,cn),st.equals(de)===!1&&(n.clearColor(lt,Gt,Yt,cn),st.copy(de))},reset:function(){ue=!1,He=null,st.set(-1,0,0,0)}}}function s(){let ue=!1,de=null,He=null,st=null;return{setTest:function(lt){lt?pe(2929):oe(2929)},setMask:function(lt){de!==lt&&!ue&&(n.depthMask(lt),de=lt)},setFunc:function(lt){if(He!==lt){switch(lt){case XL:n.depthFunc(512);break;case KL:n.depthFunc(519);break;case YL:n.depthFunc(513);break;case xy:n.depthFunc(515);break;case QL:n.depthFunc(514);break;case ZL:n.depthFunc(518);break;case qL:n.depthFunc(516);break;case e4:n.depthFunc(517);break;default:n.depthFunc(515)}He=lt}},setLocked:function(lt){ue=lt},setClear:function(lt){st!==lt&&(n.clearDepth(lt),st=lt)},reset:function(){ue=!1,de=null,He=null,st=null}}}function o(){let ue=!1,de=null,He=null,st=null,lt=null,Gt=null,Yt=null,cn=null,$t=null;return{setTest:function(hn){ue||(hn?pe(2960):oe(2960))},setMask:function(hn){de!==hn&&!ue&&(n.stencilMask(hn),de=hn)},setFunc:function(hn,Ht,Xt){(He!==hn||st!==Ht||lt!==Xt)&&(n.stencilFunc(hn,Ht,Xt),He=hn,st=Ht,lt=Xt)},setOp:function(hn,Ht,Xt){(Gt!==hn||Yt!==Ht||cn!==Xt)&&(n.stencilOp(hn,Ht,Xt),Gt=hn,Yt=Ht,cn=Xt)},setLocked:function(hn){ue=hn},setClear:function(hn){$t!==hn&&(n.clearStencil(hn),$t=hn)},reset:function(){ue=!1,de=null,He=null,st=null,lt=null,Gt=null,Yt=null,cn=null,$t=null}}}const a=new i,l=new s,u=new o,c=new WeakMap,f=new WeakMap;let h={},m={},y=new WeakMap,g=[],v=null,x=!1,_=null,w=null,A=null,R=null,M=null,P=null,b=null,C=!1,T=null,I=null,D=null,z=null,N=null;const J=n.getParameter(35661);let Q=!1,re=0;const G=n.getParameter(7938);G.indexOf("WebGL")!==-1?(re=parseFloat(/^WebGL (\d)/.exec(G)[1]),Q=re>=1):G.indexOf("OpenGL ES")!==-1&&(re=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),Q=re>=2);let j=null,Y={};const X=n.getParameter(3088),K=n.getParameter(2978),ce=new jt().fromArray(X),he=new jt().fromArray(K);function te(ue,de,He){const st=new Uint8Array(4),lt=n.createTexture();n.bindTexture(ue,lt),n.texParameteri(ue,10241,9728),n.texParameteri(ue,10240,9728);for(let Gt=0;Gt<He;Gt++)n.texImage2D(de+Gt,0,6408,1,1,0,6408,5121,st);return lt}const me={};me[3553]=te(3553,3553,1),me[34067]=te(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),pe(2929),l.setFunc(xy),Ce(!1),Ke(MS),pe(2884),ge(qr);function pe(ue){h[ue]!==!0&&(n.enable(ue),h[ue]=!0)}function oe(ue){h[ue]!==!1&&(n.disable(ue),h[ue]=!1)}function U(ue,de){return m[ue]!==de?(n.bindFramebuffer(ue,de),m[ue]=de,r&&(ue===36009&&(m[36160]=de),ue===36160&&(m[36009]=de)),!0):!1}function W(ue,de){let He=g,st=!1;if(ue)if(He=y.get(de),He===void 0&&(He=[],y.set(de,He)),ue.isWebGLMultipleRenderTargets){const lt=ue.texture;if(He.length!==lt.length||He[0]!==36064){for(let Gt=0,Yt=lt.length;Gt<Yt;Gt++)He[Gt]=36064+Gt;He.length=lt.length,st=!0}}else He[0]!==36064&&(He[0]=36064,st=!0);else He[0]!==1029&&(He[0]=1029,st=!0);st&&(t.isWebGL2?n.drawBuffers(He):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(He))}function Z(ue){return v!==ue?(n.useProgram(ue),v=ue,!0):!1}const q={[Ku]:32774,[OL]:32778,[UL]:32779};if(r)q[TS]=32775,q[RS]=32776;else{const ue=e.get("EXT_blend_minmax");ue!==null&&(q[TS]=ue.MIN_EXT,q[RS]=ue.MAX_EXT)}const se={[NL]:0,[zL]:1,[GL]:768,[lA]:770,[JL]:776,[jL]:774,[VL]:772,[HL]:769,[uA]:771,[$L]:775,[WL]:773};function ge(ue,de,He,st,lt,Gt,Yt,cn){if(ue===qr){x===!0&&(oe(3042),x=!1);return}if(x===!1&&(pe(3042),x=!0),ue!==kL){if(ue!==_||cn!==C){if((w!==Ku||M!==Ku)&&(n.blendEquation(32774),w=Ku,M=Ku),cn)switch(ue){case uc:n.blendFuncSeparate(1,771,1,771);break;case _y:n.blendFunc(1,1);break;case ES:n.blendFuncSeparate(0,769,0,1);break;case CS:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}else switch(ue){case uc:n.blendFuncSeparate(770,771,1,771);break;case _y:n.blendFunc(770,1);break;case ES:n.blendFuncSeparate(0,769,0,1);break;case CS:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}A=null,R=null,P=null,b=null,_=ue,C=cn}return}lt=lt||de,Gt=Gt||He,Yt=Yt||st,(de!==w||lt!==M)&&(n.blendEquationSeparate(q[de],q[lt]),w=de,M=lt),(He!==A||st!==R||Gt!==P||Yt!==b)&&(n.blendFuncSeparate(se[He],se[st],se[Gt],se[Yt]),A=He,R=st,P=Gt,b=Yt),_=ue,C=!1}function Me(ue,de){ue.side===Gr?oe(2884):pe(2884);let He=ue.side===fr;de&&(He=!He),Ce(He),ue.blending===uc&&ue.transparent===!1?ge(qr):ge(ue.blending,ue.blendEquation,ue.blendSrc,ue.blendDst,ue.blendEquationAlpha,ue.blendSrcAlpha,ue.blendDstAlpha,ue.premultipliedAlpha),l.setFunc(ue.depthFunc),l.setTest(ue.depthTest),l.setMask(ue.depthWrite),a.setMask(ue.colorWrite);const st=ue.stencilWrite;u.setTest(st),st&&(u.setMask(ue.stencilWriteMask),u.setFunc(ue.stencilFunc,ue.stencilRef,ue.stencilFuncMask),u.setOp(ue.stencilFail,ue.stencilZFail,ue.stencilZPass)),Oe(ue.polygonOffset,ue.polygonOffsetFactor,ue.polygonOffsetUnits),ue.alphaToCoverage===!0?pe(32926):oe(32926)}function Ce(ue){T!==ue&&(ue?n.frontFace(2304):n.frontFace(2305),T=ue)}function Ke(ue){ue!==DL?(pe(2884),ue!==I&&(ue===MS?n.cullFace(1029):ue===LL?n.cullFace(1028):n.cullFace(1032))):oe(2884),I=ue}function Re(ue){ue!==D&&(Q&&n.lineWidth(ue),D=ue)}function Oe(ue,de,He){ue?(pe(32823),(z!==de||N!==He)&&(n.polygonOffset(de,He),z=de,N=He)):oe(32823)}function ze(ue){ue?pe(3089):oe(3089)}function Ee(ue){ue===void 0&&(ue=33984+J-1),j!==ue&&(n.activeTexture(ue),j=ue)}function $(ue,de,He){He===void 0&&(j===null?He=33984+J-1:He=j);let st=Y[He];st===void 0&&(st={type:void 0,texture:void 0},Y[He]=st),(st.type!==ue||st.texture!==de)&&(j!==He&&(n.activeTexture(He),j=He),n.bindTexture(ue,de||me[ue]),st.type=ue,st.texture=de)}function O(){const ue=Y[j];ue!==void 0&&ue.type!==void 0&&(n.bindTexture(ue.type,null),ue.type=void 0,ue.texture=void 0)}function ae(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ae(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function ke(){try{n.texSubImage2D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ue(){try{n.texSubImage3D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function je(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ne(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Be(){try{n.texStorage2D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function nt(){try{n.texStorage3D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function $e(){try{n.texImage2D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function et(){try{n.texImage3D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ge(ue){ce.equals(ue)===!1&&(n.scissor(ue.x,ue.y,ue.z,ue.w),ce.copy(ue))}function Ve(ue){he.equals(ue)===!1&&(n.viewport(ue.x,ue.y,ue.z,ue.w),he.copy(ue))}function rt(ue,de){let He=f.get(de);He===void 0&&(He=new WeakMap,f.set(de,He));let st=He.get(ue);st===void 0&&(st=n.getUniformBlockIndex(de,ue.name),He.set(ue,st))}function ft(ue,de){const st=f.get(de).get(ue);c.get(de)!==st&&(n.uniformBlockBinding(de,st,ue.__bindingPointIndex),c.set(de,st))}function yt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},j=null,Y={},m={},y=new WeakMap,g=[],v=null,x=!1,_=null,w=null,A=null,R=null,M=null,P=null,b=null,C=!1,T=null,I=null,D=null,z=null,N=null,ce.set(0,0,n.canvas.width,n.canvas.height),he.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:pe,disable:oe,bindFramebuffer:U,drawBuffers:W,useProgram:Z,setBlending:ge,setMaterial:Me,setFlipSided:Ce,setCullFace:Ke,setLineWidth:Re,setPolygonOffset:Oe,setScissorTest:ze,activeTexture:Ee,bindTexture:$,unbindTexture:O,compressedTexImage2D:ae,compressedTexImage3D:Ae,texImage2D:$e,texImage3D:et,updateUBOMapping:rt,uniformBlockBinding:ft,texStorage2D:Be,texStorage3D:nt,texSubImage2D:ke,texSubImage3D:Ue,compressedTexSubImage2D:je,compressedTexSubImage3D:Ne,scissor:Ge,viewport:Ve,reset:yt}}function QV(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,f=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),y=new WeakMap;let g;const v=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _($,O){return x?new OffscreenCanvas($,O):vm("canvas")}function w($,O,ae,Ae){let ke=1;if(($.width>Ae||$.height>Ae)&&(ke=Ae/Math.max($.width,$.height)),ke<1||O===!0)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap){const Ue=O?T4:Math.floor,je=Ue(ke*$.width),Ne=Ue(ke*$.height);g===void 0&&(g=_(je,Ne));const Be=ae?_(je,Ne):g;return Be.width=je,Be.height=Ne,Be.getContext("2d").drawImage($,0,0,je,Ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+$.width+"x"+$.height+") to ("+je+"x"+Ne+")."),Be}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+$.width+"x"+$.height+")."),$;return $}function A($){return t2($.width)&&t2($.height)}function R($){return a?!1:$.wrapS!==Kr||$.wrapT!==Kr||$.minFilter!==Sn&&$.minFilter!==rn}function M($,O){return $.generateMipmaps&&O&&$.minFilter!==Sn&&$.minFilter!==rn}function P($){n.generateMipmap($)}function b($,O,ae,Ae,ke=!1){if(a===!1)return O;if($!==null){if(n[$]!==void 0)return n[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let Ue=O;return O===6403&&(ae===5126&&(Ue=33326),ae===5131&&(Ue=33325),ae===5121&&(Ue=33321)),O===33319&&(ae===5126&&(Ue=33328),ae===5131&&(Ue=33327),ae===5121&&(Ue=33323)),O===6408&&(ae===5126&&(Ue=34836),ae===5131&&(Ue=34842),ae===5121&&(Ue=Ae===It&&ke===!1?35907:32856),ae===32819&&(Ue=32854),ae===32820&&(Ue=32855)),(Ue===33325||Ue===33326||Ue===33327||Ue===33328||Ue===34842||Ue===34836)&&e.get("EXT_color_buffer_float"),Ue}function C($,O,ae){return M($,ae)===!0||$.isFramebufferTexture&&$.minFilter!==Sn&&$.minFilter!==rn?Math.log2(Math.max(O.width,O.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?O.mipmaps.length:1}function T($){return $===Sn||$===hm||$===rd?9728:9729}function I($){const O=$.target;O.removeEventListener("dispose",I),z(O),O.isVideoTexture&&y.delete(O)}function D($){const O=$.target;O.removeEventListener("dispose",D),J(O)}function z($){const O=r.get($);if(O.__webglInit===void 0)return;const ae=$.source,Ae=v.get(ae);if(Ae){const ke=Ae[O.__cacheKey];ke.usedTimes--,ke.usedTimes===0&&N($),Object.keys(Ae).length===0&&v.delete(ae)}r.remove($)}function N($){const O=r.get($);n.deleteTexture(O.__webglTexture);const ae=$.source,Ae=v.get(ae);delete Ae[O.__cacheKey],o.memory.textures--}function J($){const O=$.texture,ae=r.get($),Ae=r.get(O);if(Ae.__webglTexture!==void 0&&(n.deleteTexture(Ae.__webglTexture),o.memory.textures--),$.depthTexture&&$.depthTexture.dispose(),$.isWebGLCubeRenderTarget)for(let ke=0;ke<6;ke++)n.deleteFramebuffer(ae.__webglFramebuffer[ke]),ae.__webglDepthbuffer&&n.deleteRenderbuffer(ae.__webglDepthbuffer[ke]);else{if(n.deleteFramebuffer(ae.__webglFramebuffer),ae.__webglDepthbuffer&&n.deleteRenderbuffer(ae.__webglDepthbuffer),ae.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ae.__webglMultisampledFramebuffer),ae.__webglColorRenderbuffer)for(let ke=0;ke<ae.__webglColorRenderbuffer.length;ke++)ae.__webglColorRenderbuffer[ke]&&n.deleteRenderbuffer(ae.__webglColorRenderbuffer[ke]);ae.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ae.__webglDepthRenderbuffer)}if($.isWebGLMultipleRenderTargets)for(let ke=0,Ue=O.length;ke<Ue;ke++){const je=r.get(O[ke]);je.__webglTexture&&(n.deleteTexture(je.__webglTexture),o.memory.textures--),r.remove(O[ke])}r.remove(O),r.remove($)}let Q=0;function re(){Q=0}function G(){const $=Q;return $>=l&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+l),Q+=1,$}function j($){const O=[];return O.push($.wrapS),O.push($.wrapT),O.push($.wrapR||0),O.push($.magFilter),O.push($.minFilter),O.push($.anisotropy),O.push($.internalFormat),O.push($.format),O.push($.type),O.push($.generateMipmaps),O.push($.premultiplyAlpha),O.push($.flipY),O.push($.unpackAlignment),O.push($.encoding),O.join()}function Y($,O){const ae=r.get($);if($.isVideoTexture&&ze($),$.isRenderTargetTexture===!1&&$.version>0&&ae.__version!==$.version){const Ae=$.image;if(Ae===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ae.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{oe(ae,$,O);return}}t.bindTexture(3553,ae.__webglTexture,33984+O)}function X($,O){const ae=r.get($);if($.version>0&&ae.__version!==$.version){oe(ae,$,O);return}t.bindTexture(35866,ae.__webglTexture,33984+O)}function K($,O){const ae=r.get($);if($.version>0&&ae.__version!==$.version){oe(ae,$,O);return}t.bindTexture(32879,ae.__webglTexture,33984+O)}function ce($,O){const ae=r.get($);if($.version>0&&ae.__version!==$.version){U(ae,$,O);return}t.bindTexture(34067,ae.__webglTexture,33984+O)}const he={[nu]:10497,[Kr]:33071,[xd]:33648},te={[Sn]:9728,[hm]:9984,[rd]:9986,[rn]:9729,[a1]:9985,[Ro]:9987};function me($,O,ae){if(ae?(n.texParameteri($,10242,he[O.wrapS]),n.texParameteri($,10243,he[O.wrapT]),($===32879||$===35866)&&n.texParameteri($,32882,he[O.wrapR]),n.texParameteri($,10240,te[O.magFilter]),n.texParameteri($,10241,te[O.minFilter])):(n.texParameteri($,10242,33071),n.texParameteri($,10243,33071),($===32879||$===35866)&&n.texParameteri($,32882,33071),(O.wrapS!==Kr||O.wrapT!==Kr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri($,10240,T(O.magFilter)),n.texParameteri($,10241,T(O.minFilter)),O.minFilter!==Sn&&O.minFilter!==rn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Ae=e.get("EXT_texture_filter_anisotropic");if(O.magFilter===Sn||O.minFilter!==rd&&O.minFilter!==Ro||O.type===Yr&&e.has("OES_texture_float_linear")===!1||a===!1&&O.type===Qr&&e.has("OES_texture_half_float_linear")===!1)return;(O.anisotropy>1||r.get(O).__currentAnisotropy)&&(n.texParameterf($,Ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,i.getMaxAnisotropy())),r.get(O).__currentAnisotropy=O.anisotropy)}}function pe($,O){let ae=!1;$.__webglInit===void 0&&($.__webglInit=!0,O.addEventListener("dispose",I));const Ae=O.source;let ke=v.get(Ae);ke===void 0&&(ke={},v.set(Ae,ke));const Ue=j(O);if(Ue!==$.__cacheKey){ke[Ue]===void 0&&(ke[Ue]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ae=!0),ke[Ue].usedTimes++;const je=ke[$.__cacheKey];je!==void 0&&(ke[$.__cacheKey].usedTimes--,je.usedTimes===0&&N(O)),$.__cacheKey=Ue,$.__webglTexture=ke[Ue].texture}return ae}function oe($,O,ae){let Ae=3553;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(Ae=35866),O.isData3DTexture&&(Ae=32879);const ke=pe($,O),Ue=O.source;t.bindTexture(Ae,$.__webglTexture,33984+ae);const je=r.get(Ue);if(Ue.version!==je.__version||ke===!0){t.activeTexture(33984+ae),n.pixelStorei(37440,O.flipY),n.pixelStorei(37441,O.premultiplyAlpha),n.pixelStorei(3317,O.unpackAlignment),n.pixelStorei(37443,0);const Ne=R(O)&&A(O.image)===!1;let Be=w(O.image,Ne,!1,c);Be=Ee(O,Be);const nt=A(Be)||a,$e=s.convert(O.format,O.encoding);let et=s.convert(O.type),Ge=b(O.internalFormat,$e,et,O.encoding,O.isVideoTexture);me(Ae,O,nt);let Ve;const rt=O.mipmaps,ft=a&&O.isVideoTexture!==!0,yt=je.__version===void 0||ke===!0,ue=C(O,Be,nt);if(O.isDepthTexture)Ge=6402,a?O.type===Yr?Ge=36012:O.type===La?Ge=33190:O.type===Jl?Ge=35056:Ge=33189:O.type===Yr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),O.format===Xl&&Ge===6402&&O.type!==fA&&O.type!==La&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),O.type=La,et=s.convert(O.type)),O.format===ru&&Ge===6402&&(Ge=34041,O.type!==Jl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),O.type=Jl,et=s.convert(O.type))),yt&&(ft?t.texStorage2D(3553,1,Ge,Be.width,Be.height):t.texImage2D(3553,0,Ge,Be.width,Be.height,0,$e,et,null));else if(O.isDataTexture)if(rt.length>0&&nt){ft&&yt&&t.texStorage2D(3553,ue,Ge,rt[0].width,rt[0].height);for(let de=0,He=rt.length;de<He;de++)Ve=rt[de],ft?t.texSubImage2D(3553,de,0,0,Ve.width,Ve.height,$e,et,Ve.data):t.texImage2D(3553,de,Ge,Ve.width,Ve.height,0,$e,et,Ve.data);O.generateMipmaps=!1}else ft?(yt&&t.texStorage2D(3553,ue,Ge,Be.width,Be.height),t.texSubImage2D(3553,0,0,0,Be.width,Be.height,$e,et,Be.data)):t.texImage2D(3553,0,Ge,Be.width,Be.height,0,$e,et,Be.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){ft&&yt&&t.texStorage3D(35866,ue,Ge,rt[0].width,rt[0].height,Be.depth);for(let de=0,He=rt.length;de<He;de++)Ve=rt[de],O.format!==Ri?$e!==null?ft?t.compressedTexSubImage3D(35866,de,0,0,0,Ve.width,Ve.height,Be.depth,$e,Ve.data,0,0):t.compressedTexImage3D(35866,de,Ge,Ve.width,Ve.height,Be.depth,0,Ve.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ft?t.texSubImage3D(35866,de,0,0,0,Ve.width,Ve.height,Be.depth,$e,et,Ve.data):t.texImage3D(35866,de,Ge,Ve.width,Ve.height,Be.depth,0,$e,et,Ve.data)}else{ft&&yt&&t.texStorage2D(3553,ue,Ge,rt[0].width,rt[0].height);for(let de=0,He=rt.length;de<He;de++)Ve=rt[de],O.format!==Ri?$e!==null?ft?t.compressedTexSubImage2D(3553,de,0,0,Ve.width,Ve.height,$e,Ve.data):t.compressedTexImage2D(3553,de,Ge,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ft?t.texSubImage2D(3553,de,0,0,Ve.width,Ve.height,$e,et,Ve.data):t.texImage2D(3553,de,Ge,Ve.width,Ve.height,0,$e,et,Ve.data)}else if(O.isDataArrayTexture)ft?(yt&&t.texStorage3D(35866,ue,Ge,Be.width,Be.height,Be.depth),t.texSubImage3D(35866,0,0,0,0,Be.width,Be.height,Be.depth,$e,et,Be.data)):t.texImage3D(35866,0,Ge,Be.width,Be.height,Be.depth,0,$e,et,Be.data);else if(O.isData3DTexture)ft?(yt&&t.texStorage3D(32879,ue,Ge,Be.width,Be.height,Be.depth),t.texSubImage3D(32879,0,0,0,0,Be.width,Be.height,Be.depth,$e,et,Be.data)):t.texImage3D(32879,0,Ge,Be.width,Be.height,Be.depth,0,$e,et,Be.data);else if(O.isFramebufferTexture){if(yt)if(ft)t.texStorage2D(3553,ue,Ge,Be.width,Be.height);else{let de=Be.width,He=Be.height;for(let st=0;st<ue;st++)t.texImage2D(3553,st,Ge,de,He,0,$e,et,null),de>>=1,He>>=1}}else if(rt.length>0&&nt){ft&&yt&&t.texStorage2D(3553,ue,Ge,rt[0].width,rt[0].height);for(let de=0,He=rt.length;de<He;de++)Ve=rt[de],ft?t.texSubImage2D(3553,de,0,0,$e,et,Ve):t.texImage2D(3553,de,Ge,$e,et,Ve);O.generateMipmaps=!1}else ft?(yt&&t.texStorage2D(3553,ue,Ge,Be.width,Be.height),t.texSubImage2D(3553,0,0,0,$e,et,Be)):t.texImage2D(3553,0,Ge,$e,et,Be);M(O,nt)&&P(Ae),je.__version=Ue.version,O.onUpdate&&O.onUpdate(O)}$.__version=O.version}function U($,O,ae){if(O.image.length!==6)return;const Ae=pe($,O),ke=O.source;t.bindTexture(34067,$.__webglTexture,33984+ae);const Ue=r.get(ke);if(ke.version!==Ue.__version||Ae===!0){t.activeTexture(33984+ae),n.pixelStorei(37440,O.flipY),n.pixelStorei(37441,O.premultiplyAlpha),n.pixelStorei(3317,O.unpackAlignment),n.pixelStorei(37443,0);const je=O.isCompressedTexture||O.image[0].isCompressedTexture,Ne=O.image[0]&&O.image[0].isDataTexture,Be=[];for(let de=0;de<6;de++)!je&&!Ne?Be[de]=w(O.image[de],!1,!0,u):Be[de]=Ne?O.image[de].image:O.image[de],Be[de]=Ee(O,Be[de]);const nt=Be[0],$e=A(nt)||a,et=s.convert(O.format,O.encoding),Ge=s.convert(O.type),Ve=b(O.internalFormat,et,Ge,O.encoding),rt=a&&O.isVideoTexture!==!0,ft=Ue.__version===void 0||Ae===!0;let yt=C(O,nt,$e);me(34067,O,$e);let ue;if(je){rt&&ft&&t.texStorage2D(34067,yt,Ve,nt.width,nt.height);for(let de=0;de<6;de++){ue=Be[de].mipmaps;for(let He=0;He<ue.length;He++){const st=ue[He];O.format!==Ri?et!==null?rt?t.compressedTexSubImage2D(34069+de,He,0,0,st.width,st.height,et,st.data):t.compressedTexImage2D(34069+de,He,Ve,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):rt?t.texSubImage2D(34069+de,He,0,0,st.width,st.height,et,Ge,st.data):t.texImage2D(34069+de,He,Ve,st.width,st.height,0,et,Ge,st.data)}}}else{ue=O.mipmaps,rt&&ft&&(ue.length>0&&yt++,t.texStorage2D(34067,yt,Ve,Be[0].width,Be[0].height));for(let de=0;de<6;de++)if(Ne){rt?t.texSubImage2D(34069+de,0,0,0,Be[de].width,Be[de].height,et,Ge,Be[de].data):t.texImage2D(34069+de,0,Ve,Be[de].width,Be[de].height,0,et,Ge,Be[de].data);for(let He=0;He<ue.length;He++){const lt=ue[He].image[de].image;rt?t.texSubImage2D(34069+de,He+1,0,0,lt.width,lt.height,et,Ge,lt.data):t.texImage2D(34069+de,He+1,Ve,lt.width,lt.height,0,et,Ge,lt.data)}}else{rt?t.texSubImage2D(34069+de,0,0,0,et,Ge,Be[de]):t.texImage2D(34069+de,0,Ve,et,Ge,Be[de]);for(let He=0;He<ue.length;He++){const st=ue[He];rt?t.texSubImage2D(34069+de,He+1,0,0,et,Ge,st.image[de]):t.texImage2D(34069+de,He+1,Ve,et,Ge,st.image[de])}}}M(O,$e)&&P(34067),Ue.__version=ke.version,O.onUpdate&&O.onUpdate(O)}$.__version=O.version}function W($,O,ae,Ae,ke){const Ue=s.convert(ae.format,ae.encoding),je=s.convert(ae.type),Ne=b(ae.internalFormat,Ue,je,ae.encoding);r.get(O).__hasExternalTextures||(ke===32879||ke===35866?t.texImage3D(ke,0,Ne,O.width,O.height,O.depth,0,Ue,je,null):t.texImage2D(ke,0,Ne,O.width,O.height,0,Ue,je,null)),t.bindFramebuffer(36160,$),Oe(O)?h.framebufferTexture2DMultisampleEXT(36160,Ae,ke,r.get(ae).__webglTexture,0,Re(O)):(ke===3553||ke>=34069&&ke<=34074)&&n.framebufferTexture2D(36160,Ae,ke,r.get(ae).__webglTexture,0),t.bindFramebuffer(36160,null)}function Z($,O,ae){if(n.bindRenderbuffer(36161,$),O.depthBuffer&&!O.stencilBuffer){let Ae=33189;if(ae||Oe(O)){const ke=O.depthTexture;ke&&ke.isDepthTexture&&(ke.type===Yr?Ae=36012:ke.type===La&&(Ae=33190));const Ue=Re(O);Oe(O)?h.renderbufferStorageMultisampleEXT(36161,Ue,Ae,O.width,O.height):n.renderbufferStorageMultisample(36161,Ue,Ae,O.width,O.height)}else n.renderbufferStorage(36161,Ae,O.width,O.height);n.framebufferRenderbuffer(36160,36096,36161,$)}else if(O.depthBuffer&&O.stencilBuffer){const Ae=Re(O);ae&&Oe(O)===!1?n.renderbufferStorageMultisample(36161,Ae,35056,O.width,O.height):Oe(O)?h.renderbufferStorageMultisampleEXT(36161,Ae,35056,O.width,O.height):n.renderbufferStorage(36161,34041,O.width,O.height),n.framebufferRenderbuffer(36160,33306,36161,$)}else{const Ae=O.isWebGLMultipleRenderTargets===!0?O.texture:[O.texture];for(let ke=0;ke<Ae.length;ke++){const Ue=Ae[ke],je=s.convert(Ue.format,Ue.encoding),Ne=s.convert(Ue.type),Be=b(Ue.internalFormat,je,Ne,Ue.encoding),nt=Re(O);ae&&Oe(O)===!1?n.renderbufferStorageMultisample(36161,nt,Be,O.width,O.height):Oe(O)?h.renderbufferStorageMultisampleEXT(36161,nt,Be,O.width,O.height):n.renderbufferStorage(36161,Be,O.width,O.height)}}n.bindRenderbuffer(36161,null)}function q($,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,$),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(O.depthTexture).__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),Y(O.depthTexture,0);const Ae=r.get(O.depthTexture).__webglTexture,ke=Re(O);if(O.depthTexture.format===Xl)Oe(O)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ae,0,ke):n.framebufferTexture2D(36160,36096,3553,Ae,0);else if(O.depthTexture.format===ru)Oe(O)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ae,0,ke):n.framebufferTexture2D(36160,33306,3553,Ae,0);else throw new Error("Unknown depthTexture format")}function se($){const O=r.get($),ae=$.isWebGLCubeRenderTarget===!0;if($.depthTexture&&!O.__autoAllocateDepthBuffer){if(ae)throw new Error("target.depthTexture not supported in Cube render targets");q(O.__webglFramebuffer,$)}else if(ae){O.__webglDepthbuffer=[];for(let Ae=0;Ae<6;Ae++)t.bindFramebuffer(36160,O.__webglFramebuffer[Ae]),O.__webglDepthbuffer[Ae]=n.createRenderbuffer(),Z(O.__webglDepthbuffer[Ae],$,!1)}else t.bindFramebuffer(36160,O.__webglFramebuffer),O.__webglDepthbuffer=n.createRenderbuffer(),Z(O.__webglDepthbuffer,$,!1);t.bindFramebuffer(36160,null)}function ge($,O,ae){const Ae=r.get($);O!==void 0&&W(Ae.__webglFramebuffer,$,$.texture,36064,3553),ae!==void 0&&se($)}function Me($){const O=$.texture,ae=r.get($),Ae=r.get(O);$.addEventListener("dispose",D),$.isWebGLMultipleRenderTargets!==!0&&(Ae.__webglTexture===void 0&&(Ae.__webglTexture=n.createTexture()),Ae.__version=O.version,o.memory.textures++);const ke=$.isWebGLCubeRenderTarget===!0,Ue=$.isWebGLMultipleRenderTargets===!0,je=A($)||a;if(ke){ae.__webglFramebuffer=[];for(let Ne=0;Ne<6;Ne++)ae.__webglFramebuffer[Ne]=n.createFramebuffer()}else{if(ae.__webglFramebuffer=n.createFramebuffer(),Ue)if(i.drawBuffers){const Ne=$.texture;for(let Be=0,nt=Ne.length;Be<nt;Be++){const $e=r.get(Ne[Be]);$e.__webglTexture===void 0&&($e.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&$.samples>0&&Oe($)===!1){const Ne=Ue?O:[O];ae.__webglMultisampledFramebuffer=n.createFramebuffer(),ae.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ae.__webglMultisampledFramebuffer);for(let Be=0;Be<Ne.length;Be++){const nt=Ne[Be];ae.__webglColorRenderbuffer[Be]=n.createRenderbuffer(),n.bindRenderbuffer(36161,ae.__webglColorRenderbuffer[Be]);const $e=s.convert(nt.format,nt.encoding),et=s.convert(nt.type),Ge=b(nt.internalFormat,$e,et,nt.encoding,$.isXRRenderTarget===!0),Ve=Re($);n.renderbufferStorageMultisample(36161,Ve,Ge,$.width,$.height),n.framebufferRenderbuffer(36160,36064+Be,36161,ae.__webglColorRenderbuffer[Be])}n.bindRenderbuffer(36161,null),$.depthBuffer&&(ae.__webglDepthRenderbuffer=n.createRenderbuffer(),Z(ae.__webglDepthRenderbuffer,$,!0)),t.bindFramebuffer(36160,null)}}if(ke){t.bindTexture(34067,Ae.__webglTexture),me(34067,O,je);for(let Ne=0;Ne<6;Ne++)W(ae.__webglFramebuffer[Ne],$,O,36064,34069+Ne);M(O,je)&&P(34067),t.unbindTexture()}else if(Ue){const Ne=$.texture;for(let Be=0,nt=Ne.length;Be<nt;Be++){const $e=Ne[Be],et=r.get($e);t.bindTexture(3553,et.__webglTexture),me(3553,$e,je),W(ae.__webglFramebuffer,$,$e,36064+Be,3553),M($e,je)&&P(3553)}t.unbindTexture()}else{let Ne=3553;($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(a?Ne=$.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ne,Ae.__webglTexture),me(Ne,O,je),W(ae.__webglFramebuffer,$,O,36064,Ne),M(O,je)&&P(Ne),t.unbindTexture()}$.depthBuffer&&se($)}function Ce($){const O=A($)||a,ae=$.isWebGLMultipleRenderTargets===!0?$.texture:[$.texture];for(let Ae=0,ke=ae.length;Ae<ke;Ae++){const Ue=ae[Ae];if(M(Ue,O)){const je=$.isWebGLCubeRenderTarget?34067:3553,Ne=r.get(Ue).__webglTexture;t.bindTexture(je,Ne),P(je),t.unbindTexture()}}}function Ke($){if(a&&$.samples>0&&Oe($)===!1){const O=$.isWebGLMultipleRenderTargets?$.texture:[$.texture],ae=$.width,Ae=$.height;let ke=16384;const Ue=[],je=$.stencilBuffer?33306:36096,Ne=r.get($),Be=$.isWebGLMultipleRenderTargets===!0;if(Be)for(let nt=0;nt<O.length;nt++)t.bindFramebuffer(36160,Ne.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+nt,36161,null),t.bindFramebuffer(36160,Ne.__webglFramebuffer),n.framebufferTexture2D(36009,36064+nt,3553,null,0);t.bindFramebuffer(36008,Ne.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ne.__webglFramebuffer);for(let nt=0;nt<O.length;nt++){Ue.push(36064+nt),$.depthBuffer&&Ue.push(je);const $e=Ne.__ignoreDepthValues!==void 0?Ne.__ignoreDepthValues:!1;if($e===!1&&($.depthBuffer&&(ke|=256),$.stencilBuffer&&(ke|=1024)),Be&&n.framebufferRenderbuffer(36008,36064,36161,Ne.__webglColorRenderbuffer[nt]),$e===!0&&(n.invalidateFramebuffer(36008,[je]),n.invalidateFramebuffer(36009,[je])),Be){const et=r.get(O[nt]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,et,0)}n.blitFramebuffer(0,0,ae,Ae,0,0,ae,Ae,ke,9728),m&&n.invalidateFramebuffer(36008,Ue)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Be)for(let nt=0;nt<O.length;nt++){t.bindFramebuffer(36160,Ne.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+nt,36161,Ne.__webglColorRenderbuffer[nt]);const $e=r.get(O[nt]).__webglTexture;t.bindFramebuffer(36160,Ne.__webglFramebuffer),n.framebufferTexture2D(36009,36064+nt,3553,$e,0)}t.bindFramebuffer(36009,Ne.__webglMultisampledFramebuffer)}}function Re($){return Math.min(f,$.samples)}function Oe($){const O=r.get($);return a&&$.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function ze($){const O=o.render.frame;y.get($)!==O&&(y.set($,O),$.update())}function Ee($,O){const ae=$.encoding,Ae=$.format,ke=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||$.format===Sy||ae!==Po&&(ae===It?a===!1?e.has("EXT_sRGB")===!0&&Ae===Ri?($.format=Sy,$.minFilter=rn,$.generateMipmaps=!1):O=yA.sRGBToLinear(O):(Ae!==Ri||ke!==vi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ae)),O}this.allocateTextureUnit=G,this.resetTextureUnits=re,this.setTexture2D=Y,this.setTexture2DArray=X,this.setTexture3D=K,this.setTextureCube=ce,this.rebindTextures=ge,this.setupRenderTarget=Me,this.updateRenderTargetMipmap=Ce,this.updateMultisampleRenderTarget=Ke,this.setupDepthRenderbuffer=se,this.setupFrameBufferTexture=W,this.useMultisampledRTT=Oe}function U4(n,e,t){const r=t.isWebGL2;function i(s,o=null){let a;if(s===vi)return 5121;if(s===c4)return 32819;if(s===f4)return 32820;if(s===a4)return 5120;if(s===l4)return 5122;if(s===fA)return 5123;if(s===u4)return 5124;if(s===La)return 5125;if(s===Yr)return 5126;if(s===Qr)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===d4)return 6406;if(s===Ri)return 6408;if(s===h4)return 6409;if(s===p4)return 6410;if(s===Xl)return 6402;if(s===ru)return 34041;if(s===Sy)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===dA)return 6403;if(s===m4)return 36244;if(s===g4)return 33319;if(s===v4)return 33320;if(s===y4)return 36249;if(s===Dv||s===Lv||s===Fv||s===kv)if(o===It)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Dv)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Lv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Fv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===kv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Dv)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Lv)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Fv)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===kv)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===PS||s===BS||s===IS||s===DS)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===PS)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===BS)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===IS)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===DS)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===_4)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===LS||s===FS)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===LS)return o===It?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===FS)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===kS||s===OS||s===US||s===NS||s===zS||s===GS||s===HS||s===VS||s===WS||s===jS||s===$S||s===JS||s===XS||s===KS)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===kS)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===OS)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===US)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===NS)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===zS)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===GS)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===HS)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===VS)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===WS)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===jS)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===$S)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===JS)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===XS)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===KS)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Ov)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Ov)return o===It?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===x4||s===YS||s===QS||s===ZS)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Ov)return a.COMPRESSED_RED_RGTC1_EXT;if(s===YS)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===QS)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===ZS)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Jl?r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class N4 extends yr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class bo extends un{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ZV={type:"move"};class bx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new bo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new bo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new V,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new V),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new bo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new V,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new V),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const g of e.hand.values()){const v=t.getJointPose(g,r),x=this._getHandJoint(u,g);v!==null&&(x.matrix.fromArray(v.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.jointRadius=v.radius),x.visible=v!==null}const c=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],h=c.position.distanceTo(f.position),m=.02,y=.005;u.inputState.pinching&&h>m+y?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=m-y&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ZV)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new bo;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class p1 extends xn{constructor(e,t,r,i,s,o,a,l,u,c){if(c=c!==void 0?c:Xl,c!==Xl&&c!==ru)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Xl&&(r=La),r===void 0&&c===ru&&(r=Jl),super(null,i,s,o,a,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Sn,this.minFilter=l!==void 0?l:Sn,this.flipY=!1,this.generateMipmaps=!1}}class qV extends io{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,c=null,f=null,h=null,m=null,y=null;const g=t.getContextAttributes();let v=null,x=null;const _=[],w=[],A=new Set,R=new Map,M=new yr;M.layers.enable(1),M.viewport=new jt;const P=new yr;P.layers.enable(2),P.viewport=new jt;const b=[M,P],C=new N4;C.layers.enable(1),C.layers.enable(2);let T=null,I=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let ce=_[K];return ce===void 0&&(ce=new bx,_[K]=ce),ce.getTargetRaySpace()},this.getControllerGrip=function(K){let ce=_[K];return ce===void 0&&(ce=new bx,_[K]=ce),ce.getGripSpace()},this.getHand=function(K){let ce=_[K];return ce===void 0&&(ce=new bx,_[K]=ce),ce.getHandSpace()};function D(K){const ce=w.indexOf(K.inputSource);if(ce===-1)return;const he=_[ce];he!==void 0&&he.dispatchEvent({type:K.type,data:K.inputSource})}function z(){i.removeEventListener("select",D),i.removeEventListener("selectstart",D),i.removeEventListener("selectend",D),i.removeEventListener("squeeze",D),i.removeEventListener("squeezestart",D),i.removeEventListener("squeezeend",D),i.removeEventListener("end",z),i.removeEventListener("inputsourceschange",N);for(let K=0;K<_.length;K++){const ce=w[K];ce!==null&&(w[K]=null,_[K].disconnect(ce))}T=null,I=null,e.setRenderTarget(v),m=null,h=null,f=null,i=null,x=null,X.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){s=K,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(K){a=K,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(K){u=K},this.getBaseLayer=function(){return h!==null?h:m},this.getBinding=function(){return f},this.getFrame=function(){return y},this.getSession=function(){return i},this.setSession=async function(K){if(i=K,i!==null){if(v=e.getRenderTarget(),i.addEventListener("select",D),i.addEventListener("selectstart",D),i.addEventListener("selectend",D),i.addEventListener("squeeze",D),i.addEventListener("squeezestart",D),i.addEventListener("squeezeend",D),i.addEventListener("end",z),i.addEventListener("inputsourceschange",N),g.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ce={antialias:i.renderState.layers===void 0?g.antialias:!0,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,ce),i.updateRenderState({baseLayer:m}),x=new Fn(m.framebufferWidth,m.framebufferHeight,{format:Ri,type:vi,encoding:e.outputEncoding,stencilBuffer:g.stencil})}else{let ce=null,he=null,te=null;g.depth&&(te=g.stencil?35056:33190,ce=g.stencil?ru:Xl,he=g.stencil?Jl:La);const me={colorFormat:32856,depthFormat:te,scaleFactor:s};f=new XRWebGLBinding(i,t),h=f.createProjectionLayer(me),i.updateRenderState({layers:[h]}),x=new Fn(h.textureWidth,h.textureHeight,{format:Ri,type:vi,depthTexture:new p1(h.textureWidth,h.textureHeight,he,void 0,void 0,void 0,void 0,void 0,void 0,ce),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0});const pe=e.properties.get(x);pe.__ignoreDepthValues=h.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),X.setContext(i),X.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function N(K){for(let ce=0;ce<K.removed.length;ce++){const he=K.removed[ce],te=w.indexOf(he);te>=0&&(w[te]=null,_[te].disconnect(he))}for(let ce=0;ce<K.added.length;ce++){const he=K.added[ce];let te=w.indexOf(he);if(te===-1){for(let pe=0;pe<_.length;pe++)if(pe>=w.length){w.push(he),te=pe;break}else if(w[pe]===null){w[pe]=he,te=pe;break}if(te===-1)break}const me=_[te];me&&me.connect(he)}}const J=new V,Q=new V;function re(K,ce,he){J.setFromMatrixPosition(ce.matrixWorld),Q.setFromMatrixPosition(he.matrixWorld);const te=J.distanceTo(Q),me=ce.projectionMatrix.elements,pe=he.projectionMatrix.elements,oe=me[14]/(me[10]-1),U=me[14]/(me[10]+1),W=(me[9]+1)/me[5],Z=(me[9]-1)/me[5],q=(me[8]-1)/me[0],se=(pe[8]+1)/pe[0],ge=oe*q,Me=oe*se,Ce=te/(-q+se),Ke=Ce*-q;ce.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX(Ke),K.translateZ(Ce),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert();const Re=oe+Ce,Oe=U+Ce,ze=ge-Ke,Ee=Me+(te-Ke),$=W*U/Oe*Re,O=Z*U/Oe*Re;K.projectionMatrix.makePerspective(ze,Ee,$,O,Re,Oe)}function G(K,ce){ce===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices(ce.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(i===null)return;C.near=P.near=M.near=K.near,C.far=P.far=M.far=K.far,(T!==C.near||I!==C.far)&&(i.updateRenderState({depthNear:C.near,depthFar:C.far}),T=C.near,I=C.far);const ce=K.parent,he=C.cameras;G(C,ce);for(let me=0;me<he.length;me++)G(he[me],ce);C.matrixWorld.decompose(C.position,C.quaternion,C.scale),K.matrix.copy(C.matrix),K.matrix.decompose(K.position,K.quaternion,K.scale);const te=K.children;for(let me=0,pe=te.length;me<pe;me++)te[me].updateMatrixWorld(!0);he.length===2?re(C,M,P):C.projectionMatrix.copy(M.projectionMatrix)},this.getCamera=function(){return C},this.getFoveation=function(){if(!(h===null&&m===null))return l},this.setFoveation=function(K){l=K,h!==null&&(h.fixedFoveation=K),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=K)},this.getPlanes=function(){return A};let j=null;function Y(K,ce){if(c=ce.getViewerPose(u||o),y=ce,c!==null){const he=c.views;m!==null&&(e.setRenderTargetFramebuffer(x,m.framebuffer),e.setRenderTarget(x));let te=!1;he.length!==C.cameras.length&&(C.cameras.length=0,te=!0);for(let me=0;me<he.length;me++){const pe=he[me];let oe=null;if(m!==null)oe=m.getViewport(pe);else{const W=f.getViewSubImage(h,pe);oe=W.viewport,me===0&&(e.setRenderTargetTextures(x,W.colorTexture,h.ignoreDepthValues?void 0:W.depthStencilTexture),e.setRenderTarget(x))}let U=b[me];U===void 0&&(U=new yr,U.layers.enable(me),U.viewport=new jt,b[me]=U),U.matrix.fromArray(pe.transform.matrix),U.projectionMatrix.fromArray(pe.projectionMatrix),U.viewport.set(oe.x,oe.y,oe.width,oe.height),me===0&&C.matrix.copy(U.matrix),te===!0&&C.cameras.push(U)}}for(let he=0;he<_.length;he++){const te=w[he],me=_[he];te!==null&&me!==void 0&&me.update(te,ce,u||o)}if(j&&j(K,ce),ce.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:ce.detectedPlanes});let he=null;for(const te of A)ce.detectedPlanes.has(te)||(he===null&&(he=[]),he.push(te));if(he!==null)for(const te of he)A.delete(te),R.delete(te),r.dispatchEvent({type:"planeremoved",data:te});for(const te of ce.detectedPlanes)if(!A.has(te))A.add(te),R.set(te,ce.lastChangedTime),r.dispatchEvent({type:"planeadded",data:te});else{const me=R.get(te);te.lastChangedTime>me&&(R.set(te,te.lastChangedTime),r.dispatchEvent({type:"planechanged",data:te}))}}y=null}const X=new D4;X.setAnimationLoop(Y),this.setAnimationLoop=function(K){j=K},this.dispose=function(){}}}function eW(n,e){function t(g,v){v.color.getRGB(g.fogColor.value,B4(n)),v.isFog?(g.fogNear.value=v.near,g.fogFar.value=v.far):v.isFogExp2&&(g.fogDensity.value=v.density)}function r(g,v,x,_,w){v.isMeshBasicMaterial||v.isMeshLambertMaterial?i(g,v):v.isMeshToonMaterial?(i(g,v),c(g,v)):v.isMeshPhongMaterial?(i(g,v),u(g,v)):v.isMeshStandardMaterial?(i(g,v),f(g,v),v.isMeshPhysicalMaterial&&h(g,v,w)):v.isMeshMatcapMaterial?(i(g,v),m(g,v)):v.isMeshDepthMaterial?i(g,v):v.isMeshDistanceMaterial?(i(g,v),y(g,v)):v.isMeshNormalMaterial?i(g,v):v.isLineBasicMaterial?(s(g,v),v.isLineDashedMaterial&&o(g,v)):v.isPointsMaterial?a(g,v,x,_):v.isSpriteMaterial?l(g,v):v.isShadowMaterial?(g.color.value.copy(v.color),g.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function i(g,v){g.opacity.value=v.opacity,v.color&&g.diffuse.value.copy(v.color),v.emissive&&g.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(g.map.value=v.map),v.alphaMap&&(g.alphaMap.value=v.alphaMap),v.bumpMap&&(g.bumpMap.value=v.bumpMap,g.bumpScale.value=v.bumpScale,v.side===fr&&(g.bumpScale.value*=-1)),v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap),v.normalMap&&(g.normalMap.value=v.normalMap,g.normalScale.value.copy(v.normalScale),v.side===fr&&g.normalScale.value.negate()),v.specularMap&&(g.specularMap.value=v.specularMap),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);const x=e.get(v).envMap;if(x&&(g.envMap.value=x,g.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=v.reflectivity,g.ior.value=v.ior,g.refractionRatio.value=v.refractionRatio),v.lightMap){g.lightMap.value=v.lightMap;const A=n.useLegacyLights===!0?Math.PI:1;g.lightMapIntensity.value=v.lightMapIntensity*A}v.aoMap&&(g.aoMap.value=v.aoMap,g.aoMapIntensity.value=v.aoMapIntensity);let _;v.map?_=v.map:v.specularMap?_=v.specularMap:v.displacementMap?_=v.displacementMap:v.normalMap?_=v.normalMap:v.bumpMap?_=v.bumpMap:v.roughnessMap?_=v.roughnessMap:v.metalnessMap?_=v.metalnessMap:v.alphaMap?_=v.alphaMap:v.emissiveMap?_=v.emissiveMap:v.clearcoatMap?_=v.clearcoatMap:v.clearcoatNormalMap?_=v.clearcoatNormalMap:v.clearcoatRoughnessMap?_=v.clearcoatRoughnessMap:v.iridescenceMap?_=v.iridescenceMap:v.iridescenceThicknessMap?_=v.iridescenceThicknessMap:v.specularIntensityMap?_=v.specularIntensityMap:v.specularColorMap?_=v.specularColorMap:v.transmissionMap?_=v.transmissionMap:v.thicknessMap?_=v.thicknessMap:v.sheenColorMap?_=v.sheenColorMap:v.sheenRoughnessMap&&(_=v.sheenRoughnessMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),g.uvTransform.value.copy(_.matrix));let w;v.aoMap?w=v.aoMap:v.lightMap&&(w=v.lightMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),g.uv2Transform.value.copy(w.matrix))}function s(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity}function o(g,v){g.dashSize.value=v.dashSize,g.totalSize.value=v.dashSize+v.gapSize,g.scale.value=v.scale}function a(g,v,x,_){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.size.value=v.size*x,g.scale.value=_*.5,v.map&&(g.map.value=v.map),v.alphaMap&&(g.alphaMap.value=v.alphaMap),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);let w;v.map?w=v.map:v.alphaMap&&(w=v.alphaMap),w!==void 0&&(w.matrixAutoUpdate===!0&&w.updateMatrix(),g.uvTransform.value.copy(w.matrix))}function l(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.rotation.value=v.rotation,v.map&&(g.map.value=v.map),v.alphaMap&&(g.alphaMap.value=v.alphaMap),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);let x;v.map?x=v.map:v.alphaMap&&(x=v.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),g.uvTransform.value.copy(x.matrix))}function u(g,v){g.specular.value.copy(v.specular),g.shininess.value=Math.max(v.shininess,1e-4)}function c(g,v){v.gradientMap&&(g.gradientMap.value=v.gradientMap)}function f(g,v){g.roughness.value=v.roughness,g.metalness.value=v.metalness,v.roughnessMap&&(g.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(g.metalnessMap.value=v.metalnessMap),e.get(v).envMap&&(g.envMapIntensity.value=v.envMapIntensity)}function h(g,v,x){g.ior.value=v.ior,v.sheen>0&&(g.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),g.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(g.sheenColorMap.value=v.sheenColorMap),v.sheenRoughnessMap&&(g.sheenRoughnessMap.value=v.sheenRoughnessMap)),v.clearcoat>0&&(g.clearcoat.value=v.clearcoat,g.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(g.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),g.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===fr&&g.clearcoatNormalScale.value.negate())),v.iridescence>0&&(g.iridescence.value=v.iridescence,g.iridescenceIOR.value=v.iridescenceIOR,g.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(g.iridescenceMap.value=v.iridescenceMap),v.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=v.iridescenceThicknessMap)),v.transmission>0&&(g.transmission.value=v.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),v.transmissionMap&&(g.transmissionMap.value=v.transmissionMap),g.thickness.value=v.thickness,v.thicknessMap&&(g.thicknessMap.value=v.thicknessMap),g.attenuationDistance.value=v.attenuationDistance,g.attenuationColor.value.copy(v.attenuationColor)),g.specularIntensity.value=v.specularIntensity,g.specularColor.value.copy(v.specularColor),v.specularIntensityMap&&(g.specularIntensityMap.value=v.specularIntensityMap),v.specularColorMap&&(g.specularColorMap.value=v.specularColorMap)}function m(g,v){v.matcap&&(g.matcap.value=v.matcap)}function y(g,v){g.referencePosition.value.copy(v.referencePosition),g.nearDistance.value=v.nearDistance,g.farDistance.value=v.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function tW(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function l(_,w){const A=w.program;r.uniformBlockBinding(_,A)}function u(_,w){let A=i[_.id];A===void 0&&(y(_),A=c(_),i[_.id]=A,_.addEventListener("dispose",v));const R=w.program;r.updateUBOMapping(_,R);const M=e.render.frame;s[_.id]!==M&&(h(_),s[_.id]=M)}function c(_){const w=f();_.__bindingPointIndex=w;const A=n.createBuffer(),R=_.__size,M=_.usage;return n.bindBuffer(35345,A),n.bufferData(35345,R,M),n.bindBuffer(35345,null),n.bindBufferBase(35345,w,A),A}function f(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(_){const w=i[_.id],A=_.uniforms,R=_.__cache;n.bindBuffer(35345,w);for(let M=0,P=A.length;M<P;M++){const b=A[M];if(m(b,M,R)===!0){const C=b.__offset,T=Array.isArray(b.value)?b.value:[b.value];let I=0;for(let D=0;D<T.length;D++){const z=T[D],N=g(z);typeof z=="number"?(b.__data[0]=z,n.bufferSubData(35345,C+I,b.__data)):z.isMatrix3?(b.__data[0]=z.elements[0],b.__data[1]=z.elements[1],b.__data[2]=z.elements[2],b.__data[3]=z.elements[0],b.__data[4]=z.elements[3],b.__data[5]=z.elements[4],b.__data[6]=z.elements[5],b.__data[7]=z.elements[0],b.__data[8]=z.elements[6],b.__data[9]=z.elements[7],b.__data[10]=z.elements[8],b.__data[11]=z.elements[0]):(z.toArray(b.__data,I),I+=N.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,C,b.__data)}}n.bindBuffer(35345,null)}function m(_,w,A){const R=_.value;if(A[w]===void 0){if(typeof R=="number")A[w]=R;else{const M=Array.isArray(R)?R:[R],P=[];for(let b=0;b<M.length;b++)P.push(M[b].clone());A[w]=P}return!0}else if(typeof R=="number"){if(A[w]!==R)return A[w]=R,!0}else{const M=Array.isArray(A[w])?A[w]:[A[w]],P=Array.isArray(R)?R:[R];for(let b=0;b<M.length;b++){const C=M[b];if(C.equals(P[b])===!1)return C.copy(P[b]),!0}}return!1}function y(_){const w=_.uniforms;let A=0;const R=16;let M=0;for(let P=0,b=w.length;P<b;P++){const C=w[P],T={boundary:0,storage:0},I=Array.isArray(C.value)?C.value:[C.value];for(let D=0,z=I.length;D<z;D++){const N=I[D],J=g(N);T.boundary+=J.boundary,T.storage+=J.storage}if(C.__data=new Float32Array(T.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=A,P>0){M=A%R;const D=R-M;M!==0&&D-T.boundary<0&&(A+=R-M,C.__offset=A)}A+=T.storage}return M=A%R,M>0&&(A+=R-M),_.__size=A,_.__cache={},this}function g(_){const w={boundary:0,storage:0};return typeof _=="number"?(w.boundary=4,w.storage=4):_.isVector2?(w.boundary=8,w.storage=8):_.isVector3||_.isColor?(w.boundary=16,w.storage=12):_.isVector4?(w.boundary=16,w.storage=16):_.isMatrix3?(w.boundary=48,w.storage=48):_.isMatrix4?(w.boundary=64,w.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),w}function v(_){const w=_.target;w.removeEventListener("dispose",v);const A=o.indexOf(w.__bindingPointIndex);o.splice(A,1),n.deleteBuffer(i[w.id]),delete i[w.id],delete s[w.id]}function x(){for(const _ in i)n.deleteBuffer(i[_]);o=[],i={},s={}}return{bind:l,update:u,dispose:x}}function nW(){const n=vm("canvas");return n.style.display="block",n}function m1(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:nW(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,i=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,a=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",u=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let c;t!==null?c=t.getContextAttributes().alpha:c=n.alpha!==void 0?n.alpha:!1;let f=null,h=null;const m=[],y=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Po,this.useLegacyLights=!0,this.toneMapping=Eo,this.toneMappingExposure=1;const g=this;let v=!1,x=0,_=0,w=null,A=-1,R=null;const M=new jt,P=new jt;let b=null,C=e.width,T=e.height,I=1,D=null,z=null;const N=new jt(0,0,C,T),J=new jt(0,0,C,T);let Q=!1;const re=new c1;let G=!1,j=!1,Y=null;const X=new bt,K=new V,ce={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function he(){return w===null?I:1}let te=t;function me(ee,be){for(let Pe=0;Pe<ee.length;Pe++){const fe=ee[Pe],Ie=e.getContext(fe,be);if(Ie!==null)return Ie}return null}try{const ee={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Ka}`),e.addEventListener("webglcontextlost",et,!1),e.addEventListener("webglcontextrestored",Ge,!1),e.addEventListener("webglcontextcreationerror",Ve,!1),te===null){const be=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&be.shift(),te=me(be,ee),te===null)throw me(be)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}te.getShaderPrecisionFormat===void 0&&(te.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ee){throw console.error("THREE.WebGLRenderer: "+ee.message),ee}let pe,oe,U,W,Z,q,se,ge,Me,Ce,Ke,Re,Oe,ze,Ee,$,O,ae,Ae,ke,Ue,je,Ne,Be;function nt(){pe=new y9(te),oe=new d9(te,pe,n),pe.init(oe),je=new U4(te,pe,oe),U=new YV(te,pe,oe),W=new w9,Z=new UV,q=new QV(te,pe,U,Z,oe,je,W),se=new p9(g),ge=new v9(g),Me=new PG(te,oe),Ne=new c9(te,pe,Me,oe),Ce=new _9(te,Me,W,Ne),Ke=new M9(te,Ce,Me,W),Ae=new A9(te,oe,q),$=new h9(Z),Re=new OV(g,se,ge,pe,oe,Ne,$),Oe=new eW(g,Z),ze=new zV,Ee=new $V(pe,oe),ae=new u9(g,se,ge,U,Ke,c,o),O=new KV(g,Ke,oe),Be=new tW(te,W,oe,U),ke=new f9(te,pe,W,oe),Ue=new x9(te,pe,W,oe),W.programs=Re.programs,g.capabilities=oe,g.extensions=pe,g.properties=Z,g.renderLists=ze,g.shadowMap=O,g.state=U,g.info=W}nt();const $e=new qV(g,te);this.xr=$e,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const ee=pe.get("WEBGL_lose_context");ee&&ee.loseContext()},this.forceContextRestore=function(){const ee=pe.get("WEBGL_lose_context");ee&&ee.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(ee){ee!==void 0&&(I=ee,this.setSize(C,T,!1))},this.getSize=function(ee){return ee.set(C,T)},this.setSize=function(ee,be,Pe=!0){if($e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}C=ee,T=be,e.width=Math.floor(ee*I),e.height=Math.floor(be*I),Pe===!0&&(e.style.width=ee+"px",e.style.height=be+"px"),this.setViewport(0,0,ee,be)},this.getDrawingBufferSize=function(ee){return ee.set(C*I,T*I).floor()},this.setDrawingBufferSize=function(ee,be,Pe){C=ee,T=be,I=Pe,e.width=Math.floor(ee*Pe),e.height=Math.floor(be*Pe),this.setViewport(0,0,ee,be)},this.getCurrentViewport=function(ee){return ee.copy(M)},this.getViewport=function(ee){return ee.copy(N)},this.setViewport=function(ee,be,Pe,fe){ee.isVector4?N.set(ee.x,ee.y,ee.z,ee.w):N.set(ee,be,Pe,fe),U.viewport(M.copy(N).multiplyScalar(I).floor())},this.getScissor=function(ee){return ee.copy(J)},this.setScissor=function(ee,be,Pe,fe){ee.isVector4?J.set(ee.x,ee.y,ee.z,ee.w):J.set(ee,be,Pe,fe),U.scissor(P.copy(J).multiplyScalar(I).floor())},this.getScissorTest=function(){return Q},this.setScissorTest=function(ee){U.setScissorTest(Q=ee)},this.setOpaqueSort=function(ee){D=ee},this.setTransparentSort=function(ee){z=ee},this.getClearColor=function(ee){return ee.copy(ae.getClearColor())},this.setClearColor=function(){ae.setClearColor.apply(ae,arguments)},this.getClearAlpha=function(){return ae.getClearAlpha()},this.setClearAlpha=function(){ae.setClearAlpha.apply(ae,arguments)},this.clear=function(ee=!0,be=!0,Pe=!0){let fe=0;ee&&(fe|=16384),be&&(fe|=256),Pe&&(fe|=1024),te.clear(fe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",et,!1),e.removeEventListener("webglcontextrestored",Ge,!1),e.removeEventListener("webglcontextcreationerror",Ve,!1),ze.dispose(),Ee.dispose(),Z.dispose(),se.dispose(),ge.dispose(),Ke.dispose(),Ne.dispose(),Be.dispose(),Re.dispose(),$e.dispose(),$e.removeEventListener("sessionstart",He),$e.removeEventListener("sessionend",st),Y&&(Y.dispose(),Y=null),lt.stop()};function et(ee){ee.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function Ge(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const ee=W.autoReset,be=O.enabled,Pe=O.autoUpdate,fe=O.needsUpdate,Ie=O.type;nt(),W.autoReset=ee,O.enabled=be,O.autoUpdate=Pe,O.needsUpdate=fe,O.type=Ie}function Ve(ee){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ee.statusMessage)}function rt(ee){const be=ee.target;be.removeEventListener("dispose",rt),ft(be)}function ft(ee){yt(ee),Z.remove(ee)}function yt(ee){const be=Z.get(ee).programs;be!==void 0&&(be.forEach(function(Pe){Re.releaseProgram(Pe)}),ee.isShaderMaterial&&Re.releaseShaderCache(ee))}this.renderBufferDirect=function(ee,be,Pe,fe,Ie,gt){be===null&&(be=ce);const k=Ie.isMesh&&Ie.matrixWorld.determinant()<0,H=Wr(ee,be,Pe,fe,Ie);U.setMaterial(fe,k);let ie=Pe.index,ye=1;fe.wireframe===!0&&(ie=Ce.getWireframeAttribute(Pe),ye=2);const we=Pe.drawRange,Se=Pe.attributes.position;let Je=we.start*ye,We=(we.start+we.count)*ye;gt!==null&&(Je=Math.max(Je,gt.start*ye),We=Math.min(We,(gt.start+gt.count)*ye)),ie!==null?(Je=Math.max(Je,0),We=Math.min(We,ie.count)):Se!=null&&(Je=Math.max(Je,0),We=Math.min(We,Se.count));const Ye=We-Je;if(Ye<0||Ye===1/0)return;Ne.setup(Ie,fe,H,Pe,ie);let Qe,Xe=ke;if(ie!==null&&(Qe=Me.get(ie),Xe=Ue,Xe.setIndex(Qe)),Ie.isMesh)fe.wireframe===!0?(U.setLineWidth(fe.wireframeLinewidth*he()),Xe.setMode(1)):Xe.setMode(4);else if(Ie.isLine){let _e=fe.linewidth;_e===void 0&&(_e=1),U.setLineWidth(_e*he()),Ie.isLineSegments?Xe.setMode(1):Ie.isLineLoop?Xe.setMode(2):Xe.setMode(3)}else Ie.isPoints?Xe.setMode(0):Ie.isSprite&&Xe.setMode(4);if(Ie.isInstancedMesh)Xe.renderInstances(Je,Ye,Ie.count);else if(Pe.isInstancedBufferGeometry){const _e=Pe._maxInstanceCount!==void 0?Pe._maxInstanceCount:1/0,Vt=Math.min(Pe.instanceCount,_e);Xe.renderInstances(Je,Ye,Vt)}else Xe.render(Je,Ye)},this.compile=function(ee,be){function Pe(fe,Ie,gt){fe.transparent===!0&&fe.side===Gr&&fe.forceSinglePass===!1?(fe.side=fr,fe.needsUpdate=!0,Ht(fe,Ie,gt),fe.side=eo,fe.needsUpdate=!0,Ht(fe,Ie,gt),fe.side=Gr):Ht(fe,Ie,gt)}h=Ee.get(ee),h.init(),y.push(h),ee.traverseVisible(function(fe){fe.isLight&&fe.layers.test(be.layers)&&(h.pushLight(fe),fe.castShadow&&h.pushShadow(fe))}),h.setupLights(g.useLegacyLights),ee.traverse(function(fe){const Ie=fe.material;if(Ie)if(Array.isArray(Ie))for(let gt=0;gt<Ie.length;gt++){const k=Ie[gt];Pe(k,ee,fe)}else Pe(Ie,ee,fe)}),y.pop(),h=null};let ue=null;function de(ee){ue&&ue(ee)}function He(){lt.stop()}function st(){lt.start()}const lt=new D4;lt.setAnimationLoop(de),typeof self<"u"&&lt.setContext(self),this.setAnimationLoop=function(ee){ue=ee,$e.setAnimationLoop(ee),ee===null?lt.stop():lt.start()},$e.addEventListener("sessionstart",He),$e.addEventListener("sessionend",st),this.render=function(ee,be){if(be!==void 0&&be.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),be.parent===null&&be.matrixWorldAutoUpdate===!0&&be.updateMatrixWorld(),$e.enabled===!0&&$e.isPresenting===!0&&($e.cameraAutoUpdate===!0&&$e.updateCamera(be),be=$e.getCamera()),ee.isScene===!0&&ee.onBeforeRender(g,ee,be,w),h=Ee.get(ee,y.length),h.init(),y.push(h),X.multiplyMatrices(be.projectionMatrix,be.matrixWorldInverse),re.setFromProjectionMatrix(X),j=this.localClippingEnabled,G=$.init(this.clippingPlanes,j),f=ze.get(ee,m.length),f.init(),m.push(f),Gt(ee,be,0,g.sortObjects),f.finish(),g.sortObjects===!0&&f.sort(D,z),G===!0&&$.beginShadows();const Pe=h.state.shadowsArray;if(O.render(Pe,ee,be),G===!0&&$.endShadows(),this.info.autoReset===!0&&this.info.reset(),ae.render(f,ee),h.setupLights(g.useLegacyLights),be.isArrayCamera){const fe=be.cameras;for(let Ie=0,gt=fe.length;Ie<gt;Ie++){const k=fe[Ie];Yt(f,ee,k,k.viewport)}}else Yt(f,ee,be);w!==null&&(q.updateMultisampleRenderTarget(w),q.updateRenderTargetMipmap(w)),ee.isScene===!0&&ee.onAfterRender(g,ee,be),Ne.resetDefaultState(),A=-1,R=null,y.pop(),y.length>0?h=y[y.length-1]:h=null,m.pop(),m.length>0?f=m[m.length-1]:f=null};function Gt(ee,be,Pe,fe){if(ee.visible===!1)return;if(ee.layers.test(be.layers)){if(ee.isGroup)Pe=ee.renderOrder;else if(ee.isLOD)ee.autoUpdate===!0&&ee.update(be);else if(ee.isLight)h.pushLight(ee),ee.castShadow&&h.pushShadow(ee);else if(ee.isSprite){if(!ee.frustumCulled||re.intersectsSprite(ee)){fe&&K.setFromMatrixPosition(ee.matrixWorld).applyMatrix4(X);const k=Ke.update(ee),H=ee.material;H.visible&&f.push(ee,k,H,Pe,K.z,null)}}else if((ee.isMesh||ee.isLine||ee.isPoints)&&(ee.isSkinnedMesh&&ee.skeleton.frame!==W.render.frame&&(ee.skeleton.update(),ee.skeleton.frame=W.render.frame),!ee.frustumCulled||re.intersectsObject(ee))){fe&&K.setFromMatrixPosition(ee.matrixWorld).applyMatrix4(X);const k=Ke.update(ee),H=ee.material;if(Array.isArray(H)){const ie=k.groups;for(let ye=0,we=ie.length;ye<we;ye++){const Se=ie[ye],Je=H[Se.materialIndex];Je&&Je.visible&&f.push(ee,k,Je,Pe,K.z,Se)}}else H.visible&&f.push(ee,k,H,Pe,K.z,null)}}const gt=ee.children;for(let k=0,H=gt.length;k<H;k++)Gt(gt[k],be,Pe,fe)}function Yt(ee,be,Pe,fe){const Ie=ee.opaque,gt=ee.transmissive,k=ee.transparent;h.setupLightsView(Pe),G===!0&&$.setGlobalState(g.clippingPlanes,Pe),gt.length>0&&cn(Ie,be,Pe),fe&&U.viewport(M.copy(fe)),Ie.length>0&&$t(Ie,be,Pe),gt.length>0&&$t(gt,be,Pe),k.length>0&&$t(k,be,Pe),U.buffers.depth.setTest(!0),U.buffers.depth.setMask(!0),U.buffers.color.setMask(!0),U.setPolygonOffset(!1)}function cn(ee,be,Pe){const fe=oe.isWebGL2;Y===null&&(Y=new Fn(1024,1024,{generateMipmaps:!0,type:pe.has("EXT_color_buffer_half_float")?Qr:vi,minFilter:Ro,samples:fe&&s===!0?4:0}));const Ie=g.getRenderTarget();g.setRenderTarget(Y),g.clear();const gt=g.toneMapping;g.toneMapping=Eo,$t(ee,be,Pe),g.toneMapping=gt,q.updateMultisampleRenderTarget(Y),q.updateRenderTargetMipmap(Y),g.setRenderTarget(Ie)}function $t(ee,be,Pe){const fe=be.isScene===!0?be.overrideMaterial:null;for(let Ie=0,gt=ee.length;Ie<gt;Ie++){const k=ee[Ie],H=k.object,ie=k.geometry,ye=fe===null?k.material:fe,we=k.group;H.layers.test(Pe.layers)&&hn(H,be,Pe,ie,ye,we)}}function hn(ee,be,Pe,fe,Ie,gt){ee.onBeforeRender(g,be,Pe,fe,Ie,gt),ee.modelViewMatrix.multiplyMatrices(Pe.matrixWorldInverse,ee.matrixWorld),ee.normalMatrix.getNormalMatrix(ee.modelViewMatrix),Ie.onBeforeRender(g,be,Pe,fe,ee,gt),Ie.transparent===!0&&Ie.side===Gr&&Ie.forceSinglePass===!1?(Ie.side=fr,Ie.needsUpdate=!0,g.renderBufferDirect(Pe,be,fe,Ie,ee,gt),Ie.side=eo,Ie.needsUpdate=!0,g.renderBufferDirect(Pe,be,fe,Ie,ee,gt),Ie.side=Gr):g.renderBufferDirect(Pe,be,fe,Ie,ee,gt),ee.onAfterRender(g,be,Pe,fe,Ie,gt)}function Ht(ee,be,Pe){be.isScene!==!0&&(be=ce);const fe=Z.get(ee),Ie=h.state.lights,gt=h.state.shadowsArray,k=Ie.state.version,H=Re.getParameters(ee,Ie.state,gt,be,Pe),ie=Re.getProgramCacheKey(H);let ye=fe.programs;fe.environment=ee.isMeshStandardMaterial?be.environment:null,fe.fog=be.fog,fe.envMap=(ee.isMeshStandardMaterial?ge:se).get(ee.envMap||fe.environment),ye===void 0&&(ee.addEventListener("dispose",rt),ye=new Map,fe.programs=ye);let we=ye.get(ie);if(we!==void 0){if(fe.currentProgram===we&&fe.lightsStateVersion===k)return Xt(ee,H),we}else H.uniforms=Re.getUniforms(ee),ee.onBuild(Pe,H,g),ee.onBeforeCompile(H,g),we=Re.acquireProgram(H,ie),ye.set(ie,we),fe.uniforms=H.uniforms;const Se=fe.uniforms;(!ee.isShaderMaterial&&!ee.isRawShaderMaterial||ee.clipping===!0)&&(Se.clippingPlanes=$.uniform),Xt(ee,H),fe.needsLights=Kt(ee),fe.lightsStateVersion=k,fe.needsLights&&(Se.ambientLightColor.value=Ie.state.ambient,Se.lightProbe.value=Ie.state.probe,Se.directionalLights.value=Ie.state.directional,Se.directionalLightShadows.value=Ie.state.directionalShadow,Se.spotLights.value=Ie.state.spot,Se.spotLightShadows.value=Ie.state.spotShadow,Se.rectAreaLights.value=Ie.state.rectArea,Se.ltc_1.value=Ie.state.rectAreaLTC1,Se.ltc_2.value=Ie.state.rectAreaLTC2,Se.pointLights.value=Ie.state.point,Se.pointLightShadows.value=Ie.state.pointShadow,Se.hemisphereLights.value=Ie.state.hemi,Se.directionalShadowMap.value=Ie.state.directionalShadowMap,Se.directionalShadowMatrix.value=Ie.state.directionalShadowMatrix,Se.spotShadowMap.value=Ie.state.spotShadowMap,Se.spotLightMatrix.value=Ie.state.spotLightMatrix,Se.spotLightMap.value=Ie.state.spotLightMap,Se.pointShadowMap.value=Ie.state.pointShadowMap,Se.pointShadowMatrix.value=Ie.state.pointShadowMatrix);const Je=we.getUniforms(),We=zv.seqWithValue(Je.seq,Se);return fe.currentProgram=we,fe.uniformsList=We,we}function Xt(ee,be){const Pe=Z.get(ee);Pe.outputEncoding=be.outputEncoding,Pe.instancing=be.instancing,Pe.skinning=be.skinning,Pe.morphTargets=be.morphTargets,Pe.morphNormals=be.morphNormals,Pe.morphColors=be.morphColors,Pe.morphTargetsCount=be.morphTargetsCount,Pe.numClippingPlanes=be.numClippingPlanes,Pe.numIntersection=be.numClipIntersection,Pe.vertexAlphas=be.vertexAlphas,Pe.vertexTangents=be.vertexTangents,Pe.toneMapping=be.toneMapping}function Wr(ee,be,Pe,fe,Ie){be.isScene!==!0&&(be=ce),q.resetTextureUnits();const gt=be.fog,k=fe.isMeshStandardMaterial?be.environment:null,H=w===null?g.outputEncoding:w.isXRRenderTarget===!0?w.texture.encoding:Po,ie=(fe.isMeshStandardMaterial?ge:se).get(fe.envMap||k),ye=fe.vertexColors===!0&&!!Pe.attributes.color&&Pe.attributes.color.itemSize===4,we=!!fe.normalMap&&!!Pe.attributes.tangent,Se=!!Pe.morphAttributes.position,Je=!!Pe.morphAttributes.normal,We=!!Pe.morphAttributes.color,Ye=fe.toneMapped?g.toneMapping:Eo,Qe=Pe.morphAttributes.position||Pe.morphAttributes.normal||Pe.morphAttributes.color,Xe=Qe!==void 0?Qe.length:0,_e=Z.get(fe),Vt=h.state.lights;if(G===!0&&(j===!0||ee!==R)){const Mt=ee===R&&fe.id===A;$.setState(fe,ee,Mt)}let it=!1;fe.version===_e.__version?(_e.needsLights&&_e.lightsStateVersion!==Vt.state.version||_e.outputEncoding!==H||Ie.isInstancedMesh&&_e.instancing===!1||!Ie.isInstancedMesh&&_e.instancing===!0||Ie.isSkinnedMesh&&_e.skinning===!1||!Ie.isSkinnedMesh&&_e.skinning===!0||_e.envMap!==ie||fe.fog===!0&&_e.fog!==gt||_e.numClippingPlanes!==void 0&&(_e.numClippingPlanes!==$.numPlanes||_e.numIntersection!==$.numIntersection)||_e.vertexAlphas!==ye||_e.vertexTangents!==we||_e.morphTargets!==Se||_e.morphNormals!==Je||_e.morphColors!==We||_e.toneMapping!==Ye||oe.isWebGL2===!0&&_e.morphTargetsCount!==Xe)&&(it=!0):(it=!0,_e.__version=fe.version);let dt=_e.currentProgram;it===!0&&(dt=Ht(fe,be,Ie));let Rt=!1,At=!1,Ft=!1;const wt=dt.getUniforms(),St=_e.uniforms;if(U.useProgram(dt.program)&&(Rt=!0,At=!0,Ft=!0),fe.id!==A&&(A=fe.id,At=!0),Rt||R!==ee){if(wt.setValue(te,"projectionMatrix",ee.projectionMatrix),oe.logarithmicDepthBuffer&&wt.setValue(te,"logDepthBufFC",2/(Math.log(ee.far+1)/Math.LN2)),R!==ee&&(R=ee,At=!0,Ft=!0),fe.isShaderMaterial||fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshStandardMaterial||fe.envMap){const Mt=wt.map.cameraPosition;Mt!==void 0&&Mt.setValue(te,K.setFromMatrixPosition(ee.matrixWorld))}(fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshLambertMaterial||fe.isMeshBasicMaterial||fe.isMeshStandardMaterial||fe.isShaderMaterial)&&wt.setValue(te,"isOrthographic",ee.isOrthographicCamera===!0),(fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshLambertMaterial||fe.isMeshBasicMaterial||fe.isMeshStandardMaterial||fe.isShaderMaterial||fe.isShadowMaterial||Ie.isSkinnedMesh)&&wt.setValue(te,"viewMatrix",ee.matrixWorldInverse)}if(Ie.isSkinnedMesh){wt.setOptional(te,Ie,"bindMatrix"),wt.setOptional(te,Ie,"bindMatrixInverse");const Mt=Ie.skeleton;Mt&&(oe.floatVertexTextures?(Mt.boneTexture===null&&Mt.computeBoneTexture(),wt.setValue(te,"boneTexture",Mt.boneTexture,q),wt.setValue(te,"boneTextureSize",Mt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Tt=Pe.morphAttributes;if((Tt.position!==void 0||Tt.normal!==void 0||Tt.color!==void 0&&oe.isWebGL2===!0)&&Ae.update(Ie,Pe,dt),(At||_e.receiveShadow!==Ie.receiveShadow)&&(_e.receiveShadow=Ie.receiveShadow,wt.setValue(te,"receiveShadow",Ie.receiveShadow)),fe.isMeshGouraudMaterial&&fe.envMap!==null&&(St.envMap.value=ie,St.flipEnvMap.value=ie.isCubeTexture&&ie.isRenderTargetTexture===!1?-1:1),At&&(wt.setValue(te,"toneMappingExposure",g.toneMappingExposure),_e.needsLights&&br(St,Ft),gt&&fe.fog===!0&&Oe.refreshFogUniforms(St,gt),Oe.refreshMaterialUniforms(St,fe,I,T,Y),zv.upload(te,_e.uniformsList,St,q)),fe.isShaderMaterial&&fe.uniformsNeedUpdate===!0&&(zv.upload(te,_e.uniformsList,St,q),fe.uniformsNeedUpdate=!1),fe.isSpriteMaterial&&wt.setValue(te,"center",Ie.center),wt.setValue(te,"modelViewMatrix",Ie.modelViewMatrix),wt.setValue(te,"normalMatrix",Ie.normalMatrix),wt.setValue(te,"modelMatrix",Ie.matrixWorld),fe.isShaderMaterial||fe.isRawShaderMaterial){const Mt=fe.uniformsGroups;for(let qt=0,Dt=Mt.length;qt<Dt;qt++)if(oe.isWebGL2){const en=Mt[qt];Be.update(en,dt),Be.bind(en,dt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return dt}function br(ee,be){ee.ambientLightColor.needsUpdate=be,ee.lightProbe.needsUpdate=be,ee.directionalLights.needsUpdate=be,ee.directionalLightShadows.needsUpdate=be,ee.pointLights.needsUpdate=be,ee.pointLightShadows.needsUpdate=be,ee.spotLights.needsUpdate=be,ee.spotLightShadows.needsUpdate=be,ee.rectAreaLights.needsUpdate=be,ee.hemisphereLights.needsUpdate=be}function Kt(ee){return ee.isMeshLambertMaterial||ee.isMeshToonMaterial||ee.isMeshPhongMaterial||ee.isMeshStandardMaterial||ee.isShadowMaterial||ee.isShaderMaterial&&ee.lights===!0}this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(ee,be,Pe){Z.get(ee.texture).__webglTexture=be,Z.get(ee.depthTexture).__webglTexture=Pe;const fe=Z.get(ee);fe.__hasExternalTextures=!0,fe.__hasExternalTextures&&(fe.__autoAllocateDepthBuffer=Pe===void 0,fe.__autoAllocateDepthBuffer||pe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),fe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ee,be){const Pe=Z.get(ee);Pe.__webglFramebuffer=be,Pe.__useDefaultFramebuffer=be===void 0},this.setRenderTarget=function(ee,be=0,Pe=0){w=ee,x=be,_=Pe;let fe=!0,Ie=null,gt=!1,k=!1;if(ee){const ie=Z.get(ee);ie.__useDefaultFramebuffer!==void 0?(U.bindFramebuffer(36160,null),fe=!1):ie.__webglFramebuffer===void 0?q.setupRenderTarget(ee):ie.__hasExternalTextures&&q.rebindTextures(ee,Z.get(ee.texture).__webglTexture,Z.get(ee.depthTexture).__webglTexture);const ye=ee.texture;(ye.isData3DTexture||ye.isDataArrayTexture||ye.isCompressedArrayTexture)&&(k=!0);const we=Z.get(ee).__webglFramebuffer;ee.isWebGLCubeRenderTarget?(Ie=we[be],gt=!0):oe.isWebGL2&&ee.samples>0&&q.useMultisampledRTT(ee)===!1?Ie=Z.get(ee).__webglMultisampledFramebuffer:Ie=we,M.copy(ee.viewport),P.copy(ee.scissor),b=ee.scissorTest}else M.copy(N).multiplyScalar(I).floor(),P.copy(J).multiplyScalar(I).floor(),b=Q;if(U.bindFramebuffer(36160,Ie)&&oe.drawBuffers&&fe&&U.drawBuffers(ee,Ie),U.viewport(M),U.scissor(P),U.setScissorTest(b),gt){const ie=Z.get(ee.texture);te.framebufferTexture2D(36160,36064,34069+be,ie.__webglTexture,Pe)}else if(k){const ie=Z.get(ee.texture),ye=be||0;te.framebufferTextureLayer(36160,36064,ie.__webglTexture,Pe||0,ye)}A=-1},this.readRenderTargetPixels=function(ee,be,Pe,fe,Ie,gt,k){if(!(ee&&ee.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let H=Z.get(ee).__webglFramebuffer;if(ee.isWebGLCubeRenderTarget&&k!==void 0&&(H=H[k]),H){U.bindFramebuffer(36160,H);try{const ie=ee.texture,ye=ie.format,we=ie.type;if(ye!==Ri&&je.convert(ye)!==te.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Se=we===Qr&&(pe.has("EXT_color_buffer_half_float")||oe.isWebGL2&&pe.has("EXT_color_buffer_float"));if(we!==vi&&je.convert(we)!==te.getParameter(35738)&&!(we===Yr&&(oe.isWebGL2||pe.has("OES_texture_float")||pe.has("WEBGL_color_buffer_float")))&&!Se){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}be>=0&&be<=ee.width-fe&&Pe>=0&&Pe<=ee.height-Ie&&te.readPixels(be,Pe,fe,Ie,je.convert(ye),je.convert(we),gt)}finally{const ie=w!==null?Z.get(w).__webglFramebuffer:null;U.bindFramebuffer(36160,ie)}}},this.copyFramebufferToTexture=function(ee,be,Pe=0){const fe=Math.pow(2,-Pe),Ie=Math.floor(be.image.width*fe),gt=Math.floor(be.image.height*fe);q.setTexture2D(be,0),te.copyTexSubImage2D(3553,Pe,0,0,ee.x,ee.y,Ie,gt),U.unbindTexture()},this.copyTextureToTexture=function(ee,be,Pe,fe=0){const Ie=be.image.width,gt=be.image.height,k=je.convert(Pe.format),H=je.convert(Pe.type);q.setTexture2D(Pe,0),te.pixelStorei(37440,Pe.flipY),te.pixelStorei(37441,Pe.premultiplyAlpha),te.pixelStorei(3317,Pe.unpackAlignment),be.isDataTexture?te.texSubImage2D(3553,fe,ee.x,ee.y,Ie,gt,k,H,be.image.data):be.isCompressedTexture?te.compressedTexSubImage2D(3553,fe,ee.x,ee.y,be.mipmaps[0].width,be.mipmaps[0].height,k,be.mipmaps[0].data):te.texSubImage2D(3553,fe,ee.x,ee.y,k,H,be.image),fe===0&&Pe.generateMipmaps&&te.generateMipmap(3553),U.unbindTexture()},this.copyTextureToTexture3D=function(ee,be,Pe,fe,Ie=0){if(g.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const gt=ee.max.x-ee.min.x+1,k=ee.max.y-ee.min.y+1,H=ee.max.z-ee.min.z+1,ie=je.convert(fe.format),ye=je.convert(fe.type);let we;if(fe.isData3DTexture)q.setTexture3D(fe,0),we=32879;else if(fe.isDataArrayTexture)q.setTexture2DArray(fe,0),we=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}te.pixelStorei(37440,fe.flipY),te.pixelStorei(37441,fe.premultiplyAlpha),te.pixelStorei(3317,fe.unpackAlignment);const Se=te.getParameter(3314),Je=te.getParameter(32878),We=te.getParameter(3316),Ye=te.getParameter(3315),Qe=te.getParameter(32877),Xe=Pe.isCompressedTexture?Pe.mipmaps[0]:Pe.image;te.pixelStorei(3314,Xe.width),te.pixelStorei(32878,Xe.height),te.pixelStorei(3316,ee.min.x),te.pixelStorei(3315,ee.min.y),te.pixelStorei(32877,ee.min.z),Pe.isDataTexture||Pe.isData3DTexture?te.texSubImage3D(we,Ie,be.x,be.y,be.z,gt,k,H,ie,ye,Xe.data):Pe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),te.compressedTexSubImage3D(we,Ie,be.x,be.y,be.z,gt,k,H,ie,Xe.data)):te.texSubImage3D(we,Ie,be.x,be.y,be.z,gt,k,H,ie,ye,Xe),te.pixelStorei(3314,Se),te.pixelStorei(32878,Je),te.pixelStorei(3316,We),te.pixelStorei(3315,Ye),te.pixelStorei(32877,Qe),Ie===0&&fe.generateMipmaps&&te.generateMipmap(we),U.unbindTexture()},this.initTexture=function(ee){ee.isCubeTexture?q.setTextureCube(ee,0):ee.isData3DTexture?q.setTexture3D(ee,0):ee.isDataArrayTexture||ee.isCompressedArrayTexture?q.setTexture2DArray(ee,0):q.setTexture2D(ee,0),U.unbindTexture()},this.resetState=function(){x=0,_=0,w=null,U.reset(),Ne.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(m1.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(n){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!n}}});class z4 extends m1{}z4.prototype.isWebGL1Renderer=!0;class g1{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new qe(e),this.density=t}clone(){return new g1(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class v1{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new qe(e),this.near=t,this.far=r}clone(){return new v1(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Ad extends un{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Gm{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=mm,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=gs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ai=new V;class iu{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Ai.fromBufferAttribute(this,t),Ai.applyMatrix4(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ai.fromBufferAttribute(this,t),Ai.applyNormalMatrix(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ai.fromBufferAttribute(this,t),Ai.transformDirection(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}setX(e,t){return this.normalized&&(t=Cn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Fa(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Fa(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Fa(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Fa(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Cn(t,this.array),r=Cn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Cn(t,this.array),r=Cn(r,this.array),i=Cn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Cn(t,this.array),r=Cn(r,this.array),i=Cn(i,this.array),s=Cn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Qt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new iu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class MA extends zn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new qe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let gf;const Vh=new V,vf=new V,yf=new V,_f=new De,Wh=new De,G4=new bt,L0=new V,jh=new V,F0=new V,s3=new De,Ax=new De,o3=new De;class H4 extends un{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",gf===void 0){gf=new Lt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Gm(t,5);gf.setIndex([0,1,2,0,2,3]),gf.setAttribute("position",new iu(r,3,0,!1)),gf.setAttribute("uv",new iu(r,2,3,!1))}this.geometry=gf,this.material=e!==void 0?e:new MA,this.center=new De(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),vf.setFromMatrixScale(this.matrixWorld),G4.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),yf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&vf.multiplyScalar(-yf.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;k0(L0.set(-.5,-.5,0),yf,o,vf,i,s),k0(jh.set(.5,-.5,0),yf,o,vf,i,s),k0(F0.set(.5,.5,0),yf,o,vf,i,s),s3.set(0,0),Ax.set(1,0),o3.set(1,1);let a=e.ray.intersectTriangle(L0,jh,F0,!1,Vh);if(a===null&&(k0(jh.set(-.5,.5,0),yf,o,vf,i,s),Ax.set(0,1),a=e.ray.intersectTriangle(L0,F0,jh,!1,Vh),a===null))return;const l=e.ray.origin.distanceTo(Vh);l<e.near||l>e.far||t.push({distance:l,point:Vh.clone(),uv:Vs.getUV(Vh,L0,jh,F0,s3,Ax,o3,new De),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function k0(n,e,t,r,i,s){_f.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Wh.x=s*_f.x-i*_f.y,Wh.y=i*_f.x+s*_f.y):Wh.copy(_f),n.copy(e),n.x+=Wh.x,n.y+=Wh.y,n.applyMatrix4(G4)}const O0=new V,a3=new V;class V4 extends un{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){O0.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(O0);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){O0.setFromMatrixPosition(e.matrixWorld),a3.setFromMatrixPosition(this.matrixWorld);const r=O0.distanceTo(a3)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const l3=new V,u3=new jt,c3=new jt,rW=new V,f3=new bt;class EA extends Nn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new bt,this.bindMatrixInverse=new bt}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new jt,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;u3.fromBufferAttribute(i.attributes.skinIndex,e),c3.fromBufferAttribute(i.attributes.skinWeight,e),l3.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=c3.getComponent(s);if(o!==0){const a=u3.getComponent(s);f3.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(rW.copy(l3).applyMatrix4(f3),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class y1 extends un{constructor(){super(),this.isBone=!0,this.type="Bone"}}class sd extends xn{constructor(e=null,t=1,r=1,i,s,o,a,l,u=Sn,c=Sn,f,h){super(null,o,a,l,u,c,i,s,f,h),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const d3=new bt,iW=new bt;class Hm{constructor(e=[],t=[]){this.uuid=gs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new bt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new bt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:iW;d3.multiplyMatrices(a,t[s]),d3.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Hm(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=C4(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new sd(t,e,e,Ri,Yr);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new y1),this.bones.push(o),this.boneInverses.push(new bt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Ac extends Qt{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const h3=new bt,p3=new bt,U0=[],sW=new bt,$h=new Nn;class CA extends Nn{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ac(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1;for(let i=0;i<r;i++)this.setMatrixAt(i,sW)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if($h.geometry=this.geometry,$h.material=this.material,$h.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,h3),p3.multiplyMatrices(r,h3),$h.matrixWorld=p3,$h.raycast(e,U0);for(let o=0,a=U0.length;o<a;o++){const l=U0[o];l.instanceId=s,l.object=this,t.push(l)}U0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Ac(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class yi extends zn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new qe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const m3=new V,g3=new V,v3=new bt,Mx=new Nm,N0=new Qa;class Wa extends un{constructor(e=new Lt,t=new yi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)m3.fromBufferAttribute(t,i-1),g3.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=m3.distanceTo(g3);e.setAttribute("lineDistance",new vt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),N0.copy(r.boundingSphere),N0.applyMatrix4(i),N0.radius+=s,e.ray.intersectsSphere(N0)===!1)return;v3.copy(i).invert(),Mx.copy(e.ray).applyMatrix4(v3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new V,c=new V,f=new V,h=new V,m=this.isLineSegments?2:1,y=r.index,v=r.attributes.position;if(y!==null){const x=Math.max(0,o.start),_=Math.min(y.count,o.start+o.count);for(let w=x,A=_-1;w<A;w+=m){const R=y.getX(w),M=y.getX(w+1);if(u.fromBufferAttribute(v,R),c.fromBufferAttribute(v,M),Mx.distanceSqToSegment(u,c,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(h);b<e.near||b>e.far||t.push({distance:b,point:f.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else{const x=Math.max(0,o.start),_=Math.min(v.count,o.start+o.count);for(let w=x,A=_-1;w<A;w+=m){if(u.fromBufferAttribute(v,w),c.fromBufferAttribute(v,w+1),Mx.distanceSqToSegment(u,c,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(h);M<e.near||M>e.far||t.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const y3=new V,_3=new V;class Io extends Wa{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)y3.fromBufferAttribute(t,i),_3.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+y3.distanceTo(_3);e.setAttribute("lineDistance",new vt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class TA extends Wa{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class _1 extends zn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new qe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const x3=new bt,i2=new Nm,z0=new Qa,G0=new V;class RA extends un{constructor(e=new Lt,t=new _1){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),z0.copy(r.boundingSphere),z0.applyMatrix4(i),z0.radius+=s,e.ray.intersectsSphere(z0)===!1)return;x3.copy(i).invert(),i2.copy(e.ray).applyMatrix4(x3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,f=r.attributes.position;if(u!==null){const h=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let y=h,g=m;y<g;y++){const v=u.getX(y);G0.fromBufferAttribute(f,v),w3(G0,v,l,i,e,t,this)}}else{const h=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let y=h,g=m;y<g;y++)G0.fromBufferAttribute(f,y),w3(G0,y,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function w3(n,e,t,r,i,s,o){const a=i2.distanceSqToPoint(n);if(a<t){const l=new V;i2.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class oW extends xn{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:rn,this.magFilter=s!==void 0?s:rn,this.generateMipmaps=!1;const c=this;function f(){c.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class aW extends xn{constructor(e,t,r){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=Sn,this.minFilter=Sn,this.generateMipmaps=!1,this.needsUpdate=!0}}class PA extends xn{constructor(e,t,r,i,s,o,a,l,u,c,f,h){super(null,o,a,l,u,c,i,s,f,h),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class lW extends PA{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Kr}}class uW extends xn{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Do{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const c=r[i],h=r[i+1]-c,m=(o-c)/h;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new De:new V);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new V,i=[],s=[],o=[],a=new V,l=new bt;for(let m=0;m<=e;m++){const y=m/e;i[m]=this.getTangentAt(y,new V)}s[0]=new V,o[0]=new V;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),f=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),f<=u&&(u=f,r.set(0,1,0)),h<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(cr(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,y))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(cr(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(i[y],m*y)),o[y].crossVectors(i[y],s[y])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class x1 extends Do{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new De,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=l-this.aX,m=u-this.aY;l=h*c-m*f+this.aX,u=h*f+m*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class W4 extends x1{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function BA(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,f){let h=(o-s)/u-(a-s)/(u+c)+(a-o)/c,m=(a-o)/c-(l-o)/(c+f)+(l-a)/f;h*=c,m*=c,i(o,a,h,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const H0=new V,Ex=new BA,Cx=new BA,Tx=new BA;class IA extends Do{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new V){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=i[(a-1)%s]:(H0.subVectors(i[0],i[1]).add(i[0]),u=H0);const f=i[a%s],h=i[(a+1)%s];if(this.closed||a+2<s?c=i[(a+2)%s]:(H0.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=H0),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let y=Math.pow(u.distanceToSquared(f),m),g=Math.pow(f.distanceToSquared(h),m),v=Math.pow(h.distanceToSquared(c),m);g<1e-4&&(g=1),y<1e-4&&(y=g),v<1e-4&&(v=g),Ex.initNonuniformCatmullRom(u.x,f.x,h.x,c.x,y,g,v),Cx.initNonuniformCatmullRom(u.y,f.y,h.y,c.y,y,g,v),Tx.initNonuniformCatmullRom(u.z,f.z,h.z,c.z,y,g,v)}else this.curveType==="catmullrom"&&(Ex.initCatmullRom(u.x,f.x,h.x,c.x,this.tension),Cx.initCatmullRom(u.y,f.y,h.y,c.y,this.tension),Tx.initCatmullRom(u.z,f.z,h.z,c.z,this.tension));return r.set(Ex.calc(l),Cx.calc(l),Tx.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new V().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function S3(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function cW(n,e){const t=1-n;return t*t*e}function fW(n,e){return 2*(1-n)*n*e}function dW(n,e){return n*n*e}function Fp(n,e,t,r){return cW(n,e)+fW(n,t)+dW(n,r)}function hW(n,e){const t=1-n;return t*t*t*e}function pW(n,e){const t=1-n;return 3*t*t*n*e}function mW(n,e){return 3*(1-n)*n*n*e}function gW(n,e){return n*n*n*e}function kp(n,e,t,r,i){return hW(n,e)+pW(n,t)+mW(n,r)+gW(n,i)}class DA extends Do{constructor(e=new De,t=new De,r=new De,i=new De){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new De){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(kp(e,i.x,s.x,o.x,a.x),kp(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class j4 extends Do{constructor(e=new V,t=new V,r=new V,i=new V){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new V){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(kp(e,i.x,s.x,o.x,a.x),kp(e,i.y,s.y,o.y,a.y),kp(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class w1 extends Do{constructor(e=new De,t=new De){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new De){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new De){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $4 extends Do{constructor(e=new V,t=new V){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new V){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new V){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LA extends Do{constructor(e=new De,t=new De,r=new De){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new De){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Fp(e,i.x,s.x,o.x),Fp(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class FA extends Do{constructor(e=new V,t=new V,r=new V){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new V){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Fp(e,i.x,s.x,o.x),Fp(e,i.y,s.y,o.y),Fp(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kA extends Do{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new De){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],c=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(S3(a,l.x,u.x,c.x,f.x),S3(a,l.y,u.y,c.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new De().fromArray(i))}return this}}var OA=Object.freeze({__proto__:null,ArcCurve:W4,CatmullRomCurve3:IA,CubicBezierCurve:DA,CubicBezierCurve3:j4,EllipseCurve:x1,LineCurve:w1,LineCurve3:$4,QuadraticBezierCurve:LA,QuadraticBezierCurve3:FA,SplineCurve:kA});class J4 extends Do{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new w1(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new OA[i.type]().fromJSON(i))}return this}}class ym extends J4{constructor(e){super(),this.type="Path",this.currentPoint=new De,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new w1(this.currentPoint.clone(),new De(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new LA(this.currentPoint.clone(),new De(e,t),new De(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new DA(this.currentPoint.clone(),new De(e,t),new De(r,i),new De(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new kA(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const u=new x1(e,t,r,i,s,o,a,l);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Wd extends Lt{constructor(e=[new De(0,-.5),new De(.5,0),new De(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=cr(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/t,f=new V,h=new De,m=new V,y=new V,g=new V;let v=0,x=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:v=e[_+1].x-e[_].x,x=e[_+1].y-e[_].y,m.x=x*1,m.y=-v,m.z=x*0,g.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(g.x,g.y,g.z);break;default:v=e[_+1].x-e[_].x,x=e[_+1].y-e[_].y,m.x=x*1,m.y=-v,m.z=x*0,y.copy(m),m.x+=g.x,m.y+=g.y,m.z+=g.z,m.normalize(),l.push(m.x,m.y,m.z),g.copy(y)}for(let _=0;_<=t;_++){const w=r+_*c*i,A=Math.sin(w),R=Math.cos(w);for(let M=0;M<=e.length-1;M++){f.x=e[M].x*A,f.y=e[M].y,f.z=e[M].x*R,o.push(f.x,f.y,f.z),h.x=_/t,h.y=M/(e.length-1),a.push(h.x,h.y);const P=l[3*M+0]*A,b=l[3*M+1],C=l[3*M+0]*R;u.push(P,b,C)}}for(let _=0;_<t;_++)for(let w=0;w<e.length-1;w++){const A=w+_*e.length,R=A,M=A+e.length,P=A+e.length+1,b=A+1;s.push(R,M,b),s.push(P,b,M)}this.setIndex(s),this.setAttribute("position",new vt(o,3)),this.setAttribute("uv",new vt(a,2)),this.setAttribute("normal",new vt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wd(e.points,e.segments,e.phiStart,e.phiLength)}}class Vm extends Wd{constructor(e=1,t=1,r=4,i=8){const s=new ym;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new Vm(e.radius,e.length,e.capSegments,e.radialSegments)}}class Wm extends Lt{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new V,c=new De;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=t;f++,h+=3){const m=r+f/t*i;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[h]/e+1)/2,c.y=(o[h+1]/e+1)/2,l.push(c.x,c.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new vt(o,3)),this.setAttribute("normal",new vt(a,3)),this.setAttribute("uv",new vt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wm(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Bc extends Lt{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const c=[],f=[],h=[],m=[];let y=0;const g=[],v=r/2;let x=0;_(),o===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(c),this.setAttribute("position",new vt(f,3)),this.setAttribute("normal",new vt(h,3)),this.setAttribute("uv",new vt(m,2));function _(){const A=new V,R=new V;let M=0;const P=(t-e)/r;for(let b=0;b<=s;b++){const C=[],T=b/s,I=T*(t-e)+e;for(let D=0;D<=i;D++){const z=D/i,N=z*l+a,J=Math.sin(N),Q=Math.cos(N);R.x=I*J,R.y=-T*r+v,R.z=I*Q,f.push(R.x,R.y,R.z),A.set(J,P,Q).normalize(),h.push(A.x,A.y,A.z),m.push(z,1-T),C.push(y++)}g.push(C)}for(let b=0;b<i;b++)for(let C=0;C<s;C++){const T=g[C][b],I=g[C+1][b],D=g[C+1][b+1],z=g[C][b+1];c.push(T,I,z),c.push(I,D,z),M+=6}u.addGroup(x,M,0),x+=M}function w(A){const R=y,M=new De,P=new V;let b=0;const C=A===!0?e:t,T=A===!0?1:-1;for(let D=1;D<=i;D++)f.push(0,v*T,0),h.push(0,T,0),m.push(.5,.5),y++;const I=y;for(let D=0;D<=i;D++){const N=D/i*l+a,J=Math.cos(N),Q=Math.sin(N);P.x=C*Q,P.y=v*T,P.z=C*J,f.push(P.x,P.y,P.z),h.push(0,T,0),M.x=J*.5+.5,M.y=Q*.5*T+.5,m.push(M.x,M.y),y++}for(let D=0;D<i;D++){const z=R+D,N=I+D;A===!0?c.push(N,N+1,z):c.push(N+1,N,z),b+=3}u.addGroup(x,b,A===!0?1:2),x+=b}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class jm extends Bc{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new jm(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class qa extends Lt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),u(r),c(),this.setAttribute("position",new vt(s,3)),this.setAttribute("normal",new vt(s.slice(),3)),this.setAttribute("uv",new vt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const w=new V,A=new V,R=new V;for(let M=0;M<t.length;M+=3)m(t[M+0],w),m(t[M+1],A),m(t[M+2],R),l(w,A,R,_)}function l(_,w,A,R){const M=R+1,P=[];for(let b=0;b<=M;b++){P[b]=[];const C=_.clone().lerp(A,b/M),T=w.clone().lerp(A,b/M),I=M-b;for(let D=0;D<=I;D++)D===0&&b===M?P[b][D]=C:P[b][D]=C.clone().lerp(T,D/I)}for(let b=0;b<M;b++)for(let C=0;C<2*(M-b)-1;C++){const T=Math.floor(C/2);C%2===0?(h(P[b][T+1]),h(P[b+1][T]),h(P[b][T])):(h(P[b][T+1]),h(P[b+1][T+1]),h(P[b+1][T]))}}function u(_){const w=new V;for(let A=0;A<s.length;A+=3)w.x=s[A+0],w.y=s[A+1],w.z=s[A+2],w.normalize().multiplyScalar(_),s[A+0]=w.x,s[A+1]=w.y,s[A+2]=w.z}function c(){const _=new V;for(let w=0;w<s.length;w+=3){_.x=s[w+0],_.y=s[w+1],_.z=s[w+2];const A=v(_)/2/Math.PI+.5,R=x(_)/Math.PI+.5;o.push(A,1-R)}y(),f()}function f(){for(let _=0;_<o.length;_+=6){const w=o[_+0],A=o[_+2],R=o[_+4],M=Math.max(w,A,R),P=Math.min(w,A,R);M>.9&&P<.1&&(w<.2&&(o[_+0]+=1),A<.2&&(o[_+2]+=1),R<.2&&(o[_+4]+=1))}}function h(_){s.push(_.x,_.y,_.z)}function m(_,w){const A=_*3;w.x=e[A+0],w.y=e[A+1],w.z=e[A+2]}function y(){const _=new V,w=new V,A=new V,R=new V,M=new De,P=new De,b=new De;for(let C=0,T=0;C<s.length;C+=9,T+=6){_.set(s[C+0],s[C+1],s[C+2]),w.set(s[C+3],s[C+4],s[C+5]),A.set(s[C+6],s[C+7],s[C+8]),M.set(o[T+0],o[T+1]),P.set(o[T+2],o[T+3]),b.set(o[T+4],o[T+5]),R.copy(_).add(w).add(A).divideScalar(3);const I=v(R);g(M,T+0,_,I),g(P,T+2,w,I),g(b,T+4,A,I)}}function g(_,w,A,R){R<0&&_.x===1&&(o[w]=_.x-1),A.x===0&&A.z===0&&(o[w]=R/2/Math.PI+.5)}function v(_){return Math.atan2(_.z,-_.x)}function x(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qa(e.vertices,e.indices,e.radius,e.details)}}class $m extends qa{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $m(e.radius,e.detail)}}const V0=new V,W0=new V,Rx=new V,j0=new Vs;class X4 extends Lt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(cc*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],f=new Array(3),h={},m=[];for(let y=0;y<l;y+=3){o?(u[0]=o.getX(y),u[1]=o.getX(y+1),u[2]=o.getX(y+2)):(u[0]=y,u[1]=y+1,u[2]=y+2);const{a:g,b:v,c:x}=j0;if(g.fromBufferAttribute(a,u[0]),v.fromBufferAttribute(a,u[1]),x.fromBufferAttribute(a,u[2]),j0.getNormal(Rx),f[0]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,f[1]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,f[2]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let _=0;_<3;_++){const w=(_+1)%3,A=f[_],R=f[w],M=j0[c[_]],P=j0[c[w]],b=`${A}_${R}`,C=`${R}_${A}`;C in h&&h[C]?(Rx.dot(h[C].normal)<=s&&(m.push(M.x,M.y,M.z),m.push(P.x,P.y,P.z)),h[C]=null):b in h||(h[b]={index0:u[_],index1:u[w],normal:Rx.clone()})}}for(const y in h)if(h[y]){const{index0:g,index1:v}=h[y];V0.fromBufferAttribute(a,g),W0.fromBufferAttribute(a,v),m.push(V0.x,V0.y,V0.z),m.push(W0.x,W0.y,W0.z)}this.setAttribute("position",new vt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Kl extends ym{constructor(e){super(e),this.uuid=gs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new ym().fromJSON(i))}return this}}const vW={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=K4(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,f,h,m;if(r&&(s=SW(n,e,s,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(let y=t;y<i;y+=t)f=n[y],h=n[y+1],f<a&&(a=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);m=Math.max(u-a,c-l),m=m!==0?32767/m:0}return _m(s,o,t,a,l,m,0),o}};function K4(n,e,t,r,i){let s,o;if(i===DW(n,e,t,r)>0)for(s=e;s<t;s+=r)o=b3(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=b3(s,n[s],n[s+1],o);return o&&S1(o,o.next)&&(wm(o),o=o.next),o}function Mc(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(S1(t,t.next)||Xn(t.prev,t,t.next)===0)){if(wm(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function _m(n,e,t,r,i,s,o){if(!n)return;!o&&s&&CW(n,r,i,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?_W(n,r,i,s):yW(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),wm(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=xW(Mc(n),e,t),_m(n,e,t,r,i,s,2)):o===2&&wW(n,e,t,r,i,s):_m(Mc(n),e,t,r,i,s,1);break}}}function yW(n){const e=n.prev,t=n,r=n.next;if(Xn(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,u=r.y,c=i<s?i<o?i:o:s<o?s:o,f=a<l?a<u?a:u:l<u?l:u,h=i>s?i>o?i:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u;let y=r.next;for(;y!==e;){if(y.x>=c&&y.x<=h&&y.y>=f&&y.y<=m&&jf(i,a,s,l,o,u,y.x,y.y)&&Xn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function _W(n,e,t,r){const i=n.prev,s=n,o=n.next;if(Xn(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,c=i.y,f=s.y,h=o.y,m=a<l?a<u?a:u:l<u?l:u,y=c<f?c<h?c:h:f<h?f:h,g=a>l?a>u?a:u:l>u?l:u,v=c>f?c>h?c:h:f>h?f:h,x=s2(m,y,e,t,r),_=s2(g,v,e,t,r);let w=n.prevZ,A=n.nextZ;for(;w&&w.z>=x&&A&&A.z<=_;){if(w.x>=m&&w.x<=g&&w.y>=y&&w.y<=v&&w!==i&&w!==o&&jf(a,c,l,f,u,h,w.x,w.y)&&Xn(w.prev,w,w.next)>=0||(w=w.prevZ,A.x>=m&&A.x<=g&&A.y>=y&&A.y<=v&&A!==i&&A!==o&&jf(a,c,l,f,u,h,A.x,A.y)&&Xn(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;w&&w.z>=x;){if(w.x>=m&&w.x<=g&&w.y>=y&&w.y<=v&&w!==i&&w!==o&&jf(a,c,l,f,u,h,w.x,w.y)&&Xn(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;A&&A.z<=_;){if(A.x>=m&&A.x<=g&&A.y>=y&&A.y<=v&&A!==i&&A!==o&&jf(a,c,l,f,u,h,A.x,A.y)&&Xn(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function xW(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!S1(i,s)&&Y4(i,r,r.next,s)&&xm(i,s)&&xm(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),wm(r),wm(r.next),r=n=s),r=r.next}while(r!==n);return Mc(r)}function wW(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&PW(o,a)){let l=Q4(o,a);o=Mc(o,o.next),l=Mc(l,l.next),_m(o,e,t,r,i,s,0),_m(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function SW(n,e,t,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,u=K4(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(RW(u));for(i.sort(bW),s=0;s<i.length;s++)t=AW(i[s],t);return t}function bW(n,e){return n.x-e.x}function AW(n,e){const t=MW(n,e);if(!t)return e;const r=Q4(t,n);return Mc(r,r.next),Mc(t,t.next)}function MW(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const h=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=s&&h>r&&(r=h,i=t.x<t.next.x?t:t.next,h===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let c=1/0,f;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&jf(o<u?s:r,o,l,u,o<u?r:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),xm(t,n)&&(f<c||f===c&&(t.x>i.x||t.x===i.x&&EW(i,t)))&&(i=t,c=f)),t=t.next;while(t!==a);return i}function EW(n,e){return Xn(n.prev,n,e.prev)<0&&Xn(e.next,n,n.next)<0}function CW(n,e,t,r){let i=n;do i.z===0&&(i.z=s2(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,TW(i)}function TW(n){let e,t,r,i,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(o>1);return n}function s2(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function RW(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function jf(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function PW(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!BW(n,e)&&(xm(n,e)&&xm(e,n)&&IW(n,e)&&(Xn(n.prev,n,e.prev)||Xn(n,e.prev,e))||S1(n,e)&&Xn(n.prev,n,n.next)>0&&Xn(e.prev,e,e.next)>0)}function Xn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function S1(n,e){return n.x===e.x&&n.y===e.y}function Y4(n,e,t,r){const i=J0(Xn(n,e,t)),s=J0(Xn(n,e,r)),o=J0(Xn(t,r,n)),a=J0(Xn(t,r,e));return!!(i!==s&&o!==a||i===0&&$0(n,t,e)||s===0&&$0(n,r,e)||o===0&&$0(t,n,r)||a===0&&$0(t,e,r))}function $0(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function J0(n){return n>0?1:n<0?-1:0}function BW(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Y4(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function xm(n,e){return Xn(n.prev,n,n.next)<0?Xn(n,e,n.next)>=0&&Xn(n,n.prev,e)>=0:Xn(n,e,n.prev)<0||Xn(n,n.next,e)<0}function IW(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function Q4(n,e){const t=new o2(n.i,n.x,n.y),r=new o2(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function b3(n,e,t,r){const i=new o2(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function wm(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function o2(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function DW(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class ea{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return ea.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];A3(e),M3(r,e);let o=e.length;t.forEach(A3);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,M3(r,t[l]);const a=vW.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function A3(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function M3(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Jm extends Lt{constructor(e=new Kl([new De(.5,.5),new De(-.5,.5),new De(-.5,-.5),new De(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new vt(i,3)),this.setAttribute("uv",new vt(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:m-.1,g=t.bevelOffset!==void 0?t.bevelOffset:0,v=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:LW;let w,A=!1,R,M,P,b;x&&(w=x.getSpacedPoints(c),A=!0,h=!1,R=x.computeFrenetFrames(c,!1),M=new V,P=new V,b=new V),h||(v=0,m=0,y=0,g=0);const C=a.extractPoints(u);let T=C.shape;const I=C.holes;if(!ea.isClockWise(T)){T=T.reverse();for(let q=0,se=I.length;q<se;q++){const ge=I[q];ea.isClockWise(ge)&&(I[q]=ge.reverse())}}const z=ea.triangulateShape(T,I),N=T;for(let q=0,se=I.length;q<se;q++){const ge=I[q];T=T.concat(ge)}function J(q,se,ge){return se||console.error("THREE.ExtrudeGeometry: vec does not exist"),q.clone().addScaledVector(se,ge)}const Q=T.length,re=z.length;function G(q,se,ge){let Me,Ce,Ke;const Re=q.x-se.x,Oe=q.y-se.y,ze=ge.x-q.x,Ee=ge.y-q.y,$=Re*Re+Oe*Oe,O=Re*Ee-Oe*ze;if(Math.abs(O)>Number.EPSILON){const ae=Math.sqrt($),Ae=Math.sqrt(ze*ze+Ee*Ee),ke=se.x-Oe/ae,Ue=se.y+Re/ae,je=ge.x-Ee/Ae,Ne=ge.y+ze/Ae,Be=((je-ke)*Ee-(Ne-Ue)*ze)/(Re*Ee-Oe*ze);Me=ke+Re*Be-q.x,Ce=Ue+Oe*Be-q.y;const nt=Me*Me+Ce*Ce;if(nt<=2)return new De(Me,Ce);Ke=Math.sqrt(nt/2)}else{let ae=!1;Re>Number.EPSILON?ze>Number.EPSILON&&(ae=!0):Re<-Number.EPSILON?ze<-Number.EPSILON&&(ae=!0):Math.sign(Oe)===Math.sign(Ee)&&(ae=!0),ae?(Me=-Oe,Ce=Re,Ke=Math.sqrt($)):(Me=Re,Ce=Oe,Ke=Math.sqrt($/2))}return new De(Me/Ke,Ce/Ke)}const j=[];for(let q=0,se=N.length,ge=se-1,Me=q+1;q<se;q++,ge++,Me++)ge===se&&(ge=0),Me===se&&(Me=0),j[q]=G(N[q],N[ge],N[Me]);const Y=[];let X,K=j.concat();for(let q=0,se=I.length;q<se;q++){const ge=I[q];X=[];for(let Me=0,Ce=ge.length,Ke=Ce-1,Re=Me+1;Me<Ce;Me++,Ke++,Re++)Ke===Ce&&(Ke=0),Re===Ce&&(Re=0),X[Me]=G(ge[Me],ge[Ke],ge[Re]);Y.push(X),K=K.concat(X)}for(let q=0;q<v;q++){const se=q/v,ge=m*Math.cos(se*Math.PI/2),Me=y*Math.sin(se*Math.PI/2)+g;for(let Ce=0,Ke=N.length;Ce<Ke;Ce++){const Re=J(N[Ce],j[Ce],Me);pe(Re.x,Re.y,-ge)}for(let Ce=0,Ke=I.length;Ce<Ke;Ce++){const Re=I[Ce];X=Y[Ce];for(let Oe=0,ze=Re.length;Oe<ze;Oe++){const Ee=J(Re[Oe],X[Oe],Me);pe(Ee.x,Ee.y,-ge)}}}const ce=y+g;for(let q=0;q<Q;q++){const se=h?J(T[q],K[q],ce):T[q];A?(P.copy(R.normals[0]).multiplyScalar(se.x),M.copy(R.binormals[0]).multiplyScalar(se.y),b.copy(w[0]).add(P).add(M),pe(b.x,b.y,b.z)):pe(se.x,se.y,0)}for(let q=1;q<=c;q++)for(let se=0;se<Q;se++){const ge=h?J(T[se],K[se],ce):T[se];A?(P.copy(R.normals[q]).multiplyScalar(ge.x),M.copy(R.binormals[q]).multiplyScalar(ge.y),b.copy(w[q]).add(P).add(M),pe(b.x,b.y,b.z)):pe(ge.x,ge.y,f/c*q)}for(let q=v-1;q>=0;q--){const se=q/v,ge=m*Math.cos(se*Math.PI/2),Me=y*Math.sin(se*Math.PI/2)+g;for(let Ce=0,Ke=N.length;Ce<Ke;Ce++){const Re=J(N[Ce],j[Ce],Me);pe(Re.x,Re.y,f+ge)}for(let Ce=0,Ke=I.length;Ce<Ke;Ce++){const Re=I[Ce];X=Y[Ce];for(let Oe=0,ze=Re.length;Oe<ze;Oe++){const Ee=J(Re[Oe],X[Oe],Me);A?pe(Ee.x,Ee.y+w[c-1].y,w[c-1].x+ge):pe(Ee.x,Ee.y,f+ge)}}}he(),te();function he(){const q=i.length/3;if(h){let se=0,ge=Q*se;for(let Me=0;Me<re;Me++){const Ce=z[Me];oe(Ce[2]+ge,Ce[1]+ge,Ce[0]+ge)}se=c+v*2,ge=Q*se;for(let Me=0;Me<re;Me++){const Ce=z[Me];oe(Ce[0]+ge,Ce[1]+ge,Ce[2]+ge)}}else{for(let se=0;se<re;se++){const ge=z[se];oe(ge[2],ge[1],ge[0])}for(let se=0;se<re;se++){const ge=z[se];oe(ge[0]+Q*c,ge[1]+Q*c,ge[2]+Q*c)}}r.addGroup(q,i.length/3-q,0)}function te(){const q=i.length/3;let se=0;me(N,se),se+=N.length;for(let ge=0,Me=I.length;ge<Me;ge++){const Ce=I[ge];me(Ce,se),se+=Ce.length}r.addGroup(q,i.length/3-q,1)}function me(q,se){let ge=q.length;for(;--ge>=0;){const Me=ge;let Ce=ge-1;Ce<0&&(Ce=q.length-1);for(let Ke=0,Re=c+v*2;Ke<Re;Ke++){const Oe=Q*Ke,ze=Q*(Ke+1),Ee=se+Me+Oe,$=se+Ce+Oe,O=se+Ce+ze,ae=se+Me+ze;U(Ee,$,O,ae)}}}function pe(q,se,ge){l.push(q),l.push(se),l.push(ge)}function oe(q,se,ge){W(q),W(se),W(ge);const Me=i.length/3,Ce=_.generateTopUV(r,i,Me-3,Me-2,Me-1);Z(Ce[0]),Z(Ce[1]),Z(Ce[2])}function U(q,se,ge,Me){W(q),W(se),W(Me),W(se),W(ge),W(Me);const Ce=i.length/3,Ke=_.generateSideWallUV(r,i,Ce-6,Ce-3,Ce-2,Ce-1);Z(Ke[0]),Z(Ke[1]),Z(Ke[3]),Z(Ke[1]),Z(Ke[2]),Z(Ke[3])}function W(q){i.push(l[q*3+0]),i.push(l[q*3+1]),i.push(l[q*3+2])}function Z(q){s.push(q.x),s.push(q.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return FW(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new OA[i.type]().fromJSON(i)),new Jm(r,e.options)}}const LW={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new De(s,o),new De(a,l),new De(u,c)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],f=e[r*3+2],h=e[i*3],m=e[i*3+1],y=e[i*3+2],g=e[s*3],v=e[s*3+1],x=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new De(o,1-l),new De(u,1-f),new De(h,1-y),new De(g,1-x)]:[new De(a,1-l),new De(c,1-f),new De(m,1-y),new De(v,1-x)]}};function FW(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class jd extends qa{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jd(e.radius,e.detail)}}class $d extends qa{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $d(e.radius,e.detail)}}class Xm extends Lt{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],c=[];let f=e;const h=(t-e)/i,m=new V,y=new De;for(let g=0;g<=i;g++){for(let v=0;v<=r;v++){const x=s+v/r*o;m.x=f*Math.cos(x),m.y=f*Math.sin(x),l.push(m.x,m.y,m.z),u.push(0,0,1),y.x=(m.x/t+1)/2,y.y=(m.y/t+1)/2,c.push(y.x,y.y)}f+=h}for(let g=0;g<i;g++){const v=g*(r+1);for(let x=0;x<r;x++){const _=x+v,w=_,A=_+r+1,R=_+r+2,M=_+1;a.push(w,A,M),a.push(A,R,M)}}this.setIndex(a),this.setAttribute("position",new vt(l,3)),this.setAttribute("normal",new vt(u,3)),this.setAttribute("uv",new vt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xm(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Km extends Lt{constructor(e=new Kl([new De(0,.5),new De(-.5,-.5),new De(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new vt(i,3)),this.setAttribute("normal",new vt(s,3)),this.setAttribute("uv",new vt(o,2));function u(c){const f=i.length/3,h=c.extractPoints(t);let m=h.shape;const y=h.holes;ea.isClockWise(m)===!1&&(m=m.reverse());for(let v=0,x=y.length;v<x;v++){const _=y[v];ea.isClockWise(_)===!0&&(y[v]=_.reverse())}const g=ea.triangulateShape(m,y);for(let v=0,x=y.length;v<x;v++){const _=y[v];m=m.concat(_)}for(let v=0,x=m.length;v<x;v++){const _=m[v];i.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let v=0,x=g.length;v<x;v++){const _=g[v],w=_[0]+f,A=_[1]+f,R=_[2]+f;r.push(w,A,R),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return kW(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new Km(r,e.curveSegments)}}function kW(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Jd extends Lt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const c=[],f=new V,h=new V,m=[],y=[],g=[],v=[];for(let x=0;x<=r;x++){const _=[],w=x/r;let A=0;x==0&&o==0?A=.5/t:x==r&&l==Math.PI&&(A=-.5/t);for(let R=0;R<=t;R++){const M=R/t;f.x=-e*Math.cos(i+M*s)*Math.sin(o+w*a),f.y=e*Math.cos(o+w*a),f.z=e*Math.sin(i+M*s)*Math.sin(o+w*a),y.push(f.x,f.y,f.z),h.copy(f).normalize(),g.push(h.x,h.y,h.z),v.push(M+A,1-w),_.push(u++)}c.push(_)}for(let x=0;x<r;x++)for(let _=0;_<t;_++){const w=c[x][_+1],A=c[x][_],R=c[x+1][_],M=c[x+1][_+1];(x!==0||o>0)&&m.push(w,A,M),(x!==r-1||l<Math.PI)&&m.push(A,R,M)}this.setIndex(m),this.setAttribute("position",new vt(y,3)),this.setAttribute("normal",new vt(g,3)),this.setAttribute("uv",new vt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Ym extends qa{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ym(e.radius,e.detail)}}class Qm extends Lt{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],c=new V,f=new V,h=new V;for(let m=0;m<=r;m++)for(let y=0;y<=i;y++){const g=y/i*s,v=m/r*Math.PI*2;f.x=(e+t*Math.cos(v))*Math.cos(g),f.y=(e+t*Math.cos(v))*Math.sin(g),f.z=t*Math.sin(v),a.push(f.x,f.y,f.z),c.x=e*Math.cos(g),c.y=e*Math.sin(g),h.subVectors(f,c).normalize(),l.push(h.x,h.y,h.z),u.push(y/i),u.push(m/r)}for(let m=1;m<=r;m++)for(let y=1;y<=i;y++){const g=(i+1)*m+y-1,v=(i+1)*(m-1)+y-1,x=(i+1)*(m-1)+y,_=(i+1)*m+y;o.push(g,v,_),o.push(v,x,_)}this.setIndex(o),this.setAttribute("position",new vt(a,3)),this.setAttribute("normal",new vt(l,3)),this.setAttribute("uv",new vt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qm(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Zm extends Lt{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],c=[],f=new V,h=new V,m=new V,y=new V,g=new V,v=new V,x=new V;for(let w=0;w<=r;++w){const A=w/r*s*Math.PI*2;_(A,s,o,e,m),_(A+.01,s,o,e,y),v.subVectors(y,m),x.addVectors(y,m),g.crossVectors(v,x),x.crossVectors(g,v),g.normalize(),x.normalize();for(let R=0;R<=i;++R){const M=R/i*Math.PI*2,P=-t*Math.cos(M),b=t*Math.sin(M);f.x=m.x+(P*x.x+b*g.x),f.y=m.y+(P*x.y+b*g.y),f.z=m.z+(P*x.z+b*g.z),l.push(f.x,f.y,f.z),h.subVectors(f,m).normalize(),u.push(h.x,h.y,h.z),c.push(w/r),c.push(R/i)}}for(let w=1;w<=r;w++)for(let A=1;A<=i;A++){const R=(i+1)*(w-1)+(A-1),M=(i+1)*w+(A-1),P=(i+1)*w+A,b=(i+1)*(w-1)+A;a.push(R,M,b),a.push(M,P,b)}this.setIndex(a),this.setAttribute("position",new vt(l,3)),this.setAttribute("normal",new vt(u,3)),this.setAttribute("uv",new vt(c,2));function _(w,A,R,M,P){const b=Math.cos(w),C=Math.sin(w),T=R/A*w,I=Math.cos(T);P.x=M*(2+I)*.5*b,P.y=M*(2+I)*C*.5,P.z=M*Math.sin(T)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zm(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class qm extends Lt{constructor(e=new FA(new V(-1,-1,0),new V(-1,1,0),new V(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new V,l=new V,u=new De;let c=new V;const f=[],h=[],m=[],y=[];g(),this.setIndex(y),this.setAttribute("position",new vt(f,3)),this.setAttribute("normal",new vt(h,3)),this.setAttribute("uv",new vt(m,2));function g(){for(let w=0;w<t;w++)v(w);v(s===!1?t:0),_(),x()}function v(w){c=e.getPointAt(w/t,c);const A=o.normals[w],R=o.binormals[w];for(let M=0;M<=i;M++){const P=M/i*Math.PI*2,b=Math.sin(P),C=-Math.cos(P);l.x=C*A.x+b*R.x,l.y=C*A.y+b*R.y,l.z=C*A.z+b*R.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=c.x+r*l.x,a.y=c.y+r*l.y,a.z=c.z+r*l.z,f.push(a.x,a.y,a.z)}}function x(){for(let w=1;w<=t;w++)for(let A=1;A<=i;A++){const R=(i+1)*(w-1)+(A-1),M=(i+1)*w+(A-1),P=(i+1)*w+A,b=(i+1)*(w-1)+A;y.push(R,M,b),y.push(M,P,b)}}function _(){for(let w=0;w<=t;w++)for(let A=0;A<=i;A++)u.x=w/t,u.y=A/i,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new qm(new OA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Z4 extends Lt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new V,s=new V;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const f=l[u],h=f.start,m=f.count;for(let y=h,g=h+m;y<g;y+=3)for(let v=0;v<3;v++){const x=a.getX(y+v),_=a.getX(y+(v+1)%3);i.fromBufferAttribute(o,x),s.fromBufferAttribute(o,_),E3(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,f=3*a+(u+1)%3;i.fromBufferAttribute(o,c),s.fromBufferAttribute(o,f),E3(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new vt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function E3(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var C3=Object.freeze({__proto__:null,BoxGeometry:pu,CapsuleGeometry:Vm,CircleGeometry:Wm,ConeGeometry:jm,CylinderGeometry:Bc,DodecahedronGeometry:$m,EdgesGeometry:X4,ExtrudeGeometry:Jm,IcosahedronGeometry:jd,LatheGeometry:Wd,OctahedronGeometry:$d,PlaneGeometry:Za,PolyhedronGeometry:qa,RingGeometry:Xm,ShapeGeometry:Km,SphereGeometry:Jd,TetrahedronGeometry:Ym,TorusGeometry:Qm,TorusKnotGeometry:Zm,TubeGeometry:qm,WireframeGeometry:Z4});class q4 extends zn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new qe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class eF extends wr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Xd extends zn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new qe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hu,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Lo extends Xd{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new De(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return cr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new qe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new qe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new qe(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class UA extends zn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new qe(16777215),this.specular=new qe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hu,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Um,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class NA extends zn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new qe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hu,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class zA extends zn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hu,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class GA extends zn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hu,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Um,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class tF extends zn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new qe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hu,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nF extends yi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ns(n,e,t){return HA(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function ic(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function HA(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function rF(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function a2(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function VA(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function OW(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),f=[],h=[];for(let m=0;m<u.times.length;++m){const y=u.times[m]*i;if(!(y<t||y>=r)){f.push(u.times[m]);for(let g=0;g<c;++g)h.push(u.values[m*c+g])}}f.length!==0&&(u.times=ic(f,u.times.constructor),u.values=ic(h,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function UW(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(x){return x.name===a.name&&x.ValueTypeName===l});if(u===void 0)continue;let c=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=f/3);let h=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=m/3);const y=a.times.length-1;let g;if(s<=a.times[0]){const x=c,_=f-c;g=Ns(a.values,x,_)}else if(s>=a.times[y]){const x=y*f+c,_=x+f-c;g=Ns(a.values,x,_)}else{const x=a.createInterpolant(),_=c,w=f-c;x.evaluate(s),g=Ns(x.resultBuffer,_,w)}l==="quaternion"&&new Zn().fromArray(g).normalize().conjugate().toArray(g);const v=u.times.length;for(let x=0;x<v;++x){const _=x*m+h;if(l==="quaternion")Zn.multiplyQuaternionsFlat(u.values,_,g,0,u.values,_);else{const w=m-h*2;for(let A=0;A<w;++A)u.values[_+A]-=g[A]}}}return n.blendMode=hA,n}const NW={arraySlice:Ns,convertArray:ic,isTypedArray:HA,getKeyframeOrder:rF,sortedArray:a2,flattenJSON:VA,subclip:OW,makeClipAdditive:UW};class Kd{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class iF extends Kd{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:tc,endingEnd:tc}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case nc:s=e,a=2*t-r;break;case pm:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case nc:o=e,l=2*r-t;break;case pm:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,m=this._weightNext,y=(r-t)/(i-t),g=y*y,v=g*y,x=-h*v+2*h*g-h*y,_=(1+h)*v+(-1.5-2*h)*g+(-.5+h)*y+1,w=(-1-m)*v+(1.5+m)*g+.5*y,A=m*v-m*g;for(let R=0;R!==a;++R)s[R]=x*o[c+R]+_*o[u+R]+w*o[l+R]+A*o[f+R];return s}}class WA extends Kd{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(r-t)/(i-t),f=1-c;for(let h=0;h!==a;++h)s[h]=o[u+h]*f+o[l+h]*c;return s}}class sF extends Kd{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Fo{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ic(t,this.TimeBufferType),this.values=ic(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:ic(e.times,Array),values:ic(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new sF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new WA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new iF(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case wd:t=this.InterpolantFactoryMethodDiscrete;break;case bc:t=this.InterpolantFactoryMethodLinear;break;case Uv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wd;case this.InterpolantFactoryMethodLinear:return bc;case this.InterpolantFactoryMethodSmooth:return Uv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Ns(r,s,o),this.values=Ns(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&HA(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=Ns(this.times),t=Ns(this.values),r=this.getValueSize(),i=this.getInterpolation()===Uv,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(i)l=!0;else{const f=a*r,h=f-r,m=f+r;for(let y=0;y!==r;++y){const g=t[f+y];if(g!==t[h+y]||g!==t[m+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,h=o*r;for(let m=0;m!==r;++m)t[h+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=Ns(e,0,o),this.values=Ns(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=Ns(this.times,0),t=Ns(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Fo.prototype.TimeBufferType=Float32Array;Fo.prototype.ValueBufferType=Float32Array;Fo.prototype.DefaultInterpolation=bc;class Ic extends Fo{}Ic.prototype.ValueTypeName="bool";Ic.prototype.ValueBufferType=Array;Ic.prototype.DefaultInterpolation=wd;Ic.prototype.InterpolantFactoryMethodLinear=void 0;Ic.prototype.InterpolantFactoryMethodSmooth=void 0;class jA extends Fo{}jA.prototype.ValueTypeName="color";class Md extends Fo{}Md.prototype.ValueTypeName="number";class oF extends Kd{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let c=u+a;u!==c;u+=4)Zn.slerpFlat(s,0,o,u-a,o,u,l);return s}}class su extends Fo{InterpolantFactoryMethodLinear(e){return new oF(this.times,this.values,this.getValueSize(),e)}}su.prototype.ValueTypeName="quaternion";su.prototype.DefaultInterpolation=bc;su.prototype.InterpolantFactoryMethodSmooth=void 0;class Dc extends Fo{}Dc.prototype.ValueTypeName="string";Dc.prototype.ValueBufferType=Array;Dc.prototype.DefaultInterpolation=wd;Dc.prototype.InterpolantFactoryMethodLinear=void 0;Dc.prototype.InterpolantFactoryMethodSmooth=void 0;class Ed extends Fo{}Ed.prototype.ValueTypeName="vector";class Cd{constructor(e,t=-1,r,i=l1){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=gs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(GW(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Fo.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=rF(l);l=a2(l,1,c),u=a2(u,1,c),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Md(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const f=c[1];let h=i[f];h||(i[f]=h=[]),h.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,h,m,y,g){if(m.length!==0){const v=[],x=[];VA(m,v,x,y),v.length!==0&&g.push(new f(h,v,x))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const h=u[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const m={};let y;for(y=0;y<h.length;y++)if(h[y].morphTargets)for(let g=0;g<h[y].morphTargets.length;g++)m[h[y].morphTargets[g]]=-1;for(const g in m){const v=[],x=[];for(let _=0;_!==h[y].morphTargets.length;++_){const w=h[y];v.push(w.time),x.push(w.morphTarget===g?1:0)}i.push(new Md(".morphTargetInfluence["+g+"]",v,x))}l=m.length*o}else{const m=".bones["+t[f].name+"]";r(Ed,m+".position",h,"pos",i),r(su,m+".quaternion",h,"rot",i),r(Ed,m+".scale",h,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function zW(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Md;case"vector":case"vector2":case"vector3":case"vector4":return Ed;case"color":return jA;case"quaternion":return su;case"bool":case"boolean":return Ic;case"string":return Dc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function GW(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=zW(n.type);if(n.times===void 0){const t=[],r=[];VA(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ec={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class $A{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,f){return u.push(c,f),this},this.removeHandler=function(c){const f=u.indexOf(c);return f!==-1&&u.splice(f,2),this},this.getHandler=function(c){for(let f=0,h=u.length;f<h;f+=2){const m=u[f],y=u[f+1];if(m.global&&(m.lastIndex=0),m.test(c))return y}return null}}}const $f=new $A;class Fi{constructor(e){this.manager=e!==void 0?e:$f,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const wa={};class HW extends Error{constructor(e,t){super(e),this.response=t}}class xs extends Fi{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ec.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(wa[e]!==void 0){wa[e].push({onLoad:t,onProgress:r,onError:i});return}wa[e]=[],wa[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=wa[e],f=u.body.getReader(),h=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),m=h?parseInt(h):0,y=m!==0;let g=0;const v=new ReadableStream({start(x){_();function _(){f.read().then(({done:w,value:A})=>{if(w)x.close();else{g+=A.byteLength;const R=new ProgressEvent("progress",{lengthComputable:y,loaded:g,total:m});for(let M=0,P=c.length;M<P;M++){const b=c[M];b.onProgress&&b.onProgress(R)}x.enqueue(A),_()}})}}});return new Response(v)}else throw new HW(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),h=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(h);return u.arrayBuffer().then(y=>m.decode(y))}}}).then(u=>{Ec.add(e,u);const c=wa[e];delete wa[e];for(let f=0,h=c.length;f<h;f++){const m=c[f];m.onLoad&&m.onLoad(u)}}).catch(u=>{const c=wa[e];if(c===void 0)throw this.manager.itemError(e),u;delete wa[e];for(let f=0,h=c.length;f<h;f++){const m=c[f];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class VW extends Fi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new xs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Cd.parse(e[r]);t.push(i)}return t}}class WW extends Fi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new PA,l=new xs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(f){l.load(e[f],function(h){const m=s.parse(h,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=rn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let f=0,h=e.length;f<h;++f)c(f);else l.load(e,function(f){const h=s.parse(f,!0);if(h.isCubemap){const m=h.mipmaps.length/h.mipmapCount;for(let y=0;y<m;y++){o[y]={mipmaps:[]};for(let g=0;g<h.mipmapCount;g++)o[y].mipmaps.push(h.mipmaps[y*h.mipmapCount+g]),o[y].format=h.format,o[y].width=h.width,o[y].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=rn),a.format=h.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Sm extends Fi{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ec.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=vm("img");function l(){c(),Ec.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(f){c(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class aF extends Fi{constructor(e){super(e)}load(e,t,r,i){const s=new zm,o=new Sm(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class JA extends Fi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new sd,a=new xs(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const u=s.parse(l);u&&(u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Kr,o.wrapT=u.wrapT!==void 0?u.wrapT:Kr,o.magFilter=u.magFilter!==void 0?u.magFilter:rn,o.minFilter=u.minFilter!==void 0?u.minFilter:rn,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Ro),u.mipmapCount===1&&(o.minFilter=rn),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u))},r,i),o}}class lF extends Fi{constructor(e){super(e)}load(e,t,r,i){const s=new xn,o=new Sm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class mu extends un{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new qe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class uF extends mu{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(un.DEFAULT_UP),this.updateMatrix(),this.groundColor=new qe(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Px=new bt,T3=new V,R3=new V;class XA{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new De(512,512),this.map=null,this.mapPass=null,this.matrix=new bt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new c1,this._frameExtents=new De(1,1),this._viewportCount=1,this._viewports=[new jt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;T3.setFromMatrixPosition(e.matrixWorld),t.position.copy(T3),R3.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(R3),t.updateMatrixWorld(),Px.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Px),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Px)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class jW extends XA{constructor(){super(new yr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=gm*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class KA extends mu{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(un.DEFAULT_UP),this.updateMatrix(),this.target=new un,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new jW}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const P3=new bt,Jh=new V,Bx=new V;class $W extends XA{constructor(){super(new yr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new De(4,2),this._viewportCount=6,this._viewports=[new jt(2,1,1,1),new jt(0,1,1,1),new jt(3,1,1,1),new jt(1,1,1,1),new jt(3,0,1,1),new jt(1,0,1,1)],this._cubeDirections=[new V(1,0,0),new V(-1,0,0),new V(0,0,1),new V(0,0,-1),new V(0,1,0),new V(0,-1,0)],this._cubeUps=[new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,0,1),new V(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Jh.setFromMatrixPosition(e.matrixWorld),r.position.copy(Jh),Bx.copy(r.position),Bx.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Bx),r.updateMatrixWorld(),i.makeTranslation(-Jh.x,-Jh.y,-Jh.z),P3.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(P3)}}class YA extends mu{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new $W}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class JW extends XA{constructor(){super(new Hd(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class QA extends mu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(un.DEFAULT_UP),this.updateMatrix(),this.target=new un,this.shadow=new JW}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class cF extends mu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class fF extends mu{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class dF{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new V)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class b1 extends mu{constructor(e=new dF,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class A1 extends Fi{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new xs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=A1.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new qe().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new qe().setHex(o.value);break;case"v2":i.uniforms[s].value=new De().fromArray(o.value);break;case"v3":i.uniforms[s].value=new V().fromArray(o.value);break;case"v4":i.uniforms[s].value=new jt().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Pr().fromArray(o.value);break;case"m4":i.uniforms[s].value=new bt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new De().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new De().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:q4,SpriteMaterial:MA,RawShaderMaterial:eF,ShaderMaterial:wr,PointsMaterial:_1,MeshPhysicalMaterial:Lo,MeshStandardMaterial:Xd,MeshPhongMaterial:UA,MeshToonMaterial:NA,MeshNormalMaterial:zA,MeshLambertMaterial:GA,MeshDepthMaterial:d1,MeshDistanceMaterial:h1,MeshBasicMaterial:Pi,MeshMatcapMaterial:tF,LineDashedMaterial:nF,LineBasicMaterial:yi,Material:zn};return new t[e]}}class ta{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ZA extends Lt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class hF extends Fi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new xs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,y){if(t[y]!==void 0)return t[y];const v=m.interleavedBuffers[y],x=s(m,v.buffer),_=Vf(v.type,x),w=new Gm(_,v.stride);return w.uuid=v.uuid,t[y]=w,w}function s(m,y){if(r[y]!==void 0)return r[y];const v=m.arrayBuffers[y],x=new Uint32Array(v).buffer;return r[y]=x,x}const o=e.isInstancedBufferGeometry?new ZA:new Lt,a=e.data.index;if(a!==void 0){const m=Vf(a.type,a.array);o.setIndex(new Qt(m,1))}const l=e.data.attributes;for(const m in l){const y=l[m];let g;if(y.isInterleavedBufferAttribute){const v=i(e.data,y.data);g=new iu(v,y.itemSize,y.offset,y.normalized)}else{const v=Vf(y.type,y.array),x=y.isInstancedBufferAttribute?Ac:Qt;g=new x(v,y.itemSize,y.normalized)}y.name!==void 0&&(g.name=y.name),y.usage!==void 0&&g.setUsage(y.usage),y.updateRange!==void 0&&(g.updateRange.offset=y.updateRange.offset,g.updateRange.count=y.updateRange.count),o.setAttribute(m,g)}const u=e.data.morphAttributes;if(u)for(const m in u){const y=u[m],g=[];for(let v=0,x=y.length;v<x;v++){const _=y[v];let w;if(_.isInterleavedBufferAttribute){const A=i(e.data,_.data);w=new iu(A,_.itemSize,_.offset,_.normalized)}else{const A=Vf(_.type,_.array);w=new Qt(A,_.itemSize,_.normalized)}_.name!==void 0&&(w.name=_.name),g.push(w)}o.morphAttributes[m]=g}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,y=f.length;m!==y;++m){const g=f[m];o.addGroup(g.start,g.count,g.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const m=new V;h.center!==void 0&&m.fromArray(h.center),o.boundingSphere=new Qa(m,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class XW extends Fi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?ta.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new xs(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?ta.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new xs(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let f=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Kl().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Hm().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new hF;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in C3?a=C3[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new A1;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Cd.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(c)}else return l.data?{data:Vf(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new $A(t);s=new Sm(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const f=e[u],h=f.url;if(Array.isArray(h)){const m=[];for(let y=0,g=h.length;y<g;y++){const v=h[y],x=a(v);x!==null&&(x instanceof HTMLImageElement?m.push(x):m.push(new sd(x.data,x.width,x.height)))}i[f.uuid]=new rc(m)}else{const m=a(f.url);i[f.uuid]=new rc(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Vf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Sm(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let f=0,h=u.length;f<h;f++){const m=u[f],y=await s(m);y!==null&&(y instanceof HTMLImageElement?c.push(y):c.push(new sd(y.data,y.width,y.height)))}r[l.uuid]=new rc(c)}else{const c=await s(l.url);r[l.uuid]=new rc(c)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new zm,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new sd:c=new xn,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=r(a.mapping,KW)),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=r(a.wrap[0],B3),c.wrapT=r(a.wrap[1],B3)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.encoding!==void 0&&(c.encoding=a.encoding),a.minFilter!==void 0&&(c.minFilter=r(a.minFilter,I3)),a.magFilter!==void 0&&(c.magFilter=r(a.magFilter,I3)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(c.userData=a.userData),i[a.uuid]=c}return i}parseObject(e,t,r,i,s){let o;function a(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const m=[];for(let y=0,g=h.length;y<g;y++){const v=h[y];r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),m.push(r[v])}return m}return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),r[h]}}function u(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let c,f;switch(e.type){case"Scene":o=new Ad,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new qe(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new v1(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new g1(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new yr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Hd(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new cF(e.color,e.intensity);break;case"DirectionalLight":o=new QA(e.color,e.intensity);break;case"PointLight":o=new YA(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new fF(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new KA(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new uF(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new b1().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),f=l(e.material),o=new EA(c,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),f=l(e.material),o=new Nn(c,f);break;case"InstancedMesh":c=a(e.geometry),f=l(e.material);const h=e.count,m=e.instanceMatrix,y=e.instanceColor;o=new CA(c,f,h),o.instanceMatrix=new Ac(new Float32Array(m.array),16),y!==void 0&&(o.instanceColor=new Ac(new Float32Array(y.array),y.itemSize));break;case"LOD":o=new V4;break;case"Line":o=new Wa(a(e.geometry),l(e.material));break;case"LineLoop":o=new TA(a(e.geometry),l(e.material));break;case"LineSegments":o=new Io(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new RA(a(e.geometry),l(e.material));break;case"Sprite":o=new H4(l(e.material));break;case"Group":o=new bo;break;case"Bone":o=new y1;break;default:o=new un}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let m=0;m<h.length;m++)o.add(this.parseObject(h[m],t,r,i,s))}if(e.animations!==void 0){const h=e.animations;for(let m=0;m<h.length;m++){const y=h[m];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let m=0;m<h.length;m++){const y=h[m],g=o.getObjectByProperty("uuid",y.object);g!==void 0&&o.addLevel(g,y.distance,y.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const KW={UVMapping:o1,CubeReflectionMapping:Va,CubeRefractionMapping:tu,EquirectangularReflectionMapping:_d,EquirectangularRefractionMapping:dm,CubeUVReflectionMapping:zd},B3={RepeatWrapping:nu,ClampToEdgeWrapping:Kr,MirroredRepeatWrapping:xd},I3={NearestFilter:Sn,NearestMipmapNearestFilter:hm,NearestMipmapLinearFilter:rd,LinearFilter:rn,LinearMipmapNearestFilter:a1,LinearMipmapLinearFilter:Ro};class pF extends Fi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ec.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Ec.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let X0;class qA{static getContext(){return X0===void 0&&(X0=new(window.AudioContext||window.webkitAudioContext)),X0}static setContext(e){X0=e}}class YW extends Fi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new xs(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);qA.getContext().decodeAudioData(l,function(c){t(c)})}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}}class QW extends b1{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new qe().set(e),s=new qe().set(t),o=new V(i.r,i.g,i.b),a=new V(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class ZW extends b1{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new qe().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const D3=new bt,L3=new bt,Du=new bt;class qW{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new yr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new yr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Du.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(cc*t.fov*.5)/t.zoom;let a,l;L3.elements[12]=-i,D3.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,Du.elements[0]=2*t.near/(l-a),Du.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Du),a=-o*t.aspect-s,l=o*t.aspect-s,Du.elements[0]=2*t.near/(l-a),Du.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Du)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(L3),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(D3)}}class eM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=F3(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=F3();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function F3(){return(typeof performance>"u"?Date:performance).now()}const Lu=new V,k3=new Zn,e7=new V,Fu=new V;class t7 extends un{constructor(){super(),this.type="AudioListener",this.context=qA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new eM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Lu,k3,e7),Fu.set(0,0,-1).applyQuaternion(k3),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Lu.x,i),t.positionY.linearRampToValueAtTime(Lu.y,i),t.positionZ.linearRampToValueAtTime(Lu.z,i),t.forwardX.linearRampToValueAtTime(Fu.x,i),t.forwardY.linearRampToValueAtTime(Fu.y,i),t.forwardZ.linearRampToValueAtTime(Fu.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Lu.x,Lu.y,Lu.z),t.setOrientation(Fu.x,Fu.y,Fu.z,r.x,r.y,r.z)}}class mF extends un{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ku=new V,O3=new Zn,n7=new V,Ou=new V;class r7 extends mF{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ku,O3,n7),Ou.set(0,0,1).applyQuaternion(O3);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ku.x,r),t.positionY.linearRampToValueAtTime(ku.y,r),t.positionZ.linearRampToValueAtTime(ku.z,r),t.orientationX.linearRampToValueAtTime(Ou.x,r),t.orientationY.linearRampToValueAtTime(Ou.y,r),t.orientationZ.linearRampToValueAtTime(Ou.z,r)}else t.setPosition(ku.x,ku.y,ku.z),t.setOrientation(Ou.x,Ou.y,Ou.z)}}class i7{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class gF{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Zn.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Zn.multiplyQuaternionsFlat(e,o,e,t,e,r),Zn.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const tM="\\[\\]\\.:\\/",s7=new RegExp("["+tM+"]","g"),nM="[^"+tM+"]",o7="[^"+tM.replace("\\.","")+"]",a7=/((?:WC+[\/:])*)/.source.replace("WC",nM),l7=/(WCOD+)?/.source.replace("WCOD",o7),u7=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",nM),c7=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",nM),f7=new RegExp("^"+a7+l7+u7+c7+"$"),d7=["material","materials","bones","map"];class h7{constructor(e,t,r){const i=r||ln.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class ln{constructor(e,t,r){this.path=t,this.parsedPath=r||ln.parseTrackName(t),this.node=ln.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new ln.Composite(e,t,r):new ln(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(s7,"")}static parseTrackName(e){const t=f7.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);d7.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=ln.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ln.Composite=h7;ln.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ln.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ln.prototype.GetterByBindingType=[ln.prototype._getValue_direct,ln.prototype._getValue_array,ln.prototype._getValue_arrayElement,ln.prototype._getValue_toArray];ln.prototype.SetterByBindingTypeAndVersioning=[[ln.prototype._setValue_direct,ln.prototype._setValue_direct_setNeedsUpdate,ln.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ln.prototype._setValue_array,ln.prototype._setValue_array_setNeedsUpdate,ln.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ln.prototype._setValue_arrayElement,ln.prototype._setValue_arrayElement_setNeedsUpdate,ln.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ln.prototype._setValue_fromArray,ln.prototype._setValue_fromArray_setNeedsUpdate,ln.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class p7{constructor(){this.isAnimationObjectGroup=!0,this.uuid=gs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,f=arguments.length;c!==f;++c){const h=arguments[c],m=h.uuid;let y=t[m];if(y===void 0){y=l++,t[m]=y,e.push(h);for(let g=0,v=o;g!==v;++g)s[g].push(new ln(h,r[g],i[g]))}else if(y<u){a=e[y];const g=--u,v=e[g];t[v.uuid]=y,e[y]=v,t[m]=g,e[g]=h;for(let x=0,_=o;x!==_;++x){const w=s[x],A=w[g];let R=w[y];w[y]=A,R===void 0&&(R=new ln(h,r[x],i[x])),w[g]=R}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const f=s++,h=e[f];t[h.uuid]=c,e[c]=h,t[u]=f,e[f]=l;for(let m=0,y=i;m!==y;++m){const g=r[m],v=g[f],x=g[c];g[c]=v,g[f]=x}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,f=t[c];if(f!==void 0)if(delete t[c],f<s){const h=--s,m=e[h],y=--o,g=e[y];t[m.uuid]=f,e[f]=m,t[g.uuid]=h,e[h]=g,e.pop();for(let v=0,x=i;v!==x;++v){const _=r[v],w=_[h],A=_[y];_[f]=w,_[h]=A,_.pop()}}else{const h=--o,m=e[h];h>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let y=0,g=i;y!==g;++y){const v=r[y];v[f]=v[h],v.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,f=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(f);for(let h=c,m=l.length;h!==m;++h){const y=l[h];f[h]=new ln(y,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class m7{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:tc,endingEnd:tc};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=S4,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case hA:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case l1:default:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===b4;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===w4){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=nc,i.endingEnd=nc):(e?i.endingStart=this.zeroSlopeAtStart?nc:tc:i.endingStart=pm,t?i.endingEnd=this.zeroSlopeAtEnd?nc:tc:i.endingEnd=pm)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const g7=new Float32Array(1);class v7 extends io{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let f=0;f!==s;++f){const h=i[f],m=h.name;let y=c[m];if(y!==void 0)++y.referenceCount,o[f]=y;else{if(y=o[f],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,m));continue}const g=t&&t._propertyBindings[f].binding.parsedPath;y=new gF(ln.create(r,m,g),h.ValueTypeName,h.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,m),o[f]=y}a[f].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete f[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new WA(new Float32Array(2),new Float32Array(2),1,g7),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Cd.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=l1),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new m7(this,o,t,r);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?Cd.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,f=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=c,t[c]=f,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class ct{constructor(e){this.value=e}clone(){return new ct(this.value.clone===void 0?this.value:this.value.clone())}}let y7=0;class _7 extends io{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:y7++}),this.name="",this.usage=mm,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class x7 extends Gm{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class w7{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class rM{constructor(e,t,r=0,i=1/0){this.ray=new Nm(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new fc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return l2(e,this,r,t),r.sort(U3),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)l2(e[i],this,r,t);return r.sort(U3),r}}function U3(n,e){return n.distance-e.distance}function l2(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)l2(i[s],e,t,!0)}}class vF{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(cr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class S7{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const N3=new De;class b7{constructor(e=new De(1/0,1/0),t=new De(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=N3.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,N3).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const z3=new V,K0=new V;class A7{constructor(e=new V,t=new V){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){z3.subVectors(e,this.start),K0.subVectors(this.end,this.start);const r=K0.dot(K0);let s=K0.dot(z3)/r;return t&&(s=cr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const G3=new V;class M7 extends un{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Lt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new vt(i,3));const s=new yi({fog:!1,toneMapped:!1});this.cone=new Io(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),G3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(G3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const yl=new V,Y0=new bt,Ix=new bt;class E7 extends Io{constructor(e){const t=yF(e),r=new Lt,i=[],s=[],o=new qe(0,0,1),a=new qe(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new vt(i,3)),r.setAttribute("color",new vt(s,3));const l=new yi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");Ix.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Y0.multiplyMatrices(Ix,a.matrixWorld),yl.setFromMatrixPosition(Y0),i.setXYZ(o,yl.x,yl.y,yl.z),Y0.multiplyMatrices(Ix,a.parent.matrixWorld),yl.setFromMatrixPosition(Y0),i.setXYZ(o+1,yl.x,yl.y,yl.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function yF(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,yF(n.children[t]));return e}class C7 extends Nn{constructor(e,t,r){const i=new Jd(t,4,2),s=new Pi({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const T7=new V,H3=new qe,V3=new qe;class R7 extends un{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new $d(t);i.rotateY(Math.PI*.5),this.material=new Pi({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Qt(o,3)),this.add(new Nn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");H3.copy(this.light.color),V3.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?H3:V3;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(T7.setFromMatrixPosition(this.light.matrixWorld).negate())}}class P7 extends Io{constructor(e=10,t=10,r=4473924,i=8947848){r=new qe(r),i=new qe(i);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let h=0,m=0,y=-a;h<=t;h++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const g=h===s?r:i;g.toArray(u,m),m+=3,g.toArray(u,m),m+=3,g.toArray(u,m),m+=3,g.toArray(u,m),m+=3}const c=new Lt;c.setAttribute("position",new vt(l,3)),c.setAttribute("color",new vt(u,3));const f=new yi({vertexColors:!0,toneMapped:!1});super(c,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class B7 extends Io{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new qe(s),o=new qe(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const h=f/t*(Math.PI*2),m=Math.sin(h)*e,y=Math.cos(h)*e;a.push(0,0,0),a.push(m,0,y);const g=f&1?s:o;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let f=0;f<r;f++){const h=f&1?s:o,m=e-e/r*f;for(let y=0;y<i;y++){let g=y/i*(Math.PI*2),v=Math.sin(g)*m,x=Math.cos(g)*m;a.push(v,0,x),l.push(h.r,h.g,h.b),g=(y+1)/i*(Math.PI*2),v=Math.sin(g)*m,x=Math.cos(g)*m,a.push(v,0,x),l.push(h.r,h.g,h.b)}}const u=new Lt;u.setAttribute("position",new vt(a,3)),u.setAttribute("color",new vt(l,3));const c=new yi({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const W3=new V,Q0=new V,j3=new V;class I7 extends un{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Lt;i.setAttribute("position",new vt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new yi({fog:!1,toneMapped:!1});this.lightPlane=new Wa(i,s),this.add(this.lightPlane),i=new Lt,i.setAttribute("position",new vt([0,0,0,0,0,1],3)),this.targetLine=new Wa(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),W3.setFromMatrixPosition(this.light.matrixWorld),Q0.setFromMatrixPosition(this.light.target.matrixWorld),j3.subVectors(Q0,W3),this.lightPlane.lookAt(Q0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Q0),this.targetLine.scale.z=j3.length()}}const Z0=new V,tr=new Gd;class D7 extends Io{constructor(e){const t=new Lt,r=new yi({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,g){l(y),l(g)}function l(y){i.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(i.length/3-1)}t.setAttribute("position",new vt(i,3)),t.setAttribute("color",new vt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new qe(16755200),c=new qe(16711680),f=new qe(43775),h=new qe(16777215),m=new qe(3355443);this.setColors(u,c,f,h,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;tr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ar("c",t,e,tr,0,0,-1),ar("t",t,e,tr,0,0,1),ar("n1",t,e,tr,-r,-i,-1),ar("n2",t,e,tr,r,-i,-1),ar("n3",t,e,tr,-r,i,-1),ar("n4",t,e,tr,r,i,-1),ar("f1",t,e,tr,-r,-i,1),ar("f2",t,e,tr,r,-i,1),ar("f3",t,e,tr,-r,i,1),ar("f4",t,e,tr,r,i,1),ar("u1",t,e,tr,r*.7,i*1.1,-1),ar("u2",t,e,tr,-r*.7,i*1.1,-1),ar("u3",t,e,tr,0,i*2,-1),ar("cf1",t,e,tr,-r,0,1),ar("cf2",t,e,tr,r,0,1),ar("cf3",t,e,tr,0,-i,1),ar("cf4",t,e,tr,0,i,1),ar("cn1",t,e,tr,-r,0,-1),ar("cn2",t,e,tr,r,0,-1),ar("cn3",t,e,tr,0,-i,-1),ar("cn4",t,e,tr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ar(n,e,t,r,i,s,o){Z0.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],Z0.x,Z0.y,Z0.z)}}const q0=new Ya;class L7 extends Io{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Lt;s.setIndex(new Qt(r,1)),s.setAttribute("position",new Qt(i,3)),super(s,new yi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&q0.setFromObject(this.object),q0.isEmpty())return;const t=q0.min,r=q0.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class F7 extends Io{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Lt;s.setIndex(new Qt(r,1)),s.setAttribute("position",new vt(i,3)),super(s,new yi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class k7 extends Wa{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Lt;o.setAttribute("position",new vt(s,3)),o.computeBoundingSphere(),super(o,new yi({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Lt;l.setAttribute("position",new vt(a,3)),l.computeBoundingSphere(),this.add(new Nn(l,new Pi({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const $3=new V;let ev,Dx;class O7 extends un{constructor(e=new V(0,0,1),t=new V(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",ev===void 0&&(ev=new Lt,ev.setAttribute("position",new vt([0,0,0,0,1,0],3)),Dx=new Bc(0,.5,1,5,1),Dx.translate(0,-.5,0)),this.position.copy(t),this.line=new Wa(ev,new yi({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Nn(Dx,new Pi({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{$3.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle($3,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class U7 extends Io{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Lt;i.setAttribute("position",new vt(t,3)),i.setAttribute("color",new vt(r,3));const s=new yi({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new qe,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class N7{constructor(){this.type="ShapePath",this.color=new qe,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new ym,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const _=[];for(let w=0,A=x.length;w<A;w++){const R=x[w],M=new Kl;M.curves=R.curves,_.push(M)}return _}function r(x,_){const w=_.length;let A=!1;for(let R=w-1,M=0;M<w;R=M++){let P=_[R],b=_[M],C=b.x-P.x,T=b.y-P.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(P=_[M],C=-C,b=_[R],T=-T),x.y<P.y||x.y>b.y)continue;if(x.y===P.y){if(x.x===P.x)return!0}else{const I=T*(x.x-P.x)-C*(x.y-P.y);if(I===0)return!0;if(I<0)continue;A=!A}}else{if(x.y!==P.y)continue;if(b.x<=x.x&&x.x<=P.x||P.x<=x.x&&x.x<=b.x)return!0}}return A}const i=ea.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new Kl,l.curves=a.curves,u.push(l),u;let c=!i(s[0].getPoints());c=e?!c:c;const f=[],h=[];let m=[],y=0,g;h[y]=void 0,m[y]=[];for(let x=0,_=s.length;x<_;x++)a=s[x],g=a.getPoints(),o=i(g),o=e?!o:o,o?(!c&&h[y]&&y++,h[y]={s:new Kl,p:g},h[y].s.curves=a.curves,c&&y++,m[y]=[]):m[y].push({h:a,p:g[0]});if(!h[0])return t(s);if(h.length>1){let x=!1,_=0;for(let w=0,A=h.length;w<A;w++)f[w]=[];for(let w=0,A=h.length;w<A;w++){const R=m[w];for(let M=0;M<R.length;M++){const P=R[M];let b=!0;for(let C=0;C<h.length;C++)r(P.p,h[C].p)&&(w!==C&&_++,b?(b=!1,f[C].push(P)):x=!0);b&&f[w].push(P)}}_>0&&x===!1&&(m=f)}let v;for(let x=0,_=h.length;x<_;x++){l=h[x].s,u.push(l),v=m[x];for(let w=0,A=v.length;w<A;w++)l.holes.push(v[w].h)}return u}}const Ra=z7();function z7(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function G7(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=cr(n,-65504,65504),Ra.floatView[0]=n;const e=Ra.uint32View[0],t=e>>23&511;return Ra.baseTable[t]+((e&8388607)>>Ra.shiftTable[t])}function H7(n){const e=n>>10;return Ra.uint32View[0]=Ra.mantissaTable[Ra.offsetTable[e]+(n&1023)]+Ra.exponentTable[e],Ra.floatView[0]}const sc={toHalfFloat:G7,fromHalfFloat:H7};class V7 extends pu{constructor(e,t,r,i,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,r,i,s,o)}}class W7 extends Vm{constructor(e,t,r,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,r,i)}}class j7 extends Wm{constructor(e,t,r,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,r,i)}}class $7 extends jm{constructor(e,t,r,i,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,r,i,s,o,a)}}class J7 extends Bc{constructor(e,t,r,i,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,r,i,s,o,a,l)}}class X7 extends $m{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class K7 extends Jm{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class Y7 extends jd{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class Q7 extends Wd{constructor(e,t,r,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,r,i)}}class Z7 extends $d{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class q7 extends Za{constructor(e,t,r,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,r,i)}}class ej extends qa{constructor(e,t,r,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,r,i)}}class tj extends Xm{constructor(e,t,r,i,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,r,i,s,o)}}class nj extends Km{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class rj extends Jd{constructor(e,t,r,i,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,r,i,s,o,a)}}class ij extends Ym{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class sj extends Qm{constructor(e,t,r,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,r,i,s)}}class oj extends Zm{constructor(e,t,r,i,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,r,i,s,o)}}class aj extends qm{constructor(e,t,r,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,r,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ka}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ka);const u2=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:cA,AddEquation:Ku,AddOperation:n4,AdditiveAnimationBlendMode:hA,AdditiveBlending:_y,AlphaFormat:d4,AlwaysDepth:KL,AlwaysStencilFunc:E4,AmbientLight:cF,AmbientLightProbe:ZW,AnimationClip:Cd,AnimationLoader:VW,AnimationMixer:v7,AnimationObjectGroup:p7,AnimationUtils:NW,ArcCurve:W4,ArrayCamera:N4,ArrowHelper:O7,Audio:mF,AudioAnalyser:i7,AudioContext:qA,AudioListener:t7,AudioLoader:YW,AxesHelper:U7,BackSide:fr,BasicDepthPacking:du,BasicShadowMap:FL,Bone:y1,BooleanKeyframeTrack:Ic,Box2:b7,Box3:Ya,Box3Helper:F7,BoxBufferGeometry:V7,BoxGeometry:pu,BoxHelper:L7,BufferAttribute:Qt,BufferGeometry:Lt,BufferGeometryLoader:hF,ByteType:a4,Cache:Ec,Camera:Gd,CameraHelper:D7,CanvasTexture:uW,CapsuleBufferGeometry:W7,CapsuleGeometry:Vm,CatmullRomCurve3:IA,CineonToneMapping:s4,CircleBufferGeometry:j7,CircleGeometry:Wm,ClampToEdgeWrapping:Kr,Clock:eM,Color:qe,ColorKeyframeTrack:jA,ColorManagement:ci,CompressedArrayTexture:lW,CompressedTexture:PA,CompressedTextureLoader:WW,ConeBufferGeometry:$7,ConeGeometry:jm,CubeCamera:I4,CubeReflectionMapping:Va,CubeRefractionMapping:tu,CubeTexture:zm,CubeTextureLoader:aF,CubeUVReflectionMapping:zd,CubicBezierCurve:DA,CubicBezierCurve3:j4,CubicInterpolant:iF,CullFaceBack:MS,CullFaceFront:LL,CullFaceFrontBack:u6,CullFaceNone:DL,Curve:Do,CurvePath:J4,CustomBlending:kL,CustomToneMapping:o4,CylinderBufferGeometry:J7,CylinderGeometry:Bc,Cylindrical:S7,Data3DTexture:_A,DataArrayTexture:u1,DataTexture:sd,DataTextureLoader:JA,DataUtils:sc,DecrementStencilOp:_6,DecrementWrapStencilOp:w6,DefaultLoadingManager:$f,DepthFormat:Xl,DepthStencilFormat:ru,DepthTexture:p1,DirectionalLight:QA,DirectionalLightHelper:I7,DiscreteInterpolant:sF,DisplayP3ColorSpace:gA,DodecahedronBufferGeometry:X7,DodecahedronGeometry:$m,DoubleSide:Gr,DstAlphaFactor:VL,DstColorFactor:jL,DynamicCopyUsage:F6,DynamicDrawUsage:qS,DynamicReadUsage:I6,EdgesGeometry:X4,EllipseCurve:x1,EqualDepth:QL,EqualStencilFunc:M6,EquirectangularReflectionMapping:_d,EquirectangularRefractionMapping:dm,Euler:Er,EventDispatcher:io,ExtrudeBufferGeometry:K7,ExtrudeGeometry:Jm,FileLoader:xs,Float16BufferAttribute:wG,Float32BufferAttribute:vt,Float64BufferAttribute:SG,FloatType:Yr,Fog:v1,FogExp2:g1,FramebufferTexture:aW,FrontSide:eo,Frustum:c1,GLBufferAttribute:w7,GLSL1:O6,GLSL3:e2,GreaterDepth:qL,GreaterEqualDepth:ZL,GreaterEqualStencilFunc:R6,GreaterStencilFunc:C6,GridHelper:P7,Group:bo,HalfFloatType:Qr,HemisphereLight:uF,HemisphereLightHelper:R7,HemisphereLightProbe:QW,IcosahedronBufferGeometry:Y7,IcosahedronGeometry:jd,ImageBitmapLoader:pF,ImageLoader:Sm,ImageUtils:yA,IncrementStencilOp:y6,IncrementWrapStencilOp:x6,InstancedBufferAttribute:Ac,InstancedBufferGeometry:ZA,InstancedInterleavedBuffer:x7,InstancedMesh:CA,Int16BufferAttribute:_G,Int32BufferAttribute:xG,Int8BufferAttribute:gG,IntType:u4,InterleavedBuffer:Gm,InterleavedBufferAttribute:iu,Interpolant:Kd,InterpolateDiscrete:wd,InterpolateLinear:bc,InterpolateSmooth:Uv,InvertStencilOp:S6,KeepStencilOp:Nv,KeyframeTrack:Fo,LOD:V4,LatheBufferGeometry:Q7,LatheGeometry:Wd,Layers:fc,LessDepth:YL,LessEqualDepth:xy,LessEqualStencilFunc:E6,LessStencilFunc:A6,Light:mu,LightProbe:b1,Line:Wa,Line3:A7,LineBasicMaterial:yi,LineCurve:w1,LineCurve3:$4,LineDashedMaterial:nF,LineLoop:TA,LineSegments:Io,LinearEncoding:Po,LinearFilter:rn,LinearInterpolant:WA,LinearMipMapLinearFilter:p6,LinearMipMapNearestFilter:h6,LinearMipmapLinearFilter:Ro,LinearMipmapNearestFilter:a1,LinearSRGBColorSpace:Sd,LinearToneMapping:r4,Loader:Fi,LoaderUtils:ta,LoadingManager:$A,LoopOnce:w4,LoopPingPong:b4,LoopRepeat:S4,LuminanceAlphaFormat:p4,LuminanceFormat:h4,MOUSE:a6,Material:zn,MaterialLoader:A1,MathUtils:$s,Matrix3:Pr,Matrix4:bt,MaxEquation:RS,Mesh:Nn,MeshBasicMaterial:Pi,MeshDepthMaterial:d1,MeshDistanceMaterial:h1,MeshLambertMaterial:GA,MeshMatcapMaterial:tF,MeshNormalMaterial:zA,MeshPhongMaterial:UA,MeshPhysicalMaterial:Lo,MeshStandardMaterial:Xd,MeshToonMaterial:NA,MinEquation:TS,MirroredRepeatWrapping:xd,MixOperation:t4,MultiplyBlending:CS,MultiplyOperation:Um,NearestFilter:Sn,NearestMipMapLinearFilter:d6,NearestMipMapNearestFilter:f6,NearestMipmapLinearFilter:rd,NearestMipmapNearestFilter:hm,NeverDepth:XL,NeverStencilFunc:b6,NoBlending:qr,NoColorSpace:m6,NoToneMapping:Eo,NormalAnimationBlendMode:l1,NormalBlending:uc,NotEqualDepth:e4,NotEqualStencilFunc:T6,NumberKeyframeTrack:Md,Object3D:un,ObjectLoader:XW,ObjectSpaceNormalMap:M4,OctahedronBufferGeometry:Z7,OctahedronGeometry:$d,OneFactor:zL,OneMinusDstAlphaFactor:WL,OneMinusDstColorFactor:$L,OneMinusSrcAlphaFactor:uA,OneMinusSrcColorFactor:HL,OrthographicCamera:Hd,PCFShadowMap:s1,PCFSoftShadowMap:Dp,PMREMGenerator:n2,Path:ym,PerspectiveCamera:yr,Plane:Cl,PlaneBufferGeometry:q7,PlaneGeometry:Za,PlaneHelper:k7,PointLight:YA,PointLightHelper:C7,Points:RA,PointsMaterial:_1,PolarGridHelper:B7,PolyhedronBufferGeometry:ej,PolyhedronGeometry:qa,PositionalAudio:r7,PropertyBinding:ln,PropertyMixer:gF,QuadraticBezierCurve:LA,QuadraticBezierCurve3:FA,Quaternion:Zn,QuaternionKeyframeTrack:su,QuaternionLinearInterpolant:oF,RED_GREEN_RGTC2_Format:QS,RED_RGTC1_Format:x4,REVISION:Ka,RGBADepthPacking:mA,RGBAFormat:Ri,RGBAIntegerFormat:y4,RGBA_ASTC_10x10_Format:JS,RGBA_ASTC_10x5_Format:WS,RGBA_ASTC_10x6_Format:jS,RGBA_ASTC_10x8_Format:$S,RGBA_ASTC_12x10_Format:XS,RGBA_ASTC_12x12_Format:KS,RGBA_ASTC_4x4_Format:kS,RGBA_ASTC_5x4_Format:OS,RGBA_ASTC_5x5_Format:US,RGBA_ASTC_6x5_Format:NS,RGBA_ASTC_6x6_Format:zS,RGBA_ASTC_8x5_Format:GS,RGBA_ASTC_8x6_Format:HS,RGBA_ASTC_8x8_Format:VS,RGBA_BPTC_Format:Ov,RGBA_ETC2_EAC_Format:FS,RGBA_PVRTC_2BPPV1_Format:DS,RGBA_PVRTC_4BPPV1_Format:IS,RGBA_S3TC_DXT1_Format:Lv,RGBA_S3TC_DXT3_Format:Fv,RGBA_S3TC_DXT5_Format:kv,RGB_ETC1_Format:_4,RGB_ETC2_Format:LS,RGB_PVRTC_2BPPV1_Format:BS,RGB_PVRTC_4BPPV1_Format:PS,RGB_S3TC_DXT1_Format:Dv,RGFormat:g4,RGIntegerFormat:v4,RawShaderMaterial:eF,Ray:Nm,Raycaster:rM,RectAreaLight:fF,RedFormat:dA,RedIntegerFormat:m4,ReinhardToneMapping:i4,RepeatWrapping:nu,ReplaceStencilOp:v6,ReverseSubtractEquation:UL,RingBufferGeometry:tj,RingGeometry:Xm,SIGNED_RED_GREEN_RGTC2_Format:ZS,SIGNED_RED_RGTC1_Format:YS,SRGBColorSpace:xo,Scene:Ad,ShaderChunk:Nt,ShaderLib:So,ShaderMaterial:wr,ShadowMaterial:q4,Shape:Kl,ShapeBufferGeometry:nj,ShapeGeometry:Km,ShapePath:N7,ShapeUtils:ea,ShortType:l4,Skeleton:Hm,SkeletonHelper:E7,SkinnedMesh:EA,Source:rc,Sphere:Qa,SphereBufferGeometry:rj,SphereGeometry:Jd,Spherical:vF,SphericalHarmonics3:dF,SplineCurve:kA,SpotLight:KA,SpotLightHelper:M7,Sprite:H4,SpriteMaterial:MA,SrcAlphaFactor:lA,SrcAlphaSaturateFactor:JL,SrcColorFactor:GL,StaticCopyUsage:L6,StaticDrawUsage:mm,StaticReadUsage:B6,StereoCamera:qW,StreamCopyUsage:k6,StreamDrawUsage:P6,StreamReadUsage:D6,StringKeyframeTrack:Dc,SubtractEquation:OL,SubtractiveBlending:ES,TOUCH:l6,TangentSpaceNormalMap:hu,TetrahedronBufferGeometry:ij,TetrahedronGeometry:Ym,Texture:xn,TextureLoader:lF,TorusBufferGeometry:sj,TorusGeometry:Qm,TorusKnotBufferGeometry:oj,TorusKnotGeometry:Zm,Triangle:Vs,TriangleFanDrawMode:wy,TriangleStripDrawMode:pA,TrianglesDrawMode:A4,TubeBufferGeometry:aj,TubeGeometry:qm,TwoPassDoubleSide:c6,UVMapping:o1,Uint16BufferAttribute:xA,Uint32BufferAttribute:wA,Uint8BufferAttribute:vG,Uint8ClampedBufferAttribute:yG,Uniform:ct,UniformsGroup:_7,UniformsLib:ot,UniformsUtils:SA,UnsignedByteType:vi,UnsignedInt248Type:Jl,UnsignedIntType:La,UnsignedShort4444Type:c4,UnsignedShort5551Type:f4,UnsignedShortType:fA,VSMShadowMap:ec,Vector2:De,Vector3:V,Vector4:jt,VectorKeyframeTrack:Ed,VideoTexture:oW,WebGL1Renderer:z4,WebGL3DRenderTarget:oG,WebGLArrayRenderTarget:sG,WebGLCubeRenderTarget:bA,WebGLMultipleRenderTargets:aG,WebGLRenderTarget:Fn,WebGLRenderer:m1,WebGLUtils:U4,WireframeGeometry:Z4,WrapAroundEnding:pm,ZeroCurvatureEnding:tc,ZeroFactor:NL,ZeroSlopeEnding:nc,ZeroStencilOp:g6,_SRGBAFormat:Sy,sRGBEncoding:It},Symbol.toStringTag,{value:"Module"}));var Ll={},lj={get exports(){return Ll},set exports(n){Ll=n}},Lc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Lc.ConcurrentRoot=1;Lc.ContinuousEventPriority=4;Lc.DefaultEventPriority=16;Lc.DiscreteEventPriority=1;Lc.IdleEventPriority=536870912;Lc.LegacyRoot=0;(function(n){n.exports=Lc})(lj);function uj(n){let e;const t=new Set,r=(u,c)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const h=e;e=c?f:Object.assign({},e,f),t.forEach(m=>m(e,h))}},i=()=>e,s=(u,c=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=c(e);function m(){const y=c(e);if(!f(h,y)){const g=h;u(h=y,g)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(u,c,f)=>c||f?s(u,c,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const cj=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),J3=cj?L.useEffect:L.useLayoutEffect;function M1(n){const e=typeof n=="function"?uj(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=L.useReducer(v=>v+1,0),o=e.getState(),a=L.useRef(o),l=L.useRef(r),u=L.useRef(i),c=L.useRef(!1),f=L.useRef();f.current===void 0&&(f.current=r(o));let h,m=!1;(a.current!==o||l.current!==r||u.current!==i||c.current)&&(h=r(o),m=!i(f.current,h)),J3(()=>{m&&(f.current=h),a.current=o,l.current=r,u.current=i,c.current=!1});const y=L.useRef(o);J3(()=>{const v=()=>{try{const _=e.getState(),w=l.current(_);u.current(f.current,w)||(a.current=_,f.current=w,s())}catch{c.current=!0,s()}},x=e.subscribe(v);return e.getState()!==y.current&&v(),x},[]);const g=m?h:f.current;return L.useDebugValue(g),g};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var c2={},fj={get exports(){return c2},set exports(n){c2=n}},bm={},dj={get exports(){return bm},set exports(n){bm=n}},_F={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(G,j){var Y=G.length;G.push(j);e:for(;0<Y;){var X=Y-1>>>1,K=G[X];if(0<i(K,j))G[X]=j,G[Y]=K,Y=X;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var j=G[0],Y=G.pop();if(Y!==j){G[0]=Y;e:for(var X=0,K=G.length,ce=K>>>1;X<ce;){var he=2*(X+1)-1,te=G[he],me=he+1,pe=G[me];if(0>i(te,Y))me<K&&0>i(pe,te)?(G[X]=pe,G[me]=Y,X=me):(G[X]=te,G[he]=Y,X=he);else if(me<K&&0>i(pe,Y))G[X]=pe,G[me]=Y,X=me;else break e}}return j}function i(G,j){var Y=G.sortIndex-j.sortIndex;return Y!==0?Y:G.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,h=3,m=!1,y=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(G){for(var j=t(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=G)r(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=t(u)}}function A(G){if(g=!1,w(G),!y)if(t(l)!==null)y=!0,Q(R);else{var j=t(u);j!==null&&re(A,j.startTime-G)}}function R(G,j){y=!1,g&&(g=!1,x(b),b=-1),m=!0;var Y=h;try{for(w(j),f=t(l);f!==null&&(!(f.expirationTime>j)||G&&!I());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var K=X(f.expirationTime<=j);j=n.unstable_now(),typeof K=="function"?f.callback=K:f===t(l)&&r(l),w(j)}else r(l);f=t(l)}if(f!==null)var ce=!0;else{var he=t(u);he!==null&&re(A,he.startTime-j),ce=!1}return ce}finally{f=null,h=Y,m=!1}}var M=!1,P=null,b=-1,C=5,T=-1;function I(){return!(n.unstable_now()-T<C)}function D(){if(P!==null){var G=n.unstable_now();T=G;var j=!0;try{j=P(!0,G)}finally{j?z():(M=!1,P=null)}}else M=!1}var z;if(typeof _=="function")z=function(){_(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,J=N.port2;N.port1.onmessage=D,z=function(){J.postMessage(null)}}else z=function(){v(D,0)};function Q(G){P=G,M||(M=!0,z())}function re(G,j){b=v(function(){G(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,Q(R))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var Y=h;h=j;try{return G()}finally{h=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,j){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Y=h;h=G;try{return j()}finally{h=Y}},n.unstable_scheduleCallback=function(G,j,Y){var X=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?X+Y:X):Y=X,G){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=Y+K,G={id:c++,callback:j,priorityLevel:G,startTime:Y,expirationTime:K,sortIndex:-1},Y>X?(G.sortIndex=Y,e(u,G),t(l)===null&&G===t(u)&&(g?(x(b),b=-1):g=!0,re(A,Y-X))):(G.sortIndex=K,e(l,G),y||m||(y=!0,Q(R))),G},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(G){var j=h;return function(){var Y=h;h=j;try{return G.apply(this,arguments)}finally{h=Y}}}})(_F);(function(n){n.exports=_F})(dj);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hj=function(e){var t={},r=L,i=bm,s=Object.assign;function o(d){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+d,S=1;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),R=Symbol.iterator;function M(d){return d===null||typeof d!="object"?null:(d=R&&d[R]||d["@@iterator"],typeof d=="function"?d:null)}function P(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case c:return"Fragment";case u:return"Portal";case h:return"Profiler";case f:return"StrictMode";case v:return"Suspense";case x:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case y:return(d.displayName||"Context")+".Consumer";case m:return(d._context.displayName||"Context")+".Provider";case g:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case _:return p=d.displayName||null,p!==null?p:P(d.type)||"Memo";case w:p=d._payload,d=d._init;try{return P(d(p))}catch{}}return null}function b(d){var p=d.type;switch(d.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=p.render,d=d.displayName||d.name||"",p.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(p);case 8:return p===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function C(d){var p=d,S=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,p.flags&4098&&(S=p.return),d=p.return;while(d)}return p.tag===3?S:null}function T(d){if(C(d)!==d)throw Error(o(188))}function I(d){var p=d.alternate;if(!p){if(p=C(d),p===null)throw Error(o(188));return p!==d?null:d}for(var S=d,E=p;;){var B=S.return;if(B===null)break;var F=B.alternate;if(F===null){if(E=B.return,E!==null){S=E;continue}break}if(B.child===F.child){for(F=B.child;F;){if(F===S)return T(B),d;if(F===E)return T(B),p;F=F.sibling}throw Error(o(188))}if(S.return!==E.return)S=B,E=F;else{for(var ne=!1,ve=B.child;ve;){if(ve===S){ne=!0,S=B,E=F;break}if(ve===E){ne=!0,E=B,S=F;break}ve=ve.sibling}if(!ne){for(ve=F.child;ve;){if(ve===S){ne=!0,S=F,E=B;break}if(ve===E){ne=!0,E=F,S=B;break}ve=ve.sibling}if(!ne)throw Error(o(189))}}if(S.alternate!==E)throw Error(o(190))}if(S.tag!==3)throw Error(o(188));return S.stateNode.current===S?d:p}function D(d){return d=I(d),d!==null?z(d):null}function z(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var p=z(d);if(p!==null)return p;d=d.sibling}return null}function N(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var p=N(d);if(p!==null)return p}d=d.sibling}return null}var J=Array.isArray,Q=e.getPublicInstance,re=e.getRootHostContext,G=e.getChildHostContext,j=e.prepareForCommit,Y=e.resetAfterCommit,X=e.createInstance,K=e.appendInitialChild,ce=e.finalizeInitialChildren,he=e.prepareUpdate,te=e.shouldSetTextContent,me=e.createTextInstance,pe=e.scheduleTimeout,oe=e.cancelTimeout,U=e.noTimeout,W=e.isPrimaryRenderer,Z=e.supportsMutation,q=e.supportsPersistence,se=e.supportsHydration,ge=e.getInstanceFromNode,Me=e.preparePortalMount,Ce=e.getCurrentEventPriority,Ke=e.detachDeletedInstance,Re=e.supportsMicrotasks,Oe=e.scheduleMicrotask,ze=e.supportsTestSelectors,Ee=e.findFiberRoot,$=e.getBoundingRect,O=e.getTextContent,ae=e.isHiddenSubtree,Ae=e.matchAccessibilityRole,ke=e.setFocusIfFocusable,Ue=e.setupIntersectionObserver,je=e.appendChild,Ne=e.appendChildToContainer,Be=e.commitTextUpdate,nt=e.commitMount,$e=e.commitUpdate,et=e.insertBefore,Ge=e.insertInContainerBefore,Ve=e.removeChild,rt=e.removeChildFromContainer,ft=e.resetTextContent,yt=e.hideInstance,ue=e.hideTextInstance,de=e.unhideInstance,He=e.unhideTextInstance,st=e.clearContainer,lt=e.cloneInstance,Gt=e.createContainerChildSet,Yt=e.appendChildToContainerChildSet,cn=e.finalizeContainerChildren,$t=e.replaceContainerChildren,hn=e.cloneHiddenInstance,Ht=e.cloneHiddenTextInstance,Xt=e.canHydrateInstance,Wr=e.canHydrateTextInstance,br=e.canHydrateSuspenseInstance,Kt=e.isSuspenseInstancePending,ee=e.isSuspenseInstanceFallback,be=e.registerSuspenseInstanceRetry,Pe=e.getNextHydratableSibling,fe=e.getFirstHydratableChild,Ie=e.getFirstHydratableChildWithinContainer,gt=e.getFirstHydratableChildWithinSuspenseInstance,k=e.hydrateInstance,H=e.hydrateTextInstance,ie=e.hydrateSuspenseInstance,ye=e.getNextHydratableInstanceAfterSuspenseInstance,we=e.commitHydratedContainer,Se=e.commitHydratedSuspenseInstance,Je=e.clearSuspenseBoundary,We=e.clearSuspenseBoundaryFromContainer,Ye=e.shouldDeleteUnhydratedTailInstances,Qe=e.didNotMatchHydratedContainerTextInstance,Xe=e.didNotMatchHydratedTextInstance,_e;function Vt(d){if(_e===void 0)try{throw Error()}catch(S){var p=S.stack.trim().match(/\n( *(at )?)/);_e=p&&p[1]||""}return`
`+_e+d}var it=!1;function dt(d,p){if(!d||it)return"";it=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(tt){var E=tt}Reflect.construct(d,[],p)}else{try{p.call()}catch(tt){E=tt}d.call(p.prototype)}else{try{throw Error()}catch(tt){E=tt}d()}}catch(tt){if(tt&&E&&typeof tt.stack=="string"){for(var B=tt.stack.split(`
`),F=E.stack.split(`
`),ne=B.length-1,ve=F.length-1;1<=ne&&0<=ve&&B[ne]!==F[ve];)ve--;for(;1<=ne&&0<=ve;ne--,ve--)if(B[ne]!==F[ve]){if(ne!==1||ve!==1)do if(ne--,ve--,0>ve||B[ne]!==F[ve]){var Fe=`
`+B[ne].replace(" at new "," at ");return d.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",d.displayName)),Fe}while(1<=ne&&0<=ve);break}}}finally{it=!1,Error.prepareStackTrace=S}return(d=d?d.displayName||d.name:"")?Vt(d):""}var Rt=Object.prototype.hasOwnProperty,At=[],Ft=-1;function wt(d){return{current:d}}function St(d){0>Ft||(d.current=At[Ft],At[Ft]=null,Ft--)}function Tt(d,p){Ft++,At[Ft]=d.current,d.current=p}var Mt={},qt=wt(Mt),Dt=wt(!1),en=Mt;function hr(d,p){var S=d.type.contextTypes;if(!S)return Mt;var E=d.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===p)return E.__reactInternalMemoizedMaskedChildContext;var B={},F;for(F in S)B[F]=p[F];return E&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=p,d.__reactInternalMemoizedMaskedChildContext=B),B}function bn(d){return d=d.childContextTypes,d!=null}function ir(){St(Dt),St(qt)}function on(d,p,S){if(qt.current!==Mt)throw Error(o(168));Tt(qt,p),Tt(Dt,S)}function Gn(d,p,S){var E=d.stateNode;if(p=p.childContextTypes,typeof E.getChildContext!="function")return S;E=E.getChildContext();for(var B in E)if(!(B in p))throw Error(o(108,b(d)||"Unknown",B));return s({},S,E)}function tn(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Mt,en=qt.current,Tt(qt,d),Tt(Dt,Dt.current),!0}function an(d,p,S){var E=d.stateNode;if(!E)throw Error(o(169));S?(d=Gn(d,p,en),E.__reactInternalMemoizedMergedChildContext=d,St(Dt),St(qt),Tt(qt,d)):St(Dt),Tt(Dt,S)}var yn=Math.clz32?Math.clz32:ns,ki=Math.log,sr=Math.LN2;function ns(d){return d>>>=0,d===0?32:31-(ki(d)/sr|0)|0}var oa=64,aa=4194304;function la(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function vu(d,p){var S=d.pendingLanes;if(S===0)return 0;var E=0,B=d.suspendedLanes,F=d.pingedLanes,ne=S&268435455;if(ne!==0){var ve=ne&~B;ve!==0?E=la(ve):(F&=ne,F!==0&&(E=la(F)))}else ne=S&~B,ne!==0?E=la(ne):F!==0&&(E=la(F));if(E===0)return 0;if(p!==0&&p!==E&&!(p&B)&&(B=E&-E,F=p&-p,B>=F||B===16&&(F&4194240)!==0))return p;if(E&4&&(E|=S&16),p=d.entangledLanes,p!==0)for(d=d.entanglements,p&=E;0<p;)S=31-yn(p),B=1<<S,E|=d[S],p&=~B;return E}function fg(d,p){switch(d){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ih(d,p){for(var S=d.suspendedLanes,E=d.pingedLanes,B=d.expirationTimes,F=d.pendingLanes;0<F;){var ne=31-yn(F),ve=1<<ne,Fe=B[ne];Fe===-1?(!(ve&S)||ve&E)&&(B[ne]=fg(ve,p)):Fe<=p&&(d.expiredLanes|=ve),F&=~ve}}function ua(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function zc(d){for(var p=[],S=0;31>S;S++)p.push(d);return p}function Uo(d,p,S){d.pendingLanes|=p,p!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,p=31-yn(p),d[p]=S}function nl(d,p){var S=d.pendingLanes&~p;d.pendingLanes=p,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=p,d.mutableReadLanes&=p,d.entangledLanes&=p,p=d.entanglements;var E=d.eventTimes;for(d=d.expirationTimes;0<S;){var B=31-yn(S),F=1<<B;p[B]=0,E[B]=-1,d[B]=-1,S&=~F}}function No(d,p){var S=d.entangledLanes|=p;for(d=d.entanglements;S;){var E=31-yn(S),B=1<<E;B&p|d[E]&p&&(d[E]|=p),S&=~B}}var Jt=0;function sh(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var ca=i.unstable_scheduleCallback,Gc=i.unstable_cancelCallback,oh=i.unstable_shouldYield,dg=i.unstable_requestPaint,kn=i.unstable_now,rl=i.unstable_ImmediatePriority,hg=i.unstable_UserBlockingPriority,xi=i.unstable_NormalPriority,ah=i.unstable_IdlePriority,il=null,rs=null;function lh(d){if(rs&&typeof rs.onCommitFiberRoot=="function")try{rs.onCommitFiberRoot(il,d,void 0,(d.current.flags&128)===128)}catch{}}function Hc(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var is=typeof Object.is=="function"?Object.is:Hc,wi=null,zo=!1,Es=!1;function uh(d){wi===null?wi=[d]:wi.push(d)}function ch(d){zo=!0,uh(d)}function Oi(){if(!Es&&wi!==null){Es=!0;var d=0,p=Jt;try{var S=wi;for(Jt=1;d<S.length;d++){var E=S[d];do E=E(!0);while(E!==null)}wi=null,zo=!1}catch(B){throw wi!==null&&(wi=wi.slice(d+1)),ca(rl,Oi),B}finally{Jt=p,Es=!1}}return null}var yu=a.ReactCurrentBatchConfig;function _u(d,p){if(is(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var S=Object.keys(d),E=Object.keys(p);if(S.length!==E.length)return!1;for(E=0;E<S.length;E++){var B=S[E];if(!Rt.call(p,B)||!is(d[B],p[B]))return!1}return!0}function xu(d){switch(d.tag){case 5:return Vt(d.type);case 16:return Vt("Lazy");case 13:return Vt("Suspense");case 19:return Vt("SuspenseList");case 0:case 2:case 15:return d=dt(d.type,!1),d;case 11:return d=dt(d.type.render,!1),d;case 1:return d=dt(d.type,!0),d;default:return""}}function ti(d,p){if(d&&d.defaultProps){p=s({},p),d=d.defaultProps;for(var S in d)p[S]===void 0&&(p[S]=d[S]);return p}return p}var Lr=wt(null),Vc=null,ao=null,sl=null;function Wc(){sl=ao=Vc=null}function pg(d,p,S){W?(Tt(Lr,p._currentValue),p._currentValue=S):(Tt(Lr,p._currentValue2),p._currentValue2=S)}function Go(d){var p=Lr.current;St(Lr),W?d._currentValue=p:d._currentValue2=p}function pr(d,p,S){for(;d!==null;){var E=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),d===S)break;d=d.return}}function Fr(d,p){Vc=d,sl=ao=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&p&&(as=!0),d.firstContext=null)}function An(d){var p=W?d._currentValue:d._currentValue2;if(sl!==d)if(d={context:d,memoizedValue:p,next:null},ao===null){if(Vc===null)throw Error(o(308));ao=d,Vc.dependencies={lanes:0,firstContext:d}}else ao=ao.next=d;return p}var Ar=null,lo=!1;function k1(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WM(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function fa(d,p){return{eventTime:d,lane:p,tag:0,payload:null,callback:null,next:null}}function ol(d,p){var S=d.updateQueue;S!==null&&(S=S.shared,mr!==null&&d.mode&1&&!(Wt&2)?(d=S.interleaved,d===null?(p.next=p,Ar===null?Ar=[S]:Ar.push(S)):(p.next=d.next,d.next=p),S.interleaved=p):(d=S.pending,d===null?p.next=p:(p.next=d.next,d.next=p),S.pending=p))}function mg(d,p,S){if(p=p.updateQueue,p!==null&&(p=p.shared,(S&4194240)!==0)){var E=p.lanes;E&=d.pendingLanes,S|=E,p.lanes=S,No(d,S)}}function jM(d,p){var S=d.updateQueue,E=d.alternate;if(E!==null&&(E=E.updateQueue,S===E)){var B=null,F=null;if(S=S.firstBaseUpdate,S!==null){do{var ne={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};F===null?B=F=ne:F=F.next=ne,S=S.next}while(S!==null);F===null?B=F=p:F=F.next=p}else B=F=p;S={baseState:E.baseState,firstBaseUpdate:B,lastBaseUpdate:F,shared:E.shared,effects:E.effects},d.updateQueue=S;return}d=S.lastBaseUpdate,d===null?S.firstBaseUpdate=p:d.next=p,S.lastBaseUpdate=p}function gg(d,p,S,E){var B=d.updateQueue;lo=!1;var F=B.firstBaseUpdate,ne=B.lastBaseUpdate,ve=B.shared.pending;if(ve!==null){B.shared.pending=null;var Fe=ve,tt=Fe.next;Fe.next=null,ne===null?F=tt:ne.next=tt,ne=Fe;var pt=d.alternate;pt!==null&&(pt=pt.updateQueue,ve=pt.lastBaseUpdate,ve!==ne&&(ve===null?pt.firstBaseUpdate=tt:ve.next=tt,pt.lastBaseUpdate=Fe))}if(F!==null){var kt=B.baseState;ne=0,pt=tt=Fe=null,ve=F;do{var Et=ve.lane,Mn=ve.eventTime;if((E&Et)===Et){pt!==null&&(pt=pt.next={eventTime:Mn,lane:0,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null});e:{var xt=d,si=ve;switch(Et=p,Mn=S,si.tag){case 1:if(xt=si.payload,typeof xt=="function"){kt=xt.call(Mn,kt,Et);break e}kt=xt;break e;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=si.payload,Et=typeof xt=="function"?xt.call(Mn,kt,Et):xt,Et==null)break e;kt=s({},kt,Et);break e;case 2:lo=!0}}ve.callback!==null&&ve.lane!==0&&(d.flags|=64,Et=B.effects,Et===null?B.effects=[ve]:Et.push(ve))}else Mn={eventTime:Mn,lane:Et,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null},pt===null?(tt=pt=Mn,Fe=kt):pt=pt.next=Mn,ne|=Et;if(ve=ve.next,ve===null){if(ve=B.shared.pending,ve===null)break;Et=ve,ve=Et.next,Et.next=null,B.lastBaseUpdate=Et,B.shared.pending=null}}while(1);if(pt===null&&(Fe=kt),B.baseState=Fe,B.firstBaseUpdate=tt,B.lastBaseUpdate=pt,p=B.shared.interleaved,p!==null){B=p;do ne|=B.lane,B=B.next;while(B!==p)}else F===null&&(B.shared.lanes=0);qc|=ne,d.lanes=ne,d.memoizedState=kt}}function $M(d,p,S){if(d=p.effects,p.effects=null,d!==null)for(p=0;p<d.length;p++){var E=d[p],B=E.callback;if(B!==null){if(E.callback=null,E=S,typeof B!="function")throw Error(o(191,B));B.call(E)}}}var JM=new r.Component().refs;function O1(d,p,S,E){p=d.memoizedState,S=S(E,p),S=S==null?p:s({},p,S),d.memoizedState=S,d.lanes===0&&(d.updateQueue.baseState=S)}var vg={isMounted:function(d){return(d=d._reactInternals)?C(d)===d:!1},enqueueSetState:function(d,p,S){d=d._reactInternals;var E=bi(),B=ul(d),F=fa(E,B);F.payload=p,S!=null&&(F.callback=S),ol(d,F),p=Bs(d,B,E),p!==null&&mg(p,d,B)},enqueueReplaceState:function(d,p,S){d=d._reactInternals;var E=bi(),B=ul(d),F=fa(E,B);F.tag=1,F.payload=p,S!=null&&(F.callback=S),ol(d,F),p=Bs(d,B,E),p!==null&&mg(p,d,B)},enqueueForceUpdate:function(d,p){d=d._reactInternals;var S=bi(),E=ul(d),B=fa(S,E);B.tag=2,p!=null&&(B.callback=p),ol(d,B),p=Bs(d,E,S),p!==null&&mg(p,d,E)}};function XM(d,p,S,E,B,F,ne){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(E,F,ne):p.prototype&&p.prototype.isPureReactComponent?!_u(S,E)||!_u(B,F):!0}function KM(d,p,S){var E=!1,B=Mt,F=p.contextType;return typeof F=="object"&&F!==null?F=An(F):(B=bn(p)?en:qt.current,E=p.contextTypes,F=(E=E!=null)?hr(d,B):Mt),p=new p(S,F),d.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=vg,d.stateNode=p,p._reactInternals=d,E&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=B,d.__reactInternalMemoizedMaskedChildContext=F),p}function YM(d,p,S,E){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(S,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(S,E),p.state!==d&&vg.enqueueReplaceState(p,p.state,null)}function U1(d,p,S,E){var B=d.stateNode;B.props=S,B.state=d.memoizedState,B.refs=JM,k1(d);var F=p.contextType;typeof F=="object"&&F!==null?B.context=An(F):(F=bn(p)?en:qt.current,B.context=hr(d,F)),B.state=d.memoizedState,F=p.getDerivedStateFromProps,typeof F=="function"&&(O1(d,p,F,S),B.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(p=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),p!==B.state&&vg.enqueueReplaceState(B,B.state,null),gg(d,S,B,E),B.state=d.memoizedState),typeof B.componentDidMount=="function"&&(d.flags|=4194308)}var jc=[],$c=0,yg=null,_g=0,Cs=[],Ts=0,wu=null,da=1,ha="";function Su(d,p){jc[$c++]=_g,jc[$c++]=yg,yg=d,_g=p}function QM(d,p,S){Cs[Ts++]=da,Cs[Ts++]=ha,Cs[Ts++]=wu,wu=d;var E=da;d=ha;var B=32-yn(E)-1;E&=~(1<<B),S+=1;var F=32-yn(p)+B;if(30<F){var ne=B-B%5;F=(E&(1<<ne)-1).toString(32),E>>=ne,B-=ne,da=1<<32-yn(p)+B|S<<B|E,ha=F+d}else da=1<<F|S<<B|E,ha=d}function N1(d){d.return!==null&&(Su(d,1),QM(d,1,0))}function z1(d){for(;d===yg;)yg=jc[--$c],jc[$c]=null,_g=jc[--$c],jc[$c]=null;for(;d===wu;)wu=Cs[--Ts],Cs[Ts]=null,ha=Cs[--Ts],Cs[Ts]=null,da=Cs[--Ts],Cs[Ts]=null}var ss=null,os=null,On=!1,fh=!1,uo=null;function ZM(d,p){var S=Is(5,null,null,0);S.elementType="DELETED",S.stateNode=p,S.return=d,p=d.deletions,p===null?(d.deletions=[S],d.flags|=16):p.push(S)}function qM(d,p){switch(d.tag){case 5:return p=Xt(p,d.type,d.pendingProps),p!==null?(d.stateNode=p,ss=d,os=fe(p),!0):!1;case 6:return p=Wr(p,d.pendingProps),p!==null?(d.stateNode=p,ss=d,os=null,!0):!1;case 13:if(p=br(p),p!==null){var S=wu!==null?{id:da,overflow:ha}:null;return d.memoizedState={dehydrated:p,treeContext:S,retryLane:1073741824},S=Is(18,null,null,0),S.stateNode=p,S.return=d,d.child=S,ss=d,os=null,!0}return!1;default:return!1}}function G1(d){return(d.mode&1)!==0&&(d.flags&128)===0}function H1(d){if(On){var p=os;if(p){var S=p;if(!qM(d,p)){if(G1(d))throw Error(o(418));p=Pe(S);var E=ss;p&&qM(d,p)?ZM(E,S):(d.flags=d.flags&-4097|2,On=!1,ss=d)}}else{if(G1(d))throw Error(o(418));d.flags=d.flags&-4097|2,On=!1,ss=d}}}function eE(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;ss=d}function dh(d){if(!se||d!==ss)return!1;if(!On)return eE(d),On=!0,!1;if(d.tag!==3&&(d.tag!==5||Ye(d.type)&&!te(d.type,d.memoizedProps))){var p=os;if(p){if(G1(d)){for(d=os;d;)d=Pe(d);throw Error(o(418))}for(;p;)ZM(d,p),p=Pe(p)}}if(eE(d),d.tag===13){if(!se)throw Error(o(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));os=ye(d)}else os=ss?Pe(d.stateNode):null;return!0}function Jc(){se&&(os=ss=null,fh=On=!1)}function V1(d){uo===null?uo=[d]:uo.push(d)}function hh(d,p,S){if(d=S.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(o(309));var E=S.stateNode}if(!E)throw Error(o(147,d));var B=E,F=""+d;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===F?p.ref:(p=function(ne){var ve=B.refs;ve===JM&&(ve=B.refs={}),ne===null?delete ve[F]:ve[F]=ne},p._stringRef=F,p)}if(typeof d!="string")throw Error(o(284));if(!S._owner)throw Error(o(290,d))}return d}function xg(d,p){throw d=Object.prototype.toString.call(p),Error(o(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d))}function tE(d){var p=d._init;return p(d._payload)}function nE(d){function p(Te,xe){if(d){var Le=Te.deletions;Le===null?(Te.deletions=[xe],Te.flags|=16):Le.push(xe)}}function S(Te,xe){if(!d)return null;for(;xe!==null;)p(Te,xe),xe=xe.sibling;return null}function E(Te,xe){for(Te=new Map;xe!==null;)xe.key!==null?Te.set(xe.key,xe):Te.set(xe.index,xe),xe=xe.sibling;return Te}function B(Te,xe){return Te=fl(Te,xe),Te.index=0,Te.sibling=null,Te}function F(Te,xe,Le){return Te.index=Le,d?(Le=Te.alternate,Le!==null?(Le=Le.index,Le<xe?(Te.flags|=2,xe):Le):(Te.flags|=2,xe)):(Te.flags|=1048576,xe)}function ne(Te){return d&&Te.alternate===null&&(Te.flags|=2),Te}function ve(Te,xe,Le,ut){return xe===null||xe.tag!==6?(xe=E_(Le,Te.mode,ut),xe.return=Te,xe):(xe=B(xe,Le),xe.return=Te,xe)}function Fe(Te,xe,Le,ut){var _t=Le.type;return _t===c?pt(Te,xe,Le.props.children,ut,Le.key):xe!==null&&(xe.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===w&&tE(_t)===xe.type)?(ut=B(xe,Le.props),ut.ref=hh(Te,xe,Le),ut.return=Te,ut):(ut=Qg(Le.type,Le.key,Le.props,null,Te.mode,ut),ut.ref=hh(Te,xe,Le),ut.return=Te,ut)}function tt(Te,xe,Le,ut){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==Le.containerInfo||xe.stateNode.implementation!==Le.implementation?(xe=C_(Le,Te.mode,ut),xe.return=Te,xe):(xe=B(xe,Le.children||[]),xe.return=Te,xe)}function pt(Te,xe,Le,ut,_t){return xe===null||xe.tag!==7?(xe=Ru(Le,Te.mode,ut,_t),xe.return=Te,xe):(xe=B(xe,Le),xe.return=Te,xe)}function kt(Te,xe,Le){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return xe=E_(""+xe,Te.mode,Le),xe.return=Te,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case l:return Le=Qg(xe.type,xe.key,xe.props,null,Te.mode,Le),Le.ref=hh(Te,null,xe),Le.return=Te,Le;case u:return xe=C_(xe,Te.mode,Le),xe.return=Te,xe;case w:var ut=xe._init;return kt(Te,ut(xe._payload),Le)}if(J(xe)||M(xe))return xe=Ru(xe,Te.mode,Le,null),xe.return=Te,xe;xg(Te,xe)}return null}function Et(Te,xe,Le,ut){var _t=xe!==null?xe.key:null;if(typeof Le=="string"&&Le!==""||typeof Le=="number")return _t!==null?null:ve(Te,xe,""+Le,ut);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case l:return Le.key===_t?Fe(Te,xe,Le,ut):null;case u:return Le.key===_t?tt(Te,xe,Le,ut):null;case w:return _t=Le._init,Et(Te,xe,_t(Le._payload),ut)}if(J(Le)||M(Le))return _t!==null?null:pt(Te,xe,Le,ut,null);xg(Te,Le)}return null}function Mn(Te,xe,Le,ut,_t){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return Te=Te.get(Le)||null,ve(xe,Te,""+ut,_t);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case l:return Te=Te.get(ut.key===null?Le:ut.key)||null,Fe(xe,Te,ut,_t);case u:return Te=Te.get(ut.key===null?Le:ut.key)||null,tt(xe,Te,ut,_t);case w:var zt=ut._init;return Mn(Te,xe,Le,zt(ut._payload),_t)}if(J(ut)||M(ut))return Te=Te.get(Le)||null,pt(xe,Te,ut,_t,null);xg(xe,ut)}return null}function xt(Te,xe,Le,ut){for(var _t=null,zt=null,Ot=xe,pn=xe=0,Or=null;Ot!==null&&pn<Le.length;pn++){Ot.index>pn?(Or=Ot,Ot=null):Or=Ot.sibling;var mn=Et(Te,Ot,Le[pn],ut);if(mn===null){Ot===null&&(Ot=Or);break}d&&Ot&&mn.alternate===null&&p(Te,Ot),xe=F(mn,xe,pn),zt===null?_t=mn:zt.sibling=mn,zt=mn,Ot=Or}if(pn===Le.length)return S(Te,Ot),On&&Su(Te,pn),_t;if(Ot===null){for(;pn<Le.length;pn++)Ot=kt(Te,Le[pn],ut),Ot!==null&&(xe=F(Ot,xe,pn),zt===null?_t=Ot:zt.sibling=Ot,zt=Ot);return On&&Su(Te,pn),_t}for(Ot=E(Te,Ot);pn<Le.length;pn++)Or=Mn(Ot,Te,pn,Le[pn],ut),Or!==null&&(d&&Or.alternate!==null&&Ot.delete(Or.key===null?pn:Or.key),xe=F(Or,xe,pn),zt===null?_t=Or:zt.sibling=Or,zt=Or);return d&&Ot.forEach(function(dl){return p(Te,dl)}),On&&Su(Te,pn),_t}function si(Te,xe,Le,ut){var _t=M(Le);if(typeof _t!="function")throw Error(o(150));if(Le=_t.call(Le),Le==null)throw Error(o(151));for(var zt=_t=null,Ot=xe,pn=xe=0,Or=null,mn=Le.next();Ot!==null&&!mn.done;pn++,mn=Le.next()){Ot.index>pn?(Or=Ot,Ot=null):Or=Ot.sibling;var dl=Et(Te,Ot,mn.value,ut);if(dl===null){Ot===null&&(Ot=Or);break}d&&Ot&&dl.alternate===null&&p(Te,Ot),xe=F(dl,xe,pn),zt===null?_t=dl:zt.sibling=dl,zt=dl,Ot=Or}if(mn.done)return S(Te,Ot),On&&Su(Te,pn),_t;if(Ot===null){for(;!mn.done;pn++,mn=Le.next())mn=kt(Te,mn.value,ut),mn!==null&&(xe=F(mn,xe,pn),zt===null?_t=mn:zt.sibling=mn,zt=mn);return On&&Su(Te,pn),_t}for(Ot=E(Te,Ot);!mn.done;pn++,mn=Le.next())mn=Mn(Ot,Te,pn,mn.value,ut),mn!==null&&(d&&mn.alternate!==null&&Ot.delete(mn.key===null?pn:mn.key),xe=F(mn,xe,pn),zt===null?_t=mn:zt.sibling=mn,zt=mn);return d&&Ot.forEach(function(BN){return p(Te,BN)}),On&&Su(Te,pn),_t}function Ds(Te,xe,Le,ut){if(typeof Le=="object"&&Le!==null&&Le.type===c&&Le.key===null&&(Le=Le.props.children),typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case l:e:{for(var _t=Le.key,zt=xe;zt!==null;){if(zt.key===_t){if(_t=Le.type,_t===c){if(zt.tag===7){S(Te,zt.sibling),xe=B(zt,Le.props.children),xe.return=Te,Te=xe;break e}}else if(zt.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===w&&tE(_t)===zt.type){S(Te,zt.sibling),xe=B(zt,Le.props),xe.ref=hh(Te,zt,Le),xe.return=Te,Te=xe;break e}S(Te,zt);break}else p(Te,zt);zt=zt.sibling}Le.type===c?(xe=Ru(Le.props.children,Te.mode,ut,Le.key),xe.return=Te,Te=xe):(ut=Qg(Le.type,Le.key,Le.props,null,Te.mode,ut),ut.ref=hh(Te,xe,Le),ut.return=Te,Te=ut)}return ne(Te);case u:e:{for(zt=Le.key;xe!==null;){if(xe.key===zt)if(xe.tag===4&&xe.stateNode.containerInfo===Le.containerInfo&&xe.stateNode.implementation===Le.implementation){S(Te,xe.sibling),xe=B(xe,Le.children||[]),xe.return=Te,Te=xe;break e}else{S(Te,xe);break}else p(Te,xe);xe=xe.sibling}xe=C_(Le,Te.mode,ut),xe.return=Te,Te=xe}return ne(Te);case w:return zt=Le._init,Ds(Te,xe,zt(Le._payload),ut)}if(J(Le))return xt(Te,xe,Le,ut);if(M(Le))return si(Te,xe,Le,ut);xg(Te,Le)}return typeof Le=="string"&&Le!==""||typeof Le=="number"?(Le=""+Le,xe!==null&&xe.tag===6?(S(Te,xe.sibling),xe=B(xe,Le),xe.return=Te,Te=xe):(S(Te,xe),xe=E_(Le,Te.mode,ut),xe.return=Te,Te=xe),ne(Te)):S(Te,xe)}return Ds}var Xc=nE(!0),rE=nE(!1),ph={},Rs=wt(ph),mh=wt(ph),Kc=wt(ph);function Ho(d){if(d===ph)throw Error(o(174));return d}function W1(d,p){Tt(Kc,p),Tt(mh,d),Tt(Rs,ph),d=re(p),St(Rs),Tt(Rs,d)}function Yc(){St(Rs),St(mh),St(Kc)}function iE(d){var p=Ho(Kc.current),S=Ho(Rs.current);p=G(S,d.type,p),S!==p&&(Tt(mh,d),Tt(Rs,p))}function j1(d){mh.current===d&&(St(Rs),St(mh))}var Hn=wt(0);function wg(d){for(var p=d;p!==null;){if(p.tag===13){var S=p.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||Kt(S)||ee(S)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var $1=[];function J1(){for(var d=0;d<$1.length;d++){var p=$1[d];W?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}$1.length=0}var Sg=a.ReactCurrentDispatcher,Ps=a.ReactCurrentBatchConfig,Qc=0,er=null,ni=null,kr=null,bg=!1,gh=!1,vh=0,nN=0;function ri(){throw Error(o(321))}function X1(d,p){if(p===null)return!1;for(var S=0;S<p.length&&S<d.length;S++)if(!is(d[S],p[S]))return!1;return!0}function K1(d,p,S,E,B,F){if(Qc=F,er=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Sg.current=d===null||d.memoizedState===null?oN:aN,d=S(E,B),gh){F=0;do{if(gh=!1,vh=0,25<=F)throw Error(o(301));F+=1,kr=ni=null,p.updateQueue=null,Sg.current=lN,d=S(E,B)}while(gh)}if(Sg.current=Tg,p=ni!==null&&ni.next!==null,Qc=0,kr=ni=er=null,bg=!1,p)throw Error(o(300));return d}function Y1(){var d=vh!==0;return vh=0,d}function pa(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kr===null?er.memoizedState=kr=d:kr=kr.next=d,kr}function Vo(){if(ni===null){var d=er.alternate;d=d!==null?d.memoizedState:null}else d=ni.next;var p=kr===null?er.memoizedState:kr.next;if(p!==null)kr=p,ni=d;else{if(d===null)throw Error(o(310));ni=d,d={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},kr===null?er.memoizedState=kr=d:kr=kr.next=d}return kr}function bu(d,p){return typeof p=="function"?p(d):p}function Ag(d){var p=Vo(),S=p.queue;if(S===null)throw Error(o(311));S.lastRenderedReducer=d;var E=ni,B=E.baseQueue,F=S.pending;if(F!==null){if(B!==null){var ne=B.next;B.next=F.next,F.next=ne}E.baseQueue=B=F,S.pending=null}if(B!==null){F=B.next,E=E.baseState;var ve=ne=null,Fe=null,tt=F;do{var pt=tt.lane;if((Qc&pt)===pt)Fe!==null&&(Fe=Fe.next={lane:0,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),E=tt.hasEagerState?tt.eagerState:d(E,tt.action);else{var kt={lane:pt,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null};Fe===null?(ve=Fe=kt,ne=E):Fe=Fe.next=kt,er.lanes|=pt,qc|=pt}tt=tt.next}while(tt!==null&&tt!==F);Fe===null?ne=E:Fe.next=ve,is(E,p.memoizedState)||(as=!0),p.memoizedState=E,p.baseState=ne,p.baseQueue=Fe,S.lastRenderedState=E}if(d=S.interleaved,d!==null){B=d;do F=B.lane,er.lanes|=F,qc|=F,B=B.next;while(B!==d)}else B===null&&(S.lanes=0);return[p.memoizedState,S.dispatch]}function Mg(d){var p=Vo(),S=p.queue;if(S===null)throw Error(o(311));S.lastRenderedReducer=d;var E=S.dispatch,B=S.pending,F=p.memoizedState;if(B!==null){S.pending=null;var ne=B=B.next;do F=d(F,ne.action),ne=ne.next;while(ne!==B);is(F,p.memoizedState)||(as=!0),p.memoizedState=F,p.baseQueue===null&&(p.baseState=F),S.lastRenderedState=F}return[F,E]}function sE(){}function oE(d,p){var S=er,E=Vo(),B=p(),F=!is(E.memoizedState,B);if(F&&(E.memoizedState=B,as=!0),E=E.queue,_h(uE.bind(null,S,E,d),[d]),E.getSnapshot!==p||F||kr!==null&&kr.memoizedState.tag&1){if(S.flags|=2048,yh(9,lE.bind(null,S,E,B,p),void 0,null),mr===null)throw Error(o(349));Qc&30||aE(S,p,B)}return B}function aE(d,p,S){d.flags|=16384,d={getSnapshot:p,value:S},p=er.updateQueue,p===null?(p={lastEffect:null,stores:null},er.updateQueue=p,p.stores=[d]):(S=p.stores,S===null?p.stores=[d]:S.push(d))}function lE(d,p,S,E){p.value=S,p.getSnapshot=E,cE(p)&&Bs(d,1,-1)}function uE(d,p,S){return S(function(){cE(p)&&Bs(d,1,-1)})}function cE(d){var p=d.getSnapshot;d=d.value;try{var S=p();return!is(d,S)}catch{return!0}}function Q1(d){var p=pa();return typeof d=="function"&&(d=d()),p.memoizedState=p.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bu,lastRenderedState:d},p.queue=d,d=d.dispatch=sN.bind(null,er,d),[p.memoizedState,d]}function yh(d,p,S,E){return d={tag:d,create:p,destroy:S,deps:E,next:null},p=er.updateQueue,p===null?(p={lastEffect:null,stores:null},er.updateQueue=p,p.lastEffect=d.next=d):(S=p.lastEffect,S===null?p.lastEffect=d.next=d:(E=S.next,S.next=d,d.next=E,p.lastEffect=d)),d}function fE(){return Vo().memoizedState}function Eg(d,p,S,E){var B=pa();er.flags|=d,B.memoizedState=yh(1|p,S,void 0,E===void 0?null:E)}function Cg(d,p,S,E){var B=Vo();E=E===void 0?null:E;var F=void 0;if(ni!==null){var ne=ni.memoizedState;if(F=ne.destroy,E!==null&&X1(E,ne.deps)){B.memoizedState=yh(p,S,F,E);return}}er.flags|=d,B.memoizedState=yh(1|p,S,F,E)}function Z1(d,p){return Eg(8390656,8,d,p)}function _h(d,p){return Cg(2048,8,d,p)}function dE(d,p){return Cg(4,2,d,p)}function hE(d,p){return Cg(4,4,d,p)}function pE(d,p){if(typeof p=="function")return d=d(),p(d),function(){p(null)};if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function mE(d,p,S){return S=S!=null?S.concat([d]):null,Cg(4,4,pE.bind(null,p,d),S)}function q1(){}function gE(d,p){var S=Vo();p=p===void 0?null:p;var E=S.memoizedState;return E!==null&&p!==null&&X1(p,E[1])?E[0]:(S.memoizedState=[d,p],d)}function vE(d,p){var S=Vo();p=p===void 0?null:p;var E=S.memoizedState;return E!==null&&p!==null&&X1(p,E[1])?E[0]:(d=d(),S.memoizedState=[d,p],d)}function rN(d,p){var S=Jt;Jt=S!==0&&4>S?S:4,d(!0);var E=Ps.transition;Ps.transition={};try{d(!1),p()}finally{Jt=S,Ps.transition=E}}function yE(){return Vo().memoizedState}function iN(d,p,S){var E=ul(d);S={lane:E,action:S,hasEagerState:!1,eagerState:null,next:null},_E(d)?xE(p,S):(wE(d,p,S),S=bi(),d=Bs(d,E,S),d!==null&&SE(d,p,E))}function sN(d,p,S){var E=ul(d),B={lane:E,action:S,hasEagerState:!1,eagerState:null,next:null};if(_E(d))xE(p,B);else{wE(d,p,B);var F=d.alternate;if(d.lanes===0&&(F===null||F.lanes===0)&&(F=p.lastRenderedReducer,F!==null))try{var ne=p.lastRenderedState,ve=F(ne,S);if(B.hasEagerState=!0,B.eagerState=ve,is(ve,ne))return}catch{}finally{}S=bi(),d=Bs(d,E,S),d!==null&&SE(d,p,E)}}function _E(d){var p=d.alternate;return d===er||p!==null&&p===er}function xE(d,p){gh=bg=!0;var S=d.pending;S===null?p.next=p:(p.next=S.next,S.next=p),d.pending=p}function wE(d,p,S){mr!==null&&d.mode&1&&!(Wt&2)?(d=p.interleaved,d===null?(S.next=S,Ar===null?Ar=[p]:Ar.push(p)):(S.next=d.next,d.next=S),p.interleaved=S):(d=p.pending,d===null?S.next=S:(S.next=d.next,d.next=S),p.pending=S)}function SE(d,p,S){if(S&4194240){var E=p.lanes;E&=d.pendingLanes,S|=E,p.lanes=S,No(d,S)}}var Tg={readContext:An,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useInsertionEffect:ri,useLayoutEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useMutableSource:ri,useSyncExternalStore:ri,useId:ri,unstable_isNewReconciler:!1},oN={readContext:An,useCallback:function(d,p){return pa().memoizedState=[d,p===void 0?null:p],d},useContext:An,useEffect:Z1,useImperativeHandle:function(d,p,S){return S=S!=null?S.concat([d]):null,Eg(4194308,4,pE.bind(null,p,d),S)},useLayoutEffect:function(d,p){return Eg(4194308,4,d,p)},useInsertionEffect:function(d,p){return Eg(4,2,d,p)},useMemo:function(d,p){var S=pa();return p=p===void 0?null:p,d=d(),S.memoizedState=[d,p],d},useReducer:function(d,p,S){var E=pa();return p=S!==void 0?S(p):p,E.memoizedState=E.baseState=p,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:p},E.queue=d,d=d.dispatch=iN.bind(null,er,d),[E.memoizedState,d]},useRef:function(d){var p=pa();return d={current:d},p.memoizedState=d},useState:Q1,useDebugValue:q1,useDeferredValue:function(d){var p=Q1(d),S=p[0],E=p[1];return Z1(function(){var B=Ps.transition;Ps.transition={};try{E(d)}finally{Ps.transition=B}},[d]),S},useTransition:function(){var d=Q1(!1),p=d[0];return d=rN.bind(null,d[1]),pa().memoizedState=d,[p,d]},useMutableSource:function(){},useSyncExternalStore:function(d,p,S){var E=er,B=pa();if(On){if(S===void 0)throw Error(o(407));S=S()}else{if(S=p(),mr===null)throw Error(o(349));Qc&30||aE(E,p,S)}B.memoizedState=S;var F={value:S,getSnapshot:p};return B.queue=F,Z1(uE.bind(null,E,F,d),[d]),E.flags|=2048,yh(9,lE.bind(null,E,F,S,p),void 0,null),S},useId:function(){var d=pa(),p=mr.identifierPrefix;if(On){var S=ha,E=da;S=(E&~(1<<32-yn(E)-1)).toString(32)+S,p=":"+p+"R"+S,S=vh++,0<S&&(p+="H"+S.toString(32)),p+=":"}else S=nN++,p=":"+p+"r"+S.toString(32)+":";return d.memoizedState=p},unstable_isNewReconciler:!1},aN={readContext:An,useCallback:gE,useContext:An,useEffect:_h,useImperativeHandle:mE,useInsertionEffect:dE,useLayoutEffect:hE,useMemo:vE,useReducer:Ag,useRef:fE,useState:function(){return Ag(bu)},useDebugValue:q1,useDeferredValue:function(d){var p=Ag(bu),S=p[0],E=p[1];return _h(function(){var B=Ps.transition;Ps.transition={};try{E(d)}finally{Ps.transition=B}},[d]),S},useTransition:function(){var d=Ag(bu)[0],p=Vo().memoizedState;return[d,p]},useMutableSource:sE,useSyncExternalStore:oE,useId:yE,unstable_isNewReconciler:!1},lN={readContext:An,useCallback:gE,useContext:An,useEffect:_h,useImperativeHandle:mE,useInsertionEffect:dE,useLayoutEffect:hE,useMemo:vE,useReducer:Mg,useRef:fE,useState:function(){return Mg(bu)},useDebugValue:q1,useDeferredValue:function(d){var p=Mg(bu),S=p[0],E=p[1];return _h(function(){var B=Ps.transition;Ps.transition={};try{E(d)}finally{Ps.transition=B}},[d]),S},useTransition:function(){var d=Mg(bu)[0],p=Vo().memoizedState;return[d,p]},useMutableSource:sE,useSyncExternalStore:oE,useId:yE,unstable_isNewReconciler:!1};function e_(d,p){try{var S="",E=p;do S+=xu(E),E=E.return;while(E);var B=S}catch(F){B=`
Error generating stack: `+F.message+`
`+F.stack}return{value:d,source:p,stack:B}}function t_(d,p){try{console.error(p.value)}catch(S){setTimeout(function(){throw S})}}var uN=typeof WeakMap=="function"?WeakMap:Map;function bE(d,p,S){S=fa(-1,S),S.tag=3,S.payload={element:null};var E=p.value;return S.callback=function(){Wg||(Wg=!0,__=E),t_(d,p)},S}function AE(d,p,S){S=fa(-1,S),S.tag=3;var E=d.type.getDerivedStateFromError;if(typeof E=="function"){var B=p.value;S.payload=function(){return E(B)},S.callback=function(){t_(d,p)}}var F=d.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(S.callback=function(){t_(d,p),typeof E!="function"&&(al===null?al=new Set([this]):al.add(this));var ne=p.stack;this.componentDidCatch(p.value,{componentStack:ne!==null?ne:""})}),S}function ME(d,p,S){var E=d.pingCache;if(E===null){E=d.pingCache=new uN;var B=new Set;E.set(p,B)}else B=E.get(p),B===void 0&&(B=new Set,E.set(p,B));B.has(S)||(B.add(S),d=bN.bind(null,d,p,S),p.then(d,d))}function EE(d){do{var p;if((p=d.tag===13)&&(p=d.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return d;d=d.return}while(d!==null);return null}function CE(d,p,S,E,B){return d.mode&1?(d.flags|=65536,d.lanes=B,d):(d===p?d.flags|=65536:(d.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(p=fa(-1,1),p.tag=2,ol(S,p))),S.lanes|=1),d)}function Wo(d){d.flags|=4}function TE(d,p){if(d!==null&&d.child===p.child)return!0;if(p.flags&16)return!1;for(d=p.child;d!==null;){if(d.flags&12854||d.subtreeFlags&12854)return!1;d=d.sibling}return!0}var xh,wh,Rg,Pg;if(Z)xh=function(d,p){for(var S=p.child;S!==null;){if(S.tag===5||S.tag===6)K(d,S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===p)break;for(;S.sibling===null;){if(S.return===null||S.return===p)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},wh=function(){},Rg=function(d,p,S,E,B){if(d=d.memoizedProps,d!==E){var F=p.stateNode,ne=Ho(Rs.current);S=he(F,S,d,E,B,ne),(p.updateQueue=S)&&Wo(p)}},Pg=function(d,p,S,E){S!==E&&Wo(p)};else if(q){xh=function(d,p,S,E){for(var B=p.child;B!==null;){if(B.tag===5){var F=B.stateNode;S&&E&&(F=hn(F,B.type,B.memoizedProps,B)),K(d,F)}else if(B.tag===6)F=B.stateNode,S&&E&&(F=Ht(F,B.memoizedProps,B)),K(d,F);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)F=B.child,F!==null&&(F.return=B),xh(d,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===p)break;for(;B.sibling===null;){if(B.return===null||B.return===p)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};var RE=function(d,p,S,E){for(var B=p.child;B!==null;){if(B.tag===5){var F=B.stateNode;S&&E&&(F=hn(F,B.type,B.memoizedProps,B)),Yt(d,F)}else if(B.tag===6)F=B.stateNode,S&&E&&(F=Ht(F,B.memoizedProps,B)),Yt(d,F);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)F=B.child,F!==null&&(F.return=B),RE(d,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===p)break;for(;B.sibling===null;){if(B.return===null||B.return===p)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};wh=function(d,p){var S=p.stateNode;if(!TE(d,p)){d=S.containerInfo;var E=Gt(d);RE(E,p,!1,!1),S.pendingChildren=E,Wo(p),cn(d,E)}},Rg=function(d,p,S,E,B){var F=d.stateNode,ne=d.memoizedProps;if((d=TE(d,p))&&ne===E)p.stateNode=F;else{var ve=p.stateNode,Fe=Ho(Rs.current),tt=null;ne!==E&&(tt=he(ve,S,ne,E,B,Fe)),d&&tt===null?p.stateNode=F:(F=lt(F,tt,S,ne,E,p,d,ve),ce(F,S,E,B,Fe)&&Wo(p),p.stateNode=F,d?Wo(p):xh(F,p,!1,!1))}},Pg=function(d,p,S,E){S!==E?(d=Ho(Kc.current),S=Ho(Rs.current),p.stateNode=me(E,d,S,p),Wo(p)):p.stateNode=d.stateNode}}else wh=function(){},Rg=function(){},Pg=function(){};function Sh(d,p){if(!On)switch(d.tailMode){case"hidden":p=d.tail;for(var S=null;p!==null;)p.alternate!==null&&(S=p),p=p.sibling;S===null?d.tail=null:S.sibling=null;break;case"collapsed":S=d.tail;for(var E=null;S!==null;)S.alternate!==null&&(E=S),S=S.sibling;E===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:E.sibling=null}}function ii(d){var p=d.alternate!==null&&d.alternate.child===d.child,S=0,E=0;if(p)for(var B=d.child;B!==null;)S|=B.lanes|B.childLanes,E|=B.subtreeFlags&14680064,E|=B.flags&14680064,B.return=d,B=B.sibling;else for(B=d.child;B!==null;)S|=B.lanes|B.childLanes,E|=B.subtreeFlags,E|=B.flags,B.return=d,B=B.sibling;return d.subtreeFlags|=E,d.childLanes=S,p}function cN(d,p,S){var E=p.pendingProps;switch(z1(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ii(p),null;case 1:return bn(p.type)&&ir(),ii(p),null;case 3:return E=p.stateNode,Yc(),St(Dt),St(qt),J1(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(d===null||d.child===null)&&(dh(p)?Wo(p):d===null||d.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,uo!==null&&(S_(uo),uo=null))),wh(d,p),ii(p),null;case 5:j1(p),S=Ho(Kc.current);var B=p.type;if(d!==null&&p.stateNode!=null)Rg(d,p,B,E,S),d.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!E){if(p.stateNode===null)throw Error(o(166));return ii(p),null}if(d=Ho(Rs.current),dh(p)){if(!se)throw Error(o(175));d=k(p.stateNode,p.type,p.memoizedProps,S,d,p,!fh),p.updateQueue=d,d!==null&&Wo(p)}else{var F=X(B,E,S,d,p);xh(F,p,!1,!1),p.stateNode=F,ce(F,B,E,S,d)&&Wo(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return ii(p),null;case 6:if(d&&p.stateNode!=null)Pg(d,p,d.memoizedProps,E);else{if(typeof E!="string"&&p.stateNode===null)throw Error(o(166));if(d=Ho(Kc.current),S=Ho(Rs.current),dh(p)){if(!se)throw Error(o(176));if(d=p.stateNode,E=p.memoizedProps,(S=H(d,E,p,!fh))&&(B=ss,B!==null))switch(F=(B.mode&1)!==0,B.tag){case 3:Qe(B.stateNode.containerInfo,d,E,F);break;case 5:Xe(B.type,B.memoizedProps,B.stateNode,d,E,F)}S&&Wo(p)}else p.stateNode=me(E,d,S,p)}return ii(p),null;case 13:if(St(Hn),E=p.memoizedState,On&&os!==null&&p.mode&1&&!(p.flags&128)){for(d=os;d;)d=Pe(d);return Jc(),p.flags|=98560,p}if(E!==null&&E.dehydrated!==null){if(E=dh(p),d===null){if(!E)throw Error(o(318));if(!se)throw Error(o(344));if(d=p.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));ie(d,p)}else Jc(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;return ii(p),null}return uo!==null&&(S_(uo),uo=null),p.flags&128?(p.lanes=S,p):(E=E!==null,S=!1,d===null?dh(p):S=d.memoizedState!==null,E&&!S&&(p.child.flags|=8192,p.mode&1&&(d===null||Hn.current&1?Mr===0&&(Mr=3):A_())),p.updateQueue!==null&&(p.flags|=4),ii(p),null);case 4:return Yc(),wh(d,p),d===null&&Me(p.stateNode.containerInfo),ii(p),null;case 10:return Go(p.type._context),ii(p),null;case 17:return bn(p.type)&&ir(),ii(p),null;case 19:if(St(Hn),B=p.memoizedState,B===null)return ii(p),null;if(E=(p.flags&128)!==0,F=B.rendering,F===null)if(E)Sh(B,!1);else{if(Mr!==0||d!==null&&d.flags&128)for(d=p.child;d!==null;){if(F=wg(d),F!==null){for(p.flags|=128,Sh(B,!1),d=F.updateQueue,d!==null&&(p.updateQueue=d,p.flags|=4),p.subtreeFlags=0,d=S,E=p.child;E!==null;)S=E,B=d,S.flags&=14680066,F=S.alternate,F===null?(S.childLanes=0,S.lanes=B,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=F.childLanes,S.lanes=F.lanes,S.child=F.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=F.memoizedProps,S.memoizedState=F.memoizedState,S.updateQueue=F.updateQueue,S.type=F.type,B=F.dependencies,S.dependencies=B===null?null:{lanes:B.lanes,firstContext:B.firstContext}),E=E.sibling;return Tt(Hn,Hn.current&1|2),p.child}d=d.sibling}B.tail!==null&&kn()>y_&&(p.flags|=128,E=!0,Sh(B,!1),p.lanes=4194304)}else{if(!E)if(d=wg(F),d!==null){if(p.flags|=128,E=!0,d=d.updateQueue,d!==null&&(p.updateQueue=d,p.flags|=4),Sh(B,!0),B.tail===null&&B.tailMode==="hidden"&&!F.alternate&&!On)return ii(p),null}else 2*kn()-B.renderingStartTime>y_&&S!==1073741824&&(p.flags|=128,E=!0,Sh(B,!1),p.lanes=4194304);B.isBackwards?(F.sibling=p.child,p.child=F):(d=B.last,d!==null?d.sibling=F:p.child=F,B.last=F)}return B.tail!==null?(p=B.tail,B.rendering=p,B.tail=p.sibling,B.renderingStartTime=kn(),p.sibling=null,d=Hn.current,Tt(Hn,E?d&1|2:d&1),p):(ii(p),null);case 22:case 23:return b_(),E=p.memoizedState!==null,d!==null&&d.memoizedState!==null!==E&&(p.flags|=8192),E&&p.mode&1?ls&1073741824&&(ii(p),Z&&p.subtreeFlags&6&&(p.flags|=8192)):ii(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var fN=a.ReactCurrentOwner,as=!1;function Si(d,p,S,E){p.child=d===null?rE(p,null,S,E):Xc(p,d.child,S,E)}function PE(d,p,S,E,B){S=S.render;var F=p.ref;return Fr(p,B),E=K1(d,p,S,E,F,B),S=Y1(),d!==null&&!as?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~B,ma(d,p,B)):(On&&S&&N1(p),p.flags|=1,Si(d,p,E,B),p.child)}function BE(d,p,S,E,B){if(d===null){var F=S.type;return typeof F=="function"&&!M_(F)&&F.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(p.tag=15,p.type=F,IE(d,p,F,E,B)):(d=Qg(S.type,null,E,p,p.mode,B),d.ref=p.ref,d.return=p,p.child=d)}if(F=d.child,!(d.lanes&B)){var ne=F.memoizedProps;if(S=S.compare,S=S!==null?S:_u,S(ne,E)&&d.ref===p.ref)return ma(d,p,B)}return p.flags|=1,d=fl(F,E),d.ref=p.ref,d.return=p,p.child=d}function IE(d,p,S,E,B){if(d!==null&&_u(d.memoizedProps,E)&&d.ref===p.ref)if(as=!1,(d.lanes&B)!==0)d.flags&131072&&(as=!0);else return p.lanes=d.lanes,ma(d,p,B);return n_(d,p,S,E,B)}function DE(d,p,S){var E=p.pendingProps,B=E.children,F=d!==null?d.memoizedState:null;if(E.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null},Tt(Zc,ls),ls|=S;else if(S&1073741824)p.memoizedState={baseLanes:0,cachePool:null},E=F!==null?F.baseLanes:S,Tt(Zc,ls),ls|=E;else return d=F!==null?F.baseLanes|S:S,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:d,cachePool:null},p.updateQueue=null,Tt(Zc,ls),ls|=d,null;else F!==null?(E=F.baseLanes|S,p.memoizedState=null):E=S,Tt(Zc,ls),ls|=E;return Si(d,p,B,S),p.child}function LE(d,p){var S=p.ref;(d===null&&S!==null||d!==null&&d.ref!==S)&&(p.flags|=512,p.flags|=2097152)}function n_(d,p,S,E,B){var F=bn(S)?en:qt.current;return F=hr(p,F),Fr(p,B),S=K1(d,p,S,E,F,B),E=Y1(),d!==null&&!as?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~B,ma(d,p,B)):(On&&E&&N1(p),p.flags|=1,Si(d,p,S,B),p.child)}function FE(d,p,S,E,B){if(bn(S)){var F=!0;tn(p)}else F=!1;if(Fr(p,B),p.stateNode===null)d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),KM(p,S,E),U1(p,S,E,B),E=!0;else if(d===null){var ne=p.stateNode,ve=p.memoizedProps;ne.props=ve;var Fe=ne.context,tt=S.contextType;typeof tt=="object"&&tt!==null?tt=An(tt):(tt=bn(S)?en:qt.current,tt=hr(p,tt));var pt=S.getDerivedStateFromProps,kt=typeof pt=="function"||typeof ne.getSnapshotBeforeUpdate=="function";kt||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(ve!==E||Fe!==tt)&&YM(p,ne,E,tt),lo=!1;var Et=p.memoizedState;ne.state=Et,gg(p,E,ne,B),Fe=p.memoizedState,ve!==E||Et!==Fe||Dt.current||lo?(typeof pt=="function"&&(O1(p,S,pt,E),Fe=p.memoizedState),(ve=lo||XM(p,S,ve,E,Et,Fe,tt))?(kt||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount()),typeof ne.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ne.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=Fe),ne.props=E,ne.state=Fe,ne.context=tt,E=ve):(typeof ne.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{ne=p.stateNode,WM(d,p),ve=p.memoizedProps,tt=p.type===p.elementType?ve:ti(p.type,ve),ne.props=tt,kt=p.pendingProps,Et=ne.context,Fe=S.contextType,typeof Fe=="object"&&Fe!==null?Fe=An(Fe):(Fe=bn(S)?en:qt.current,Fe=hr(p,Fe));var Mn=S.getDerivedStateFromProps;(pt=typeof Mn=="function"||typeof ne.getSnapshotBeforeUpdate=="function")||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(ve!==kt||Et!==Fe)&&YM(p,ne,E,Fe),lo=!1,Et=p.memoizedState,ne.state=Et,gg(p,E,ne,B);var xt=p.memoizedState;ve!==kt||Et!==xt||Dt.current||lo?(typeof Mn=="function"&&(O1(p,S,Mn,E),xt=p.memoizedState),(tt=lo||XM(p,S,tt,E,Et,xt,Fe)||!1)?(pt||typeof ne.UNSAFE_componentWillUpdate!="function"&&typeof ne.componentWillUpdate!="function"||(typeof ne.componentWillUpdate=="function"&&ne.componentWillUpdate(E,xt,Fe),typeof ne.UNSAFE_componentWillUpdate=="function"&&ne.UNSAFE_componentWillUpdate(E,xt,Fe)),typeof ne.componentDidUpdate=="function"&&(p.flags|=4),typeof ne.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ne.componentDidUpdate!="function"||ve===d.memoizedProps&&Et===d.memoizedState||(p.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||ve===d.memoizedProps&&Et===d.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=xt),ne.props=E,ne.state=xt,ne.context=Fe,E=tt):(typeof ne.componentDidUpdate!="function"||ve===d.memoizedProps&&Et===d.memoizedState||(p.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||ve===d.memoizedProps&&Et===d.memoizedState||(p.flags|=1024),E=!1)}return r_(d,p,S,E,F,B)}function r_(d,p,S,E,B,F){LE(d,p);var ne=(p.flags&128)!==0;if(!E&&!ne)return B&&an(p,S,!1),ma(d,p,F);E=p.stateNode,fN.current=p;var ve=ne&&typeof S.getDerivedStateFromError!="function"?null:E.render();return p.flags|=1,d!==null&&ne?(p.child=Xc(p,d.child,null,F),p.child=Xc(p,null,ve,F)):Si(d,p,ve,F),p.memoizedState=E.state,B&&an(p,S,!0),p.child}function kE(d){var p=d.stateNode;p.pendingContext?on(d,p.pendingContext,p.pendingContext!==p.context):p.context&&on(d,p.context,!1),W1(d,p.containerInfo)}function OE(d,p,S,E,B){return Jc(),V1(B),p.flags|=256,Si(d,p,S,E),p.child}var Bg={dehydrated:null,treeContext:null,retryLane:0};function Ig(d){return{baseLanes:d,cachePool:null}}function UE(d,p,S){var E=p.pendingProps,B=Hn.current,F=!1,ne=(p.flags&128)!==0,ve;if((ve=ne)||(ve=d!==null&&d.memoizedState===null?!1:(B&2)!==0),ve?(F=!0,p.flags&=-129):(d===null||d.memoizedState!==null)&&(B|=1),Tt(Hn,B&1),d===null)return H1(p),d=p.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(p.mode&1?ee(d)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(B=E.children,d=E.fallback,F?(E=p.mode,F=p.child,B={mode:"hidden",children:B},!(E&1)&&F!==null?(F.childLanes=0,F.pendingProps=B):F=Zg(B,E,0,null),d=Ru(d,E,S,null),F.return=p,d.return=p,F.sibling=d,p.child=F,p.child.memoizedState=Ig(S),p.memoizedState=Bg,d):i_(p,B));if(B=d.memoizedState,B!==null){if(ve=B.dehydrated,ve!==null){if(ne)return p.flags&256?(p.flags&=-257,Dg(d,p,S,Error(o(422)))):p.memoizedState!==null?(p.child=d.child,p.flags|=128,null):(F=E.fallback,B=p.mode,E=Zg({mode:"visible",children:E.children},B,0,null),F=Ru(F,B,S,null),F.flags|=2,E.return=p,F.return=p,E.sibling=F,p.child=E,p.mode&1&&Xc(p,d.child,null,S),p.child.memoizedState=Ig(S),p.memoizedState=Bg,F);if(!(p.mode&1))p=Dg(d,p,S,null);else if(ee(ve))p=Dg(d,p,S,Error(o(419)));else if(E=(S&d.childLanes)!==0,as||E){if(E=mr,E!==null){switch(S&-S){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:F=32;break;case 536870912:F=268435456;break;default:F=0}E=F&(E.suspendedLanes|S)?0:F,E!==0&&E!==B.retryLane&&(B.retryLane=E,Bs(d,E,-1))}A_(),p=Dg(d,p,S,Error(o(421)))}else Kt(ve)?(p.flags|=128,p.child=d.child,p=AN.bind(null,d),be(ve,p),p=null):(S=B.treeContext,se&&(os=gt(ve),ss=p,On=!0,uo=null,fh=!1,S!==null&&(Cs[Ts++]=da,Cs[Ts++]=ha,Cs[Ts++]=wu,da=S.id,ha=S.overflow,wu=p)),p=i_(p,p.pendingProps.children),p.flags|=4096);return p}return F?(E=zE(d,p,E.children,E.fallback,S),F=p.child,B=d.child.memoizedState,F.memoizedState=B===null?Ig(S):{baseLanes:B.baseLanes|S,cachePool:null},F.childLanes=d.childLanes&~S,p.memoizedState=Bg,E):(S=NE(d,p,E.children,S),p.memoizedState=null,S)}return F?(E=zE(d,p,E.children,E.fallback,S),F=p.child,B=d.child.memoizedState,F.memoizedState=B===null?Ig(S):{baseLanes:B.baseLanes|S,cachePool:null},F.childLanes=d.childLanes&~S,p.memoizedState=Bg,E):(S=NE(d,p,E.children,S),p.memoizedState=null,S)}function i_(d,p){return p=Zg({mode:"visible",children:p},d.mode,0,null),p.return=d,d.child=p}function NE(d,p,S,E){var B=d.child;return d=B.sibling,S=fl(B,{mode:"visible",children:S}),!(p.mode&1)&&(S.lanes=E),S.return=p,S.sibling=null,d!==null&&(E=p.deletions,E===null?(p.deletions=[d],p.flags|=16):E.push(d)),p.child=S}function zE(d,p,S,E,B){var F=p.mode;d=d.child;var ne=d.sibling,ve={mode:"hidden",children:S};return!(F&1)&&p.child!==d?(S=p.child,S.childLanes=0,S.pendingProps=ve,p.deletions=null):(S=fl(d,ve),S.subtreeFlags=d.subtreeFlags&14680064),ne!==null?E=fl(ne,E):(E=Ru(E,F,B,null),E.flags|=2),E.return=p,S.return=p,S.sibling=E,p.child=S,E}function Dg(d,p,S,E){return E!==null&&V1(E),Xc(p,d.child,null,S),d=i_(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function GE(d,p,S){d.lanes|=p;var E=d.alternate;E!==null&&(E.lanes|=p),pr(d.return,p,S)}function s_(d,p,S,E,B){var F=d.memoizedState;F===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:S,tailMode:B}:(F.isBackwards=p,F.rendering=null,F.renderingStartTime=0,F.last=E,F.tail=S,F.tailMode=B)}function HE(d,p,S){var E=p.pendingProps,B=E.revealOrder,F=E.tail;if(Si(d,p,E.children,S),E=Hn.current,E&2)E=E&1|2,p.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&GE(d,S,p);else if(d.tag===19)GE(d,S,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}E&=1}if(Tt(Hn,E),!(p.mode&1))p.memoizedState=null;else switch(B){case"forwards":for(S=p.child,B=null;S!==null;)d=S.alternate,d!==null&&wg(d)===null&&(B=S),S=S.sibling;S=B,S===null?(B=p.child,p.child=null):(B=S.sibling,S.sibling=null),s_(p,!1,B,S,F);break;case"backwards":for(S=null,B=p.child,p.child=null;B!==null;){if(d=B.alternate,d!==null&&wg(d)===null){p.child=B;break}d=B.sibling,B.sibling=S,S=B,B=d}s_(p,!0,S,null,F);break;case"together":s_(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function ma(d,p,S){if(d!==null&&(p.dependencies=d.dependencies),qc|=p.lanes,!(S&p.childLanes))return null;if(d!==null&&p.child!==d.child)throw Error(o(153));if(p.child!==null){for(d=p.child,S=fl(d,d.pendingProps),p.child=S,S.return=p;d.sibling!==null;)d=d.sibling,S=S.sibling=fl(d,d.pendingProps),S.return=p;S.sibling=null}return p.child}function dN(d,p,S){switch(p.tag){case 3:kE(p),Jc();break;case 5:iE(p);break;case 1:bn(p.type)&&tn(p);break;case 4:W1(p,p.stateNode.containerInfo);break;case 10:pg(p,p.type._context,p.memoizedProps.value);break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(Tt(Hn,Hn.current&1),p.flags|=128,null):S&p.child.childLanes?UE(d,p,S):(Tt(Hn,Hn.current&1),d=ma(d,p,S),d!==null?d.sibling:null);Tt(Hn,Hn.current&1);break;case 19:if(E=(S&p.childLanes)!==0,d.flags&128){if(E)return HE(d,p,S);p.flags|=128}var B=p.memoizedState;if(B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),Tt(Hn,Hn.current),E)break;return null;case 22:case 23:return p.lanes=0,DE(d,p,S)}return ma(d,p,S)}function hN(d,p){switch(z1(p),p.tag){case 1:return bn(p.type)&&ir(),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return Yc(),St(Dt),St(qt),J1(),d=p.flags,d&65536&&!(d&128)?(p.flags=d&-65537|128,p):null;case 5:return j1(p),null;case 13:if(St(Hn),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(o(340));Jc()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return St(Hn),null;case 4:return Yc(),null;case 10:return Go(p.type._context),null;case 22:case 23:return b_(),null;case 24:return null;default:return null}}var Lg=!1,Au=!1,pN=typeof WeakSet=="function"?WeakSet:Set,at=null;function Fg(d,p){var S=d.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(E){zi(d,p,E)}else S.current=null}function o_(d,p,S){try{S()}catch(E){zi(d,p,E)}}var VE=!1;function mN(d,p){for(j(d.containerInfo),at=p;at!==null;)if(d=at,p=d.child,(d.subtreeFlags&1028)!==0&&p!==null)p.return=d,at=p;else for(;at!==null;){d=at;try{var S=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var E=S.memoizedProps,B=S.memoizedState,F=d.stateNode,ne=F.getSnapshotBeforeUpdate(d.elementType===d.type?E:ti(d.type,E),B);F.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:Z&&st(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ve){zi(d,d.return,ve)}if(p=d.sibling,p!==null){p.return=d.return,at=p;break}at=d.return}return S=VE,VE=!1,S}function Mu(d,p,S){var E=p.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var B=E=E.next;do{if((B.tag&d)===d){var F=B.destroy;B.destroy=void 0,F!==void 0&&o_(p,S,F)}B=B.next}while(B!==E)}}function bh(d,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var S=p=p.next;do{if((S.tag&d)===d){var E=S.create;S.destroy=E()}S=S.next}while(S!==p)}}function a_(d){var p=d.ref;if(p!==null){var S=d.stateNode;switch(d.tag){case 5:d=Q(S);break;default:d=S}typeof p=="function"?p(d):p.current=d}}function WE(d,p,S){if(rs&&typeof rs.onCommitFiberUnmount=="function")try{rs.onCommitFiberUnmount(il,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(d=p.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var E=d=d.next;do{var B=E,F=B.destroy;B=B.tag,F!==void 0&&(B&2||B&4)&&o_(p,S,F),E=E.next}while(E!==d)}break;case 1:if(Fg(p,S),d=p.stateNode,typeof d.componentWillUnmount=="function")try{d.props=p.memoizedProps,d.state=p.memoizedState,d.componentWillUnmount()}catch(ne){zi(p,S,ne)}break;case 5:Fg(p,S);break;case 4:Z?YE(d,p,S):q&&q&&(p=p.stateNode.containerInfo,S=Gt(p),$t(p,S))}}function jE(d,p,S){for(var E=p;;)if(WE(d,E,S),E.child===null||Z&&E.tag===4){if(E===p)break;for(;E.sibling===null;){if(E.return===null||E.return===p)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function $E(d){var p=d.alternate;p!==null&&(d.alternate=null,$E(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&Ke(p)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function JE(d){return d.tag===5||d.tag===3||d.tag===4}function XE(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||JE(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function KE(d){if(Z){e:{for(var p=d.return;p!==null;){if(JE(p))break e;p=p.return}throw Error(o(160))}var S=p;switch(S.tag){case 5:p=S.stateNode,S.flags&32&&(ft(p),S.flags&=-33),S=XE(d),u_(d,S,p);break;case 3:case 4:p=S.stateNode.containerInfo,S=XE(d),l_(d,S,p);break;default:throw Error(o(161))}}}function l_(d,p,S){var E=d.tag;if(E===5||E===6)d=d.stateNode,p?Ge(S,d,p):Ne(S,d);else if(E!==4&&(d=d.child,d!==null))for(l_(d,p,S),d=d.sibling;d!==null;)l_(d,p,S),d=d.sibling}function u_(d,p,S){var E=d.tag;if(E===5||E===6)d=d.stateNode,p?et(S,d,p):je(S,d);else if(E!==4&&(d=d.child,d!==null))for(u_(d,p,S),d=d.sibling;d!==null;)u_(d,p,S),d=d.sibling}function YE(d,p,S){for(var E=p,B=!1,F,ne;;){if(!B){B=E.return;e:for(;;){if(B===null)throw Error(o(160));switch(F=B.stateNode,B.tag){case 5:ne=!1;break e;case 3:F=F.containerInfo,ne=!0;break e;case 4:F=F.containerInfo,ne=!0;break e}B=B.return}B=!0}if(E.tag===5||E.tag===6)jE(d,E,S),ne?rt(F,E.stateNode):Ve(F,E.stateNode);else if(E.tag===18)ne?We(F,E.stateNode):Je(F,E.stateNode);else if(E.tag===4){if(E.child!==null){F=E.stateNode.containerInfo,ne=!0,E.child.return=E,E=E.child;continue}}else if(WE(d,E,S),E.child!==null){E.child.return=E,E=E.child;continue}if(E===p)break;for(;E.sibling===null;){if(E.return===null||E.return===p)return;E=E.return,E.tag===4&&(B=!1)}E.sibling.return=E.return,E=E.sibling}}function c_(d,p){if(Z){switch(p.tag){case 0:case 11:case 14:case 15:Mu(3,p,p.return),bh(3,p),Mu(5,p,p.return);return;case 1:return;case 5:var S=p.stateNode;if(S!=null){var E=p.memoizedProps;d=d!==null?d.memoizedProps:E;var B=p.type,F=p.updateQueue;p.updateQueue=null,F!==null&&$e(S,F,B,d,E,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));S=p.memoizedProps,Be(p.stateNode,d!==null?d.memoizedProps:S,S);return;case 3:se&&d!==null&&d.memoizedState.isDehydrated&&we(p.stateNode.containerInfo);return;case 12:return;case 13:kg(p);return;case 19:kg(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:Mu(3,p,p.return),bh(3,p),Mu(5,p,p.return);return;case 12:return;case 13:kg(p);return;case 19:kg(p);return;case 3:se&&d!==null&&d.memoizedState.isDehydrated&&we(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(q){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,$t(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function kg(d){var p=d.updateQueue;if(p!==null){d.updateQueue=null;var S=d.stateNode;S===null&&(S=d.stateNode=new pN),p.forEach(function(E){var B=MN.bind(null,d,E);S.has(E)||(S.add(E),E.then(B,B))})}}function gN(d,p){for(at=p;at!==null;){p=at;var S=p.deletions;if(S!==null)for(var E=0;E<S.length;E++){var B=S[E];try{var F=d;Z?YE(F,B,p):jE(F,B,p);var ne=B.alternate;ne!==null&&(ne.return=null),B.return=null}catch(_t){zi(B,p,_t)}}if(S=p.child,p.subtreeFlags&12854&&S!==null)S.return=p,at=S;else for(;at!==null;){p=at;try{var ve=p.flags;if(ve&32&&Z&&ft(p.stateNode),ve&512){var Fe=p.alternate;if(Fe!==null){var tt=Fe.ref;tt!==null&&(typeof tt=="function"?tt(null):tt.current=null)}}if(ve&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var pt=p.alternate;(pt===null||pt.memoizedState===null)&&(v_=kn())}break;case 22:var kt=p.memoizedState!==null,Et=p.alternate,Mn=Et!==null&&Et.memoizedState!==null;if(S=p,Z){e:if(E=S,B=kt,F=null,Z)for(var xt=E;;){if(xt.tag===5){if(F===null){F=xt;var si=xt.stateNode;B?yt(si):de(xt.stateNode,xt.memoizedProps)}}else if(xt.tag===6){if(F===null){var Ds=xt.stateNode;B?ue(Ds):He(Ds,xt.memoizedProps)}}else if((xt.tag!==22&&xt.tag!==23||xt.memoizedState===null||xt===E)&&xt.child!==null){xt.child.return=xt,xt=xt.child;continue}if(xt===E)break;for(;xt.sibling===null;){if(xt.return===null||xt.return===E)break e;F===xt&&(F=null),xt=xt.return}F===xt&&(F=null),xt.sibling.return=xt.return,xt=xt.sibling}}if(kt&&!Mn&&S.mode&1){at=S;for(var Te=S.child;Te!==null;){for(S=at=Te;at!==null;){E=at;var xe=E.child;switch(E.tag){case 0:case 11:case 14:case 15:Mu(4,E,E.return);break;case 1:Fg(E,E.return);var Le=E.stateNode;if(typeof Le.componentWillUnmount=="function"){var ut=E.return;try{Le.props=E.memoizedProps,Le.state=E.memoizedState,Le.componentWillUnmount()}catch(_t){zi(E,ut,_t)}}break;case 5:Fg(E,E.return);break;case 22:if(E.memoizedState!==null){qE(S);continue}}xe!==null?(xe.return=E,at=xe):qE(S)}Te=Te.sibling}}}switch(ve&4102){case 2:KE(p),p.flags&=-3;break;case 6:KE(p),p.flags&=-3,c_(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,c_(p.alternate,p);break;case 4:c_(p.alternate,p)}}catch(_t){zi(p,p.return,_t)}if(S=p.sibling,S!==null){S.return=p.return,at=S;break}at=p.return}}}function vN(d,p,S){at=d,QE(d)}function QE(d,p,S){for(var E=(d.mode&1)!==0;at!==null;){var B=at,F=B.child;if(B.tag===22&&E){var ne=B.memoizedState!==null||Lg;if(!ne){var ve=B.alternate,Fe=ve!==null&&ve.memoizedState!==null||Au;ve=Lg;var tt=Au;if(Lg=ne,(Au=Fe)&&!tt)for(at=B;at!==null;)ne=at,Fe=ne.child,ne.tag===22&&ne.memoizedState!==null?eC(B):Fe!==null?(Fe.return=ne,at=Fe):eC(B);for(;F!==null;)at=F,QE(F),F=F.sibling;at=B,Lg=ve,Au=tt}ZE(d)}else B.subtreeFlags&8772&&F!==null?(F.return=B,at=F):ZE(d)}}function ZE(d){for(;at!==null;){var p=at;if(p.flags&8772){var S=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:Au||bh(5,p);break;case 1:var E=p.stateNode;if(p.flags&4&&!Au)if(S===null)E.componentDidMount();else{var B=p.elementType===p.type?S.memoizedProps:ti(p.type,S.memoizedProps);E.componentDidUpdate(B,S.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var F=p.updateQueue;F!==null&&$M(p,F,E);break;case 3:var ne=p.updateQueue;if(ne!==null){if(S=null,p.child!==null)switch(p.child.tag){case 5:S=Q(p.child.stateNode);break;case 1:S=p.child.stateNode}$M(p,ne,S)}break;case 5:var ve=p.stateNode;S===null&&p.flags&4&&nt(ve,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(se&&p.memoizedState===null){var Fe=p.alternate;if(Fe!==null){var tt=Fe.memoizedState;if(tt!==null){var pt=tt.dehydrated;pt!==null&&Se(pt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Au||p.flags&512&&a_(p)}catch(kt){zi(p,p.return,kt)}}if(p===d){at=null;break}if(S=p.sibling,S!==null){S.return=p.return,at=S;break}at=p.return}}function qE(d){for(;at!==null;){var p=at;if(p===d){at=null;break}var S=p.sibling;if(S!==null){S.return=p.return,at=S;break}at=p.return}}function eC(d){for(;at!==null;){var p=at;try{switch(p.tag){case 0:case 11:case 15:var S=p.return;try{bh(4,p)}catch(Fe){zi(p,S,Fe)}break;case 1:var E=p.stateNode;if(typeof E.componentDidMount=="function"){var B=p.return;try{E.componentDidMount()}catch(Fe){zi(p,B,Fe)}}var F=p.return;try{a_(p)}catch(Fe){zi(p,F,Fe)}break;case 5:var ne=p.return;try{a_(p)}catch(Fe){zi(p,ne,Fe)}}}catch(Fe){zi(p,p.return,Fe)}if(p===d){at=null;break}var ve=p.sibling;if(ve!==null){ve.return=p.return,at=ve;break}at=p.return}}var Og=0,Ug=1,Ng=2,zg=3,Gg=4;if(typeof Symbol=="function"&&Symbol.for){var Ah=Symbol.for;Og=Ah("selector.component"),Ug=Ah("selector.has_pseudo_class"),Ng=Ah("selector.role"),zg=Ah("selector.test_id"),Gg=Ah("selector.text")}function f_(d){var p=ge(d);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(d=Ee(d),d===null)throw Error(o(362));return d.stateNode.current}function d_(d,p){switch(p.$$typeof){case Og:if(d.type===p.value)return!0;break;case Ug:e:{p=p.value,d=[d,0];for(var S=0;S<d.length;){var E=d[S++],B=d[S++],F=p[B];if(E.tag!==5||!ae(E)){for(;F!=null&&d_(E,F);)B++,F=p[B];if(B===p.length){p=!0;break e}else for(E=E.child;E!==null;)d.push(E,B),E=E.sibling}}p=!1}return p;case Ng:if(d.tag===5&&Ae(d.stateNode,p.value))return!0;break;case Gg:if((d.tag===5||d.tag===6)&&(d=O(d),d!==null&&0<=d.indexOf(p.value)))return!0;break;case zg:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function h_(d){switch(d.$$typeof){case Og:return"<"+(P(d.value)||"Unknown")+">";case Ug:return":has("+(h_(d)||"")+")";case Ng:return'[role="'+d.value+'"]';case Gg:return'"'+d.value+'"';case zg:return'[data-testname="'+d.value+'"]';default:throw Error(o(365))}}function tC(d,p){var S=[];d=[d,0];for(var E=0;E<d.length;){var B=d[E++],F=d[E++],ne=p[F];if(B.tag!==5||!ae(B)){for(;ne!=null&&d_(B,ne);)F++,ne=p[F];if(F===p.length)S.push(B);else for(B=B.child;B!==null;)d.push(B,F),B=B.sibling}}return S}function p_(d,p){if(!ze)throw Error(o(363));d=f_(d),d=tC(d,p),p=[],d=Array.from(d);for(var S=0;S<d.length;){var E=d[S++];if(E.tag===5)ae(E)||p.push(E.stateNode);else for(E=E.child;E!==null;)d.push(E),E=E.sibling}return p}var yN=Math.ceil,Hg=a.ReactCurrentDispatcher,m_=a.ReactCurrentOwner,or=a.ReactCurrentBatchConfig,Wt=0,mr=null,gr=null,jr=0,ls=0,Zc=wt(0),Mr=0,Mh=null,qc=0,Vg=0,g_=0,Eh=null,Ui=null,v_=0,y_=1/0;function ef(){y_=kn()+500}var Wg=!1,__=null,al=null,jg=!1,ll=null,$g=0,Ch=0,x_=null,Jg=-1,Xg=0;function bi(){return Wt&6?kn():Jg!==-1?Jg:Jg=kn()}function ul(d){return d.mode&1?Wt&2&&jr!==0?jr&-jr:yu.transition!==null?(Xg===0&&(d=oa,oa<<=1,!(oa&4194240)&&(oa=64),Xg=d),Xg):(d=Jt,d!==0?d:Ce()):1}function Bs(d,p,S){if(50<Ch)throw Ch=0,x_=null,Error(o(185));var E=Kg(d,p);return E===null?null:(Uo(E,p,S),(!(Wt&2)||E!==mr)&&(E===mr&&(!(Wt&2)&&(Vg|=p),Mr===4&&cl(E,jr)),Ni(E,S),p===1&&Wt===0&&!(d.mode&1)&&(ef(),zo&&Oi())),E)}function Kg(d,p){d.lanes|=p;var S=d.alternate;for(S!==null&&(S.lanes|=p),S=d,d=d.return;d!==null;)d.childLanes|=p,S=d.alternate,S!==null&&(S.childLanes|=p),S=d,d=d.return;return S.tag===3?S.stateNode:null}function Ni(d,p){var S=d.callbackNode;ih(d,p);var E=vu(d,d===mr?jr:0);if(E===0)S!==null&&Gc(S),d.callbackNode=null,d.callbackPriority=0;else if(p=E&-E,d.callbackPriority!==p){if(S!=null&&Gc(S),p===1)d.tag===0?ch(rC.bind(null,d)):uh(rC.bind(null,d)),Re?Oe(function(){Wt===0&&Oi()}):ca(rl,Oi),S=null;else{switch(sh(E)){case 1:S=rl;break;case 4:S=hg;break;case 16:S=xi;break;case 536870912:S=ah;break;default:S=xi}S=dC(S,nC.bind(null,d))}d.callbackPriority=p,d.callbackNode=S}}function nC(d,p){if(Jg=-1,Xg=0,Wt&6)throw Error(o(327));var S=d.callbackNode;if(Tu()&&d.callbackNode!==S)return null;var E=vu(d,d===mr?jr:0);if(E===0)return null;if(E&30||E&d.expiredLanes||p)p=Yg(d,E);else{p=E;var B=Wt;Wt|=2;var F=oC();(mr!==d||jr!==p)&&(ef(),Eu(d,p));do try{wN();break}catch(ve){sC(d,ve)}while(1);Wc(),Hg.current=F,Wt=B,gr!==null?p=0:(mr=null,jr=0,p=Mr)}if(p!==0){if(p===2&&(B=ua(d),B!==0&&(E=B,p=w_(d,B))),p===1)throw S=Mh,Eu(d,0),cl(d,E),Ni(d,kn()),S;if(p===6)cl(d,E);else{if(B=d.current.alternate,!(E&30)&&!_N(B)&&(p=Yg(d,E),p===2&&(F=ua(d),F!==0&&(E=F,p=w_(d,F))),p===1))throw S=Mh,Eu(d,0),cl(d,E),Ni(d,kn()),S;switch(d.finishedWork=B,d.finishedLanes=E,p){case 0:case 1:throw Error(o(345));case 2:Cu(d,Ui);break;case 3:if(cl(d,E),(E&130023424)===E&&(p=v_+500-kn(),10<p)){if(vu(d,0)!==0)break;if(B=d.suspendedLanes,(B&E)!==E){bi(),d.pingedLanes|=d.suspendedLanes&B;break}d.timeoutHandle=pe(Cu.bind(null,d,Ui),p);break}Cu(d,Ui);break;case 4:if(cl(d,E),(E&4194240)===E)break;for(p=d.eventTimes,B=-1;0<E;){var ne=31-yn(E);F=1<<ne,ne=p[ne],ne>B&&(B=ne),E&=~F}if(E=B,E=kn()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*yN(E/1960))-E,10<E){d.timeoutHandle=pe(Cu.bind(null,d,Ui),E);break}Cu(d,Ui);break;case 5:Cu(d,Ui);break;default:throw Error(o(329))}}}return Ni(d,kn()),d.callbackNode===S?nC.bind(null,d):null}function w_(d,p){var S=Eh;return d.current.memoizedState.isDehydrated&&(Eu(d,p).flags|=256),d=Yg(d,p),d!==2&&(p=Ui,Ui=S,p!==null&&S_(p)),d}function S_(d){Ui===null?Ui=d:Ui.push.apply(Ui,d)}function _N(d){for(var p=d;;){if(p.flags&16384){var S=p.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var E=0;E<S.length;E++){var B=S[E],F=B.getSnapshot;B=B.value;try{if(!is(F(),B))return!1}catch{return!1}}}if(S=p.child,p.subtreeFlags&16384&&S!==null)S.return=p,p=S;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function cl(d,p){for(p&=~g_,p&=~Vg,d.suspendedLanes|=p,d.pingedLanes&=~p,d=d.expirationTimes;0<p;){var S=31-yn(p),E=1<<S;d[S]=-1,p&=~E}}function rC(d){if(Wt&6)throw Error(o(327));Tu();var p=vu(d,0);if(!(p&1))return Ni(d,kn()),null;var S=Yg(d,p);if(d.tag!==0&&S===2){var E=ua(d);E!==0&&(p=E,S=w_(d,E))}if(S===1)throw S=Mh,Eu(d,0),cl(d,p),Ni(d,kn()),S;if(S===6)throw Error(o(345));return d.finishedWork=d.current.alternate,d.finishedLanes=p,Cu(d,Ui),Ni(d,kn()),null}function iC(d){ll!==null&&ll.tag===0&&!(Wt&6)&&Tu();var p=Wt;Wt|=1;var S=or.transition,E=Jt;try{if(or.transition=null,Jt=1,d)return d()}finally{Jt=E,or.transition=S,Wt=p,!(Wt&6)&&Oi()}}function b_(){ls=Zc.current,St(Zc)}function Eu(d,p){d.finishedWork=null,d.finishedLanes=0;var S=d.timeoutHandle;if(S!==U&&(d.timeoutHandle=U,oe(S)),gr!==null)for(S=gr.return;S!==null;){var E=S;switch(z1(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&ir();break;case 3:Yc(),St(Dt),St(qt),J1();break;case 5:j1(E);break;case 4:Yc();break;case 13:St(Hn);break;case 19:St(Hn);break;case 10:Go(E.type._context);break;case 22:case 23:b_()}S=S.return}if(mr=d,gr=d=fl(d.current,null),jr=ls=p,Mr=0,Mh=null,g_=Vg=qc=0,Ui=Eh=null,Ar!==null){for(p=0;p<Ar.length;p++)if(S=Ar[p],E=S.interleaved,E!==null){S.interleaved=null;var B=E.next,F=S.pending;if(F!==null){var ne=F.next;F.next=B,E.next=ne}S.pending=E}Ar=null}return d}function sC(d,p){do{var S=gr;try{if(Wc(),Sg.current=Tg,bg){for(var E=er.memoizedState;E!==null;){var B=E.queue;B!==null&&(B.pending=null),E=E.next}bg=!1}if(Qc=0,kr=ni=er=null,gh=!1,vh=0,m_.current=null,S===null||S.return===null){Mr=1,Mh=p,gr=null;break}e:{var F=d,ne=S.return,ve=S,Fe=p;if(p=jr,ve.flags|=32768,Fe!==null&&typeof Fe=="object"&&typeof Fe.then=="function"){var tt=Fe,pt=ve,kt=pt.tag;if(!(pt.mode&1)&&(kt===0||kt===11||kt===15)){var Et=pt.alternate;Et?(pt.updateQueue=Et.updateQueue,pt.memoizedState=Et.memoizedState,pt.lanes=Et.lanes):(pt.updateQueue=null,pt.memoizedState=null)}var Mn=EE(ne);if(Mn!==null){Mn.flags&=-257,CE(Mn,ne,ve,F,p),Mn.mode&1&&ME(F,tt,p),p=Mn,Fe=tt;var xt=p.updateQueue;if(xt===null){var si=new Set;si.add(Fe),p.updateQueue=si}else xt.add(Fe);break e}else{if(!(p&1)){ME(F,tt,p),A_();break e}Fe=Error(o(426))}}else if(On&&ve.mode&1){var Ds=EE(ne);if(Ds!==null){!(Ds.flags&65536)&&(Ds.flags|=256),CE(Ds,ne,ve,F,p),V1(Fe);break e}}F=Fe,Mr!==4&&(Mr=2),Eh===null?Eh=[F]:Eh.push(F),Fe=e_(Fe,ve),ve=ne;do{switch(ve.tag){case 3:ve.flags|=65536,p&=-p,ve.lanes|=p;var Te=bE(ve,Fe,p);jM(ve,Te);break e;case 1:F=Fe;var xe=ve.type,Le=ve.stateNode;if(!(ve.flags&128)&&(typeof xe.getDerivedStateFromError=="function"||Le!==null&&typeof Le.componentDidCatch=="function"&&(al===null||!al.has(Le)))){ve.flags|=65536,p&=-p,ve.lanes|=p;var ut=AE(ve,F,p);jM(ve,ut);break e}}ve=ve.return}while(ve!==null)}lC(S)}catch(_t){p=_t,gr===S&&S!==null&&(gr=S=S.return);continue}break}while(1)}function oC(){var d=Hg.current;return Hg.current=Tg,d===null?Tg:d}function A_(){(Mr===0||Mr===3||Mr===2)&&(Mr=4),mr===null||!(qc&268435455)&&!(Vg&268435455)||cl(mr,jr)}function Yg(d,p){var S=Wt;Wt|=2;var E=oC();mr===d&&jr===p||Eu(d,p);do try{xN();break}catch(B){sC(d,B)}while(1);if(Wc(),Wt=S,Hg.current=E,gr!==null)throw Error(o(261));return mr=null,jr=0,Mr}function xN(){for(;gr!==null;)aC(gr)}function wN(){for(;gr!==null&&!oh();)aC(gr)}function aC(d){var p=fC(d.alternate,d,ls);d.memoizedProps=d.pendingProps,p===null?lC(d):gr=p,m_.current=null}function lC(d){var p=d;do{var S=p.alternate;if(d=p.return,p.flags&32768){if(S=hN(S,p),S!==null){S.flags&=32767,gr=S;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Mr=6,gr=null;return}}else if(S=cN(S,p,ls),S!==null){gr=S;return}if(p=p.sibling,p!==null){gr=p;return}gr=p=d}while(p!==null);Mr===0&&(Mr=5)}function Cu(d,p){var S=Jt,E=or.transition;try{or.transition=null,Jt=1,SN(d,p,S)}finally{or.transition=E,Jt=S}return null}function SN(d,p,S){do Tu();while(ll!==null);if(Wt&6)throw Error(o(327));var E=d.finishedWork,B=d.finishedLanes;if(E===null)return null;if(d.finishedWork=null,d.finishedLanes=0,E===d.current)throw Error(o(177));d.callbackNode=null,d.callbackPriority=0;var F=E.lanes|E.childLanes;if(nl(d,F),d===mr&&(gr=mr=null,jr=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||jg||(jg=!0,dC(xi,function(){return Tu(),null})),F=(E.flags&15990)!==0,E.subtreeFlags&15990||F){F=or.transition,or.transition=null;var ne=Jt;Jt=1;var ve=Wt;Wt|=4,m_.current=null,mN(d,E),gN(d,E),Y(d.containerInfo),d.current=E,vN(E),dg(),Wt=ve,Jt=ne,or.transition=F}else d.current=E;if(jg&&(jg=!1,ll=d,$g=B),F=d.pendingLanes,F===0&&(al=null),lh(E.stateNode),Ni(d,kn()),p!==null)for(S=d.onRecoverableError,E=0;E<p.length;E++)S(p[E]);if(Wg)throw Wg=!1,d=__,__=null,d;return $g&1&&d.tag!==0&&Tu(),F=d.pendingLanes,F&1?d===x_?Ch++:(Ch=0,x_=d):Ch=0,Oi(),null}function Tu(){if(ll!==null){var d=sh($g),p=or.transition,S=Jt;try{if(or.transition=null,Jt=16>d?16:d,ll===null)var E=!1;else{if(d=ll,ll=null,$g=0,Wt&6)throw Error(o(331));var B=Wt;for(Wt|=4,at=d.current;at!==null;){var F=at,ne=F.child;if(at.flags&16){var ve=F.deletions;if(ve!==null){for(var Fe=0;Fe<ve.length;Fe++){var tt=ve[Fe];for(at=tt;at!==null;){var pt=at;switch(pt.tag){case 0:case 11:case 15:Mu(8,pt,F)}var kt=pt.child;if(kt!==null)kt.return=pt,at=kt;else for(;at!==null;){pt=at;var Et=pt.sibling,Mn=pt.return;if($E(pt),pt===tt){at=null;break}if(Et!==null){Et.return=Mn,at=Et;break}at=Mn}}}var xt=F.alternate;if(xt!==null){var si=xt.child;if(si!==null){xt.child=null;do{var Ds=si.sibling;si.sibling=null,si=Ds}while(si!==null)}}at=F}}if(F.subtreeFlags&2064&&ne!==null)ne.return=F,at=ne;else e:for(;at!==null;){if(F=at,F.flags&2048)switch(F.tag){case 0:case 11:case 15:Mu(9,F,F.return)}var Te=F.sibling;if(Te!==null){Te.return=F.return,at=Te;break e}at=F.return}}var xe=d.current;for(at=xe;at!==null;){ne=at;var Le=ne.child;if(ne.subtreeFlags&2064&&Le!==null)Le.return=ne,at=Le;else e:for(ne=xe;at!==null;){if(ve=at,ve.flags&2048)try{switch(ve.tag){case 0:case 11:case 15:bh(9,ve)}}catch(_t){zi(ve,ve.return,_t)}if(ve===ne){at=null;break e}var ut=ve.sibling;if(ut!==null){ut.return=ve.return,at=ut;break e}at=ve.return}}if(Wt=B,Oi(),rs&&typeof rs.onPostCommitFiberRoot=="function")try{rs.onPostCommitFiberRoot(il,d)}catch{}E=!0}return E}finally{Jt=S,or.transition=p}}return!1}function uC(d,p,S){p=e_(S,p),p=bE(d,p,1),ol(d,p),p=bi(),d=Kg(d,1),d!==null&&(Uo(d,1,p),Ni(d,p))}function zi(d,p,S){if(d.tag===3)uC(d,d,S);else for(;p!==null;){if(p.tag===3){uC(p,d,S);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(al===null||!al.has(E))){d=e_(S,d),d=AE(p,d,1),ol(p,d),d=bi(),p=Kg(p,1),p!==null&&(Uo(p,1,d),Ni(p,d));break}}p=p.return}}function bN(d,p,S){var E=d.pingCache;E!==null&&E.delete(p),p=bi(),d.pingedLanes|=d.suspendedLanes&S,mr===d&&(jr&S)===S&&(Mr===4||Mr===3&&(jr&130023424)===jr&&500>kn()-v_?Eu(d,0):g_|=S),Ni(d,p)}function cC(d,p){p===0&&(d.mode&1?(p=aa,aa<<=1,!(aa&130023424)&&(aa=4194304)):p=1);var S=bi();d=Kg(d,p),d!==null&&(Uo(d,p,S),Ni(d,S))}function AN(d){var p=d.memoizedState,S=0;p!==null&&(S=p.retryLane),cC(d,S)}function MN(d,p){var S=0;switch(d.tag){case 13:var E=d.stateNode,B=d.memoizedState;B!==null&&(S=B.retryLane);break;case 19:E=d.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(p),cC(d,S)}var fC;fC=function(d,p,S){if(d!==null)if(d.memoizedProps!==p.pendingProps||Dt.current)as=!0;else{if(!(d.lanes&S)&&!(p.flags&128))return as=!1,dN(d,p,S);as=!!(d.flags&131072)}else as=!1,On&&p.flags&1048576&&QM(p,_g,p.index);switch(p.lanes=0,p.tag){case 2:var E=p.type;d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),d=p.pendingProps;var B=hr(p,qt.current);Fr(p,S),B=K1(null,p,E,d,B,S);var F=Y1();return p.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,bn(E)?(F=!0,tn(p)):F=!1,p.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,k1(p),B.updater=vg,p.stateNode=B,B._reactInternals=p,U1(p,E,d,S),p=r_(null,p,E,!0,F,S)):(p.tag=0,On&&F&&N1(p),Si(null,p,B,S),p=p.child),p;case 16:E=p.elementType;e:{switch(d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),d=p.pendingProps,B=E._init,E=B(E._payload),p.type=E,B=p.tag=CN(E),d=ti(E,d),B){case 0:p=n_(null,p,E,d,S);break e;case 1:p=FE(null,p,E,d,S);break e;case 11:p=PE(null,p,E,d,S);break e;case 14:p=BE(null,p,E,ti(E.type,d),S);break e}throw Error(o(306,E,""))}return p;case 0:return E=p.type,B=p.pendingProps,B=p.elementType===E?B:ti(E,B),n_(d,p,E,B,S);case 1:return E=p.type,B=p.pendingProps,B=p.elementType===E?B:ti(E,B),FE(d,p,E,B,S);case 3:e:{if(kE(p),d===null)throw Error(o(387));E=p.pendingProps,F=p.memoizedState,B=F.element,WM(d,p),gg(p,E,null,S);var ne=p.memoizedState;if(E=ne.element,se&&F.isDehydrated)if(F={element:E,isDehydrated:!1,cache:ne.cache,transitions:ne.transitions},p.updateQueue.baseState=F,p.memoizedState=F,p.flags&256){B=Error(o(423)),p=OE(d,p,E,S,B);break e}else if(E!==B){B=Error(o(424)),p=OE(d,p,E,S,B);break e}else for(se&&(os=Ie(p.stateNode.containerInfo),ss=p,On=!0,uo=null,fh=!1),S=rE(p,null,E,S),p.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(Jc(),E===B){p=ma(d,p,S);break e}Si(d,p,E,S)}p=p.child}return p;case 5:return iE(p),d===null&&H1(p),E=p.type,B=p.pendingProps,F=d!==null?d.memoizedProps:null,ne=B.children,te(E,B)?ne=null:F!==null&&te(E,F)&&(p.flags|=32),LE(d,p),Si(d,p,ne,S),p.child;case 6:return d===null&&H1(p),null;case 13:return UE(d,p,S);case 4:return W1(p,p.stateNode.containerInfo),E=p.pendingProps,d===null?p.child=Xc(p,null,E,S):Si(d,p,E,S),p.child;case 11:return E=p.type,B=p.pendingProps,B=p.elementType===E?B:ti(E,B),PE(d,p,E,B,S);case 7:return Si(d,p,p.pendingProps,S),p.child;case 8:return Si(d,p,p.pendingProps.children,S),p.child;case 12:return Si(d,p,p.pendingProps.children,S),p.child;case 10:e:{if(E=p.type._context,B=p.pendingProps,F=p.memoizedProps,ne=B.value,pg(p,E,ne),F!==null)if(is(F.value,ne)){if(F.children===B.children&&!Dt.current){p=ma(d,p,S);break e}}else for(F=p.child,F!==null&&(F.return=p);F!==null;){var ve=F.dependencies;if(ve!==null){ne=F.child;for(var Fe=ve.firstContext;Fe!==null;){if(Fe.context===E){if(F.tag===1){Fe=fa(-1,S&-S),Fe.tag=2;var tt=F.updateQueue;if(tt!==null){tt=tt.shared;var pt=tt.pending;pt===null?Fe.next=Fe:(Fe.next=pt.next,pt.next=Fe),tt.pending=Fe}}F.lanes|=S,Fe=F.alternate,Fe!==null&&(Fe.lanes|=S),pr(F.return,S,p),ve.lanes|=S;break}Fe=Fe.next}}else if(F.tag===10)ne=F.type===p.type?null:F.child;else if(F.tag===18){if(ne=F.return,ne===null)throw Error(o(341));ne.lanes|=S,ve=ne.alternate,ve!==null&&(ve.lanes|=S),pr(ne,S,p),ne=F.sibling}else ne=F.child;if(ne!==null)ne.return=F;else for(ne=F;ne!==null;){if(ne===p){ne=null;break}if(F=ne.sibling,F!==null){F.return=ne.return,ne=F;break}ne=ne.return}F=ne}Si(d,p,B.children,S),p=p.child}return p;case 9:return B=p.type,E=p.pendingProps.children,Fr(p,S),B=An(B),E=E(B),p.flags|=1,Si(d,p,E,S),p.child;case 14:return E=p.type,B=ti(E,p.pendingProps),B=ti(E.type,B),BE(d,p,E,B,S);case 15:return IE(d,p,p.type,p.pendingProps,S);case 17:return E=p.type,B=p.pendingProps,B=p.elementType===E?B:ti(E,B),d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,bn(E)?(d=!0,tn(p)):d=!1,Fr(p,S),KM(p,E,B),U1(p,E,B,S),r_(null,p,E,!0,d,S);case 19:return HE(d,p,S);case 22:return DE(d,p,S)}throw Error(o(156,p.tag))};function dC(d,p){return ca(d,p)}function EN(d,p,S,E){this.tag=d,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Is(d,p,S,E){return new EN(d,p,S,E)}function M_(d){return d=d.prototype,!(!d||!d.isReactComponent)}function CN(d){if(typeof d=="function")return M_(d)?1:0;if(d!=null){if(d=d.$$typeof,d===g)return 11;if(d===_)return 14}return 2}function fl(d,p){var S=d.alternate;return S===null?(S=Is(d.tag,p,d.key,d.mode),S.elementType=d.elementType,S.type=d.type,S.stateNode=d.stateNode,S.alternate=d,d.alternate=S):(S.pendingProps=p,S.type=d.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=d.flags&14680064,S.childLanes=d.childLanes,S.lanes=d.lanes,S.child=d.child,S.memoizedProps=d.memoizedProps,S.memoizedState=d.memoizedState,S.updateQueue=d.updateQueue,p=d.dependencies,S.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},S.sibling=d.sibling,S.index=d.index,S.ref=d.ref,S}function Qg(d,p,S,E,B,F){var ne=2;if(E=d,typeof d=="function")M_(d)&&(ne=1);else if(typeof d=="string")ne=5;else e:switch(d){case c:return Ru(S.children,B,F,p);case f:ne=8,B|=8;break;case h:return d=Is(12,S,p,B|2),d.elementType=h,d.lanes=F,d;case v:return d=Is(13,S,p,B),d.elementType=v,d.lanes=F,d;case x:return d=Is(19,S,p,B),d.elementType=x,d.lanes=F,d;case A:return Zg(S,B,F,p);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case m:ne=10;break e;case y:ne=9;break e;case g:ne=11;break e;case _:ne=14;break e;case w:ne=16,E=null;break e}throw Error(o(130,d==null?d:typeof d,""))}return p=Is(ne,S,p,B),p.elementType=d,p.type=E,p.lanes=F,p}function Ru(d,p,S,E){return d=Is(7,d,E,p),d.lanes=S,d}function Zg(d,p,S,E){return d=Is(22,d,E,p),d.elementType=A,d.lanes=S,d.stateNode={},d}function E_(d,p,S){return d=Is(6,d,null,p),d.lanes=S,d}function C_(d,p,S){return p=Is(4,d.children!==null?d.children:[],d.key,p),p.lanes=S,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}function TN(d,p,S,E,B){this.tag=p,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=U,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=E,this.onRecoverableError=B,se&&(this.mutableSourceEagerHydrationData=null)}function hC(d,p,S,E,B,F,ne,ve,Fe){return d=new TN(d,p,S,ve,Fe),p===1?(p=1,F===!0&&(p|=8)):p=0,F=Is(3,null,null,p),d.current=F,F.stateNode=d,F.memoizedState={element:E,isDehydrated:S,cache:null,transitions:null},k1(F),d}function pC(d){if(!d)return Mt;d=d._reactInternals;e:{if(C(d)!==d||d.tag!==1)throw Error(o(170));var p=d;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(bn(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(d.tag===1){var S=d.type;if(bn(S))return Gn(d,S,p)}return p}function mC(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(o(188)):(d=Object.keys(d).join(","),Error(o(268,d)));return d=D(p),d===null?null:d.stateNode}function gC(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var S=d.retryLane;d.retryLane=S!==0&&S<p?S:p}}function T_(d,p){gC(d,p),(d=d.alternate)&&gC(d,p)}function RN(d){return d=D(d),d===null?null:d.stateNode}function PN(){return null}return t.attemptContinuousHydration=function(d){if(d.tag===13){var p=bi();Bs(d,134217728,p),T_(d,134217728)}},t.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var p=bi(),S=ul(d);Bs(d,S,p),T_(d,S)}},t.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var p=d.stateNode;if(p.current.memoizedState.isDehydrated){var S=la(p.pendingLanes);S!==0&&(No(p,S|1),Ni(p,kn()),!(Wt&6)&&(ef(),Oi()))}break;case 13:var E=bi();iC(function(){return Bs(d,1,E)}),T_(d,1)}},t.batchedUpdates=function(d,p){var S=Wt;Wt|=1;try{return d(p)}finally{Wt=S,Wt===0&&(ef(),zo&&Oi())}},t.createComponentSelector=function(d){return{$$typeof:Og,value:d}},t.createContainer=function(d,p,S,E,B,F,ne){return hC(d,p,!1,null,S,E,B,F,ne)},t.createHasPseudoClassSelector=function(d){return{$$typeof:Ug,value:d}},t.createHydrationContainer=function(d,p,S,E,B,F,ne,ve,Fe){return d=hC(S,E,!0,d,B,F,ne,ve,Fe),d.context=pC(null),S=d.current,E=bi(),B=ul(S),F=fa(E,B),F.callback=p??null,ol(S,F),d.current.lanes=B,Uo(d,B,E),Ni(d,E),d},t.createPortal=function(d,p,S){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:E==null?null:""+E,children:d,containerInfo:p,implementation:S}},t.createRoleSelector=function(d){return{$$typeof:Ng,value:d}},t.createTestNameSelector=function(d){return{$$typeof:zg,value:d}},t.createTextSelector=function(d){return{$$typeof:Gg,value:d}},t.deferredUpdates=function(d){var p=Jt,S=or.transition;try{return or.transition=null,Jt=16,d()}finally{Jt=p,or.transition=S}},t.discreteUpdates=function(d,p,S,E,B){var F=Jt,ne=or.transition;try{return or.transition=null,Jt=1,d(p,S,E,B)}finally{Jt=F,or.transition=ne,Wt===0&&ef()}},t.findAllNodes=p_,t.findBoundingRects=function(d,p){if(!ze)throw Error(o(363));p=p_(d,p),d=[];for(var S=0;S<p.length;S++)d.push($(p[S]));for(p=d.length-1;0<p;p--){S=d[p];for(var E=S.x,B=E+S.width,F=S.y,ne=F+S.height,ve=p-1;0<=ve;ve--)if(p!==ve){var Fe=d[ve],tt=Fe.x,pt=tt+Fe.width,kt=Fe.y,Et=kt+Fe.height;if(E>=tt&&F>=kt&&B<=pt&&ne<=Et){d.splice(p,1);break}else if(E!==tt||S.width!==Fe.width||Et<F||kt>ne){if(!(F!==kt||S.height!==Fe.height||pt<E||tt>B)){tt>E&&(Fe.width+=tt-E,Fe.x=E),pt<B&&(Fe.width=B-tt),d.splice(p,1);break}}else{kt>F&&(Fe.height+=kt-F,Fe.y=F),Et<ne&&(Fe.height=ne-kt),d.splice(p,1);break}}}return d},t.findHostInstance=mC,t.findHostInstanceWithNoPortals=function(d){return d=I(d),d=d!==null?N(d):null,d===null?null:d.stateNode},t.findHostInstanceWithWarning=function(d){return mC(d)},t.flushControlled=function(d){var p=Wt;Wt|=1;var S=or.transition,E=Jt;try{or.transition=null,Jt=1,d()}finally{Jt=E,or.transition=S,Wt=p,Wt===0&&(ef(),Oi())}},t.flushPassiveEffects=Tu,t.flushSync=iC,t.focusWithin=function(d,p){if(!ze)throw Error(o(363));for(d=f_(d),p=tC(d,p),p=Array.from(p),d=0;d<p.length;){var S=p[d++];if(!ae(S)){if(S.tag===5&&ke(S.stateNode))return!0;for(S=S.child;S!==null;)p.push(S),S=S.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Jt},t.getFindAllNodesFailureDescription=function(d,p){if(!ze)throw Error(o(363));var S=0,E=[];d=[f_(d),0];for(var B=0;B<d.length;){var F=d[B++],ne=d[B++],ve=p[ne];if((F.tag!==5||!ae(F))&&(d_(F,ve)&&(E.push(h_(ve)),ne++,ne>S&&(S=ne)),ne<p.length))for(F=F.child;F!==null;)d.push(F,ne),F=F.sibling}if(S<p.length){for(d=[];S<p.length;S++)d.push(h_(p[S]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},t.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return Q(d.child.stateNode);default:return d.child.stateNode}},t.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:RN,findFiberByHostInstance:d.findFiberByHostInstance||PN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)d=!0;else{try{il=p.inject(d),rs=p}catch{}d=!!p.checkDCE}}return d},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(d,p,S,E){if(!ze)throw Error(o(363));d=p_(d,p);var B=Ue(d,S,E).disconnect;return{disconnect:function(){B()}}},t.registerMutableSourceForHydration=function(d,p){var S=p._getVersion;S=S(p._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[p,S]:d.mutableSourceEagerHydrationData.push(p,S)},t.runWithPriority=function(d,p){var S=Jt;try{return Jt=d,p()}finally{Jt=S}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(d,p,S,E){var B=p.current,F=bi(),ne=ul(B);return S=pC(S),p.context===null?p.context=S:p.pendingContext=S,p=fa(F,ne),p.payload={element:d},E=E===void 0?null:E,E!==null&&(p.callback=E),ol(B,p),d=Bs(B,ne,F),d!==null&&mg(d,B,ne),ne},t};(function(n){n.exports=hj})(fj);const pj=db(c2);function xF(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}const Pa=[];function wF(n,e,t=!1,r={}){for(const s of Pa)if(xF(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,promise:n(...e).then(s=>i.response=s).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{const s=Pa.indexOf(i);s!==-1&&Pa.splice(s,1)},r.lifespan)}).catch(s=>i.error=s)};if(Pa.push(i),!t)throw i.promise}const mj=(n,e,t)=>wF(n,e,!1,t),gj=(n,e,t)=>void wF(n,e,!0,t),vj=n=>{if(n===void 0||n.length===0)Pa.splice(0,Pa.length);else{const e=Pa.find(t=>xF(n,t.keys,t.equal));if(e){const t=Pa.indexOf(e);t!==-1&&Pa.splice(t,1)}}};var X3,K3;const yj=(n,...e)=>e.reduce((t,r)=>t==null?void 0:t[r],n),Tf="ColorManagement"in u2&&yj(u2,"ColorManagement")||null,SF=n=>n&&n.isOrthographicCamera,_j=n=>n&&n.hasOwnProperty("current"),eg=typeof window<"u"&&((X3=window.document)!=null&&X3.createElement||((K3=window.navigator)==null?void 0:K3.product)==="ReactNative")?L.useLayoutEffect:L.useEffect;function bF(n){const e=L.useRef(n);return eg(()=>void(e.current=n),[n]),e}function xj({set:n}){return eg(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class AF extends L.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}AF.getDerivedStateFromError=()=>({error:!0});const MF="__default",Y3=new Map,wj=n=>n&&!!n.memoized&&!!n.changes;function EF(n){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}const Xh=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},jn={obj:n=>n===Object(n)&&!jn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(jn.str(n)||jn.num(n))return n===e;const s=jn.obj(n);if(s&&r==="reference")return n===e;const o=jn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;for(a in i?e:n)if(n[a]!==e[a])return!1;if(jn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Sj(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function bj(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Rf(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function f2(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const Q3=/-\d+$/;function Lx(n,e,t){if(jn.str(t)){if(Q3.test(t)){const s=t.replace(Q3,""),{target:o,key:a}=f2(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=f2(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function Z3(n,e,t){var r,i;if(jn.str(t)){const{target:s,key:o}=f2(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function CF(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){var c;const f=(c=n==null?void 0:n.__r3f)!=null?c:{},h=Object.entries(i),m=[];if(u){const g=Object.keys(l);for(let v=0;v<g.length;v++)i.hasOwnProperty(g[v])||h.unshift([g[v],MF+"remove"])}h.forEach(([g,v])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&g==="object"||jn.equ(v,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return m.push([g,v,!0,[]]);let _=[];g.includes("-")&&(_=g.split("-")),m.push([g,v,!1,_]);for(const w in i){const A=i[w];w.startsWith(`${g}-`)&&m.push([w,A,!1,w.split("-")])}});const y={...i};return f.memoizedProps&&f.memoizedProps.args&&(y.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(y.attach=f.memoizedProps.attach),{memoized:y,changes:m}}function Fx(n,e){var t,r,i;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:u}=wj(e)?e:CF(n,e),c=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let h=0;h<u.length;h++){let[m,y,g,v]=u[h],x=n,_=x[m];if(v.length&&(_=v.reduce((w,A)=>w[A],n),!(_&&_.set))){const[w,...A]=v.reverse();x=A.reverse().reduce((R,M)=>R[M],n),m=w}if(y===MF+"remove")if(x.constructor){let w=Y3.get(x.constructor);w||(w=new x.constructor,Y3.set(x.constructor,w)),y=w[m]}else y=0;if(g)y?s.handlers[m]=y:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(_&&_.set&&(_.copy||_ instanceof fc)){if(Array.isArray(y))_.fromArray?_.fromArray(y):_.set(...y);else if(_.copy&&y&&y.constructor&&_.constructor===y.constructor)_.copy(y);else if(y!==void 0){const w=_ instanceof qe;!w&&_.setScalar?_.setScalar(y):_ instanceof fc&&y instanceof fc?_.mask=y.mask:_.set(y),!Tf&&!a.linear&&w&&_.convertSRGBToLinear()}}else x[m]=y,!a.linear&&x[m]instanceof xn&&x[m].format===Ri&&x[m].type===vi&&(x[m].encoding=It);Pf(n)}if(s.parent&&a.internal&&n.raycast&&c!==s.eventCount){const h=a.internal.interaction.indexOf(n);h>-1&&a.internal.interaction.splice(h,1),s.eventCount&&a.internal.interaction.push(n)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=n.__r3f)!=null&&i.parent&&d2(n),n}function Pf(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function d2(n){n.onUpdate==null||n.onUpdate(n)}function TF(n,e){n.manual||(SF(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function tv(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Aj(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Ll.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ll.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ll.ContinuousEventPriority;default:return Ll.DefaultEventPriority}}function RF(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function Mj(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{RF(t.capturedMap,e,r,i)})}function Ej(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],f=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+f*f))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),f=new Set,h=[],m=u?u(c.internal.interaction):c.internal.interaction;for(let x=0;x<m.length;x++){const _=Xh(m[x]);_&&(_.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function y(x){const _=Xh(x);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var w;_.events.compute==null||_.events.compute(l,_,(w=_.previousRoot)==null?void 0:w.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(x,!0):[]}let g=m.flatMap(y).sort((x,_)=>{const w=Xh(x.object),A=Xh(_.object);return!w||!A?x.distance-_.distance:A.events.priority-w.events.priority||x.distance-_.distance}).filter(x=>{const _=tv(x);return f.has(_)?!1:(f.add(_),!0)});c.events.filter&&(g=c.events.filter(g,c));for(const x of g){let _=x.object;for(;_;){var v;(v=_.__r3f)!=null&&v.eventCount&&h.push({...x,eventObject:_}),_=_.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let x of c.internal.capturedMap.get(l.pointerId).values())f.has(tv(x.intersection))||h.push(x.intersection);return h}function i(l,u,c,f){const h=n.getState();if(l.length){const m={stopped:!1};for(const y of l){const g=Xh(y.object)||h,{raycaster:v,pointer:x,camera:_,internal:w}=g,A=new V(x.x,x.y,0).unproject(_),R=T=>{var I,D;return(I=(D=w.capturedMap.get(T))==null?void 0:D.has(y.eventObject))!=null?I:!1},M=T=>{const I={intersection:y,target:u.target};w.capturedMap.has(T)?w.capturedMap.get(T).set(y.eventObject,I):w.capturedMap.set(T,new Map([[y.eventObject,I]])),u.target.setPointerCapture(T)},P=T=>{const I=w.capturedMap.get(T);I&&RF(w.capturedMap,y.eventObject,I,T)};let b={};for(let T in u){let I=u[T];typeof I!="function"&&(b[T]=I)}let C={...y,...b,pointer:x,intersections:l,stopped:m.stopped,delta:c,unprojectedPoint:A,ray:v.ray,camera:_,stopPropagation(){const T="pointerId"in u&&w.capturedMap.get(u.pointerId);if((!T||T.has(y.eventObject))&&(C.stopped=m.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(I=>I.eventObject===y.eventObject))){const I=l.slice(0,l.indexOf(y));s([...I,y])}},target:{hasPointerCapture:R,setPointerCapture:M,releasePointerCapture:P},currentTarget:{hasPointerCapture:R,setPointerCapture:M,releasePointerCapture:P},nativeEvent:u};if(f(C),m.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(f=>f.object===c.object&&f.index===c.index&&f.instanceId===c.instanceId)){const h=c.eventObject.__r3f,m=h==null?void 0:h.handlers;if(u.hovered.delete(tv(c)),h!=null&&h.eventCount){const y={...c,intersections:l};m.onPointerOut==null||m.onPointerOut(y),m.onPointerLeave==null||m.onPointerLeave(y)}}}function o(l,u){for(let c=0;c<u.length;c++){const f=u[c].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))}}return function(c){const{onPointerMissed:f,internal:h}=n.getState();h.lastEvent.current=c;const m=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",v=r(c,m?t:void 0),x=y?e(c):0;l==="onPointerDown"&&(h.initialClick=[c.offsetX,c.offsetY],h.initialHits=v.map(w=>w.eventObject)),y&&!v.length&&x<=2&&(o(c,h.interaction),f&&f(c)),m&&s(v);function _(w){const A=w.eventObject,R=A.__r3f,M=R==null?void 0:R.handlers;if(R!=null&&R.eventCount)if(m){if(M.onPointerOver||M.onPointerEnter||M.onPointerOut||M.onPointerLeave){const P=tv(w),b=h.hovered.get(P);b?b.stopped&&w.stopPropagation():(h.hovered.set(P,w),M.onPointerOver==null||M.onPointerOver(w),M.onPointerEnter==null||M.onPointerEnter(w))}M.onPointerMove==null||M.onPointerMove(w)}else{const P=M[l];P?(!y||h.initialHits.includes(A))&&(o(c,h.interaction.filter(b=>!h.initialHits.includes(b))),P(w)):y&&h.initialHits.includes(A)&&o(c,h.interaction.filter(b=>!h.initialHits.includes(b)))}}i(v,c,x,_)}}return{handlePointer:a}}let h2={},tg=n=>void(h2={...h2,...n});function Cj(n,e){function t(c,{args:f=[],attach:h,...m},y){let g=`${c[0].toUpperCase()}${c.slice(1)}`,v;if(c==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=m.object;v=Rf(x,{type:c,root:y,attach:h,primitive:!0})}else{const x=h2[g];if(!x)throw new Error(`R3F: ${g} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");v=Rf(new x(...f),{type:c,root:y,attach:h,memoizedProps:{args:f}})}return v.__r3f.attach===void 0&&(v instanceof Lt?v.__r3f.attach="geometry":v instanceof zn&&(v.__r3f.attach="material")),g!=="inject"&&Fx(v,m),v}function r(c,f){let h=!1;if(f){var m,y;(m=f.__r3f)!=null&&m.attach?Lx(c,f,f.__r3f.attach):f.isObject3D&&c.isObject3D&&(c.add(f),h=!0),h||(y=c.__r3f)==null||y.objects.push(f),f.__r3f||Rf(f,{}),f.__r3f.parent=c,d2(f),Pf(f)}}function i(c,f,h){let m=!1;if(f){var y,g;if((y=f.__r3f)!=null&&y.attach)Lx(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){f.parent=c,f.dispatchEvent({type:"added"});const v=c.children.filter(_=>_!==f),x=v.indexOf(h);c.children=[...v.slice(0,x),f,...v.slice(x)],m=!0}m||(g=c.__r3f)==null||g.objects.push(f),f.__r3f||Rf(f,{}),f.__r3f.parent=c,d2(f),Pf(f)}}function s(c,f,h=!1){c&&[...c].forEach(m=>o(f,m,h))}function o(c,f,h){if(f){var m,y,g;if(f.__r3f&&(f.__r3f.parent=null),(m=c.__r3f)!=null&&m.objects&&(c.__r3f.objects=c.__r3f.objects.filter(A=>A!==f)),(y=f.__r3f)!=null&&y.attach)Z3(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){var v;c.remove(f),(v=f.__r3f)!=null&&v.root&&Mj(f.__r3f.root,f)}const _=(g=f.__r3f)==null?void 0:g.primitive,w=h===void 0?f.dispose!==null&&!_:h;if(!_){var x;s((x=f.__r3f)==null?void 0:x.objects,f,w),s(f.children,f,w)}f.__r3f&&(delete f.__r3f.root,delete f.__r3f.objects,delete f.__r3f.handlers,delete f.__r3f.memoizedProps,_||delete f.__r3f),w&&f.dispose&&f.type!=="Scene"&&bm.unstable_scheduleCallback(bm.unstable_IdlePriority,()=>{try{f.dispose()}catch{}}),Pf(c)}}function a(c,f,h,m){var y;const g=(y=c.__r3f)==null?void 0:y.parent;if(!g)return;const v=t(f,h,c.__r3f.root);if(c.children){for(const x of c.children)x.__r3f&&r(v,x);c.children=c.children.filter(x=>!x.__r3f)}c.__r3f.objects.forEach(x=>r(v,x)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(g,c),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),r(g,v),v.raycast&&v.__r3f.eventCount&&v.__r3f.root.getState().internal.interaction.push(v),[m,m.alternate].forEach(x=>{x!==null&&(x.stateNode=v,x.ref&&(typeof x.ref=="function"?x.ref(v):x.ref.current=v))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:pj({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,f)=>{if(!f)return;const h=c.getState().scene;h.__r3f&&(h.__r3f.root=c,r(h,f))},removeChildFromContainer:(c,f)=>{f&&o(c.getState().scene,f)},insertInContainerBefore:(c,f,h)=>{if(!f||!h)return;const m=c.getState().scene;m.__r3f&&i(m,f,h)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var f;const h=(f=c==null?void 0:c.__r3f)!=null?f:{};return Boolean(h.handlers)},prepareUpdate(c,f,h,m){if(c.__r3f.primitive&&m.object&&m.object!==c)return[!0];{const{args:y=[],children:g,...v}=m,{args:x=[],children:_,...w}=h;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((R,M)=>R!==x[M]))return[!0];const A=CF(c,v,w,!0);return A.changes.length?[!1,A]:null}},commitUpdate(c,[f,h],m,y,g,v){f?a(c,m,g,v):Fx(c,h)},commitMount(c,f,h,m){var y;const g=(y=c.__r3f)!=null?y:{};c.raycast&&g.handlers&&g.eventCount&&c.__r3f.root.getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>Rf(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var f;const{attach:h,parent:m}=(f=c.__r3f)!=null?f:{};h&&m&&Z3(m,c,h),c.isObject3D&&(c.visible=!1),Pf(c)},unhideInstance(c,f){var h;const{attach:m,parent:y}=(h=c.__r3f)!=null?h:{};m&&y&&Lx(y,c,m),(c.isObject3D&&f.visible==null||f.visible)&&(c.visible=!0),Pf(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Ll.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&jn.fun(performance.now)?performance.now:jn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:jn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:jn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Fx}}const Tj=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],PF=n=>!!(n!=null&&n.render),iM=L.createContext(null),Rj=(n,e)=>{const t=M1((a,l)=>{const u=new V,c=new V,f=new V;function h(x=l().camera,_=c,w=l().size){const{width:A,height:R,top:M,left:P}=w,b=A/R;_ instanceof V?f.copy(_):f.set(..._);const C=x.getWorldPosition(u).distanceTo(f);if(SF(x))return{width:A/x.zoom,height:R/x.zoom,top:M,left:P,factor:1,distance:C,aspect:b};{const T=x.fov*Math.PI/180,I=2*Math.tan(T/2)*C,D=I*(A/R);return{width:D,height:I,top:M,left:P,factor:A/D,distance:C,aspect:b}}}let m;const y=x=>a(_=>({performance:{..._.performance,current:x}})),g=new De;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(x=1)=>n(l(),x),advance:(x,_)=>e(x,_,l()),legacy:!1,linear:!1,flat:!1,scene:Rf(new Ad),controls:null,clock:new eM,pointer:g,mouse:g,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=l();m&&clearTimeout(m),x.performance.current!==x.performance.min&&y(x.performance.min),m=setTimeout(()=>y(l().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:x=>a(_=>({..._,events:{..._.events,...x}})),setSize:(x,_,w,A,R)=>{const M=l().camera,P={width:x,height:_,top:A||0,left:R||0,updateStyle:w};a(b=>({size:P,viewport:{...b.viewport,...h(M,c,P)}}))},setDpr:x=>a(_=>{const w=EF(x);return{viewport:{..._.viewport,dpr:w,initialDpr:_.viewport.initialDpr||w}}}),setFrameloop:(x="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,x!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:L.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,_,w)=>{const A=l().internal;return A.priority=A.priority+(_>0?1:0),A.subscribers.push({ref:x,priority:_,store:w}),A.subscribers=A.subscribers.sort((R,M)=>R.priority-M.priority),()=>{const R=l().internal;R!=null&&R.subscribers&&(R.priority=R.priority-(_>0?1:0),R.subscribers=R.subscribers.filter(M=>M.ref!==x))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:f}=t.getState();if(l!==i||u.dpr!==s){var h;i=l,s=u.dpr,TF(a,l),c.setPixelRatio(u.dpr);const m=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let nv,Pj=new Set,Bj=new Set,Ij=new Set;function kx(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Kh(n,e){switch(n){case"before":return kx(Pj,e);case"after":return kx(Bj,e);case"tail":return kx(Ij,e)}}let Ox,Ux;function Nx(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Ox=e.internal.subscribers,nv=0;nv<Ox.length;nv++)Ux=Ox[nv],Ux.ref.current(Ux.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Dj(n){let e=!1,t,r,i;function s(l){r=requestAnimationFrame(s),e=!0,t=0,Kh("before",l);for(const c of n.values()){var u;i=c.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(t+=Nx(l,i))}if(Kh("after",l),t===0)return Kh("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,u=1){var c;if(!l)return n.forEach(f=>o(f.store.getState()),u);(c=l.gl.xr)!=null&&c.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,c,f){if(u&&Kh("before",l),c)Nx(l,c,f);else for(const h of n.values())Nx(l,h.store.getState());u&&Kh("after",l)}return{loop:s,invalidate:o,advance:a}}function sM(){const n=L.useContext(iM);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function vs(n=t=>t,e){return sM()(n,e)}function so(n,e=0){const t=sM(),r=t.getState().internal.subscribe,i=bF(n);return eg(()=>r(i,e,t),[e,r,t]),null}function BF(n,e){return function(t,...r){const i=new t;return n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,Sj(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function Yd(n,e,t,r){const i=Array.isArray(e)?e:[e],s=mj(BF(t,r),[n,...i],{equal:jn.equ});return Array.isArray(e)?s:s[0]}Yd.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return gj(BF(t),[n,...r])};Yd.clear=function(n,e){const t=Array.isArray(e)?e:[e];return vj([n,...t])};const Td=new Map,{invalidate:q3,advance:eR}=Dj(Td),{reconciler:Am,applyProps:rv}=Cj(Td,Aj),Yh={objects:"shallow",strict:!1},Lj=(n,e)=>{const t=typeof n=="function"?n(e):n;return PF(t)?t:new m1({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Fj(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:r,top:i,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function kj(n){const e=Td.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||Rj(q3,eR),o=t||Am.createContainer(s,Ll.ConcurrentRoot,null,!1,null,"",i,null);e||Td.set(n,{fiber:o,store:s});let a,l=!1;return{configure(u={}){let{gl:c,size:f,events:h,onCreated:m,shadows:y=!1,linear:g=!1,flat:v=!1,legacy:x=!1,orthographic:_=!1,frameloop:w="always",dpr:A=[1,2],performance:R,raycaster:M,camera:P,onPointerMissed:b}=u,C=s.getState(),T=C.gl;C.gl||C.set({gl:T=Lj(c,n)});let I=C.raycaster;I||C.set({raycaster:I=new rM});const{params:D,...z}=M||{};if(jn.equ(z,I,Yh)||rv(I,{...z}),jn.equ(D,I.params,Yh)||rv(I,{params:{...I.params,...D}}),!C.camera){const G=P instanceof Gd,j=G?P:_?new Hd(0,0,0,0,.1,1e3):new yr(75,0,.1,1e3);G||(j.position.z=5,P&&rv(j,P),P!=null&&P.rotation||j.lookAt(0,0,0)),C.set({camera:j})}if(!C.xr){const G=(X,K)=>{const ce=s.getState();ce.frameloop!=="never"&&eR(X,!0,ce,K)},j=()=>{const X=s.getState();X.gl.xr.enabled=X.gl.xr.isPresenting,X.gl.xr.setAnimationLoop(X.gl.xr.isPresenting?G:null),X.gl.xr.isPresenting||q3(X)},Y={connect(){const X=s.getState().gl;X.xr.addEventListener("sessionstart",j),X.xr.addEventListener("sessionend",j)},disconnect(){const X=s.getState().gl;X.xr.removeEventListener("sessionstart",j),X.xr.removeEventListener("sessionend",j)}};T.xr&&Y.connect(),C.set({xr:Y})}if(T.shadowMap){const G=T.shadowMap.enabled,j=T.shadowMap.type;if(T.shadowMap.enabled=!!y,jn.boo(y))T.shadowMap.type=Dp;else if(jn.str(y)){var N;const Y={basic:FL,percentage:s1,soft:Dp,variance:ec};T.shadowMap.type=(N=Y[y])!=null?N:Dp}else jn.obj(y)&&Object.assign(T.shadowMap,y);(G!==T.shadowMap.enabled||j!==T.shadowMap.type)&&(T.shadowMap.needsUpdate=!0)}Tf&&("enabled"in Tf?Tf.enabled=!x:"legacyMode"in Tf&&(Tf.legacyMode=x));const J=g?Po:It,Q=v?Eo:cA;T.outputEncoding!==J&&(T.outputEncoding=J),T.toneMapping!==Q&&(T.toneMapping=Q),C.legacy!==x&&C.set(()=>({legacy:x})),C.linear!==g&&C.set(()=>({linear:g})),C.flat!==v&&C.set(()=>({flat:v})),c&&!jn.fun(c)&&!PF(c)&&!jn.equ(c,T,Yh)&&rv(T,c),h&&!C.events.handlers&&C.set({events:h(s)});const re=Fj(n,f);return jn.equ(re,C.size,Yh)||C.setSize(re.width,re.height,re.updateStyle,re.top,re.left),A&&C.viewport.dpr!==EF(A)&&C.setDpr(A),C.frameloop!==w&&C.setFrameloop(w),C.onPointerMissed||C.set({onPointerMissed:b}),R&&!jn.equ(R,C.performance,Yh)&&C.set(G=>({performance:{...G.performance,...R}})),a=m,l=!0,this},render(u){return l||this.configure(),Am.updateContainer(L.createElement(Oj,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){IF(n)}}}function Oj({store:n,children:e,onCreated:t,rootElement:r}){return eg(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),L.createElement(iM.Provider,{value:n},e)}function IF(n,e){const t=Td.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Am.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),bj(i),Td.delete(n),e&&e(n)}catch{}},500)})}}function Uj(n,e,t){return L.createElement(Nj,{key:e.uuid,children:n,container:e,state:t})}function Nj({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,o=sM(),[a]=L.useState(()=>new rM),[l]=L.useState(()=>new De),u=L.useCallback((f,h)=>{const m={...f};Object.keys(f).forEach(g=>{(Tj.includes(g)||f[g]!==h[g]&&h[g])&&delete m[g]});let y;if(h&&i){const g=h.camera;y=f.viewport.getCurrentViewport(g,new V,i),g!==f.camera&&TF(g,i)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...h==null?void 0:h.events,...r},size:{...f.size,...i},viewport:{...f.viewport,...y},...s}},[n]),[c]=L.useState(()=>{const f=o.getState();return M1((m,y)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...r},size:{...f.size,...i},...s,set:m,get:y,setEvents:g=>m(v=>({...v,events:{...v.events,...g}}))}))});return L.useEffect(()=>{const f=o.subscribe(h=>c.setState(m=>u(h,m)));return()=>{f(),c.destroy()}},[]),L.useEffect(()=>{c.setState(f=>u(o.getState(),f))},[u]),L.createElement(L.Fragment,null,Am.createPortal(L.createElement(iM.Provider,{value:c},e),c,null))}Am.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:L.version});function p2(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var c=Date.now()-o;c<e&&c>=0?r=setTimeout(l,e-c):(r=null,t||(a=n.apply(s,i),s=i=null))}var u=function(){s=this,i=arguments,o=Date.now();var c=t&&!r;return r||(r=setTimeout(l,e)),c&&(a=n.apply(s,i),s=i=null),a};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},u}p2.debounce=p2;var tR=p2;function zj(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=L.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=L.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,c=e?typeof e=="number"?e:e.resize:null,f=L.useRef(!1);L.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[h,m,y]=L.useMemo(()=>{const _=()=>{if(!l.current.element)return;const{left:w,top:A,width:R,height:M,bottom:P,right:b,x:C,y:T}=l.current.element.getBoundingClientRect(),I={left:w,top:A,width:R,height:M,bottom:P,right:b,x:C,y:T};l.current.element instanceof HTMLElement&&i&&(I.height=l.current.element.offsetHeight,I.width=l.current.element.offsetWidth),Object.freeze(I),f.current&&!Wj(l.current.lastBounds,I)&&a(l.current.lastBounds=I)};return[_,c?tR(_,c):_,u?tR(_,u):_]},[a,i,u,c]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function v(){l.current.element&&(l.current.resizeObserver=new s(y),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(_=>_.addEventListener("scroll",y,{capture:!0,passive:!0})))}const x=_=>{!_||_===l.current.element||(g(),l.current.element=_,l.current.scrollContainers=DF(_),v())};return Hj(y,Boolean(t)),Gj(m),L.useEffect(()=>{g(),v()},[t,y,m]),L.useEffect(()=>g,[]),[x,o,h]}function Gj(n){L.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Hj(n,e){L.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function DF(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...DF(n.parentElement)]}const Vj=["x","y","top","bottom","left","right","width","height"],Wj=(n,e)=>Vj.every(t=>n[t]===e[t]);var jj=Object.defineProperty,$j=Object.defineProperties,Jj=Object.getOwnPropertyDescriptors,nR=Object.getOwnPropertySymbols,Xj=Object.prototype.hasOwnProperty,Kj=Object.prototype.propertyIsEnumerable,rR=(n,e,t)=>e in n?jj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,iR=(n,e)=>{for(var t in e||(e={}))Xj.call(e,t)&&rR(n,t,e[t]);if(nR)for(var t of nR(e))Kj.call(e,t)&&rR(n,t,e[t]);return n},Yj=(n,e)=>$j(n,Jj(e));function LF(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=LF(r,e,t);if(i)return i;r=e?null:r.sibling}}function FF(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const oM=FF(L.createContext(null));class kF extends L.Component{render(){return L.createElement(oM.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:Qj,ReactCurrentDispatcher:Zj}=L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function qj(){const n=L.useContext(oM);if(!n)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=L.useId();return L.useMemo(()=>{var r;return(r=Qj.current)!=null?r:LF(n,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[n,e])}function e$(){var n,e;const t=qj(),[r]=L.useState(()=>new Map);r.clear();let i=t;for(;i;){const s=(n=i.type)==null?void 0:n._context;s&&s!==oM&&!r.has(s)&&r.set(s,(e=Zj.current)==null?void 0:e.readContext(FF(s))),i=i.return}return L.useMemo(()=>Array.from(r.keys()).reduce((s,o)=>a=>L.createElement(s,null,L.createElement(o.Provider,Yj(iR({},a),{value:r.get(o)}))),s=>L.createElement(kF,iR({},s))),[r])}const zx={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function t$(n){const{handlePointer:e}=Ej(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(zx).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=zx[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=zx[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const n$=L.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=t$,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:f,legacy:h,orthographic:m,frameloop:y,dpr:g,performance:v,raycaster:x,camera:_,onPointerMissed:w,onCreated:A,...R},M){L.useMemo(()=>tg(u2),[]);const P=e$(),[b,C]=zj({scroll:!0,debounce:{scroll:50,resize:0},...r}),T=L.useRef(null),I=L.useRef(null),[D,z]=L.useState(null);L.useImperativeHandle(M,()=>T.current);const N=bF(w),[J,Q]=L.useState(!1),[re,G]=L.useState(!1);if(J)throw J;if(re)throw re;const j=L.useRef(null);C.width>0&&C.height>0&&D&&(j.current||(j.current=kj(D)),j.current.configure({gl:s,events:o,shadows:u,linear:c,flat:f,legacy:h,orthographic:m,frameloop:y,dpr:g,performance:v,raycaster:x,camera:_,size:C,onPointerMissed:(...X)=>N.current==null?void 0:N.current(...X),onCreated:X=>{X.events.connect==null||X.events.connect(a?_j(a)?a.current:a:I.current),l&&X.setEvents({compute:(K,ce)=>{const he=K[l+"X"],te=K[l+"Y"];ce.pointer.set(he/ce.size.width*2-1,-(te/ce.size.height)*2+1),ce.raycaster.setFromCamera(ce.pointer,ce.camera)}}),A==null||A(X)}}),j.current.render(L.createElement(P,null,L.createElement(AF,{set:G},L.createElement(L.Suspense,{fallback:L.createElement(xj,{set:Q})},e))))),eg(()=>{z(T.current)},[]),L.useEffect(()=>{if(D)return()=>IF(D)},[D]);const Y=a?"none":"auto";return L.createElement("div",vn({ref:I,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Y,...i}},R),L.createElement("div",{ref:b,style:{width:"100%",height:"100%"}},L.createElement("canvas",{ref:T,style:{display:"block"}},t)))}),r$=L.forwardRef(function(e,t){return L.createElement(kF,null,L.createElement(n$,vn({},e,{ref:t})))});let Qh=0;const i$=M1(n=>($f.onStart=(e,t,r)=>{n({active:!0,item:e,loaded:t,total:r,progress:(t-Qh)/(r-Qh)*100})},$f.onLoad=()=>{n({active:!1})},$f.onError=e=>n(t=>({errors:[...t.errors,e]})),$f.onProgress=(e,t,r)=>{t===r&&(Qh=r),n({active:!0,item:e,loaded:t,total:r,progress:(t-Qh)/(r-Qh)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function E1(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function Op(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function m2(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function s$(n,e){if(n){if(typeof n=="string")return m2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m2(n,e)}}function o$(n){if(Array.isArray(n))return m2(n)}function a$(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function l$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u$(n){return o$(n)||a$(n)||s$(n)||l$()}new De;new De;function c$(n,e,t){return Math.max(e,Math.min(t,n))}function f$(n,e){return c$(n-Math.floor(n/e)*e,0,e)}function d$(n,e){var t=f$(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function OF(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Fs=function n(e,t,r){var i=this;OF(this,n),Op(this,"dot2",function(s,o){return i.x*s+i.y*o}),Op(this,"dot3",function(s,o,a){return i.x*s+i.y*o+i.z*a}),this.x=e,this.y=t,this.z=r},h$=[new Fs(1,1,0),new Fs(-1,1,0),new Fs(1,-1,0),new Fs(-1,-1,0),new Fs(1,0,1),new Fs(-1,0,1),new Fs(1,0,-1),new Fs(-1,0,-1),new Fs(0,1,1),new Fs(0,-1,1),new Fs(0,1,-1),new Fs(0,-1,-1)],sR=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],oR=new Array(512),aR=new Array(512),p$=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var r;t&1?r=sR[t]^e&255:r=sR[t]^e>>8&255,oR[t]=oR[t+256]=r,aR[t]=aR[t+256]=h$[r%12]}};p$(0);function m$(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function lR(n){var e=m$(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var g$=function n(e){var t=this;OF(this,n),Op(this,"seed",0),Op(this,"init",function(r){t.seed=r,t.value=lR(r)}),Op(this,"value",lR(this.seed)),this.init(e)};new g$(Math.random());var v$=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return r/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*i)/t)},UF=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},y$=function(e){return e},_$={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},x$={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},w$={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},S$={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},b$={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},A$={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function Br(n,e,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:UF,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[l]===void 0&&(n.__damp[l]=0),Math.abs(n[e]-t)<=a)return n[e]=t,!1;r=Math.max(1e-4,r);var u=2/r,c=o(u*i),f=n[e]-t,h=t,m=s*r;f=Math.min(Math.max(f,-m),m),t=n[e]-f;var y=(n.__damp[l]+u*f)*i;n.__damp[l]=(n.__damp[l]-u*y)*c;var g=t+(f+y)*c;return h-n[e]>0==g>h&&(g=h,n.__damp[l]=(g-h)/i),n[e]=g,!0}var M$=function(e){return e&&e.isCamera},E$=function(e){return e&&e.isLight},Zh=new V,uR=new Zn,cR=new Zn,qh=new bt,Gx=new V;function C$(n,e,t,r,i,s,o){typeof e=="number"?Zh.setScalar(e):Array.isArray(e)?Zh.set(e[0],e[1],e[2]):Zh.copy(e);var a=n.parent;n.updateWorldMatrix(!0,!1),Gx.setFromMatrixPosition(n.matrixWorld),M$(n)||E$(n)?qh.lookAt(Gx,Zh,n.up):qh.lookAt(Zh,Gx,n.up),by(n.quaternion,cR.setFromRotationMatrix(qh),t,r,i,s,o),a&&(qh.extractRotation(a.matrixWorld),uR.setFromRotationMatrix(qh),by(n.quaternion,cR.copy(n.quaternion).premultiply(uR.invert()),t,r,i,s,o))}function od(n,e,t,r,i,s,o,a){return Br(n,e,n[e]+d$(n[e],t),r,i,s,o,a)}var ep=new De,fR,dR;function T$(n,e,t,r,i,s,o){return typeof e=="number"?ep.setScalar(e):Array.isArray(e)?ep.set(e[0],e[1]):ep.copy(e),fR=Br(n,"x",ep.x,t,r,i,s,o),dR=Br(n,"y",ep.y,t,r,i,s,o),fR||dR}var xf=new V,hR,pR,mR;function g2(n,e,t,r,i,s,o){return typeof e=="number"?xf.setScalar(e):Array.isArray(e)?xf.set(e[0],e[1],e[2]):xf.copy(e),hR=Br(n,"x",xf.x,t,r,i,s,o),pR=Br(n,"y",xf.y,t,r,i,s,o),mR=Br(n,"z",xf.z,t,r,i,s,o),hR||pR||mR}var Uu=new jt,gR,vR,yR,_R;function R$(n,e,t,r,i,s,o){return typeof e=="number"?Uu.setScalar(e):Array.isArray(e)?Uu.set(e[0],e[1],e[2],e[3]):Uu.copy(e),gR=Br(n,"x",Uu.x,t,r,i,s,o),vR=Br(n,"y",Uu.y,t,r,i,s,o),yR=Br(n,"z",Uu.z,t,r,i,s,o),_R=Br(n,"w",Uu.w,t,r,i,s,o),gR||vR||yR||_R}var tp=new Er,xR,wR,SR;function P$(n,e,t,r,i,s,o){return Array.isArray(e)?tp.set(e[0],e[1],e[2],e[3]):tp.copy(e),xR=od(n,"x",tp.x,t,r,i,s,o),wR=od(n,"y",tp.y,t,r,i,s,o),SR=od(n,"z",tp.z,t,r,i,s,o),xR||wR||SR}var wf=new qe,bR,AR,MR;function B$(n,e,t,r,i,s,o){return e instanceof qe?wf.copy(e):Array.isArray(e)?wf.setRGB(e[0],e[1],e[2]):wf.set(e),bR=Br(n,"r",wf.r,t,r,i,s,o),AR=Br(n,"g",wf.g,t,r,i,s,o),MR=Br(n,"b",wf.b,t,r,i,s,o),bR||AR||MR}var mo=new Zn,Sa=new jt,ER=new jt,np=new jt,CR,TR,RR,PR;function by(n,e,t,r,i,s,o){var a=n;Array.isArray(e)?mo.set(e[0],e[1],e[2],e[3]):mo.copy(e);var l=n.dot(mo)>0?1:-1;return mo.x*=l,mo.y*=l,mo.z*=l,mo.w*=l,CR=Br(n,"x",mo.x,t,r,i,s,o),TR=Br(n,"y",mo.y,t,r,i,s,o),RR=Br(n,"z",mo.z,t,r,i,s,o),PR=Br(n,"w",mo.w,t,r,i,s,o),Sa.set(n.x,n.y,n.z,n.w).normalize(),ER.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),np.copy(Sa).multiplyScalar(ER.dot(Sa)/Sa.dot(Sa)),a.__damp.velocity_x-=np.x,a.__damp.velocity_y-=np.y,a.__damp.velocity_z-=np.z,a.__damp.velocity_w-=np.w,n.set(Sa.x,Sa.y,Sa.z,Sa.w),CR||TR||RR||PR}var rp=new vF,BR,IR,DR;function I$(n,e,t,r,i,s,o){return Array.isArray(e)?rp.set(e[0],e[1],e[2]):rp.copy(e),BR=Br(n,"radius",rp.radius,t,r,i,s,o),IR=od(n,"phi",rp.phi,t,r,i,s,o),DR=od(n,"theta",rp.theta,t,r,i,s,o),BR||IR||DR}var iv=new bt,LR=new V,FR=new Zn,kR=new V,OR,UR,NR;function D$(n,e,t,r,i,s,o){var a=n;return a.__damp===void 0&&(a.__damp={position:new V,rotation:new Zn,scale:new V},n.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?iv.set.apply(iv,u$(e)):iv.copy(e),iv.decompose(LR,FR,kR),OR=g2(a.__damp.position,LR,t,r,i,s,o),UR=by(a.__damp.rotation,FR,t,r,i,s,o),NR=g2(a.__damp.scale,kR,t,r,i,s,o),n.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),OR||UR||NR}var zR=Object.freeze({__proto__:null,rsqw:v$,exp:UF,linear:y$,sine:_$,cubic:x$,quint:w$,circ:S$,quart:b$,expo:A$,damp:Br,dampLookAt:C$,dampAngle:od,damp2:T$,damp3:g2,damp4:R$,dampE:P$,dampC:B$,dampQ:by,dampS:I$,dampM:D$});const NF=L.createContext(null);function zF(){return L.useContext(NF)}function L$({eps:n=1e-5,enabled:e=!0,infinite:t,horizontal:r,pages:i=1,distance:s=1,damping:o=.25,maxSpeed:a=1/0,style:l={},children:u}){const{get:c,setEvents:f,gl:h,size:m,invalidate:y,events:g}=vs(),[v]=L.useState(()=>document.createElement("div")),[x]=L.useState(()=>document.createElement("div")),[_]=L.useState(()=>document.createElement("div")),w=h.domElement.parentNode,A=L.useRef(0),R=L.useMemo(()=>({el:v,eps:n,fill:x,fixed:_,horizontal:r,damping:o,offset:0,delta:0,scroll:A,pages:i,range(b,C,T=0){const I=b-T,D=I+C+T*2;return this.offset<I?0:this.offset>D?1:(this.offset-I)/(D-I)},curve(b,C,T=0){return Math.sin(this.range(b,C,T)*Math.PI)},visible(b,C,T=0){const I=b-T,D=I+C+T*2;return this.offset>=I&&this.offset<=D}}),[n,o,r,i]);L.useEffect(()=>{v.style.position="absolute",v.style.width="100%",v.style.height="100%",v.style[r?"overflowX":"overflowY"]="auto",v.style[r?"overflowY":"overflowX"]="hidden",v.style.top="0px",v.style.left="0px";for(const C in l)v.style[C]=l[C];_.style.position="sticky",_.style.top="0px",_.style.left="0px",_.style.width="100%",_.style.height="100%",_.style.overflow="hidden",v.appendChild(_),x.style.height=r?"100%":`${i*s*100}%`,x.style.width=r?`${i*s*100}%`:"100%",x.style.pointerEvents="none",v.appendChild(x),w.appendChild(v),v[r?"scrollLeft":"scrollTop"]=1;const P=g.connected||h.domElement;requestAnimationFrame(()=>g.connect==null?void 0:g.connect(v));const b=c().events.compute;return f({compute(C,T){const{left:I,top:D}=w.getBoundingClientRect(),z=C.clientX-I,N=C.clientY-D;T.pointer.set(z/T.size.width*2-1,-(N/T.size.height)*2+1),T.raycaster.setFromCamera(T.pointer,T.camera)}}),()=>{w.removeChild(v),f({compute:b}),g.connect==null||g.connect(P)}},[i,s,r,v,x,_,w]),L.useEffect(()=>{if(g.connected===v){const P=m[r?"width":"height"],b=v[r?"scrollWidth":"scrollHeight"],C=b-P;let T=0,I=!0,D=!0;const z=()=>{if(!(!e||D)&&(y(),T=v[r?"scrollLeft":"scrollTop"],A.current=T/C,t)){if(!I){if(T>=C){const J=1-R.offset;v[r?"scrollLeft":"scrollTop"]=1,A.current=R.offset=-J,I=!0}else if(T<=0){const J=1+R.offset;v[r?"scrollLeft":"scrollTop"]=b,A.current=R.offset=J,I=!0}}I&&setTimeout(()=>I=!1,40)}};v.addEventListener("scroll",z,{passive:!0}),requestAnimationFrame(()=>D=!1);const N=J=>v.scrollLeft+=J.deltaY/2;return r&&v.addEventListener("wheel",N,{passive:!0}),()=>{v.removeEventListener("scroll",z),r&&v.removeEventListener("wheel",N)}}},[v,g,m,t,R,y,r,e]);let M=0;return so((P,b)=>{M=R.offset,zR.damp(R,"offset",A.current,o,b,a,void 0,n),zR.damp(R,"delta",Math.abs(M-R.offset),o,b,a,void 0,n),R.delta>n&&y()}),L.createElement(NF.Provider,{value:R},u)}function F$(n,e,t){return Math.max(e,Math.min(n,t))}const hi={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function GR(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function HR(n,e,t,r=.15){return r===0?F$(n,e,t):n<e?-GR(e-n,t-e,r)+e:n>t?+GR(n-t,t-e,r)+t:n}function k$(n,[e,t],[r,i]){const[[s,o],[a,l]]=n;return[HR(e,s,o,r),HR(t,a,l,i)]}function O$(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function U$(n){var e=O$(n,"string");return typeof e=="symbol"?e:String(e)}function Gi(n,e,t){return e=U$(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function VR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Yn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?VR(Object(t),!0).forEach(function(r){Gi(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):VR(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const GF={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function WR(n){return n?n[0].toUpperCase()+n.slice(1):""}const N$=["enter","leave"];function z$(n=!1,e){return n&&!N$.includes(e)}function G$(n,e="",t=!1){const r=GF[n],i=r&&r[e]||e;return"on"+WR(n)+WR(i)+(z$(t,i)?"Capture":"")}const H$=["gotpointercapture","lostpointercapture"];function V$(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=H$.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function W$(n,e=""){const t=GF[n],r=t&&t[e]||e;return n+r}function C1(n){return"touches"in n}function HF(n){return C1(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function j$(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function $$(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function VF(n){return C1(n)?$$(n)[0]:n}function J$(n){return j$(n).map(e=>e.identifier)}function Hx(n){const e=VF(n);return C1(n)?e.identifier:e.pointerId}function jR(n){const e=VF(n);return[e.clientX,e.clientY]}function X$(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function Ay(n,...e){return typeof n=="function"?n(...e):n}function K$(){}function Y$(...n){return n.length===0?K$:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function $R(n,e){return Object.assign({},e,n||{})}const Q$=32;class Z${constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?Ay(r.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,X$(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const M=t._delta.map(Math.abs);hi.addTo(t._distance,M)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,u]=r.threshold,{_step:c,values:f}=t;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&f[0]),c[1]===!1&&(c[1]=Math.abs(a)>=u&&f[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(a)>=u&&Math.sign(a)*u)),t.intentional=c[0]!==!1||c[1]!==!1,!t.intentional)return;const h=[0,0];if(r.hasCustomTransform){const[M,P]=f;h[0]=c[0]!==!1?M-c[0]:0,h[1]=c[1]!==!1?P-c[1]:0}else h[0]=c[0]!==!1?o-c[0]:0,h[1]=c[1]!==!1?a-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const m=t.offset,y=t._active&&!t._blocked||t.active;y&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=Ay(r.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[g,v]=t.offset,[[x,_],[w,A]]=t._bounds;t.overflow=[g<x?-1:g>_?1:0,v<w?-1:v>A?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const R=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=k$(t._bounds,t.offset,R),t.delta=hi.sub(t.offset,m),this.computeMovement(),y&&(!t.last||s>Q$)){t.delta=hi.sub(t.offset,m);const M=t.delta.map(Math.abs);hi.addTo(t.distance,M),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[M[0]/s,M[1]/s])}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Yn(Yn(Yn({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function q$([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class eJ extends Z${constructor(...e){super(...e),Gi(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=hi.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=hi.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[HF(e)]:r.axisThreshold;t.axis=q$(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const tJ=n=>n,JR=.15,WF={enabled(n=!0){return n},eventOptions(n,e,t){return Yn(Yn({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[JR,JR];case!1:return[0,0];default:return hi.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return hi.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||tJ},threshold(n){return hi.toVector(n,0)}},nJ=0,ng=Yn(Yn({},WF),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=nJ){return n},bounds(n={}){if(typeof n=="function")return s=>ng.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),XR={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class rJ extends eJ{constructor(...e){super(...e),Gi(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=ng.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=Hx(e),r._pointerActive=!0,this.computeValues(jR(e)),this.computeInitial(),t.preventScrollAxis&&HF(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive||t.type===e.type&&e.timeStamp===t.timeStamp)return;const i=Hx(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const s=jR(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=hi.sub(s,t._values),this.computeValues(s)),hi.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=Hx(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[a,l]=t.direction,[u,c]=t.velocity,[f,h]=t.movement,[m,y]=r.swipe.velocity,[g,v]=r.swipe.distance,x=r.swipe.duration;t.elapsedTime<x&&(Math.abs(u)>m&&Math.abs(f)>g&&(t.swipe[0]=a),Math.abs(c)>y&&Math.abs(h)>v&&(t.swipe[1]=l))}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,iJ(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=XR[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,hi.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in XR&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function iJ(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const rg=typeof window<"u"&&window.document&&window.document.createElement;function sJ(){return rg&&"ontouchstart"in window}function KR(){return sJ()||rg&&window.navigator.maxTouchPoints>1}function oJ(){return rg&&"onpointerdown"in window}function aJ(){return rg&&"exitPointerLock"in window.document}function lJ(){try{return"constructor"in GestureEvent}catch{return!1}}const Hs={isBrowser:rg,gesture:lJ(),touch:KR(),touchscreen:KR(),pointer:oJ(),pointerLock:aJ()},uJ=250,cJ=180,fJ=.5,dJ=50,hJ=250,pJ=10,YR={mouse:0,touch:0,pen:8},mJ=Yn(Yn({},ng),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&Hs.pointerLock,Hs.touch&&t?"touch":this.pointerLock?"mouse":Hs.pointer&&!i?"pointer":Hs.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?uJ:void 0,!(!Hs.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=hi.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=fJ,distance:e=dJ,duration:t=hJ}={}){return{velocity:this.transform(hi.toVector(n)),distance:this.transform(hi.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return cJ;case!1:return 0;default:return n}},axisThreshold(n){return n?Yn(Yn({},YR),n):YR},keyboardDisplacement(n=pJ){return n}});Yn(Yn({},WF),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!Hs.touch&&Hs.gesture)return"gesture";if(Hs.touch&&r)return"touch";if(Hs.touchscreen){if(Hs.pointer)return"pointer";if(Hs.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=o=>{const a=$R(Ay(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=$R(Ay(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",hi.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});Yn(Yn({},ng),{},{mouseOnly:(n=!0)=>n});Yn(Yn({},ng),{},{mouseOnly:(n=!0)=>n});const jF=new Map,v2=new Map;function gJ(n){jF.set(n.key,n.engine),v2.set(n.key,n.resolver)}const vJ={key:"drag",engine:rJ,resolver:mJ};function yJ(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function _J(n,e){if(n==null)return{};var t=yJ(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const xJ={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Hs.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},wJ=["target","eventOptions","window","enabled","transform"];function Gv(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=Gv(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function SJ(n,e,t={}){const r=n,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,u=_J(r,wJ);if(t.shared=Gv({target:i,eventOptions:s,window:o,enabled:a,transform:l},xJ),e){const c=v2.get(e);t[e]=Gv(Yn({shared:t.shared},u),c)}else for(const c in u){const f=v2.get(c);f&&(t[c]=Gv(Yn({shared:t.shared},u[c]),f))}return t}class $F{constructor(e,t){Gi(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const o=this._listeners,a=W$(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=Yn(Yn({},l),s);e.addEventListener(a,i,u);const c=()=>{e.removeEventListener(a,i,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class bJ{constructor(){Gi(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class AJ{constructor(e){Gi(this,"gestures",new Set),Gi(this,"_targetEventStore",new $F(this)),Gi(this,"gestureEventStores",{}),Gi(this,"gestureTimeoutStores",{}),Gi(this,"handlers",{}),Gi(this,"config",{}),Gi(this,"pointerIds",new Set),Gi(this,"touchIds",new Set),Gi(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),MJ(this,e)}setEventIds(e){if(C1(e))return this.touchIds=new Set(J$(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=SJ(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=QR(r,a.eventOptions,!!i);if(a.enabled){const u=jF.get(o);new u(this,e,o).bind(l)}}const s=QR(r,t.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Yn(Yn({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=Y$(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=V$(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function Sf(n,e){n.gestures.add(e),n.gestureEventStores[e]=new $F(n,e),n.gestureTimeoutStores[e]=new bJ}function MJ(n,e){e.drag&&Sf(n,"drag"),e.wheel&&Sf(n,"wheel"),e.scroll&&Sf(n,"scroll"),e.move&&Sf(n,"move"),e.pinch&&Sf(n,"pinch"),e.hover&&Sf(n,"hover")}const QR=(n,e,t)=>(r,i,s,o={},a=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(u=o.passive)!==null&&u!==void 0?u:e.passive;let h=a?r:G$(r,i,c);t&&f&&(h+="Passive"),n[h]=n[h]||[],n[h].push(s)};function EJ(n,e={},t,r){const i=le.useMemo(()=>new AJ(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),le.useEffect(i.effect.bind(i)),le.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function CJ(n,e){return gJ(vJ),EJ({drag:n},e||{},"drag")}const TJ=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let u=o;if(a){const c=(l==null?void 0:l.equalityFn)||Object.is;let f=o(r.getState());u=h=>{const m=o(h);if(!c(f,m)){const y=f;a(f=m,y)}},l!=null&&l.fireImmediately&&a(f,f)}return i(u)},n(e,t,r)};function ZR(n,e){if(e===A4)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===wy||e===pA){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===wy)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const RJ=parseInt(Ka.replace(/\D+/g,""));var Ws=Uint8Array,Fl=Uint16Array,y2=Uint32Array,JF=new Ws([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),XF=new Ws([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),PJ=new Ws([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),KF=function(n,e){for(var t=new Fl(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new y2(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},YF=KF(JF,2),QF=YF[0],BJ=YF[1];QF[28]=258,BJ[258]=28;var IJ=KF(XF,0),DJ=IJ[0],_2=new Fl(32768);for(var Dn=0;Dn<32768;++Dn){var _l=(Dn&43690)>>>1|(Dn&21845)<<1;_l=(_l&52428)>>>2|(_l&13107)<<2,_l=(_l&61680)>>>4|(_l&3855)<<4,_2[Dn]=((_l&65280)>>>8|(_l&255)<<8)>>>1}var Up=function(n,e,t){for(var r=n.length,i=0,s=new Fl(e);i<r;++i)++s[n[i]-1];var o=new Fl(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new Fl(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],c=e-n[i],f=o[n[i]-1]++<<c,h=f|(1<<c)-1;f<=h;++f)a[_2[f]>>>l]=u}else for(a=new Fl(r),i=0;i<r;++i)n[i]&&(a[i]=_2[o[n[i]-1]++]>>>15-n[i]);return a},ig=new Ws(288);for(var Dn=0;Dn<144;++Dn)ig[Dn]=8;for(var Dn=144;Dn<256;++Dn)ig[Dn]=9;for(var Dn=256;Dn<280;++Dn)ig[Dn]=7;for(var Dn=280;Dn<288;++Dn)ig[Dn]=8;var ZF=new Ws(32);for(var Dn=0;Dn<32;++Dn)ZF[Dn]=5;var LJ=Up(ig,9,1),FJ=Up(ZF,5,1),Vx=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},go=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Wx=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},kJ=function(n){return(n/8|0)+(n&7&&1)},OJ=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof Fl?Fl:n instanceof y2?y2:Ws)(t-e);return r.set(n.subarray(e,t)),r},UJ=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Ws(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Ws(r*3));var o=function(me){var pe=e.length;if(me>pe){var oe=new Ws(Math.max(pe*2,me));oe.set(e),e=oe}},a=t.f||0,l=t.p||0,u=t.b||0,c=t.l,f=t.d,h=t.m,m=t.n,y=r*8;do{if(!c){t.f=a=go(n,l,1);var g=go(n,l+1,3);if(l+=3,g)if(g==1)c=LJ,f=FJ,h=9,m=5;else if(g==2){var w=go(n,l,31)+257,A=go(n,l+10,15)+4,R=w+go(n,l+5,31)+1;l+=14;for(var M=new Ws(R),P=new Ws(19),b=0;b<A;++b)P[PJ[b]]=go(n,l+b*3,7);l+=A*3;for(var C=Vx(P),T=(1<<C)-1,I=Up(P,C,1),b=0;b<R;){var D=I[go(n,l,T)];l+=D&15;var v=D>>>4;if(v<16)M[b++]=v;else{var z=0,N=0;for(v==16?(N=3+go(n,l,3),l+=2,z=M[b-1]):v==17?(N=3+go(n,l,7),l+=3):v==18&&(N=11+go(n,l,127),l+=7);N--;)M[b++]=z}}var J=M.subarray(0,w),Q=M.subarray(w);h=Vx(J),m=Vx(Q),c=Up(J,h,1),f=Up(Q,m,1)}else throw"invalid block type";else{var v=kJ(l)+4,x=n[v-4]|n[v-3]<<8,_=v+x;if(_>r){if(s)throw"unexpected EOF";break}i&&o(u+x),e.set(n.subarray(v,_),u),t.b=u+=x,t.p=l=_*8;continue}if(l>y){if(s)throw"unexpected EOF";break}}i&&o(u+131072);for(var re=(1<<h)-1,G=(1<<m)-1,j=l;;j=l){var z=c[Wx(n,l)&re],Y=z>>>4;if(l+=z&15,l>y){if(s)throw"unexpected EOF";break}if(!z)throw"invalid length/literal";if(Y<256)e[u++]=Y;else if(Y==256){j=l,c=null;break}else{var X=Y-254;if(Y>264){var b=Y-257,K=JF[b];X=go(n,l,(1<<K)-1)+QF[b],l+=K}var ce=f[Wx(n,l)&G],he=ce>>>4;if(!ce)throw"invalid distance";l+=ce&15;var Q=DJ[he];if(he>3){var K=XF[he];Q+=Wx(n,l)&(1<<K)-1,l+=K}if(l>y){if(s)throw"unexpected EOF";break}i&&o(u+131072);for(var te=u+X;u<te;u+=4)e[u]=e[u-Q],e[u+1]=e[u+1-Q],e[u+2]=e[u+2-Q],e[u+3]=e[u+3-Q];u=te}}t.l=c,t.p=j,t.b=u,c&&(a=1,t.m=h,t.d=f,t.n=m)}while(!a);return u==e.length?e:OJ(e,0,u)},NJ=new Ws(0),zJ=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function sv(n,e){return UJ((zJ(n),n.subarray(2,-4)),e)}var GJ=typeof TextDecoder<"u"&&new TextDecoder,HJ=0;try{GJ.decode(NJ,{stream:!0}),HJ=1}catch{}const VJ=n=>n&&n.isCubeTexture;class WJ extends Nn{constructor(e,t){var r,i;const s=VJ(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),u=Math.pow(2,l),c=3*Math.max(u,16*7),f=4*u,h=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/c}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,y=h.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(Ka.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,g={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},v=new jd(1,16),x=new wr({uniforms:g,fragmentShader:y,vertexShader:m,side:Gr});super(v,x)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class aM extends Fi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new KJ(t)}),this.register(function(t){return new rX(t)}),this.register(function(t){return new iX(t)}),this.register(function(t){return new sX(t)}),this.register(function(t){return new QJ(t)}),this.register(function(t){return new ZJ(t)}),this.register(function(t){return new qJ(t)}),this.register(function(t){return new eX(t)}),this.register(function(t){return new XJ(t)}),this.register(function(t){return new tX(t)}),this.register(function(t){return new YJ(t)}),this.register(function(t){return new nX(t)}),this.register(function(t){return new $J(t)}),this.register(function(t){return new oX(t)}),this.register(function(t){return new aX(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=ta.extractUrlBase(e),this.manager.itemStart(e);const a=function(u){i?i(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new xs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(c){t(c),s.manager.itemEnd(e)},a)}catch(c){a(c)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(ta.decodeText(new Uint8Array(e.slice(0,4)))===qF){try{o[nn.KHR_BINARY_GLTF]=new lX(e)}catch(c){i&&i(c);return}s=JSON.parse(o[nn.KHR_BINARY_GLTF].content)}else s=JSON.parse(ta.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new wX(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const c=this.pluginCallbacks[u](l);a[c.name]=c,o[c.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const c=s.extensionsUsed[u],f=s.extensionsRequired||[];switch(c){case nn.KHR_MATERIALS_UNLIT:o[c]=new JJ;break;case nn.KHR_DRACO_MESH_COMPRESSION:o[c]=new uX(s,this.dracoLoader);break;case nn.KHR_TEXTURE_TRANSFORM:o[c]=new cX;break;case nn.KHR_MESH_QUANTIZATION:o[c]=new fX;break;default:f.indexOf(c)>=0&&a[c]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function jJ(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const nn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class $J{constructor(e){this.parser=e,this.name=nn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const c=new qe(16777215);l.color!==void 0&&c.fromArray(l.color);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new QA(c),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new YA(c),u.distance=f;break;case"spot":u=new KA(c),u.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,Tl(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(u),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class JJ{constructor(){this.name=nn.KHR_MATERIALS_UNLIT}getMaterialType(){return Pi}extendParams(e,t,r){const i=[];e.color=new qe(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(i)}}class XJ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class KJ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Lo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new De(a,a)}return Promise.all(s)}}class YJ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Lo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class QJ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Lo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new qe(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class ZJ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Lo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class qJ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Lo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new qe(a[0],a[1],a[2]),Promise.all(s)}}class eX{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Lo}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class tX{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Lo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new qe(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class nX{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Lo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class rX{constructor(e){this.parser=e,this.name=nn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class iX{constructor(e){this.parser=e,this.name=nn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class sX{constructor(e){this.parser=e,this.name=nn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class oX{constructor(e){this.name=nn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,u=i.byteLength||0,c=i.count,f=i.byteStride,h=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(c,f,h,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(c*f);return o.decodeGltfBuffer(new Uint8Array(m),c,f,h,i.mode,i.filter),m})})}else return null}}class aX{constructor(e){this.name=nn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const u of i.primitives)if(u.mode!==Os.TRIANGLES&&u.mode!==Os.TRIANGLE_STRIP&&u.mode!==Os.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(c=>(l[u]=c,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const c=u.pop(),f=c.isGroup?c.children:[c],h=u[0].count,m=[];for(const y of f){const g=new bt,v=new V,x=new Zn,_=new V(1,1,1),w=new CA(y.geometry,y.material,h);for(let A=0;A<h;A++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,A),l.ROTATION&&x.fromBufferAttribute(l.ROTATION,A),l.SCALE&&_.fromBufferAttribute(l.SCALE,A),w.setMatrixAt(A,g.compose(v,x,_));for(const A in l)A!=="TRANSLATION"&&A!=="ROTATION"&&A!=="SCALE"&&y.geometry.setAttribute(A,l[A]);un.prototype.copy.call(w,y),this.parser.assignFinalMaterial(w),m.push(w)}return c.isGroup?(c.clear(),c.add(...m),c):m[0]}))}}const qF="glTF",ip=12,qR={JSON:1313821514,BIN:5130562};class lX{constructor(e){this.name=nn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,ip);if(this.header={magic:ta.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==qF)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-ip,i=new DataView(e,ip);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===qR.JSON){const l=new Uint8Array(e,ip+s,o);this.content=ta.decodeText(l)}else if(a===qR.BIN){const l=ip+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class uX{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=nn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const c in o){const f=x2[c]||c.toLowerCase();a[f]=o[c]}for(const c in e.attributes){const f=x2[c]||c.toLowerCase();if(o[c]!==void 0){const h=r.accessors[e.attributes[c]],m=ad[h.componentType];u[f]=m.name,l[f]=h.normalized===!0}}return t.getDependency("bufferView",s).then(function(c){return new Promise(function(f){i.decodeDracoFile(c,function(h){for(const m in h.attributes){const y=h.attributes[m],g=l[m];g!==void 0&&(y.normalized=g)}f(h)},a,u)})})}}class cX{constructor(){this.name=nn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class fX{constructor(){this.name=nn.KHR_MESH_QUANTIZATION}}class ek extends Kd{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,c=i-t,f=(r-t)/c,h=f*f,m=h*f,y=e*u,g=y-u,v=-2*m+3*h,x=m-h,_=1-v,w=x-h+f;for(let A=0;A!==a;A++){const R=o[g+A+a],M=o[g+A+l]*c,P=o[y+A+a],b=o[y+A]*c;s[A]=_*R+w*M+v*P+x*b}return s}}const dX=new Zn;class hX extends ek{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return dX.fromArray(s).normalize().toArray(s),s}}const Os={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},ad={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},eP={9728:Sn,9729:rn,9984:hm,9985:a1,9986:rd,9987:Ro},tP={33071:Kr,33648:xd,10497:nu},jx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},x2={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...RJ>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},xl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},pX={CUBICSPLINE:void 0,LINEAR:bc,STEP:wd},$x={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function mX(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Xd({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:eo})),n.DefaultMaterial}function Nu(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Tl(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function gX(n,e,t){let r=!1,i=!1,s=!1;for(let u=0,c=e.length;u<c;u++){const f=e[u];if(f.POSITION!==void 0&&(r=!0),f.NORMAL!==void 0&&(i=!0),f.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let u=0,c=e.length;u<c;u++){const f=e[u];if(r){const h=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(h)}if(i){const h=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(h)}if(s){const h=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const c=u[0],f=u[1],h=u[2];return r&&(n.morphAttributes.position=c),i&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function vX(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function yX(n){let e;const t=n.extensions&&n.extensions[nn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Jx(t.attributes):e=n.indices+":"+Jx(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+Jx(n.targets[r]);return e}function Jx(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function w2(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function _X(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const xX=new bt;class wX{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new jJ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new lF(this.options.manager):this.textureLoader=new pF(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new xs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};Nu(s,a,i),Tl(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,c]of o.children.entries())s(c,a.children[u])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[nn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(ta.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=jx[i.type],a=ad[i.componentType],l=i.normalized===!0,u=new a(i.count*o);return Promise.resolve(new Qt(u,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=jx[i.type],u=ad[i.componentType],c=u.BYTES_PER_ELEMENT,f=c*l,h=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,y=i.normalized===!0;let g,v;if(m&&m!==f){const x=Math.floor(h/m),_="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+x+":"+i.count;let w=t.cache.get(_);w||(g=new u(a,x*m,i.count*m/c),w=new Gm(g,m/c),t.cache.add(_,w)),v=new iu(w,l,h%m/c,y)}else a===null?g=new u(i.count*l):g=new u(a,h,i.count*l),v=new Qt(g,l,y);if(i.sparse!==void 0){const x=jx.SCALAR,_=ad[i.sparse.indices.componentType],w=i.sparse.indices.byteOffset||0,A=i.sparse.values.byteOffset||0,R=new _(o[1],w,i.sparse.count*x),M=new u(o[2],A,i.sparse.count*l);a!==null&&(v=new Qt(v.array.slice(),v.itemSize,v.normalized));for(let P=0,b=R.length;P<b;P++){const C=R[P];if(v.setX(C,M[P*l]),l>=2&&v.setY(C,M[P*l+1]),l>=3&&v.setZ(C,M[P*l+2]),l>=4&&v.setW(C,M[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,r).then(function(c){c.flipY=!1,c.name=o.name||a.name||"",c.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(c.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return c.magFilter=eP[h.magFilter]||rn,c.minFilter=eP[h.minFilter]||Ro,c.wrapS=tP[h.wrapS]||nu,c.wrapT=tP[h.wrapT]||nu,i.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(f){u=!0;const h=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(f){return new Promise(function(h,m){let y=h;t.isImageBitmapLoader===!0&&(y=function(g){const v=new xn(g);v.needsUpdate=!0,h(v)}),t.load(ta.resolveURL(f,s.path),y,void 0,m)})}).then(function(f){return u===!0&&a.revokeObjectURL(l),f.userData.mimeType=o.mimeType||_X(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=c,c}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[nn.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[nn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[nn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&("colorSpace"in o?o.colorSpace=i===3001?"srgb":"srgb-linear":o.encoding=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new _1,zn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new yi,zn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return Xd}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[nn.KHR_MATERIALS_UNLIT]){const f=i[nn.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),u.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new qe(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}f.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",f.baseColorTexture,3001)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Gr);const c=s.alphaMode||$x.OPAQUE;if(c===$x.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===$x.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Pi&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new De(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return s.occlusionTexture!==void 0&&o!==Pi&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Pi&&(a.emissive=new qe().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==Pi&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(u).then(function(){const f=new o(a);return s.name&&(f.name=s.name),Tl(f,s),t.associations.set(f,{materials:e}),s.extensions&&Nu(i,f,s),f})}createUniqueName(e){const t=ln.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[nn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return nP(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],c=yX(u),f=i[c];if(f)o.push(f.promise);else{let h;u.extensions&&u.extensions[nn.KHR_DRACO_MESH_COMPRESSION]?h=s(u):h=nP(new Lt,u,t),i[c]={primitive:u,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const c=o[l].material===void 0?mX(this.cache):this.getDependency("material",o[l].material);a.push(c)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),c=l[l.length-1],f=[];for(let m=0,y=c.length;m<y;m++){const g=c[m],v=o[m];let x;const _=u[m];if(v.mode===Os.TRIANGLES||v.mode===Os.TRIANGLE_STRIP||v.mode===Os.TRIANGLE_FAN||v.mode===void 0)x=s.isSkinnedMesh===!0?new EA(g,_):new Nn(g,_),x.isSkinnedMesh===!0&&x.normalizeSkinWeights(),v.mode===Os.TRIANGLE_STRIP?x.geometry=ZR(x.geometry,pA):v.mode===Os.TRIANGLE_FAN&&(x.geometry=ZR(x.geometry,wy));else if(v.mode===Os.LINES)x=new Io(g,_);else if(v.mode===Os.LINE_STRIP)x=new Wa(g,_);else if(v.mode===Os.LINE_LOOP)x=new TA(g,_);else if(v.mode===Os.POINTS)x=new RA(g,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(x.geometry.morphAttributes).length>0&&vX(x,s),x.name=t.createUniqueName(s.name||"mesh_"+e),Tl(x,s),v.extensions&&Nu(i,x,v),t.assignFinalMaterial(x),f.push(x)}for(let m=0,y=f.length;m<y;m++)t.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return s.extensions&&Nu(i,f[0],s),f[0];const h=new bo;s.extensions&&Nu(i,h,s),t.associations.set(h,{meshes:e});for(let m=0,y=f.length;m<y;m++)h.add(f[m]);return h})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new yr($s.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Hd(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Tl(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let u=0,c=o.length;u<c;u++){const f=o[u];if(f){a.push(f);const h=new bt;s!==null&&h.fromArray(s.array,u*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Hm(a,l)})}loadAnimation(e){const r=this.json.animations[e],i=r.name?r.name:"animation_"+e,s=[],o=[],a=[],l=[],u=[];for(let c=0,f=r.channels.length;c<f;c++){const h=r.channels[c],m=r.samplers[h.sampler],y=h.target,g=y.node,v=r.parameters!==void 0?r.parameters[m.input]:m.input,x=r.parameters!==void 0?r.parameters[m.output]:m.output;y.node!==void 0&&(s.push(this.getDependency("node",g)),o.push(this.getDependency("accessor",v)),a.push(this.getDependency("accessor",x)),l.push(m),u.push(y))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(c){const f=c[0],h=c[1],m=c[2],y=c[3],g=c[4],v=[];for(let x=0,_=f.length;x<_;x++){const w=f[x],A=h[x],R=m[x],M=y[x],P=g[x];if(w===void 0)continue;w.updateMatrix();let b;switch(xl[P.path]){case xl.weights:b=Md;break;case xl.rotation:b=su;break;case xl.position:case xl.scale:default:b=Ed;break}const C=w.name?w.name:w.uuid,T=M.interpolation!==void 0?pX[M.interpolation]:bc,I=[];xl[P.path]===xl.weights?w.traverse(function(z){z.morphTargetInfluences&&I.push(z.name?z.name:z.uuid)}):I.push(C);let D=R.array;if(R.normalized){const z=w2(D.constructor),N=new Float32Array(D.length);for(let J=0,Q=D.length;J<Q;J++)N[J]=D[J]*z;D=N}for(let z=0,N=I.length;z<N;z++){const J=new b(I[z]+"."+xl[P.path],A.array,D,T);M.interpolation==="CUBICSPLINE"&&(J.createInterpolant=function(re){const G=this instanceof su?hX:ek;return new G(this.times,this.values,this.getValueSize()/3,re)},J.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),v.push(J)}}return new Cd(i,void 0,v)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=i.weights.length;l<u;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let u=0,c=a.length;u<c;u++)o.push(r.getDependency("node",a[u]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const c=u[0],f=u[1],h=u[2];h!==null&&c.traverse(function(m){m.isSkinnedMesh&&m.bind(h,xX)});for(let m=0,y=f.length;m<y;m++)c.add(f[m]);return c})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(u){return i._getNodeRef(i.cameraCache,s.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let c;if(s.isBone===!0?c=new y1:u.length>1?c=new bo:u.length===1?c=u[0]:c=new un,c!==u[0])for(let f=0,h=u.length;f<h;f++)c.add(u[f]);if(s.name&&(c.userData.name=s.name,c.name=o),Tl(c,s),s.extensions&&Nu(r,c,s),s.matrix!==void 0){const f=new bt;f.fromArray(s.matrix),c.applyMatrix4(f)}else s.translation!==void 0&&c.position.fromArray(s.translation),s.rotation!==void 0&&c.quaternion.fromArray(s.rotation),s.scale!==void 0&&c.scale.fromArray(s.scale);return i.associations.has(c)||i.associations.set(c,{}),i.associations.get(c).nodes=e,c}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new bo;r.name&&(s.name=i.createUniqueName(r.name)),Tl(s,r),r.extensions&&Nu(t,s,r);const o=r.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let c=0,f=l.length;c<f;c++)s.add(l[c]);const u=c=>{const f=new Map;for(const[h,m]of i.associations)(h instanceof zn||h instanceof xn)&&f.set(h,m);return c.traverse(h=>{const m=i.associations.get(h);m!=null&&f.set(h,m)}),f};return i.associations=u(s),s})}}function SX(n,e,t){const r=e.attributes,i=new Ya;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(i.set(new V(l[0],l[1],l[2]),new V(u[0],u[1],u[2])),a.normalized){const c=w2(ad[a.componentType]);i.min.multiplyScalar(c),i.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new V,l=new V;for(let u=0,c=s.length;u<c;u++){const f=s[u];if(f.POSITION!==void 0){const h=t.json.accessors[f.POSITION],m=h.min,y=h.max;if(m!==void 0&&y!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(y[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(y[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(y[2]))),h.normalized){const g=w2(ad[h.componentType]);l.multiplyScalar(g)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new Qa;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function nP(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=x2[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Tl(n,e),SX(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?gX(n,e.targets,t):n})}class bX extends JA{constructor(e){super(e),this.type=Qr}parse(e){const a=function(w,A){switch(w){case 1:console.error("THREE.RGBELoader Read Error: "+(A||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(A||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(A||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(A||""))}return-1},f=`
`,h=function(w,A,R){A=A||1024;let P=w.pos,b=-1,C=0,T="",I=String.fromCharCode.apply(null,new Uint16Array(w.subarray(P,P+128)));for(;0>(b=I.indexOf(f))&&C<A&&P<w.byteLength;)T+=I,C+=I.length,P+=128,I+=String.fromCharCode.apply(null,new Uint16Array(w.subarray(P,P+128)));return-1<b?(R!==!1&&(w.pos+=C+b+1),T+I.slice(0,b)):!1},m=function(w){const A=/^#\?(\S+)/,R=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,M=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,P=/^\s*FORMAT=(\S+)\s*$/,b=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,C={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let T,I;if(w.pos>=w.byteLength||!(T=h(w)))return a(1,"no header found");if(!(I=T.match(A)))return a(3,"bad initial token");for(C.valid|=1,C.programtype=I[1],C.string+=T+`
`;T=h(w),T!==!1;){if(C.string+=T+`
`,T.charAt(0)==="#"){C.comments+=T+`
`;continue}if((I=T.match(R))&&(C.gamma=parseFloat(I[1])),(I=T.match(M))&&(C.exposure=parseFloat(I[1])),(I=T.match(P))&&(C.valid|=2,C.format=I[1]),(I=T.match(b))&&(C.valid|=4,C.height=parseInt(I[1],10),C.width=parseInt(I[2],10)),C.valid&2&&C.valid&4)break}return C.valid&2?C.valid&4?C:a(3,"missing image size specifier"):a(3,"missing format specifier")},y=function(w,A,R){const M=A;if(M<8||M>32767||w[0]!==2||w[1]!==2||w[2]&128)return new Uint8Array(w);if(M!==(w[2]<<8|w[3]))return a(3,"wrong scanline width");const P=new Uint8Array(4*A*R);if(!P.length)return a(4,"unable to allocate buffer space");let b=0,C=0;const T=4*M,I=new Uint8Array(4),D=new Uint8Array(T);let z=R;for(;z>0&&C<w.byteLength;){if(C+4>w.byteLength)return a(1);if(I[0]=w[C++],I[1]=w[C++],I[2]=w[C++],I[3]=w[C++],I[0]!=2||I[1]!=2||(I[2]<<8|I[3])!=M)return a(3,"bad rgbe scanline format");let N=0,J;for(;N<T&&C<w.byteLength;){J=w[C++];const re=J>128;if(re&&(J-=128),J===0||N+J>T)return a(3,"bad scanline data");if(re){const G=w[C++];for(let j=0;j<J;j++)D[N++]=G}else D.set(w.subarray(C,C+J),N),N+=J,C+=J}const Q=M;for(let re=0;re<Q;re++){let G=0;P[b]=D[re+G],G+=M,P[b+1]=D[re+G],G+=M,P[b+2]=D[re+G],G+=M,P[b+3]=D[re+G],b+=4}z--}return P},g=function(w,A,R,M){const P=w[A+3],b=Math.pow(2,P-128)/255;R[M+0]=w[A+0]*b,R[M+1]=w[A+1]*b,R[M+2]=w[A+2]*b,R[M+3]=1},v=function(w,A,R,M){const P=w[A+3],b=Math.pow(2,P-128)/255;R[M+0]=sc.toHalfFloat(Math.min(w[A+0]*b,65504)),R[M+1]=sc.toHalfFloat(Math.min(w[A+1]*b,65504)),R[M+2]=sc.toHalfFloat(Math.min(w[A+2]*b,65504)),R[M+3]=sc.toHalfFloat(1)},x=new Uint8Array(e);x.pos=0;const _=m(x);if(_!==-1){const w=_.width,A=_.height,R=y(x.subarray(x.pos),w,A);if(R!==-1){let M,P,b;switch(this.type){case Yr:b=R.length/4;const C=new Float32Array(b*4);for(let I=0;I<b;I++)g(R,I*4,C,I*4);M=C,P=Yr;break;case Qr:b=R.length/4;const T=new Uint16Array(b*4);for(let I=0;I<b;I++)v(R,I*4,T,I*4);M=T,P=Qr;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:w,height:A,data:M,header:_.string,gamma:_.gamma,exposure:_.exposure,type:P}}}return null}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case Yr:case Qr:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=rn,o.magFilter=rn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}}const sp="colorSpace"in new xn;class AX extends JA{constructor(e){super(e),this.type=Qr}parse(e){const C=Math.pow(2.7182818,2.2);function T(k,H){for(var ie=0,ye=0;ye<65536;++ye)(ye==0||k[ye>>3]&1<<(ye&7))&&(H[ie++]=ye);for(var we=ie-1;ie<65536;)H[ie++]=0;return we}function I(k){for(var H=0;H<16384;H++)k[H]={},k[H].len=0,k[H].lit=0,k[H].p=null}const D={l:0,c:0,lc:0};function z(k,H,ie,ye,we){for(;ie<k;)H=H<<8|Ve(ye,we),ie+=8;ie-=k,D.l=H>>ie&(1<<k)-1,D.c=H,D.lc=ie}const N=new Array(59);function J(k){for(var H=0;H<=58;++H)N[H]=0;for(var H=0;H<65537;++H)N[k[H]]+=1;for(var ie=0,H=58;H>0;--H){var ye=ie+N[H]>>1;N[H]=ie,ie=ye}for(var H=0;H<65537;++H){var we=k[H];we>0&&(k[H]=we|N[we]++<<6)}}function Q(k,H,ie,ye,we,Se,Je){for(var We=ie,Ye=0,Qe=0;we<=Se;we++){if(We.value-ie.value>ye)return!1;z(6,Ye,Qe,k,We);var Xe=D.l;if(Ye=D.c,Qe=D.lc,Je[we]=Xe,Xe==63){if(We.value-ie.value>ye)throw"Something wrong with hufUnpackEncTable";z(8,Ye,Qe,k,We);var _e=D.l+6;if(Ye=D.c,Qe=D.lc,we+_e>Se+1)throw"Something wrong with hufUnpackEncTable";for(;_e--;)Je[we++]=0;we--}else if(Xe>=59){var _e=Xe-59+2;if(we+_e>Se+1)throw"Something wrong with hufUnpackEncTable";for(;_e--;)Je[we++]=0;we--}}J(Je)}function re(k){return k&63}function G(k){return k>>6}function j(k,H,ie,ye){for(;H<=ie;H++){var we=G(k[H]),Se=re(k[H]);if(we>>Se)throw"Invalid table entry";if(Se>14){var Je=ye[we>>Se-14];if(Je.len)throw"Invalid table entry";if(Je.lit++,Je.p){var We=Je.p;Je.p=new Array(Je.lit);for(var Ye=0;Ye<Je.lit-1;++Ye)Je.p[Ye]=We[Ye]}else Je.p=new Array(1);Je.p[Je.lit-1]=H}else if(Se)for(var Qe=0,Ye=1<<14-Se;Ye>0;Ye--){var Je=ye[(we<<14-Se)+Qe];if(Je.len||Je.p)throw"Invalid table entry";Je.len=Se,Je.lit=H,Qe++}}return!0}const Y={c:0,lc:0};function X(k,H,ie,ye){k=k<<8|Ve(ie,ye),H+=8,Y.c=k,Y.lc=H}const K={c:0,lc:0};function ce(k,H,ie,ye,we,Se,Je,We,Ye,Qe){if(k==H){ye<8&&(X(ie,ye,we,Je),ie=Y.c,ye=Y.lc),ye-=8;var Xe=ie>>ye,Xe=new Uint8Array([Xe])[0];if(Ye.value+Xe>Qe)return!1;for(var _e=We[Ye.value-1];Xe-- >0;)We[Ye.value++]=_e}else if(Ye.value<Qe)We[Ye.value++]=k;else return!1;K.c=ie,K.lc=ye}function he(k){return k&65535}function te(k){var H=he(k);return H>32767?H-65536:H}const me={a:0,b:0};function pe(k,H){var ie=te(k),ye=te(H),we=ye,Se=ie+(we&1)+(we>>1),Je=Se,We=Se-we;me.a=Je,me.b=We}function oe(k,H){var ie=he(k),ye=he(H),we=ie-(ye>>1)&65535,Se=ye+we-32768&65535;me.a=Se,me.b=we}function U(k,H,ie,ye,we,Se,Je){for(var We=Je<16384,Ye=ie>we?we:ie,Qe=1,Xe;Qe<=Ye;)Qe<<=1;for(Qe>>=1,Xe=Qe,Qe>>=1;Qe>=1;){for(var _e=0,Vt=_e+Se*(we-Xe),it=Se*Qe,dt=Se*Xe,Rt=ye*Qe,At=ye*Xe,Ft,wt,St,Tt;_e<=Vt;_e+=dt){for(var Mt=_e,qt=_e+ye*(ie-Xe);Mt<=qt;Mt+=At){var Dt=Mt+Rt,en=Mt+it,hr=en+Rt;We?(pe(k[Mt+H],k[en+H]),Ft=me.a,St=me.b,pe(k[Dt+H],k[hr+H]),wt=me.a,Tt=me.b,pe(Ft,wt),k[Mt+H]=me.a,k[Dt+H]=me.b,pe(St,Tt),k[en+H]=me.a,k[hr+H]=me.b):(oe(k[Mt+H],k[en+H]),Ft=me.a,St=me.b,oe(k[Dt+H],k[hr+H]),wt=me.a,Tt=me.b,oe(Ft,wt),k[Mt+H]=me.a,k[Dt+H]=me.b,oe(St,Tt),k[en+H]=me.a,k[hr+H]=me.b)}if(ie&Qe){var en=Mt+it;We?pe(k[Mt+H],k[en+H]):oe(k[Mt+H],k[en+H]),Ft=me.a,k[en+H]=me.b,k[Mt+H]=Ft}}if(we&Qe)for(var Mt=_e,qt=_e+ye*(ie-Xe);Mt<=qt;Mt+=At){var Dt=Mt+Rt;We?pe(k[Mt+H],k[Dt+H]):oe(k[Mt+H],k[Dt+H]),Ft=me.a,k[Dt+H]=me.b,k[Mt+H]=Ft}Xe=Qe,Qe>>=1}return _e}function W(k,H,ie,ye,we,Se,Je,We,Ye,Qe){for(var Xe=0,_e=0,Vt=We,it=Math.trunc(we.value+(Se+7)/8);we.value<it;)for(X(Xe,_e,ie,we),Xe=Y.c,_e=Y.lc;_e>=14;){var dt=Xe>>_e-14&16383,Rt=H[dt];if(Rt.len)_e-=Rt.len,ce(Rt.lit,Je,Xe,_e,ie,ye,we,Ye,Qe,Vt),Xe=K.c,_e=K.lc;else{if(!Rt.p)throw"hufDecode issues";var At;for(At=0;At<Rt.lit;At++){for(var Ft=re(k[Rt.p[At]]);_e<Ft&&we.value<it;)X(Xe,_e,ie,we),Xe=Y.c,_e=Y.lc;if(_e>=Ft&&G(k[Rt.p[At]])==(Xe>>_e-Ft&(1<<Ft)-1)){_e-=Ft,ce(Rt.p[At],Je,Xe,_e,ie,ye,we,Ye,Qe,Vt),Xe=K.c,_e=K.lc;break}}if(At==Rt.lit)throw"hufDecode issues"}}var wt=8-Se&7;for(Xe>>=wt,_e-=wt;_e>0;){var Rt=H[Xe<<14-_e&16383];if(Rt.len)_e-=Rt.len,ce(Rt.lit,Je,Xe,_e,ie,ye,we,Ye,Qe,Vt),Xe=K.c,_e=K.lc;else throw"hufDecode issues"}return!0}function Z(k,H,ie,ye,we,Se){var Je={value:0},We=ie.value,Ye=Ge(H,ie),Qe=Ge(H,ie);ie.value+=4;var Xe=Ge(H,ie);if(ie.value+=4,Ye<0||Ye>=65537||Qe<0||Qe>=65537)throw"Something wrong with HUF_ENCSIZE";var _e=new Array(65537),Vt=new Array(16384);I(Vt);var it=ye-(ie.value-We);if(Q(k,H,ie,it,Ye,Qe,_e),Xe>8*(ye-(ie.value-We)))throw"Something wrong with hufUncompress";j(_e,Ye,Qe,Vt),W(_e,Vt,k,H,ie,Xe,Qe,Se,we,Je)}function q(k,H,ie){for(var ye=0;ye<ie;++ye)H[ye]=k[H[ye]]}function se(k){for(var H=1;H<k.length;H++){var ie=k[H-1]+k[H]-128;k[H]=ie}}function ge(k,H){for(var ie=0,ye=Math.floor((k.length+1)/2),we=0,Se=k.length-1;!(we>Se||(H[we++]=k[ie++],we>Se));)H[we++]=k[ye++]}function Me(k){for(var H=k.byteLength,ie=new Array,ye=0,we=new DataView(k);H>0;){var Se=we.getInt8(ye++);if(Se<0){var Je=-Se;H-=Je+1;for(var We=0;We<Je;We++)ie.push(we.getUint8(ye++))}else{var Je=Se;H-=2;for(var Ye=we.getUint8(ye++),We=0;We<Je+1;We++)ie.push(Ye)}}return ie}function Ce(k,H,ie,ye,we,Se){var Dt=new DataView(Se.buffer),Je=ie[k.idx[0]].width,We=ie[k.idx[0]].height,Ye=3,Qe=Math.floor(Je/8),Xe=Math.ceil(Je/8),_e=Math.ceil(We/8),Vt=Je-(Xe-1)*8,it=We-(_e-1)*8,dt={value:0},Rt=new Array(Ye),At=new Array(Ye),Ft=new Array(Ye),wt=new Array(Ye),St=new Array(Ye);for(let on=0;on<Ye;++on)St[on]=H[k.idx[on]],Rt[on]=on<1?0:Rt[on-1]+Xe*_e,At[on]=new Float32Array(64),Ft[on]=new Uint16Array(64),wt[on]=new Uint16Array(Xe*64);for(let on=0;on<_e;++on){var Tt=8;on==_e-1&&(Tt=it);var Mt=8;for(let tn=0;tn<Xe;++tn){tn==Xe-1&&(Mt=Vt);for(let an=0;an<Ye;++an)Ft[an].fill(0),Ft[an][0]=we[Rt[an]++],Ke(dt,ye,Ft[an]),Re(Ft[an],At[an]),Oe(At[an]);ze(At);for(let an=0;an<Ye;++an)Ee(At[an],wt[an],tn*64)}let Gn=0;for(let tn=0;tn<Ye;++tn){const an=ie[k.idx[tn]].type;for(let yn=8*on;yn<8*on+Tt;++yn){Gn=St[tn][yn];for(let ki=0;ki<Qe;++ki){const sr=ki*64+(yn&7)*8;Dt.setUint16(Gn+0*2*an,wt[tn][sr+0],!0),Dt.setUint16(Gn+1*2*an,wt[tn][sr+1],!0),Dt.setUint16(Gn+2*2*an,wt[tn][sr+2],!0),Dt.setUint16(Gn+3*2*an,wt[tn][sr+3],!0),Dt.setUint16(Gn+4*2*an,wt[tn][sr+4],!0),Dt.setUint16(Gn+5*2*an,wt[tn][sr+5],!0),Dt.setUint16(Gn+6*2*an,wt[tn][sr+6],!0),Dt.setUint16(Gn+7*2*an,wt[tn][sr+7],!0),Gn+=8*2*an}}if(Qe!=Xe)for(let yn=8*on;yn<8*on+Tt;++yn){const ki=St[tn][yn]+8*Qe*2*an,sr=Qe*64+(yn&7)*8;for(let ns=0;ns<Mt;++ns)Dt.setUint16(ki+ns*2*an,wt[tn][sr+ns],!0)}}}for(var qt=new Uint16Array(Je),Dt=new DataView(Se.buffer),en=0;en<Ye;++en){ie[k.idx[en]].decoded=!0;var hr=ie[k.idx[en]].type;if(ie[en].type==2)for(var bn=0;bn<We;++bn){const on=St[en][bn];for(var ir=0;ir<Je;++ir)qt[ir]=Dt.getUint16(on+ir*2*hr,!0);for(var ir=0;ir<Je;++ir)Dt.setFloat32(on+ir*2*hr,de(qt[ir]),!0)}}}function Ke(k,H,ie){for(var ye,we=1;we<64;)ye=H[k.value],ye==65280?we=64:ye>>8==255?we+=ye&255:(ie[we]=ye,we++),k.value++}function Re(k,H){H[0]=de(k[0]),H[1]=de(k[1]),H[2]=de(k[5]),H[3]=de(k[6]),H[4]=de(k[14]),H[5]=de(k[15]),H[6]=de(k[27]),H[7]=de(k[28]),H[8]=de(k[2]),H[9]=de(k[4]),H[10]=de(k[7]),H[11]=de(k[13]),H[12]=de(k[16]),H[13]=de(k[26]),H[14]=de(k[29]),H[15]=de(k[42]),H[16]=de(k[3]),H[17]=de(k[8]),H[18]=de(k[12]),H[19]=de(k[17]),H[20]=de(k[25]),H[21]=de(k[30]),H[22]=de(k[41]),H[23]=de(k[43]),H[24]=de(k[9]),H[25]=de(k[11]),H[26]=de(k[18]),H[27]=de(k[24]),H[28]=de(k[31]),H[29]=de(k[40]),H[30]=de(k[44]),H[31]=de(k[53]),H[32]=de(k[10]),H[33]=de(k[19]),H[34]=de(k[23]),H[35]=de(k[32]),H[36]=de(k[39]),H[37]=de(k[45]),H[38]=de(k[52]),H[39]=de(k[54]),H[40]=de(k[20]),H[41]=de(k[22]),H[42]=de(k[33]),H[43]=de(k[38]),H[44]=de(k[46]),H[45]=de(k[51]),H[46]=de(k[55]),H[47]=de(k[60]),H[48]=de(k[21]),H[49]=de(k[34]),H[50]=de(k[37]),H[51]=de(k[47]),H[52]=de(k[50]),H[53]=de(k[56]),H[54]=de(k[59]),H[55]=de(k[61]),H[56]=de(k[35]),H[57]=de(k[36]),H[58]=de(k[48]),H[59]=de(k[49]),H[60]=de(k[57]),H[61]=de(k[58]),H[62]=de(k[62]),H[63]=de(k[63])}function Oe(k){const H=.5*Math.cos(.7853975),ie=.5*Math.cos(3.14159/16),ye=.5*Math.cos(3.14159/8),we=.5*Math.cos(3*3.14159/16),Se=.5*Math.cos(5*3.14159/16),Je=.5*Math.cos(3*3.14159/8),We=.5*Math.cos(7*3.14159/16);for(var Ye=new Array(4),Qe=new Array(4),Xe=new Array(4),_e=new Array(4),Vt=0;Vt<8;++Vt){var it=Vt*8;Ye[0]=ye*k[it+2],Ye[1]=Je*k[it+2],Ye[2]=ye*k[it+6],Ye[3]=Je*k[it+6],Qe[0]=ie*k[it+1]+we*k[it+3]+Se*k[it+5]+We*k[it+7],Qe[1]=we*k[it+1]-We*k[it+3]-ie*k[it+5]-Se*k[it+7],Qe[2]=Se*k[it+1]-ie*k[it+3]+We*k[it+5]+we*k[it+7],Qe[3]=We*k[it+1]-Se*k[it+3]+we*k[it+5]-ie*k[it+7],Xe[0]=H*(k[it+0]+k[it+4]),Xe[3]=H*(k[it+0]-k[it+4]),Xe[1]=Ye[0]+Ye[3],Xe[2]=Ye[1]-Ye[2],_e[0]=Xe[0]+Xe[1],_e[1]=Xe[3]+Xe[2],_e[2]=Xe[3]-Xe[2],_e[3]=Xe[0]-Xe[1],k[it+0]=_e[0]+Qe[0],k[it+1]=_e[1]+Qe[1],k[it+2]=_e[2]+Qe[2],k[it+3]=_e[3]+Qe[3],k[it+4]=_e[3]-Qe[3],k[it+5]=_e[2]-Qe[2],k[it+6]=_e[1]-Qe[1],k[it+7]=_e[0]-Qe[0]}for(var dt=0;dt<8;++dt)Ye[0]=ye*k[16+dt],Ye[1]=Je*k[16+dt],Ye[2]=ye*k[48+dt],Ye[3]=Je*k[48+dt],Qe[0]=ie*k[8+dt]+we*k[24+dt]+Se*k[40+dt]+We*k[56+dt],Qe[1]=we*k[8+dt]-We*k[24+dt]-ie*k[40+dt]-Se*k[56+dt],Qe[2]=Se*k[8+dt]-ie*k[24+dt]+We*k[40+dt]+we*k[56+dt],Qe[3]=We*k[8+dt]-Se*k[24+dt]+we*k[40+dt]-ie*k[56+dt],Xe[0]=H*(k[dt]+k[32+dt]),Xe[3]=H*(k[dt]-k[32+dt]),Xe[1]=Ye[0]+Ye[3],Xe[2]=Ye[1]-Ye[2],_e[0]=Xe[0]+Xe[1],_e[1]=Xe[3]+Xe[2],_e[2]=Xe[3]-Xe[2],_e[3]=Xe[0]-Xe[1],k[0+dt]=_e[0]+Qe[0],k[8+dt]=_e[1]+Qe[1],k[16+dt]=_e[2]+Qe[2],k[24+dt]=_e[3]+Qe[3],k[32+dt]=_e[3]-Qe[3],k[40+dt]=_e[2]-Qe[2],k[48+dt]=_e[1]-Qe[1],k[56+dt]=_e[0]-Qe[0]}function ze(k){for(var H=0;H<64;++H){var ie=k[0][H],ye=k[1][H],we=k[2][H];k[0][H]=ie+1.5747*we,k[1][H]=ie-.1873*ye-.4682*we,k[2][H]=ie+1.8556*ye}}function Ee(k,H,ie){for(var ye=0;ye<64;++ye)H[ie+ye]=sc.toHalfFloat($(k[ye]))}function $(k){return k<=1?Math.sign(k)*Math.pow(Math.abs(k),2.2):Math.sign(k)*Math.pow(C,Math.abs(k)-1)}function O(k){return new DataView(k.array.buffer,k.offset.value,k.size)}function ae(k){var H=k.viewer.buffer.slice(k.offset.value,k.offset.value+k.size),ie=new Uint8Array(Me(H)),ye=new Uint8Array(ie.length);return se(ie),ge(ie,ye),new DataView(ye.buffer)}function Ae(k){var H=k.array.slice(k.offset.value,k.offset.value+k.size),ie=sv(H),ye=new Uint8Array(ie.length);return se(ie),ge(ie,ye),new DataView(ye.buffer)}function ke(k){for(var H=k.viewer,ie={value:k.offset.value},ye=new Uint16Array(k.width*k.scanlineBlockSize*(k.channels*k.type)),we=new Uint8Array(8192),Se=0,Je=new Array(k.channels),We=0;We<k.channels;We++)Je[We]={},Je[We].start=Se,Je[We].end=Je[We].start,Je[We].nx=k.width,Je[We].ny=k.lines,Je[We].size=k.type,Se+=Je[We].nx*Je[We].ny*Je[We].size;var Ye=He(H,ie),Qe=He(H,ie);if(Qe>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Ye<=Qe)for(var We=0;We<Qe-Ye+1;We++)we[We+Ye]=rt(H,ie);var Xe=new Uint16Array(65536),_e=T(we,Xe),Vt=Ge(H,ie);Z(k.array,H,ie,Vt,ye,Se);for(var We=0;We<k.channels;++We)for(var it=Je[We],dt=0;dt<Je[We].size;++dt)U(ye,it.start+dt,it.nx,it.size,it.ny,it.nx*it.size,_e);q(Xe,ye,Se);for(var Rt=0,At=new Uint8Array(ye.buffer.byteLength),Ft=0;Ft<k.lines;Ft++)for(var wt=0;wt<k.channels;wt++){var it=Je[wt],St=it.nx*it.size,Tt=new Uint8Array(ye.buffer,it.end*2,St*2);At.set(Tt,Rt),Rt+=St*2,it.end+=St}return new DataView(At.buffer)}function Ue(k){var H=k.array.slice(k.offset.value,k.offset.value+k.size),ie=sv(H);const ye=k.lines*k.channels*k.width,we=k.type==1?new Uint16Array(ye):new Uint32Array(ye);let Se=0,Je=0;const We=new Array(4);for(let Ye=0;Ye<k.lines;Ye++)for(let Qe=0;Qe<k.channels;Qe++){let Xe=0;switch(k.type){case 1:We[0]=Se,We[1]=We[0]+k.width,Se=We[1]+k.width;for(let _e=0;_e<k.width;++_e){const Vt=ie[We[0]++]<<8|ie[We[1]++];Xe+=Vt,we[Je]=Xe,Je++}break;case 2:We[0]=Se,We[1]=We[0]+k.width,We[2]=We[1]+k.width,Se=We[2]+k.width;for(let _e=0;_e<k.width;++_e){const Vt=ie[We[0]++]<<24|ie[We[1]++]<<16|ie[We[2]++]<<8;Xe+=Vt,we[Je]=Xe,Je++}break}}return new DataView(we.buffer)}function je(k){var H=k.viewer,ie={value:k.offset.value},ye=new Uint8Array(k.width*k.lines*(k.channels*k.type*2)),we={version:ft(H,ie),unknownUncompressedSize:ft(H,ie),unknownCompressedSize:ft(H,ie),acCompressedSize:ft(H,ie),dcCompressedSize:ft(H,ie),rleCompressedSize:ft(H,ie),rleUncompressedSize:ft(H,ie),rleRawSize:ft(H,ie),totalAcUncompressedCount:ft(H,ie),totalDcUncompressedCount:ft(H,ie),acCompression:ft(H,ie)};if(we.version<2)throw"EXRLoader.parse: "+Pe.compression+" version "+we.version+" is unsupported";for(var Se=new Array,Je=He(H,ie)-2;Je>0;){var We=Ne(H.buffer,ie),Ye=rt(H,ie),Qe=Ye>>2&3,Xe=(Ye>>4)-1,_e=new Int8Array([Xe])[0],Vt=rt(H,ie);Se.push({name:We,index:_e,type:Vt,compression:Qe}),Je-=We.length+3}for(var it=Pe.channels,dt=new Array(k.channels),Rt=0;Rt<k.channels;++Rt){var At=dt[Rt]={},Ft=it[Rt];At.name=Ft.name,At.compression=0,At.decoded=!1,At.type=Ft.pixelType,At.pLinear=Ft.pLinear,At.width=k.width,At.height=k.lines}for(var wt={idx:new Array(3)},St=0;St<k.channels;++St)for(var At=dt[St],Rt=0;Rt<Se.length;++Rt){var Tt=Se[Rt];At.name==Tt.name&&(At.compression=Tt.compression,Tt.index>=0&&(wt.idx[Tt.index]=St),At.offset=St)}if(we.acCompressedSize>0)switch(we.acCompression){case 0:var Dt=new Uint16Array(we.totalAcUncompressedCount);Z(k.array,H,ie,we.acCompressedSize,Dt,we.totalAcUncompressedCount);break;case 1:var Mt=k.array.slice(ie.value,ie.value+we.totalAcUncompressedCount),qt=sv(Mt),Dt=new Uint16Array(qt.buffer);ie.value+=we.totalAcUncompressedCount;break}if(we.dcCompressedSize>0){var en={array:k.array,offset:ie,size:we.dcCompressedSize},hr=new Uint16Array(Ae(en).buffer);ie.value+=we.dcCompressedSize}if(we.rleRawSize>0){var Mt=k.array.slice(ie.value,ie.value+we.rleCompressedSize),qt=sv(Mt),bn=Me(qt.buffer);ie.value+=we.rleCompressedSize}for(var ir=0,on=new Array(dt.length),Rt=0;Rt<on.length;++Rt)on[Rt]=new Array;for(var Gn=0;Gn<k.lines;++Gn)for(var tn=0;tn<dt.length;++tn)on[tn].push(ir),ir+=dt[tn].width*k.type*2;Ce(wt,on,dt,Dt,hr,ye);for(var Rt=0;Rt<dt.length;++Rt){var At=dt[Rt];if(!At.decoded)switch(At.compression){case 2:for(var an=0,yn=0,Gn=0;Gn<k.lines;++Gn){for(var ki=on[Rt][an],sr=0;sr<At.width;++sr){for(var ns=0;ns<2*At.type;++ns)ye[ki++]=bn[yn+ns*At.width*At.height];yn++}an++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(ye.buffer)}function Ne(k,H){for(var ie=new Uint8Array(k),ye=0;ie[H.value+ye]!=0;)ye+=1;var we=new TextDecoder().decode(ie.slice(H.value,H.value+ye));return H.value=H.value+ye+1,we}function Be(k,H,ie){var ye=new TextDecoder().decode(new Uint8Array(k).slice(H.value,H.value+ie));return H.value=H.value+ie,ye}function nt(k,H){var ie=et(k,H),ye=Ge(k,H);return[ie,ye]}function $e(k,H){var ie=Ge(k,H),ye=Ge(k,H);return[ie,ye]}function et(k,H){var ie=k.getInt32(H.value,!0);return H.value=H.value+4,ie}function Ge(k,H){var ie=k.getUint32(H.value,!0);return H.value=H.value+4,ie}function Ve(k,H){var ie=k[H.value];return H.value=H.value+1,ie}function rt(k,H){var ie=k.getUint8(H.value);return H.value=H.value+1,ie}const ft=function(k,H){let ie;return"getBigInt64"in DataView.prototype?ie=Number(k.getBigInt64(H.value,!0)):ie=k.getUint32(H.value+4,!0)+Number(k.getUint32(H.value,!0)<<32),H.value+=8,ie};function yt(k,H){var ie=k.getFloat32(H.value,!0);return H.value+=4,ie}function ue(k,H){return sc.toHalfFloat(yt(k,H))}function de(k){var H=(k&31744)>>10,ie=k&1023;return(k>>15?-1:1)*(H?H===31?ie?NaN:1/0:Math.pow(2,H-15)*(1+ie/1024):6103515625e-14*(ie/1024))}function He(k,H){var ie=k.getUint16(H.value,!0);return H.value+=2,ie}function st(k,H){return de(He(k,H))}function lt(k,H,ie,ye){for(var we=ie.value,Se=[];ie.value<we+ye-1;){var Je=Ne(H,ie),We=et(k,ie),Ye=rt(k,ie);ie.value+=3;var Qe=et(k,ie),Xe=et(k,ie);Se.push({name:Je,pixelType:We,pLinear:Ye,xSampling:Qe,ySampling:Xe})}return ie.value+=1,Se}function Gt(k,H){var ie=yt(k,H),ye=yt(k,H),we=yt(k,H),Se=yt(k,H),Je=yt(k,H),We=yt(k,H),Ye=yt(k,H),Qe=yt(k,H);return{redX:ie,redY:ye,greenX:we,greenY:Se,blueX:Je,blueY:We,whiteX:Ye,whiteY:Qe}}function Yt(k,H){var ie=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],ye=rt(k,H);return ie[ye]}function cn(k,H){var ie=Ge(k,H),ye=Ge(k,H),we=Ge(k,H),Se=Ge(k,H);return{xMin:ie,yMin:ye,xMax:we,yMax:Se}}function $t(k,H){var ie=["INCREASING_Y"],ye=rt(k,H);return ie[ye]}function hn(k,H){var ie=yt(k,H),ye=yt(k,H);return[ie,ye]}function Ht(k,H){var ie=yt(k,H),ye=yt(k,H),we=yt(k,H);return[ie,ye,we]}function Xt(k,H,ie,ye,we){if(ye==="string"||ye==="stringvector"||ye==="iccProfile")return Be(H,ie,we);if(ye==="chlist")return lt(k,H,ie,we);if(ye==="chromaticities")return Gt(k,ie);if(ye==="compression")return Yt(k,ie);if(ye==="box2i")return cn(k,ie);if(ye==="lineOrder")return $t(k,ie);if(ye==="float")return yt(k,ie);if(ye==="v2f")return hn(k,ie);if(ye==="v3f")return Ht(k,ie);if(ye==="int")return et(k,ie);if(ye==="rational")return nt(k,ie);if(ye==="timecode")return $e(k,ie);if(ye==="preview")return ie.value+=we,"skipped";ie.value+=we}function Wr(k,H,ie){const ye={};if(k.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";ye.version=k.getUint8(4);const we=k.getUint8(5);ye.spec={singleTile:!!(we&2),longName:!!(we&4),deepFormat:!!(we&8),multiPart:!!(we&16)},ie.value=8;for(var Se=!0;Se;){var Je=Ne(H,ie);if(Je==0)Se=!1;else{var We=Ne(H,ie),Ye=Ge(k,ie),Qe=Xt(k,H,ie,We,Ye);Qe===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${We}'.`):ye[Je]=Qe}}if(we&-5)throw console.error("EXRHeader:",ye),"THREE.EXRLoader: provided file is currently unsupported.";return ye}function br(k,H,ie,ye,we){const Se={size:0,viewer:H,array:ie,offset:ye,width:k.dataWindow.xMax-k.dataWindow.xMin+1,height:k.dataWindow.yMax-k.dataWindow.yMin+1,channels:k.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:k.channels[0].pixelType,uncompress:null,getter:null,format:null,[sp?"colorSpace":"encoding"]:null};switch(k.compression){case"NO_COMPRESSION":Se.lines=1,Se.uncompress=O;break;case"RLE_COMPRESSION":Se.lines=1,Se.uncompress=ae;break;case"ZIPS_COMPRESSION":Se.lines=1,Se.uncompress=Ae;break;case"ZIP_COMPRESSION":Se.lines=16,Se.uncompress=Ae;break;case"PIZ_COMPRESSION":Se.lines=32,Se.uncompress=ke;break;case"PXR24_COMPRESSION":Se.lines=16,Se.uncompress=Ue;break;case"DWAA_COMPRESSION":Se.lines=32,Se.uncompress=je;break;case"DWAB_COMPRESSION":Se.lines=256,Se.uncompress=je;break;default:throw"EXRLoader.parse: "+k.compression+" is unsupported"}if(Se.scanlineBlockSize=Se.lines,Se.type==1)switch(we){case Yr:Se.getter=st,Se.inputSize=2;break;case Qr:Se.getter=He,Se.inputSize=2;break}else if(Se.type==2)switch(we){case Yr:Se.getter=yt,Se.inputSize=4;break;case Qr:Se.getter=ue,Se.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Se.type+" for "+k.compression+".";Se.blockCount=(k.dataWindow.yMax+1)/Se.scanlineBlockSize;for(var Je=0;Je<Se.blockCount;Je++)ft(H,ye);Se.outputChannels=Se.channels==3?4:Se.channels;const We=Se.width*Se.height*Se.outputChannels;switch(we){case Yr:Se.byteArray=new Float32Array(We),Se.channels<Se.outputChannels&&Se.byteArray.fill(1,0,We);break;case Qr:Se.byteArray=new Uint16Array(We),Se.channels<Se.outputChannels&&Se.byteArray.fill(15360,0,We);break;default:console.error("THREE.EXRLoader: unsupported type: ",we);break}return Se.bytesPerLine=Se.width*Se.inputSize*Se.channels,Se.outputChannels==4?Se.format=Ri:Se.format=dA,sp?Se.colorSpace="srgb-linear":Se.encoding=3e3,Se}const Kt=new DataView(e),ee=new Uint8Array(e),be={value:0},Pe=Wr(Kt,e,be),fe=br(Pe,Kt,ee,be,this.type),Ie={value:0},gt={R:0,G:1,B:2,A:3,Y:0};for(let k=0;k<fe.height/fe.scanlineBlockSize;k++){const H=Ge(Kt,be);fe.size=Ge(Kt,be),fe.lines=H+fe.scanlineBlockSize>fe.height?fe.height-H:fe.scanlineBlockSize;const ye=fe.size<fe.lines*fe.bytesPerLine?fe.uncompress(fe):O(fe);be.value+=fe.size;for(let we=0;we<fe.scanlineBlockSize;we++){const Se=we+k*fe.scanlineBlockSize;if(Se>=fe.height)break;for(let Je=0;Je<fe.channels;Je++){const We=gt[Pe.channels[Je].name];for(let Ye=0;Ye<fe.width;Ye++){Ie.value=(we*(fe.channels*fe.width)+Je*fe.width+Ye)*fe.inputSize;const Qe=(fe.height-1-Se)*(fe.width*fe.outputChannels)+Ye*fe.outputChannels+We;fe.byteArray[Qe]=fe.getter(ye,Ie)}}}}return{header:Pe,width:fe.width,height:fe.height,data:fe.byteArray,format:fe.format,[sp?"colorSpace":"encoding"]:fe[sp?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){sp?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=rn,o.magFilter=rn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,r,i)}}const Xx=new WeakMap;class MX extends Fi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new xs(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const r=JSON.stringify(t);if(Xx.has(e)){const l=Xx.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((u,c)=>{i._callbacks[s]={resolve:u,reject:c},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),Xx.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new Lt;e.index&&t.setIndex(new Qt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new Qt(o,a))}return t}_loadLibrary(e,t){const r=new xs(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=EX.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function EX(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(c){n.onModuleLoaded=function(f){c({draco:f})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(c=>{const f=c.draco,h=new f.Decoder,m=new f.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const y=t(f,h,m,u),g=y.attributes.map(v=>v.array.buffer);y.index&&g.push(y.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:y},g)}catch(y){console.error(y),self.postMessage({type:"error",id:a.id,error:y.message})}finally{f.destroy(m),f.destroy(h)}});break}};function t(o,a,l,u){const c=u.attributeIDs,f=u.attributeTypes;let h,m;const y=a.GetEncodedGeometryType(l);if(y===o.TRIANGULAR_MESH)h=new o.Mesh,m=a.DecodeBufferToMesh(l,h);else if(y===o.POINT_CLOUD)h=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const g={index:null,attributes:[]};for(const v in c){const x=self[f[v]];let _,w;if(u.useUniqueIDs)w=c[v],_=a.GetAttributeByUniqueId(h,w);else{if(w=a.GetAttributeId(h,o[c[v]]),w===-1)continue;_=a.GetAttribute(h,w)}g.attributes.push(i(o,a,h,v,x,_))}return y===o.TRIANGULAR_MESH&&(g.index=r(o,a,h)),o.destroy(h),g}function r(o,a,l){const c=l.num_faces()*3,f=c*4,h=o._malloc(f);a.GetTrianglesUInt32Array(l,f,h);const m=new Uint32Array(o.HEAPF32.buffer,h,c).slice();return o._free(h),{array:m,itemSize:1}}function i(o,a,l,u,c,f){const h=f.num_components(),y=l.num_points()*h,g=y*c.BYTES_PER_ELEMENT,v=s(o,c),x=o._malloc(g);a.GetAttributeDataArrayForAllPoints(l,f,v,g,x);const _=new c(o.HEAPF32.buffer,x,y).slice();return o._free(x),{name:u,array:_,itemSize:h}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let ov;const Kx=()=>{if(ov)return ov;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const h=new Uint8Array(f.length);for(let y=0;y<f.length;++y){const g=f.charCodeAt(y);h[y]=g>96?g-71:g>64?g-65:g>47?g+4:g>46?63:62}let m=0;for(let y=0;y<f.length;++y)h[m++]=h[y]<60?r[h[y]]:(h[y]-60)*64+h[++y];return h.buffer.slice(0,m)}function l(f,h,m,y,g,v){const x=s.exports.sbrk,_=m+3&-4,w=x(_*y),A=x(g.length),R=new Uint8Array(s.exports.memory.buffer);R.set(g,A);const M=f(w,m,y,A,g.length);if(M===0&&v&&v(w,_,y),h.set(R.subarray(w,w+m*y)),x(w-x(0)),M!==0)throw new Error(`Malformed buffer data: ${M}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},c={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return ov={ready:o,supported:!0,decodeVertexBuffer(f,h,m,y,g){l(s.exports.meshopt_decodeVertexBuffer,f,h,m,y,s.exports[u[g]])},decodeIndexBuffer(f,h,m,y){l(s.exports.meshopt_decodeIndexBuffer,f,h,m,y)},decodeIndexSequence(f,h,m,y){l(s.exports.meshopt_decodeIndexSequence,f,h,m,y)},decodeGltfBuffer(f,h,m,y,g,v){l(s.exports[c[g]],f,h,m,y,s.exports[u[v]])}},ov};function tk(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}function CX(){var n=Object.create(null);function e(i,s){var o=i.id,a=i.name,l=i.dependencies;l===void 0&&(l=[]);var u=i.init;u===void 0&&(u=function(){});var c=i.getTransferables;if(c===void 0&&(c=null),!n[o])try{l=l.map(function(h){return h&&h.isWorkerModule&&(e(h,function(m){if(m instanceof Error)throw m}),h=n[h.id].value),h}),u=r("<"+a+">.init",u),c&&(c=r("<"+a+">.getTransferables",c));var f=null;typeof u=="function"?f=u.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:f,getTransferables:c},s(f)}catch(h){h&&h.noLog||console.error(h),s(h)}}function t(i,s){var o,a=i.id,l=i.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var u=(o=n[a]).value.apply(o,l);u&&typeof u.then=="function"?u.then(c,function(f){return s(f instanceof Error?f:new Error(""+f))}):c(u)}catch(f){s(f)}function c(f){try{var h=n[a].getTransferables&&n[a].getTransferables(f);(!h||!Array.isArray(h)||!h.length)&&(h=void 0),s(f,h)}catch(m){console.error(m),s(m)}}}function r(i,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(i){var s=i.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(u){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof u=="function"}})}),a==="callModule"&&t(l,function(u,c){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:u},c||void 0)})}catch(u){postMessage({messageId:o,success:!1,error:u.stack})}})}function TX(n){var e=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,r=n.init;t=Array.isArray(t)?t.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var i=Promise.all(t).then(function(s){return r.apply(null,s)});return e._getInitResult=function(){return i},i},e}var nk=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return nk=function(){return n},n},RX=0,PX=0,Yx=!1,Np=Object.create(null),zp=Object.create(null),S2=Object.create(null);function sg(n){if((!n||typeof n.init!="function")&&!Yx)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,r=n.getTransferables,i=n.workerId;if(!nk())return TX(n);i==null&&(i="#default");var s="workerModule"+ ++RX,o=n.name||s,a=null;e=e&&e.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(Yx=!0,u=sg({workerId:i,name:"<"+o+"> function dependency: "+u.name,init:`function(){return (
`+Hv(u)+`
)}`}),Yx=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function l(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(!a){a=rP(i,"registerModule",l.workerModuleData);var f=function(){a=null,zp[i].delete(f)};(zp[i]||(zp[i]=new Set)).add(f)}return a.then(function(h){var m=h.isCallable;if(m)return rP(i,"callModule",{id:s,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:Hv(t),getTransferables:r&&Hv(r)},l}function BX(n){zp[n]&&zp[n].forEach(function(e){e()}),Np[n]&&(Np[n].terminate(),delete Np[n])}function Hv(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function IX(n){var e=Np[n];if(!e){var t=Hv(CX);e=Np[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,s=i.messageId,o=S2[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete S2[s],o(i)}}return e}function rP(n,e,t){return new Promise(function(r,i){var s=++PX;S2[s]=function(o){o.success?r(o.result):i(new Error("Error in worker "+e+" call: "+o.error))},IX(n).postMessage({messageId:s,action:e,data:t})})}function rk(){var n=function(e){function t(j,Y,X,K,ce,he,te,me){var pe=1-te;me.x=pe*pe*j+2*pe*te*X+te*te*ce,me.y=pe*pe*Y+2*pe*te*K+te*te*he}function r(j,Y,X,K,ce,he,te,me,pe,oe){var U=1-pe;oe.x=U*U*U*j+3*U*U*pe*X+3*U*pe*pe*ce+pe*pe*pe*te,oe.y=U*U*U*Y+3*U*U*pe*K+3*U*pe*pe*he+pe*pe*pe*me}function i(j,Y){for(var X=/([MLQCZ])([^MLQCZ]*)/g,K,ce,he,te,me;K=X.exec(j);){var pe=K[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(oe){return parseFloat(oe)});switch(K[1]){case"M":te=ce=pe[0],me=he=pe[1];break;case"L":(pe[0]!==te||pe[1]!==me)&&Y("L",te,me,te=pe[0],me=pe[1]);break;case"Q":{Y("Q",te,me,te=pe[2],me=pe[3],pe[0],pe[1]);break}case"C":{Y("C",te,me,te=pe[4],me=pe[5],pe[0],pe[1],pe[2],pe[3]);break}case"Z":(te!==ce||me!==he)&&Y("L",te,me,ce,he);break}}}function s(j,Y,X){X===void 0&&(X=16);var K={x:0,y:0};i(j,function(ce,he,te,me,pe,oe,U,W,Z){switch(ce){case"L":Y(he,te,me,pe);break;case"Q":{for(var q=he,se=te,ge=1;ge<X;ge++)t(he,te,oe,U,me,pe,ge/(X-1),K),Y(q,se,K.x,K.y),q=K.x,se=K.y;break}case"C":{for(var Me=he,Ce=te,Ke=1;Ke<X;Ke++)r(he,te,oe,U,W,Z,me,pe,Ke/(X-1),K),Y(Me,Ce,K.x,K.y),Me=K.x,Ce=K.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function c(j,Y){var X=j.getContext?j.getContext("webgl",u):j,K=l.get(X);if(!K){let Me=function(Ee){var $=he[Ee];if(!$&&($=he[Ee]=X.getExtension(Ee),!$))throw new Error(Ee+" not supported");return $},Ce=function(Ee,$){var O=X.createShader($);return X.shaderSource(O,Ee),X.compileShader(O),O},Ke=function(Ee,$,O,ae){if(!te[Ee]){var Ae={},ke={},Ue=X.createProgram();X.attachShader(Ue,Ce($,X.VERTEX_SHADER)),X.attachShader(Ue,Ce(O,X.FRAGMENT_SHADER)),X.linkProgram(Ue),te[Ee]={program:Ue,transaction:function(Ne){X.useProgram(Ue),Ne({setUniform:function(nt,$e){for(var et=[],Ge=arguments.length-2;Ge-- >0;)et[Ge]=arguments[Ge+2];var Ve=ke[$e]||(ke[$e]=X.getUniformLocation(Ue,$e));X["uniform"+nt].apply(X,[Ve].concat(et))},setAttribute:function(nt,$e,et,Ge,Ve){var rt=Ae[nt];rt||(rt=Ae[nt]={buf:X.createBuffer(),loc:X.getAttribLocation(Ue,nt),data:null}),X.bindBuffer(X.ARRAY_BUFFER,rt.buf),X.vertexAttribPointer(rt.loc,$e,X.FLOAT,!1,0,0),X.enableVertexAttribArray(rt.loc),ce?X.vertexAttribDivisor(rt.loc,Ge):Me("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(rt.loc,Ge),Ve!==rt.data&&(X.bufferData(X.ARRAY_BUFFER,Ve,et),rt.data=Ve)}})}}}te[Ee].transaction(ae)},Re=function(Ee,$){pe++;try{X.activeTexture(X.TEXTURE0+pe);var O=me[Ee];O||(O=me[Ee]=X.createTexture(),X.bindTexture(X.TEXTURE_2D,O),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,X.NEAREST),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,X.NEAREST)),X.bindTexture(X.TEXTURE_2D,O),$(O,pe)}finally{pe--}},Oe=function(Ee,$,O){var ae=X.createFramebuffer();oe.push(ae),X.bindFramebuffer(X.FRAMEBUFFER,ae),X.activeTexture(X.TEXTURE0+$),X.bindTexture(X.TEXTURE_2D,Ee),X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,Ee,0);try{O(ae)}finally{X.deleteFramebuffer(ae),X.bindFramebuffer(X.FRAMEBUFFER,oe[--oe.length-1]||null)}},ze=function(){he={},te={},me={},pe=-1,oe.length=0};var U=Me,W=Ce,Z=Ke,q=Re,se=Oe,ge=ze,ce=typeof WebGL2RenderingContext<"u"&&X instanceof WebGL2RenderingContext,he={},te={},me={},pe=-1,oe=[];X.canvas.addEventListener("webglcontextlost",function(Ee){ze(),Ee.preventDefault()},!1),l.set(X,K={gl:X,isWebGL2:ce,getExtension:Me,withProgram:Ke,withTexture:Re,withTextureFramebuffer:Oe,handleContextLoss:ze})}Y(K)}function f(j,Y,X,K,ce,he,te,me){te===void 0&&(te=15),me===void 0&&(me=null),c(j,function(pe){var oe=pe.gl,U=pe.withProgram,W=pe.withTexture;W("copy",function(Z,q){oe.texImage2D(oe.TEXTURE_2D,0,oe.RGBA,ce,he,0,oe.RGBA,oe.UNSIGNED_BYTE,Y),U("copy",o,a,function(se){var ge=se.setUniform,Me=se.setAttribute;Me("aUV",2,oe.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ge("1i","image",q),oe.bindFramebuffer(oe.FRAMEBUFFER,me||null),oe.disable(oe.BLEND),oe.colorMask(te&8,te&4,te&2,te&1),oe.viewport(X,K,ce,he),oe.scissor(X,K,ce,he),oe.drawArrays(oe.TRIANGLES,0,3)})})})}function h(j,Y,X){var K=j.width,ce=j.height;c(j,function(he){var te=he.gl,me=new Uint8Array(K*ce*4);te.readPixels(0,0,K,ce,te.RGBA,te.UNSIGNED_BYTE,me),j.width=Y,j.height=X,f(te,me,0,0,K,ce)})}var m=Object.freeze({__proto__:null,withWebGLContext:c,renderImageData:f,resizeWebGLCanvasWithoutClearing:h});function y(j,Y,X,K,ce,he){he===void 0&&(he=1);var te=new Uint8Array(j*Y),me=K[2]-K[0],pe=K[3]-K[1],oe=[];s(X,function(Me,Ce,Ke,Re){oe.push({x1:Me,y1:Ce,x2:Ke,y2:Re,minX:Math.min(Me,Ke),minY:Math.min(Ce,Re),maxX:Math.max(Me,Ke),maxY:Math.max(Ce,Re)})}),oe.sort(function(Me,Ce){return Me.maxX-Ce.maxX});for(var U=0;U<j;U++)for(var W=0;W<Y;W++){var Z=se(K[0]+me*(U+.5)/j,K[1]+pe*(W+.5)/Y),q=Math.pow(1-Math.abs(Z)/ce,he)/2;Z<0&&(q=1-q),q=Math.max(0,Math.min(255,Math.round(q*255))),te[W*j+U]=q}return te;function se(Me,Ce){for(var Ke=1/0,Re=1/0,Oe=oe.length;Oe--;){var ze=oe[Oe];if(ze.maxX+Re<=Me)break;if(Me+Re>ze.minX&&Ce-Re<ze.maxY&&Ce+Re>ze.minY){var Ee=x(Me,Ce,ze.x1,ze.y1,ze.x2,ze.y2);Ee<Ke&&(Ke=Ee,Re=Math.sqrt(Ke))}}return ge(Me,Ce)&&(Re=-Re),Re}function ge(Me,Ce){for(var Ke=0,Re=oe.length;Re--;){var Oe=oe[Re];if(Oe.maxX<=Me)break;var ze=Oe.y1>Ce!=Oe.y2>Ce&&Me<(Oe.x2-Oe.x1)*(Ce-Oe.y1)/(Oe.y2-Oe.y1)+Oe.x1;ze&&(Ke+=Oe.y1<Oe.y2?1:-1)}return Ke!==0}}function g(j,Y,X,K,ce,he,te,me,pe,oe){he===void 0&&(he=1),me===void 0&&(me=0),pe===void 0&&(pe=0),oe===void 0&&(oe=0),v(j,Y,X,K,ce,he,te,null,me,pe,oe)}function v(j,Y,X,K,ce,he,te,me,pe,oe,U){he===void 0&&(he=1),pe===void 0&&(pe=0),oe===void 0&&(oe=0),U===void 0&&(U=0);for(var W=y(j,Y,X,K,ce,he),Z=new Uint8Array(W.length*4),q=0;q<W.length;q++)Z[q*4+U]=W[q];f(te,Z,pe,oe,j,Y,1<<3-U,me)}function x(j,Y,X,K,ce,he){var te=ce-X,me=he-K,pe=te*te+me*me,oe=pe?Math.max(0,Math.min(1,((j-X)*te+(Y-K)*me)/pe)):0,U=j-(X+oe*te),W=Y-(K+oe*me);return U*U+W*W}var _=Object.freeze({__proto__:null,generate:y,generateIntoCanvas:g,generateIntoFramebuffer:v}),w="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",A="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",R="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",M=new Float32Array([0,0,2,0,0,2]),P=null,b=!1,C={},T=new WeakMap;function I(j){if(!b&&!J(j))throw new Error("WebGL generation not supported")}function D(j,Y,X,K,ce,he,te){if(he===void 0&&(he=1),te===void 0&&(te=null),!te&&(te=P,!te)){var me=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!me)throw new Error("OffscreenCanvas or DOM canvas not supported");te=P=me.getContext("webgl",{depth:!1})}I(te);var pe=new Uint8Array(j*Y*4);c(te,function(Z){var q=Z.gl,se=Z.withTexture,ge=Z.withTextureFramebuffer;se("readable",function(Me,Ce){q.texImage2D(q.TEXTURE_2D,0,q.RGBA,j,Y,0,q.RGBA,q.UNSIGNED_BYTE,null),ge(Me,Ce,function(Ke){N(j,Y,X,K,ce,he,q,Ke,0,0,0),q.readPixels(0,0,j,Y,q.RGBA,q.UNSIGNED_BYTE,pe)})})});for(var oe=new Uint8Array(j*Y),U=0,W=0;U<pe.length;U+=4)oe[W++]=pe[U];return oe}function z(j,Y,X,K,ce,he,te,me,pe,oe){he===void 0&&(he=1),me===void 0&&(me=0),pe===void 0&&(pe=0),oe===void 0&&(oe=0),N(j,Y,X,K,ce,he,te,null,me,pe,oe)}function N(j,Y,X,K,ce,he,te,me,pe,oe,U){he===void 0&&(he=1),pe===void 0&&(pe=0),oe===void 0&&(oe=0),U===void 0&&(U=0),I(te);var W=[];s(X,function(Z,q,se,ge){W.push(Z,q,se,ge)}),W=new Float32Array(W),c(te,function(Z){var q=Z.gl,se=Z.isWebGL2,ge=Z.getExtension,Me=Z.withProgram,Ce=Z.withTexture,Ke=Z.withTextureFramebuffer,Re=Z.handleContextLoss;if(Ce("rawDistances",function(Oe,ze){(j!==Oe._lastWidth||Y!==Oe._lastHeight)&&q.texImage2D(q.TEXTURE_2D,0,q.RGBA,Oe._lastWidth=j,Oe._lastHeight=Y,0,q.RGBA,q.UNSIGNED_BYTE,null),Me("main",w,A,function(Ee){var $=Ee.setAttribute,O=Ee.setUniform,ae=!se&&ge("ANGLE_instanced_arrays"),Ae=!se&&ge("EXT_blend_minmax");$("aUV",2,q.STATIC_DRAW,0,M),$("aLineSegment",4,q.DYNAMIC_DRAW,1,W),O.apply(void 0,["4f","uGlyphBounds"].concat(K)),O("1f","uMaxDistance",ce),O("1f","uExponent",he),Ke(Oe,ze,function(ke){q.enable(q.BLEND),q.colorMask(!0,!0,!0,!0),q.viewport(0,0,j,Y),q.scissor(0,0,j,Y),q.blendFunc(q.ONE,q.ONE),q.blendEquationSeparate(q.FUNC_ADD,se?q.MAX:Ae.MAX_EXT),q.clear(q.COLOR_BUFFER_BIT),se?q.drawArraysInstanced(q.TRIANGLES,0,3,W.length/4):ae.drawArraysInstancedANGLE(q.TRIANGLES,0,3,W.length/4)})}),Me("post",o,R,function(Ee){Ee.setAttribute("aUV",2,q.STATIC_DRAW,0,M),Ee.setUniform("1i","tex",ze),q.bindFramebuffer(q.FRAMEBUFFER,me),q.disable(q.BLEND),q.colorMask(U===0,U===1,U===2,U===3),q.viewport(pe,oe,j,Y),q.scissor(pe,oe,j,Y),q.drawArrays(q.TRIANGLES,0,3)})}),q.isContextLost())throw Re(),new Error("webgl context lost")})}function J(j){var Y=!j||j===P?C:j.canvas||j,X=T.get(Y);if(X===void 0){b=!0;var K=null;try{var ce=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],he=D(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,j);X=he&&ce.length===he.length&&he.every(function(te,me){return te===ce[me]}),X||(K="bad trial run results",console.info(ce,he))}catch(te){X=!1,K=te.message}K&&console.warn("WebGL SDF generation not supported:",K),b=!1,T.set(Y,X)}return X}var Q=Object.freeze({__proto__:null,generate:D,generateIntoCanvas:z,generateIntoFramebuffer:N,isSupported:J});function re(j,Y,X,K,ce,he){ce===void 0&&(ce=Math.max(K[2]-K[0],K[3]-K[1])/2),he===void 0&&(he=1);try{return D.apply(Q,arguments)}catch(te){return console.info("WebGL SDF generation failed, falling back to JS",te),y.apply(_,arguments)}}function G(j,Y,X,K,ce,he,te,me,pe,oe){ce===void 0&&(ce=Math.max(K[2]-K[0],K[3]-K[1])/2),he===void 0&&(he=1),me===void 0&&(me=0),pe===void 0&&(pe=0),oe===void 0&&(oe=0);try{return z.apply(Q,arguments)}catch(U){return console.info("WebGL SDF generation failed, falling back to JS",U),g.apply(_,arguments)}}return e.forEachPathCommand=i,e.generate=re,e.generateIntoCanvas=G,e.javascript=_,e.pathToLineSegments=s,e.webgl=Q,e.webglUtils=m,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function DX(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(t).forEach(function(Re,Oe){r[Re]=1<<Oe+1,i[r[Re]]=Re}),Object.freeze(r);var s=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,a=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,u=r.S|r.WS|r.B|s|r.PDI|l,c=null;function f(){if(!c){c=new Map;var Re=function(ze){if(t.hasOwnProperty(ze)){var Ee=0;t[ze].split(",").forEach(function($){var O=$.split("+"),ae=O[0],Ae=O[1];ae=parseInt(ae,36),Ae=Ae?parseInt(Ae,36):0,c.set(Ee+=ae,r[ze]);for(var ke=0;ke<Ae;ke++)c.set(++Ee,r[ze])})}};for(var Oe in t)Re(Oe)}}function h(Re){return f(),c.get(Re.codePointAt(0))||r.L}function m(Re){return i[h(Re)]}var y={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function g(Re,Oe){var ze=36,Ee=0,$=new Map,O=Oe&&new Map,ae;return Re.split(",").forEach(function Ae(ke){if(ke.indexOf("+")!==-1)for(var Ue=+ke;Ue--;)Ae(ae);else{ae=ke;var je=ke.split(">"),Ne=je[0],Be=je[1];Ne=String.fromCodePoint(Ee+=parseInt(Ne,ze)),Be=String.fromCodePoint(Ee+=parseInt(Be,ze)),$.set(Ne,Be),Oe&&O.set(Be,Ne)}}),{map:$,reverseMap:O}}var v,x,_;function w(){if(!v){var Re=g(y.pairs,!0),Oe=Re.map,ze=Re.reverseMap;v=Oe,x=ze,_=g(y.canonical,!1).map}}function A(Re){return w(),v.get(Re)||null}function R(Re){return w(),x.get(Re)||null}function M(Re){return w(),_.get(Re)||null}var P=r.L,b=r.R,C=r.EN,T=r.ES,I=r.ET,D=r.AN,z=r.CS,N=r.B,J=r.S,Q=r.ON,re=r.BN,G=r.NSM,j=r.AL,Y=r.LRO,X=r.RLO,K=r.LRE,ce=r.RLE,he=r.PDF,te=r.LRI,me=r.RLI,pe=r.FSI,oe=r.PDI;function U(Re,Oe){for(var ze=125,Ee=new Uint32Array(Re.length),$=0;$<Re.length;$++)Ee[$]=h(Re[$]);var O=new Map;function ae(pr,Fr){var An=Ee[pr];Ee[pr]=Fr,O.set(An,O.get(An)-1),An&a&&O.set(a,O.get(a)-1),O.set(Fr,(O.get(Fr)||0)+1),Fr&a&&O.set(a,(O.get(a)||0)+1)}for(var Ae=new Uint8Array(Re.length),ke=new Map,Ue=[],je=null,Ne=0;Ne<Re.length;Ne++)je||Ue.push(je={start:Ne,end:Re.length-1,level:Oe==="rtl"?1:Oe==="ltr"?0:Wc(Ne,!1)}),Ee[Ne]&N&&(je.end=Ne,je=null);for(var Be=ce|K|X|Y|s|oe|he|N,nt=function(pr){return pr+(pr&1?1:2)},$e=function(pr){return pr+(pr&1?2:1)},et=0;et<Ue.length;et++){je=Ue[et];var Ge=[{_level:je.level,_override:0,_isolate:0}],Ve=void 0,rt=0,ft=0,yt=0;O.clear();for(var ue=je.start;ue<=je.end;ue++){var de=Ee[ue];if(Ve=Ge[Ge.length-1],O.set(de,(O.get(de)||0)+1),de&a&&O.set(a,(O.get(a)||0)+1),de&Be)if(de&(ce|K)){Ae[ue]=Ve._level;var He=(de===ce?$e:nt)(Ve._level);He<=ze&&!rt&&!ft?Ge.push({_level:He,_override:0,_isolate:0}):rt||ft++}else if(de&(X|Y)){Ae[ue]=Ve._level;var st=(de===X?$e:nt)(Ve._level);st<=ze&&!rt&&!ft?Ge.push({_level:st,_override:de&X?b:P,_isolate:0}):rt||ft++}else if(de&s){de&pe&&(de=Wc(ue+1,!0)===1?me:te),Ae[ue]=Ve._level,Ve._override&&ae(ue,Ve._override);var lt=(de===me?$e:nt)(Ve._level);lt<=ze&&rt===0&&ft===0?(yt++,Ge.push({_level:lt,_override:0,_isolate:1,_isolInitIndex:ue})):rt++}else if(de&oe){if(rt>0)rt--;else if(yt>0){for(ft=0;!Ge[Ge.length-1]._isolate;)Ge.pop();var Gt=Ge[Ge.length-1]._isolInitIndex;Gt!=null&&(ke.set(Gt,ue),ke.set(ue,Gt)),Ge.pop(),yt--}Ve=Ge[Ge.length-1],Ae[ue]=Ve._level,Ve._override&&ae(ue,Ve._override)}else de&he?(rt===0&&(ft>0?ft--:!Ve._isolate&&Ge.length>1&&(Ge.pop(),Ve=Ge[Ge.length-1])),Ae[ue]=Ve._level):de&N&&(Ae[ue]=je.level);else Ae[ue]=Ve._level,Ve._override&&de!==re&&ae(ue,Ve._override)}for(var Yt=[],cn=null,$t=je.start;$t<=je.end;$t++){var hn=Ee[$t];if(!(hn&l)){var Ht=Ae[$t],Xt=hn&s,Wr=hn===oe;cn&&Ht===cn._level?(cn._end=$t,cn._endsWithIsolInit=Xt):Yt.push(cn={_start:$t,_end:$t,_level:Ht,_startsWithPDI:Wr,_endsWithIsolInit:Xt})}}for(var br=[],Kt=0;Kt<Yt.length;Kt++){var ee=Yt[Kt];if(!ee._startsWithPDI||ee._startsWithPDI&&!ke.has(ee._start)){for(var be=[cn=ee],Pe=void 0;cn&&cn._endsWithIsolInit&&(Pe=ke.get(cn._end))!=null;)for(var fe=Kt+1;fe<Yt.length;fe++)if(Yt[fe]._start===Pe){be.push(cn=Yt[fe]);break}for(var Ie=[],gt=0;gt<be.length;gt++)for(var k=be[gt],H=k._start;H<=k._end;H++)Ie.push(H);for(var ie=Ae[Ie[0]],ye=je.level,we=Ie[0]-1;we>=0;we--)if(!(Ee[we]&l)){ye=Ae[we];break}var Se=Ie[Ie.length-1],Je=Ae[Se],We=je.level;if(!(Ee[Se]&s)){for(var Ye=Se+1;Ye<=je.end;Ye++)if(!(Ee[Ye]&l)){We=Ae[Ye];break}}br.push({_seqIndices:Ie,_sosType:Math.max(ye,ie)%2?b:P,_eosType:Math.max(We,Je)%2?b:P})}}for(var Qe=0;Qe<br.length;Qe++){var Xe=br[Qe],_e=Xe._seqIndices,Vt=Xe._sosType,it=Xe._eosType;if(O.get(G))for(var dt=0;dt<_e.length;dt++){var Rt=_e[dt];if(Ee[Rt]&G){for(var At=Vt,Ft=dt-1;Ft>=0;Ft--)if(!(Ee[_e[Ft]]&l)){At=Ee[_e[Ft]];break}ae(Rt,At&(s|oe)?Q:At)}}if(O.get(C))for(var wt=0;wt<_e.length;wt++){var St=_e[wt];if(Ee[St]&C)for(var Tt=wt-1;Tt>=-1;Tt--){var Mt=Tt===-1?Vt:Ee[_e[Tt]];if(Mt&o){Mt===j&&ae(St,D);break}}}if(O.get(j))for(var qt=0;qt<_e.length;qt++){var Dt=_e[qt];Ee[Dt]&j&&ae(Dt,b)}if(O.get(T)||O.get(z))for(var en=1;en<_e.length-1;en++){var hr=_e[en];if(Ee[hr]&(T|z)){for(var bn=0,ir=0,on=en-1;on>=0&&(bn=Ee[_e[on]],!!(bn&l));on--);for(var Gn=en+1;Gn<_e.length&&(ir=Ee[_e[Gn]],!!(ir&l));Gn++);bn===ir&&(Ee[hr]===T?bn===C:bn&(C|D))&&ae(hr,bn)}}if(O.get(C))for(var tn=0;tn<_e.length;tn++){var an=_e[tn];if(Ee[an]&C){for(var yn=tn-1;yn>=0&&Ee[_e[yn]]&(I|l);yn--)ae(_e[yn],C);for(var ki=tn+1;ki<_e.length&&Ee[_e[ki]]&(I|l);ki++)ae(_e[ki],C)}}if(O.get(I)||O.get(T)||O.get(z))for(var sr=0;sr<_e.length;sr++){var ns=_e[sr];if(Ee[ns]&(I|T|z)){ae(ns,Q);for(var oa=sr-1;oa>=0&&Ee[_e[oa]]&l;oa--)ae(_e[oa],Q);for(var aa=sr+1;aa<_e.length&&Ee[_e[aa]]&l;aa++)ae(_e[aa],Q)}}if(O.get(C))for(var la=0,vu=Vt;la<_e.length;la++){var fg=_e[la],ih=Ee[fg];ih&C?vu===P&&ae(fg,P):ih&o&&(vu=ih)}if(O.get(a)){var ua=b|C|D,zc=ua|P,Uo=[];{for(var nl=[],No=0;No<_e.length;No++)if(Ee[_e[No]]&a){var Jt=Re[_e[No]],sh=void 0;if(A(Jt)!==null)if(nl.length<63)nl.push({char:Jt,seqIndex:No});else break;else if((sh=R(Jt))!==null)for(var ca=nl.length-1;ca>=0;ca--){var Gc=nl[ca].char;if(Gc===sh||Gc===R(M(Jt))||A(M(Gc))===Jt){Uo.push([nl[ca].seqIndex,No]),nl.length=ca;break}}}Uo.sort(function(pr,Fr){return pr[0]-Fr[0]})}for(var oh=0;oh<Uo.length;oh++){for(var dg=Uo[oh],kn=dg[0],rl=dg[1],hg=!1,xi=0,ah=kn+1;ah<rl;ah++){var il=_e[ah];if(Ee[il]&zc){hg=!0;var rs=Ee[il]&ua?b:P;if(rs===Go(il)){xi=rs;break}}}if(hg&&!xi){xi=Vt;for(var lh=kn-1;lh>=0;lh--){var Hc=_e[lh];if(Ee[Hc]&zc){var is=Ee[Hc]&ua?b:P;is!==Go(Hc)?xi=is:xi=Go(Hc);break}}}if(xi){if(Ee[_e[kn]]=Ee[_e[rl]]=xi,xi!==Go(_e[kn])){for(var wi=kn+1;wi<_e.length;wi++)if(!(Ee[_e[wi]]&l)){h(Re[_e[wi]])&G&&(Ee[_e[wi]]=xi);break}}if(xi!==Go(_e[rl])){for(var zo=rl+1;zo<_e.length;zo++)if(!(Ee[_e[zo]]&l)){h(Re[_e[zo]])&G&&(Ee[_e[zo]]=xi);break}}}}for(var Es=0;Es<_e.length;Es++)if(Ee[_e[Es]]&a){for(var uh=Es,ch=Es,Oi=Vt,yu=Es-1;yu>=0;yu--)if(Ee[_e[yu]]&l)uh=yu;else{Oi=Ee[_e[yu]]&ua?b:P;break}for(var _u=it,xu=Es+1;xu<_e.length;xu++)if(Ee[_e[xu]]&(a|l))ch=xu;else{_u=Ee[_e[xu]]&ua?b:P;break}for(var ti=uh;ti<=ch;ti++)Ee[_e[ti]]=Oi===_u?Oi:Go(_e[ti]);Es=ch}}}for(var Lr=je.start;Lr<=je.end;Lr++){var Vc=Ae[Lr],ao=Ee[Lr];if(Vc&1?ao&(P|C|D)&&Ae[Lr]++:ao&b?Ae[Lr]++:ao&(D|C)&&(Ae[Lr]+=2),ao&l&&(Ae[Lr]=Lr===0?je.level:Ae[Lr-1]),Lr===je.end||h(Re[Lr])&(J|N))for(var sl=Lr;sl>=0&&h(Re[sl])&u;sl--)Ae[sl]=je.level}}return{levels:Ae,paragraphs:Ue};function Wc(pr,Fr){for(var An=pr;An<Re.length;An++){var Ar=Ee[An];if(Ar&(b|j))return 1;if(Ar&(N|P)||Fr&&Ar===oe)return 0;if(Ar&s){var lo=pg(An);An=lo===-1?Re.length:lo}}return 0}function pg(pr){for(var Fr=1,An=pr+1;An<Re.length;An++){var Ar=Ee[An];if(Ar&N)break;if(Ar&oe){if(--Fr===0)return An}else Ar&s&&Fr++}return-1}function Go(pr){return Ae[pr]&1?b:P}}var W="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Z;function q(){if(!Z){var Re=g(W,!0),Oe=Re.map,ze=Re.reverseMap;ze.forEach(function(Ee,$){Oe.set($,Ee)}),Z=Oe}}function se(Re){return q(),Z.get(Re)||null}function ge(Re,Oe,ze,Ee){var $=Re.length;ze=Math.max(0,ze==null?0:+ze),Ee=Math.min($-1,Ee==null?$-1:+Ee);for(var O=new Map,ae=ze;ae<=Ee;ae++)if(Oe[ae]&1){var Ae=se(Re[ae]);Ae!==null&&O.set(ae,Ae)}return O}function Me(Re,Oe,ze,Ee){var $=Re.length;ze=Math.max(0,ze==null?0:+ze),Ee=Math.min($-1,Ee==null?$-1:+Ee);var O=[];return Oe.paragraphs.forEach(function(ae){var Ae=Math.max(ze,ae.start),ke=Math.min(Ee,ae.end);if(Ae<ke){for(var Ue=Oe.levels.slice(Ae,ke+1),je=ke;je>=Ae&&h(Re[je])&u;je--)Ue[je]=ae.level;for(var Ne=ae.level,Be=1/0,nt=0;nt<Ue.length;nt++){var $e=Ue[nt];$e>Ne&&(Ne=$e),$e<Be&&(Be=$e|1)}for(var et=Ne;et>=Be;et--)for(var Ge=0;Ge<Ue.length;Ge++)if(Ue[Ge]>=et){for(var Ve=Ge;Ge+1<Ue.length&&Ue[Ge+1]>=et;)Ge++;Ge>Ve&&O.push([Ve+ze,Ge+ze])}}}),O}function Ce(Re,Oe,ze,Ee){var $=Ke(Re,Oe,ze,Ee),O=[].concat(Re);return $.forEach(function(ae,Ae){O[Ae]=(Oe.levels[ae]&1?se(Re[ae]):null)||Re[ae]}),O.join("")}function Ke(Re,Oe,ze,Ee){for(var $=Me(Re,Oe,ze,Ee),O=[],ae=0;ae<Re.length;ae++)O[ae]=ae;return $.forEach(function(Ae){for(var ke=Ae[0],Ue=Ae[1],je=O.slice(ke,Ue+1),Ne=je.length;Ne--;)O[Ue-Ne]=je[Ne]}),O}return e.closingToOpeningBracket=R,e.getBidiCharType=h,e.getBidiCharTypeName=m,e.getCanonicalBracket=M,e.getEmbeddingLevels=U,e.getMirroredCharacter=se,e.getMirroredCharactersMap=ge,e.getReorderSegments=Me,e.getReorderedIndices=Ke,e.getReorderedString=Ce,e.openingToClosingBracket=A,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const ik=/\bvoid\s+main\s*\(\s*\)\s*{/g;function b2(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(r,i){let s=Nt[i];return s?b2(s):r}return n.replace(e,t)}const $r=[];for(let n=0;n<256;n++)$r[n]=(n<16?"0":"")+n.toString(16);function LX(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return($r[n&255]+$r[n>>8&255]+$r[n>>16&255]+$r[n>>24&255]+"-"+$r[e&255]+$r[e>>8&255]+"-"+$r[e>>16&15|64]+$r[e>>24&255]+"-"+$r[t&63|128]+$r[t>>8&255]+"-"+$r[t>>16&255]+$r[t>>24&255]+$r[r&255]+$r[r>>8&255]+$r[r>>16&255]+$r[r>>24&255]).toUpperCase()}const zu=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let r=arguments[e];if(r)for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},FX=Date.now(),iP=new WeakMap,sP=new Map;let kX=1e10;function A2(n,e){const t=zX(e);let r=iP.get(n);if(r||iP.set(n,r=Object.create(null)),r[t])return new r[t];const i=`_onBeforeCompile${t}`,s=function(u,c){n.onBeforeCompile.call(this,u,c);const f=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let h=sP[f];if(!h){const m=OX(this,u,e,t);h=sP[f]=m}u.vertexShader=h.vertexShader,u.fragmentShader=h.fragmentShader,zu(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-FX}}),this[i]&&this[i](u)},o=function(){return a(e.chained?n:n.clone())},a=function(u){const c=Object.create(u,l);return Object.defineProperty(c,"baseMaterial",{value:n}),Object.defineProperty(c,"id",{value:kX++}),c.uuid=LX(),c.uniforms=zu({},u.uniforms,e.uniforms),c.defines=zu({},u.defines,e.defines),c.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",c.extensions=zu({},u.extensions,e.extensions),c._listeners=void 0,c},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(u){this[i]=u}},copy:{writable:!0,configurable:!0,value:function(u){return n.copy.call(this,u),!n.isShaderMaterial&&!n.isDerivedMaterial&&(zu(this.extensions,u.extensions),zu(this.defines,u.defines),zu(this.uniforms,SA.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new n.constructor;return a(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=A2(n.isDerivedMaterial?n.getDepthMaterial():new d1({depthPacking:mA}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=A2(n.isDerivedMaterial?n.getDistanceMaterial():new h1,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:c}=this;u&&u.dispose(),c&&c.dispose(),n.dispose.call(this)}}};return r[t]=o,new o}function OX(n,{vertexShader:e,fragmentShader:t},r,i){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:u,fragmentMainIntro:c,fragmentMainOutro:f,fragmentColorTransform:h,customRewriter:m,timeUniform:y}=r;if(s=s||"",o=o||"",a=a||"",u=u||"",c=c||"",f=f||"",(l||m)&&(e=b2(e)),(h||m)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=b2(t)),m){let g=m({vertexShader:e,fragmentShader:t});e=g.vertexShader,t=g.fragmentShader}if(h){let g=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,v=>(g.push(v),"")),f=`${h}
${g.join(`
`)}
${f}`}if(y){const g=`
uniform float ${y};
`;s=g+s,u=g+u}return l&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(g,v,x,_)=>/\battribute\s+vec[23]\s+$/.test(_.substr(0,x))?v:`troika_${v}_${i}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=oP(e,i,s,o,a),t=oP(t,i,u,c,f),{vertexShader:e,fragmentShader:t}}function oP(n,e,t,r,i){return(r||i||t)&&(n=n.replace(ik,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),n}function UX(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let NX=0;const aP=new Map;function zX(n){const e=JSON.stringify(n,UX);let t=aP.get(e);return t==null&&aP.set(e,t=++NX),t}function GX(n,e,t){const{defaultFontURL:r}=t,i=Object.create(null),s=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",l=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function u(_,w){function A(){const R=M=>{console.error(`Failure loading font ${_}${_===r?"":"; trying fallback"}`,M),_!==r&&(_=r,A())};try{const M=new XMLHttpRequest;M.open("get",_,!0),M.responseType="arraybuffer",M.onload=function(){if(M.status>=400)R(new Error(M.statusText));else if(M.status>0)try{const P=n(M.response);w(P)}catch(P){R(P)}},M.onerror=R,M.send()}catch(M){R(M)}}A()}function c(_,w){_||(_=r);let A=i[_];A?A.pending?A.pending.push(w):w(A):(i[_]={pending:[w]},u(_,R=>{let M=i[_].pending;i[_]=R,M.forEach(P=>P(R))}))}function f({text:_="",font:w=r,sdfGlyphSize:A=64,fontSize:R=1,letterSpacing:M=0,lineHeight:P="normal",maxWidth:b=s,direction:C,textAlign:T="left",textIndent:I=0,whiteSpace:D="normal",overflowWrap:z="normal",anchorX:N=0,anchorY:J=0,includeCaretPositions:Q=!1,chunkedBoundsSize:re=8192,colorRanges:G=null},j,Y=!1){const X=g(),K={fontLoad:0,typesetting:0};_.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),_=_.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),R=+R,M=+M,b=+b,P=P||"normal",I=+I,c(w,ce=>{const he=isFinite(b);let te=null,me=null,pe=null,oe=null,U=null,W=null,Z=null,q=0,se=0,ge=D!=="nowrap";const{ascender:Me,descender:Ce,unitsPerEm:Ke,lineGap:Re,capHeight:Oe,xHeight:ze}=ce;K.fontLoad=g()-X;const Ee=g(),$=R/Ke;P==="normal"&&(P=(Me-Ce+Re)/Ke),P=P*R;const O=(P-(Me-Ce)*$)/2,ae=-(Me*$+O),Ae=Math.min(P,(Me-Ce)*$),ke=(Me+Ce)/2*$-Ae/2;let Ue=I,je=new v;const Ne=[je];ce.forEachGlyph(_,R,M,($e,et,Ge)=>{const Ve=_.charAt(Ge),rt=$e.advanceWidth*$,ft=je.count;let yt;if("isEmpty"in $e||($e.isWhitespace=!!Ve&&new RegExp(a).test(Ve),$e.canBreakAfter=!!Ve&&l.test(Ve),$e.isEmpty=$e.xMin===$e.xMax||$e.yMin===$e.yMax||o.test(Ve)),!$e.isWhitespace&&!$e.isEmpty&&se++,ge&&he&&!$e.isWhitespace&&et+rt+Ue>b&&ft){if(je.glyphAt(ft-1).glyphObj.canBreakAfter)yt=new v,Ue=-et;else for(let de=ft;de--;)if(de===0&&z==="break-word"){yt=new v,Ue=-et;break}else if(je.glyphAt(de).glyphObj.canBreakAfter){yt=je.splitAt(de+1);const He=yt.glyphAt(0).x;Ue-=He;for(let st=yt.count;st--;)yt.glyphAt(st).x-=He;break}yt&&(je.isSoftWrapped=!0,je=yt,Ne.push(je),q=b)}let ue=je.glyphAt(je.count);ue.glyphObj=$e,ue.x=et+Ue,ue.width=rt,ue.charIndex=Ge,Ve===`
`&&(je=new v,Ne.push(je),Ue=-(et+rt+M*R)+I)}),Ne.forEach($e=>{for(let et=$e.count;et--;){let{glyphObj:Ge,x:Ve,width:rt}=$e.glyphAt(et);if(!Ge.isWhitespace){$e.width=Ve+rt,$e.width>q&&(q=$e.width);return}}});let Be=0,nt=0;if(N&&(typeof N=="number"?Be=-N:typeof N=="string"&&(Be=-q*(N==="left"?0:N==="center"?.5:N==="right"?1:m(N)))),J){if(typeof J=="number")nt=-J;else if(typeof J=="string"){let $e=Ne.length*P;nt=J==="top"?0:J==="top-baseline"?-ae:J==="top-cap"?-ae-Oe*$:J==="top-ex"?-ae-ze*$:J==="middle"?$e/2:J==="bottom"?$e:J==="bottom-baseline"?$e-O+Ce*$:m(J)*$e}}if(!Y){const $e=e.getEmbeddingLevels(_,C);te=new Uint16Array(se),me=new Float32Array(se*2),pe={},W=[s,s,-s,-s],Z=[];let et=ae;Q&&(U=new Float32Array(_.length*3)),G&&(oe=new Uint8Array(se*3));let Ge=0,Ve=-1,rt=-1,ft,yt;if(Ne.forEach((ue,de)=>{let{count:He,width:st}=ue;if(He>0){let lt=0;for(let Ht=He;Ht--&&ue.glyphAt(Ht).glyphObj.isWhitespace;)lt++;let Gt=0,Yt=0;if(T==="center")Gt=(q-st)/2;else if(T==="right")Gt=q-st;else if(T==="justify"&&ue.isSoftWrapped){let Ht=0;for(let Xt=He-lt;Xt--;)ue.glyphAt(Xt).glyphObj.isWhitespace&&Ht++;Yt=(q-st)/Ht}if(Yt||Gt){let Ht=0;for(let Xt=0;Xt<He;Xt++){let Wr=ue.glyphAt(Xt);const br=Wr.glyphObj;Wr.x+=Gt+Ht,Yt!==0&&br.isWhitespace&&Xt<He-lt&&(Ht+=Yt,Wr.width+=Yt)}}const cn=e.getReorderSegments(_,$e,ue.glyphAt(0).charIndex,ue.glyphAt(ue.count-1).charIndex);for(let Ht=0;Ht<cn.length;Ht++){const[Xt,Wr]=cn[Ht];let br=1/0,Kt=-1/0;for(let ee=0;ee<He;ee++)if(ue.glyphAt(ee).charIndex>=Xt){let be=ee,Pe=ee;for(;Pe<He;Pe++){let fe=ue.glyphAt(Pe);if(fe.charIndex>Wr)break;Pe<He-lt&&(br=Math.min(br,fe.x),Kt=Math.max(Kt,fe.x+fe.width))}for(let fe=be;fe<Pe;fe++){const Ie=ue.glyphAt(fe);Ie.x=Kt-(Ie.x+Ie.width-br)}break}}let $t;const hn=Ht=>$t=Ht;for(let Ht=0;Ht<He;Ht++){let Xt=ue.glyphAt(Ht);$t=Xt.glyphObj;const Wr=$t.index,br=$e.levels[Xt.charIndex]&1;if(br){const Kt=e.getMirroredCharacter(_[Xt.charIndex]);Kt&&ce.forEachGlyph(Kt,0,0,hn)}if(Q){const{charIndex:Kt}=Xt,ee=Xt.x+Be,be=Xt.x+Xt.width+Be;U[Kt*3]=br?be:ee,U[Kt*3+1]=br?ee:be,U[Kt*3+2]=et+ke+nt;const Pe=Kt-Ve;Pe>1&&y(U,Ve,Pe),Ve=Kt}if(G){const{charIndex:Kt}=Xt;for(;Kt>rt;)rt++,G.hasOwnProperty(rt)&&(yt=G[rt])}if(!$t.isWhitespace&&!$t.isEmpty){const Kt=Ge++;pe[Wr]||(pe[Wr]={path:$t.path,pathBounds:[$t.xMin,$t.yMin,$t.xMax,$t.yMax]});const ee=Xt.x+Be,be=et+nt;me[Kt*2]=ee,me[Kt*2+1]=be;const Pe=ee+$t.xMin*$,fe=be+$t.yMin*$,Ie=ee+$t.xMax*$,gt=be+$t.yMax*$;Pe<W[0]&&(W[0]=Pe),fe<W[1]&&(W[1]=fe),Ie>W[2]&&(W[2]=Ie),gt>W[3]&&(W[3]=gt),Kt%re===0&&(ft={start:Kt,end:Kt,rect:[s,s,-s,-s]},Z.push(ft)),ft.end++;const k=ft.rect;if(Pe<k[0]&&(k[0]=Pe),fe<k[1]&&(k[1]=fe),Ie>k[2]&&(k[2]=Ie),gt>k[3]&&(k[3]=gt),te[Kt]=Wr,G){const H=Kt*3;oe[H]=yt>>16&255,oe[H+1]=yt>>8&255,oe[H+2]=yt&255}}}}et-=P}),U){const ue=_.length-Ve;ue>1&&y(U,Ve,ue)}}K.typesetting=g()-Ee,j({glyphIds:te,glyphPositions:me,glyphData:pe,caretPositions:U,caretHeight:Ae,glyphColors:oe,chunkedBounds:Z,fontSize:R,unitsPerEm:Ke,ascender:Me*$,descender:Ce*$,capHeight:Oe*$,xHeight:ze*$,lineHeight:P,topBaseline:ae,blockBounds:[Be,nt-Ne.length*P,Be+q,nt],visibleBounds:W,timings:K})})}function h(_,w){f(_,A=>{const[R,M,P,b]=A.blockBounds;w({width:P-R,height:b-M})},{metricsOnly:!0})}function m(_){let w=_.match(/^([\d.]+)%$/),A=w?parseFloat(w[1]):NaN;return isNaN(A)?0:A/100}function y(_,w,A){const R=_[w*3],M=_[w*3+1],P=_[w*3+2],b=(M-R)/A;for(let C=0;C<A;C++){const T=(w+C)*3;_[T]=R+b*C,_[T+1]=R+b*(C+1),_[T+2]=P}}function g(){return(self.performance||Date).now()}function v(){this.data=[]}const x=["glyphObj","x","width","charIndex"];return v.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/x.length)},glyphAt(_){let w=v.flyweight;return w.data=this.data,w.index=_,w},splitAt(_){let w=new v;return w.data=this.data.splice(_*x.length),w}},v.flyweight=x.reduce((_,w,A,R)=>(Object.defineProperty(_,w,{get(){return this.data[this.index*x.length+A]},set(M){this.data[this.index*x.length+A]=M}}),_),{data:null,index:0}),{typeset:f,measure:h,loadFont:c}}const dc=()=>(self.performance||Date).now(),T1=rk();let lP;function HX(n,e,t,r,i,s,o,a,l,u,c=!0){return c?WX(n,e,t,r,i,s,o,a,l,u).then(null,f=>(lP||(console.warn("WebGL SDF generation failed, falling back to JS",f),lP=!0),cP(n,e,t,r,i,s,o,a,l,u))):cP(n,e,t,r,i,s,o,a,l,u)}const Vv=[],VX=5;let M2=0;function sk(){const n=dc();for(;Vv.length&&dc()-n<VX;)Vv.shift()();M2=Vv.length?setTimeout(sk,0):0}const WX=(...n)=>new Promise((e,t)=>{Vv.push(()=>{const r=dc();try{T1.webgl.generateIntoCanvas(...n),e({timing:dc()-r})}catch(i){t(i)}}),M2||(M2=setTimeout(sk,0))}),jX=4,$X=2e3,uP={};let JX=0;function cP(n,e,t,r,i,s,o,a,l,u){const c="TroikaTextSDFGenerator_JS_"+JX++%jX;let f=uP[c];return f||(f=uP[c]={workerModule:sg({name:c,workerId:c,dependencies:[rk,dc],init(h,m){const y=h().javascript.generate;return function(...g){const v=m();return{textureData:y(...g),timing:m()-v}}},getTransferables(h){return[h.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(n,e,t,r,i,s).then(({textureData:h,timing:m})=>{const y=dc(),g=new Uint8Array(h.length*4);for(let v=0;v<h.length;v++)g[v*4+u]=h[v];return T1.webglUtils.renderImageData(o,g,a,l,n,e,1<<3-u),m+=dc()-y,--f.requests===0&&(f.idleTimer=setTimeout(()=>{BX(c)},$X)),{timing:m}})}function XX(n){n._warm||(T1.webgl.isSupported(n),n._warm=!0)}const KX=T1.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function YX(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(i){var s=e._bin,o=new Uint8Array(i);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var u=[],c=0;c<l;c++){var f=s.readUint(o,a);a+=4,u.push(e._readFont(o,f))}return u}return[e._readFont(o,0)]},_readFont:function(i,s){var o=e._bin,a=s;o.readFixed(i,s),s+=4;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],c={_data:i,_offset:a},f={},h=0;h<l;h++){var m=o.readASCII(i,s,4);s+=4,o.readUint(i,s),s+=4;var y=o.readUint(i,s);s+=4;var g=o.readUint(i,s);s+=4,f[m]={offset:y,length:g}}for(h=0;h<u.length;h++){var v=u[h];f[v]&&(c[v.trim()]=e[v.trim()].parse(i,f[v].offset,f[v].length,c))}return c},_tabOffset:function(i,s,o){for(var a=e._bin,l=a.readUshort(i,o+4),u=o+12,c=0;c<l;c++){var f=a.readASCII(i,u,4);u+=4,a.readUint(i,u),u+=4;var h=a.readUint(i,u);if(u+=4,a.readUint(i,u),u+=4,f==s)return h}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(i,s+2*l));return a},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},readUnicode:function(i,s,o){for(var a="",l=0;l<o;l++){var u=i[s++]<<8|i[s++];a+=String.fromCharCode(u)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,o){var a=e._bin._tdec;return a&&s==0&&o==i.length?a.decode(i):e._bin.readASCII(i,s,o)},readBytes:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(i[s+l]);return a},readASCIIArray:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(i[s+l]));return a},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,o,a,l){var u=e._bin,c={},f=s;u.readFixed(i,s),s+=4;var h=u.readUshort(i,s);s+=2;var m=u.readUshort(i,s);s+=2;var y=u.readUshort(i,s);return s+=2,c.scriptList=e._lctf.readScriptList(i,f+h),c.featureList=e._lctf.readFeatureList(i,f+m),c.lookupList=e._lctf.readLookupList(i,f+y,l),c},e._lctf.readLookupList=function(i,s,o){var a=e._bin,l=s,u=[],c=a.readUshort(i,s);s+=2;for(var f=0;f<c;f++){var h=a.readUshort(i,s);s+=2;var m=e._lctf.readLookupTable(i,l+h,o);u.push(m)}return u},e._lctf.readLookupTable=function(i,s,o){var a=e._bin,l=s,u={tabs:[]};u.ltype=a.readUshort(i,s),s+=2,u.flag=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2;for(var f=u.ltype,h=0;h<c;h++){var m=a.readUshort(i,s);s+=2;var y=o(i,f,l+m,u);u.tabs.push(y)}return u},e._lctf.numOfOnes=function(i){for(var s=0,o=0;o<32;o++)i>>>o&1&&s++;return s},e._lctf.readClassDef=function(i,s){var o=e._bin,a=[],l=o.readUshort(i,s);if(s+=2,l==1){var u=o.readUshort(i,s);s+=2;var c=o.readUshort(i,s);s+=2;for(var f=0;f<c;f++)a.push(u+f),a.push(u+f),a.push(o.readUshort(i,s)),s+=2}if(l==2){var h=o.readUshort(i,s);for(s+=2,f=0;f<h;f++)a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2}return a},e._lctf.getInterval=function(i,s){for(var o=0;o<i.length;o+=3){var a=i[o],l=i[o+1];if(i[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(i,s){var o=e._bin,a={};a.fmt=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(i,s,l)),a.fmt==2&&(a.tab=o.readUshorts(i,s,3*l)),a},e._lctf.coverageIndex=function(i,s){var o=i.tab;if(i.fmt==1)return o.indexOf(s);if(i.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readASCII(i,s,4);s+=4;var h=o.readUshort(i,s);s+=2;var m=e._lctf.readFeatureTable(i,a+h);m.tag=f.trim(),l.push(m)}return l},e._lctf.readFeatureTable=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2,u>0&&(l.featureParams=a+u);var c=o.readUshort(i,s);s+=2,l.tab=[];for(var f=0;f<c;f++)l.tab.push(o.readUshort(i,s+2*f));return l},e._lctf.readScriptList=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readASCII(i,s,4);s+=4;var h=o.readUshort(i,s);s+=2,l[f.trim()]=e._lctf.readScriptTable(i,a+h)}return l},e._lctf.readScriptTable=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2,l.default=e._lctf.readLangSysTable(i,a+u);var c=o.readUshort(i,s);s+=2;for(var f=0;f<c;f++){var h=o.readASCII(i,s,4);s+=4;var m=o.readUshort(i,s);s+=2,l[h.trim()]=e._lctf.readLangSysTable(i,a+m)}return l},e._lctf.readLangSysTable=function(i,s){var o=e._bin,a={};o.readUshort(i,s),s+=2,a.reqFeature=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.features=o.readUshorts(i,s,l),a},e.CFF={},e.CFF.parse=function(i,s,o){var a=e._bin;(i=new Uint8Array(i.buffer,s,o))[s=0],i[++s],i[++s],i[++s],s++;var l=[];s=e.CFF.readIndex(i,s,l);for(var u=[],c=0;c<l.length-1;c++)u.push(a.readASCII(i,s+l[c],l[c+1]-l[c]));s+=l[l.length-1];var f=[];s=e.CFF.readIndex(i,s,f);var h=[];for(c=0;c<f.length-1;c++)h.push(e.CFF.readDict(i,s+f[c],s+f[c+1]));s+=f[f.length-1];var m=h[0],y=[];s=e.CFF.readIndex(i,s,y);var g=[];for(c=0;c<y.length-1;c++)g.push(a.readASCII(i,s+y[c],y[c+1]-y[c]));if(s+=y[y.length-1],e.CFF.readSubrs(i,s,m),m.CharStrings){s=m.CharStrings,y=[],s=e.CFF.readIndex(i,s,y);var v=[];for(c=0;c<y.length-1;c++)v.push(a.readBytes(i,s+y[c],y[c+1]-y[c]));m.CharStrings=v}if(m.ROS){s=m.FDArray;var x=[];for(s=e.CFF.readIndex(i,s,x),m.FDArray=[],c=0;c<x.length-1;c++){var _=e.CFF.readDict(i,s+x[c],s+x[c+1]);e.CFF._readFDict(i,_,g),m.FDArray.push(_)}s+=x[x.length-1],s=m.FDSelect,m.FDSelect=[];var w=i[s];if(s++,w!=3)throw w;var A=a.readUshort(i,s);for(s+=2,c=0;c<A+1;c++)m.FDSelect.push(a.readUshort(i,s),i[s+2]),s+=3}return m.Encoding&&(m.Encoding=e.CFF.readEncoding(i,m.Encoding,m.CharStrings.length)),m.charset&&(m.charset=e.CFF.readCharset(i,m.charset,m.CharStrings.length)),e.CFF._readFDict(i,m,g),m},e.CFF._readFDict=function(i,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(i,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(i,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(i,s,l);var u,c=l.length;u=c<1240?107:c<33900?1131:32768,o.Bias=u,o.Subrs=[];for(var f=0;f<l.length-1;f++)o.Subrs.push(a.readBytes(i,s+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var o=0;o<i.charset.length;o++)if(i.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,o){e._bin;var a=[".notdef"],l=i[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var u=i[s];s++;for(var c=0;c<u;c++)a.push(i[s+c]);return a},e.CFF.readCharset=function(i,s,o){var a=e._bin,l=[".notdef"],u=i[s];if(s++,u==0)for(var c=0;c<o;c++){var f=a.readUshort(i,s);s+=2,l.push(f)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;l.length<o;){f=a.readUshort(i,s),s+=2;var h=0;for(u==1?(h=i[s],s++):(h=a.readUshort(i,s),s+=2),c=0;c<=h;c++)l.push(f),f++}}return l},e.CFF.readIndex=function(i,s,o){var a=e._bin,l=a.readUshort(i,s)+1,u=i[s+=2];if(s++,u==1)for(var c=0;c<l;c++)o.push(i[s+c]);else if(u==2)for(c=0;c<l;c++)o.push(a.readUshort(i,s+2*c));else if(u==3)for(c=0;c<l;c++)o.push(16777215&a.readUint(i,s+3*c-1));else if(l!=1)throw"unsupported offset size: "+u+", count: "+l;return(s+=l*u)-1},e.CFF.getCharString=function(i,s,o){var a=e._bin,l=i[s],u=i[s+1];i[s+2],i[s+3],i[s+4];var c=1,f=null,h=null;l<=20&&(f=l,c=1),l==12&&(f=100*l+u,c=2),21<=l&&l<=27&&(f=l,c=1),l==28&&(h=a.readShort(i,s+1),c=3),29<=l&&l<=31&&(f=l,c=1),32<=l&&l<=246&&(h=l-139,c=1),247<=l&&l<=250&&(h=256*(l-247)+u+108,c=2),251<=l&&l<=254&&(h=256*-(l-251)-u-108,c=2),l==255&&(h=a.readInt(i,s+1)/65535,c=5),o.val=h??"o"+f,o.size=c},e.CFF.readCharString=function(i,s,o){for(var a=s+o,l=e._bin,u=[];s<a;){var c=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var h=1,m=null,y=null;c<=20&&(m=c,h=1),c==12&&(m=100*c+f,h=2),c!=19&&c!=20||(m=c,h=2),21<=c&&c<=27&&(m=c,h=1),c==28&&(y=l.readShort(i,s+1),h=3),29<=c&&c<=31&&(m=c,h=1),32<=c&&c<=246&&(y=c-139,h=1),247<=c&&c<=250&&(y=256*(c-247)+f+108,h=2),251<=c&&c<=254&&(y=256*-(c-251)-f-108,h=2),c==255&&(y=l.readInt(i,s+1)/65535,h=5),u.push(y??"o"+m),s+=h}return u},e.CFF.readDict=function(i,s,o){for(var a=e._bin,l={},u=[];s<o;){var c=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var h=1,m=null,y=null;if(c==28&&(y=a.readShort(i,s+1),h=3),c==29&&(y=a.readInt(i,s+1),h=5),32<=c&&c<=246&&(y=c-139,h=1),247<=c&&c<=250&&(y=256*(c-247)+f+108,h=2),251<=c&&c<=254&&(y=256*-(c-251)-f-108,h=2),c==255)throw y=a.readInt(i,s+1)/65535,h=5,"unknown number";if(c==30){var g=[];for(h=1;;){var v=i[s+h];h++;var x=v>>4,_=15&v;if(x!=15&&g.push(x),_!=15&&g.push(_),_==15)break}for(var w="",A=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],R=0;R<g.length;R++)w+=A[g[R]];y=parseFloat(w)}c<=21&&(m=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][c],h=1,c==12&&(m=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],h=2)),m!=null?(l[m]=u.length==1?u[0]:u,u=[]):u.push(y),s+=h}return l},e.cmap={},e.cmap.parse=function(i,s,o){i=new Uint8Array(i.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2;var c=[];l.tables=[];for(var f=0;f<u;f++){var h=a.readUshort(i,s);s+=2;var m=a.readUshort(i,s);s+=2;var y=a.readUint(i,s);s+=4;var g="p"+h+"e"+m,v=c.indexOf(y);if(v==-1){var x;v=l.tables.length,c.push(y);var _=a.readUshort(i,y);_==0?x=e.cmap.parse0(i,y):_==4?x=e.cmap.parse4(i,y):_==6?x=e.cmap.parse6(i,y):_==12?x=e.cmap.parse12(i,y):console.debug("unknown format: "+_,h,m,y),l.tables.push(x)}if(l[g]!=null)throw"multiple tables for one platform+encoding";l[g]=v}return l},e.cmap.parse0=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,a.map=[];for(var u=0;u<l-6;u++)a.map.push(i[s+u]);return a},e.cmap.parse4=function(i,s){var o=e._bin,a=s,l={};l.format=o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2;var f=c/2;l.searchRange=o.readUshort(i,s),s+=2,l.entrySelector=o.readUshort(i,s),s+=2,l.rangeShift=o.readUshort(i,s),s+=2,l.endCount=o.readUshorts(i,s,f),s+=2*f,s+=2,l.startCount=o.readUshorts(i,s,f),s+=2*f,l.idDelta=[];for(var h=0;h<f;h++)l.idDelta.push(o.readShort(i,s)),s+=2;for(l.idRangeOffset=o.readUshorts(i,s,f),s+=2*f,l.glyphIdArray=[];s<a+u;)l.glyphIdArray.push(o.readUshort(i,s)),s+=2;return l},e.cmap.parse6=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,a.firstCode=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,a.glyphIdArray=[];for(var u=0;u<l;u++)a.glyphIdArray.push(o.readUshort(i,s)),s+=2;return a},e.cmap.parse12=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,s+=2,o.readUint(i,s),s+=4,o.readUint(i,s),s+=4;var l=o.readUint(i,s);s+=4,a.groups=[];for(var u=0;u<l;u++){var c=s+12*u,f=o.readUint(i,c+0),h=o.readUint(i,c+4),m=o.readUint(i,c+8);a.groups.push([f,h,m])}return a},e.glyf={},e.glyf.parse=function(i,s,o,a){for(var l=[],u=0;u<a.maxp.numGlyphs;u++)l.push(null);return l},e.glyf._parseGlyf=function(i,s){var o=e._bin,a=i._data,l=e._tabOffset(a,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var u={};if(u.noc=o.readShort(a,l),l+=2,u.xMin=o.readShort(a,l),l+=2,u.yMin=o.readShort(a,l),l+=2,u.xMax=o.readShort(a,l),l+=2,u.yMax=o.readShort(a,l),l+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var c=0;c<u.noc;c++)u.endPts.push(o.readUshort(a,l)),l+=2;var f=o.readUshort(a,l);if(l+=2,a.length-l<f)return null;u.instructions=o.readBytes(a,l,f),l+=f;var h=u.endPts[u.noc-1]+1;for(u.flags=[],c=0;c<h;c++){var m=a[l];if(l++,u.flags.push(m),(8&m)!=0){var y=a[l];l++;for(var g=0;g<y;g++)u.flags.push(m),c++}}for(u.xs=[],c=0;c<h;c++){var v=(2&u.flags[c])!=0,x=(16&u.flags[c])!=0;v?(u.xs.push(x?a[l]:-a[l]),l++):x?u.xs.push(0):(u.xs.push(o.readShort(a,l)),l+=2)}for(u.ys=[],c=0;c<h;c++)v=(4&u.flags[c])!=0,x=(32&u.flags[c])!=0,v?(u.ys.push(x?a[l]:-a[l]),l++):x?u.ys.push(0):(u.ys.push(o.readShort(a,l)),l+=2);var _=0,w=0;for(c=0;c<h;c++)_+=u.xs[c],w+=u.ys[c],u.xs[c]=_,u.ys[c]=w}else{var A;u.parts=[];do{A=o.readUshort(a,l),l+=2;var R={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(R),R.glyphIndex=o.readUshort(a,l),l+=2,1&A){var M=o.readShort(a,l);l+=2;var P=o.readShort(a,l);l+=2}else M=o.readInt8(a,l),l++,P=o.readInt8(a,l),l++;2&A?(R.m.tx=M,R.m.ty=P):(R.p1=M,R.p2=P),8&A?(R.m.a=R.m.d=o.readF2dot14(a,l),l+=2):64&A?(R.m.a=o.readF2dot14(a,l),l+=2,R.m.d=o.readF2dot14(a,l),l+=2):128&A&&(R.m.a=o.readF2dot14(a,l),l+=2,R.m.b=o.readF2dot14(a,l),l+=2,R.m.c=o.readF2dot14(a,l),l+=2,R.m.d=o.readF2dot14(a,l),l+=2)}while(32&A);if(256&A){var b=o.readUshort(a,l);for(l+=2,u.instr=[],c=0;c<b;c++)u.instr.push(a[l]),l++}}return u},e.GPOS={},e.GPOS.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(i,s,o,a){var l=e._bin,u=o,c={};if(c.fmt=l.readUshort(i,o),o+=2,s==1||s==2||s==3||s==7||s==8&&c.fmt<=2){var f=l.readUshort(i,o);o+=2,c.coverage=e._lctf.readCoverage(i,f+u)}if(s==1&&c.fmt==1){var h=l.readUshort(i,o);o+=2;var m=e._lctf.numOfOnes(h);h!=0&&(c.pos=e.GPOS.readValueRecord(i,o,h))}else if(s==2&&c.fmt>=1&&c.fmt<=2){h=l.readUshort(i,o),o+=2;var y=l.readUshort(i,o);o+=2,m=e._lctf.numOfOnes(h);var g=e._lctf.numOfOnes(y);if(c.fmt==1){c.pairsets=[];var v=l.readUshort(i,o);o+=2;for(var x=0;x<v;x++){var _=u+l.readUshort(i,o);o+=2;var w=l.readUshort(i,_);_+=2;for(var A=[],R=0;R<w;R++){var M=l.readUshort(i,_);_+=2,h!=0&&(D=e.GPOS.readValueRecord(i,_,h),_+=2*m),y!=0&&(z=e.GPOS.readValueRecord(i,_,y),_+=2*g),A.push({gid2:M,val1:D,val2:z})}c.pairsets.push(A)}}if(c.fmt==2){var P=l.readUshort(i,o);o+=2;var b=l.readUshort(i,o);o+=2;var C=l.readUshort(i,o);o+=2;var T=l.readUshort(i,o);for(o+=2,c.classDef1=e._lctf.readClassDef(i,u+P),c.classDef2=e._lctf.readClassDef(i,u+b),c.matrix=[],x=0;x<C;x++){var I=[];for(R=0;R<T;R++){var D=null,z=null;h!=0&&(D=e.GPOS.readValueRecord(i,o,h),o+=2*m),y!=0&&(z=e.GPOS.readValueRecord(i,o,y),o+=2*g),I.push({val1:D,val2:z})}c.matrix.push(I)}}}else{if(s==9&&c.fmt==1){var N=l.readUshort(i,o);o+=2;var J=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=N;else if(a.ltype!=N)throw"invalid extension substitution";return e.GPOS.subt(i,a.ltype,u+J)}console.debug("unsupported GPOS table LookupType",s,"format",c.fmt)}return c},e.GPOS.readValueRecord=function(i,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(i,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(i,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(i,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(i,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(i,s,o,a){var l=e._bin,u=o,c={};if(c.fmt=l.readUshort(i,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&c.fmt<=2||s==6&&c.fmt<=2){var f=l.readUshort(i,o);o+=2,c.coverage=e._lctf.readCoverage(i,u+f)}if(s==1&&c.fmt>=1&&c.fmt<=2){if(c.fmt==1)c.delta=l.readShort(i,o),o+=2;else if(c.fmt==2){var h=l.readUshort(i,o);o+=2,c.newg=l.readUshorts(i,o,h),o+=2*c.newg.length}}else if(s==4){c.vals=[],h=l.readUshort(i,o),o+=2;for(var m=0;m<h;m++){var y=l.readUshort(i,o);o+=2,c.vals.push(e.GSUB.readLigatureSet(i,u+y))}}else if(s==5&&c.fmt==2){if(c.fmt==2){var g=l.readUshort(i,o);o+=2,c.cDef=e._lctf.readClassDef(i,u+g),c.scset=[];var v=l.readUshort(i,o);for(o+=2,m=0;m<v;m++){var x=l.readUshort(i,o);o+=2,c.scset.push(x==0?null:e.GSUB.readSubClassSet(i,u+x))}}}else if(s==6&&c.fmt==3){if(c.fmt==3){for(m=0;m<3;m++){h=l.readUshort(i,o),o+=2;for(var _=[],w=0;w<h;w++)_.push(e._lctf.readCoverage(i,u+l.readUshort(i,o+2*w)));o+=2*h,m==0&&(c.backCvg=_),m==1&&(c.inptCvg=_),m==2&&(c.ahedCvg=_)}h=l.readUshort(i,o),o+=2,c.lookupRec=e.GSUB.readSubstLookupRecords(i,o,h)}}else{if(s==7&&c.fmt==1){var A=l.readUshort(i,o);o+=2;var R=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=A;else if(a.ltype!=A)throw"invalid extension substitution";return e.GSUB.subt(i,a.ltype,u+R)}console.debug("unsupported GSUB table LookupType",s,"format",c.fmt)}return c},e.GSUB.readSubClassSet=function(i,s){var o=e._bin.readUshort,a=s,l=[],u=o(i,s);s+=2;for(var c=0;c<u;c++){var f=o(i,s);s+=2,l.push(e.GSUB.readSubClassRule(i,a+f))}return l},e.GSUB.readSubClassRule=function(i,s){var o=e._bin.readUshort,a={},l=o(i,s),u=o(i,s+=2);s+=2,a.input=[];for(var c=0;c<l-1;c++)a.input.push(o(i,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,u),a},e.GSUB.readSubstLookupRecords=function(i,s,o){for(var a=e._bin.readUshort,l=[],u=0;u<o;u++)l.push(a(i,s),a(i,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readUshort(i,s);s+=2,l.push(e.GSUB.readChainSubClassRule(i,a+f))}return l},e.GSUB.readChainSubClassRule=function(i,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],u=0;u<l.length;u++){var c=o.readUshort(i,s);s+=2,u==1&&c--,a[l[u]]=o.readUshorts(i,s,c),s+=2*a[l[u]].length}return c=o.readUshort(i,s),s+=2,a.subst=o.readUshorts(i,s,2*c),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readUshort(i,s);s+=2,l.push(e.GSUB.readLigature(i,a+f))}return l},e.GSUB.readLigature=function(i,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2;for(var u=0;u<l-1;u++)a.chain.push(o.readUshort(i,s)),s+=2;return a},e.head={},e.head.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.fontRevision=a.readFixed(i,s),s+=4,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4,l.flags=a.readUshort(i,s),s+=2,l.unitsPerEm=a.readUshort(i,s),s+=2,l.created=a.readUint64(i,s),s+=8,l.modified=a.readUint64(i,s),s+=8,l.xMin=a.readShort(i,s),s+=2,l.yMin=a.readShort(i,s),s+=2,l.xMax=a.readShort(i,s),s+=2,l.yMax=a.readShort(i,s),s+=2,l.macStyle=a.readUshort(i,s),s+=2,l.lowestRecPPEM=a.readUshort(i,s),s+=2,l.fontDirectionHint=a.readShort(i,s),s+=2,l.indexToLocFormat=a.readShort(i,s),s+=2,l.glyphDataFormat=a.readShort(i,s),s+=2,l},e.hhea={},e.hhea.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.ascender=a.readShort(i,s),s+=2,l.descender=a.readShort(i,s),s+=2,l.lineGap=a.readShort(i,s),s+=2,l.advanceWidthMax=a.readUshort(i,s),s+=2,l.minLeftSideBearing=a.readShort(i,s),s+=2,l.minRightSideBearing=a.readShort(i,s),s+=2,l.xMaxExtent=a.readShort(i,s),s+=2,l.caretSlopeRise=a.readShort(i,s),s+=2,l.caretSlopeRun=a.readShort(i,s),s+=2,l.caretOffset=a.readShort(i,s),s+=2,s+=8,l.metricDataFormat=a.readShort(i,s),s+=2,l.numberOfHMetrics=a.readUshort(i,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(i,s,o,a){for(var l=e._bin,u={aWidth:[],lsBearing:[]},c=0,f=0,h=0;h<a.maxp.numGlyphs;h++)h<a.hhea.numberOfHMetrics&&(c=l.readUshort(i,s),s+=2,f=l.readShort(i,s),s+=2),u.aWidth.push(c),u.lsBearing.push(f);return u},e.kern={},e.kern.parse=function(i,s,o,a){var l=e._bin,u=l.readUshort(i,s);if(s+=2,u==1)return e.kern.parseV1(i,s-2,o,a);var c=l.readUshort(i,s);s+=2;for(var f={glyph1:[],rval:[]},h=0;h<c;h++){s+=2,o=l.readUshort(i,s),s+=2;var m=l.readUshort(i,s);s+=2;var y=m>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;s=e.kern.readFormat0(i,s,f)}return f},e.kern.parseV1=function(i,s,o,a){var l=e._bin;l.readFixed(i,s),s+=4;var u=l.readUint(i,s);s+=4;for(var c={glyph1:[],rval:[]},f=0;f<u;f++){l.readUint(i,s),s+=4;var h=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2;var m=h>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;s=e.kern.readFormat0(i,s,c)}return c},e.kern.readFormat0=function(i,s,o){var a=e._bin,l=-1,u=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var c=0;c<u;c++){var f=a.readUshort(i,s);s+=2;var h=a.readUshort(i,s);s+=2;var m=a.readShort(i,s);s+=2,f!=l&&(o.glyph1.push(f),o.rval.push({glyph2:[],vals:[]}));var y=o.rval[o.rval.length-1];y.glyph2.push(h),y.vals.push(m),l=f}return s},e.loca={},e.loca.parse=function(i,s,o,a){var l=e._bin,u=[],c=a.head.indexToLocFormat,f=a.maxp.numGlyphs+1;if(c==0)for(var h=0;h<f;h++)u.push(l.readUshort(i,s+(h<<1))<<1);if(c==1)for(h=0;h<f;h++)u.push(l.readUint(i,s+(h<<2)));return u},e.maxp={},e.maxp.parse=function(i,s,o){var a=e._bin,l={},u=a.readUint(i,s);return s+=4,l.numGlyphs=a.readUshort(i,s),s+=2,u==65536&&(l.maxPoints=a.readUshort(i,s),s+=2,l.maxContours=a.readUshort(i,s),s+=2,l.maxCompositePoints=a.readUshort(i,s),s+=2,l.maxCompositeContours=a.readUshort(i,s),s+=2,l.maxZones=a.readUshort(i,s),s+=2,l.maxTwilightPoints=a.readUshort(i,s),s+=2,l.maxStorage=a.readUshort(i,s),s+=2,l.maxFunctionDefs=a.readUshort(i,s),s+=2,l.maxInstructionDefs=a.readUshort(i,s),s+=2,l.maxStackElements=a.readUshort(i,s),s+=2,l.maxSizeOfInstructions=a.readUshort(i,s),s+=2,l.maxComponentElements=a.readUshort(i,s),s+=2,l.maxComponentDepth=a.readUshort(i,s),s+=2),l},e.name={},e.name.parse=function(i,s,o){var a=e._bin,l={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2,a.readUshort(i,s);for(var c,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],h=s+=2,m=0;m<u;m++){var y=a.readUshort(i,s);s+=2;var g=a.readUshort(i,s);s+=2;var v=a.readUshort(i,s);s+=2;var x=a.readUshort(i,s);s+=2;var _=a.readUshort(i,s);s+=2;var w=a.readUshort(i,s);s+=2;var A,R=f[x],M=h+12*u+w;if(y==0)A=a.readUnicode(i,M,_/2);else if(y==3&&g==0)A=a.readUnicode(i,M,_/2);else if(g==0)A=a.readASCII(i,M,_);else if(g==1)A=a.readUnicode(i,M,_/2);else if(g==3)A=a.readUnicode(i,M,_/2);else{if(y!=1)throw"unknown encoding "+g+", platformID: "+y;A=a.readASCII(i,M,_),console.debug("reading unknown MAC encoding "+g+" as ASCII")}var P="p"+y+","+v.toString(16);l[P]==null&&(l[P]={}),l[P][R!==void 0?R:x]=A,l[P]._lang=v}for(var b in l)if(l[b].postScriptName!=null&&l[b]._lang==1033)return l[b];for(var b in l)if(l[b].postScriptName!=null&&l[b]._lang==0)return l[b];for(var b in l)if(l[b].postScriptName!=null&&l[b]._lang==3084)return l[b];for(var b in l)if(l[b].postScriptName!=null)return l[b];for(var b in l){c=b;break}return console.debug("returning name table with languageID "+l[c]._lang),l[c]},e["OS/2"]={},e["OS/2"].parse=function(i,s,o){var a=e._bin.readUshort(i,s);s+=2;var l={};if(a==0)e["OS/2"].version0(i,s,l);else if(a==1)e["OS/2"].version1(i,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(i,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(i,s,l)}return l},e["OS/2"].version0=function(i,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(i,s),s+=2,o.usWeightClass=a.readUshort(i,s),s+=2,o.usWidthClass=a.readUshort(i,s),s+=2,o.fsType=a.readUshort(i,s),s+=2,o.ySubscriptXSize=a.readShort(i,s),s+=2,o.ySubscriptYSize=a.readShort(i,s),s+=2,o.ySubscriptXOffset=a.readShort(i,s),s+=2,o.ySubscriptYOffset=a.readShort(i,s),s+=2,o.ySuperscriptXSize=a.readShort(i,s),s+=2,o.ySuperscriptYSize=a.readShort(i,s),s+=2,o.ySuperscriptXOffset=a.readShort(i,s),s+=2,o.ySuperscriptYOffset=a.readShort(i,s),s+=2,o.yStrikeoutSize=a.readShort(i,s),s+=2,o.yStrikeoutPosition=a.readShort(i,s),s+=2,o.sFamilyClass=a.readShort(i,s),s+=2,o.panose=a.readBytes(i,s,10),s+=10,o.ulUnicodeRange1=a.readUint(i,s),s+=4,o.ulUnicodeRange2=a.readUint(i,s),s+=4,o.ulUnicodeRange3=a.readUint(i,s),s+=4,o.ulUnicodeRange4=a.readUint(i,s),s+=4,o.achVendID=[a.readInt8(i,s),a.readInt8(i,s+1),a.readInt8(i,s+2),a.readInt8(i,s+3)],s+=4,o.fsSelection=a.readUshort(i,s),s+=2,o.usFirstCharIndex=a.readUshort(i,s),s+=2,o.usLastCharIndex=a.readUshort(i,s),s+=2,o.sTypoAscender=a.readShort(i,s),s+=2,o.sTypoDescender=a.readShort(i,s),s+=2,o.sTypoLineGap=a.readShort(i,s),s+=2,o.usWinAscent=a.readUshort(i,s),s+=2,o.usWinDescent=a.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,o){var a=e._bin;return s=e["OS/2"].version0(i,s,o),o.ulCodePageRange1=a.readUint(i,s),s+=4,o.ulCodePageRange2=a.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,o){var a=e._bin;return s=e["OS/2"].version1(i,s,o),o.sxHeight=a.readShort(i,s),s+=2,o.sCapHeight=a.readShort(i,s),s+=2,o.usDefault=a.readUshort(i,s),s+=2,o.usBreak=a.readUshort(i,s),s+=2,o.usMaxContext=a.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,o){var a=e._bin;return s=e["OS/2"].version2(i,s,o),o.usLowerOpticalPointSize=a.readUshort(i,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,o){var a=e._bin,l={};return l.version=a.readFixed(i,s),s+=4,l.italicAngle=a.readFixed(i,s),s+=4,l.underlinePosition=a.readShort(i,s),s+=2,l.underlineThickness=a.readShort(i,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var o=i.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var u=-1,c=0;c<l.endCount.length;c++)if(s<=l.endCount[c]){u=c;break}return u==-1||l.startCount[u]>s?0:65535&(l.idRangeOffset[u]!=0?l.glyphIdArray[s-l.startCount[u]+(l.idRangeOffset[u]>>1)-(l.idRangeOffset.length-u)]:s+l.idDelta[u])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(c=0;c<l.groups.length;c++){var f=l.groups[c];if(f[0]<=s&&s<=f[1])return f[2]+(s-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,s){var o={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var a=i.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),i.SVG.entries[s]=a),a)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},u=i.CFF,c=i.CFF.Private;if(u.ROS){for(var f=0;u.FDSelect[f+2]<=s;)f+=2;c=u.FDArray[u.FDSelect[f+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],l,u,c,o)}else i.glyf&&e.U._drawGlyf(s,i,o);return o},e.U._drawGlyf=function(i,s,o){var a=s.glyf[i];a==null&&(a=s.glyf[i]=e.glyf._parseGlyf(s,i)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(i,s){for(var o=0;o<i.noc;o++){for(var a=o==0?0:i.endPts[o-1]+1,l=i.endPts[o],u=a;u<=l;u++){var c=u==a?l:u-1,f=u==l?a:u+1,h=1&i.flags[u],m=1&i.flags[c],y=1&i.flags[f],g=i.xs[u],v=i.ys[u];if(u==a)if(h){if(!m){e.U.P.moveTo(s,g,v);continue}e.U.P.moveTo(s,i.xs[c],i.ys[c])}else m?e.U.P.moveTo(s,i.xs[c],i.ys[c]):e.U.P.moveTo(s,(i.xs[c]+g)/2,(i.ys[c]+v)/2);h?m&&e.U.P.lineTo(s,g,v):y?e.U.P.qcurveTo(s,g,v,i.xs[f],i.ys[f]):e.U.P.qcurveTo(s,g,v,(g+i.xs[f])/2,(v+i.ys[f])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,o){for(var a=0;a<i.parts.length;a++){var l={cmds:[],crds:[]},u=i.parts[a];e.U._drawGlyf(u.glyphIndex,s,l);for(var c=u.m,f=0;f<l.crds.length;f+=2){var h=l.crds[f],m=l.crds[f+1];o.crds.push(h*c.a+m*c.b+c.tx),o.crds.push(h*c.c+m*c.d+c.ty)}for(f=0;f<l.cmds.length;f++)o.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(i,s){var o=e._lctf.getInterval(s,i);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(i,s,o){var a=!1;if(i.GPOS)for(var l=i.GPOS,u=l.lookupList,c=l.featureList,f=[],h=0;h<c.length;h++){var m=c[h];if(m.tag=="kern"){a=!0;for(var y=0;y<m.tab.length;y++)if(!f[m.tab[y]]){f[m.tab[y]]=!0;for(var g=u[m.tab[y]],v=0;v<g.tabs.length;v++)if(g.tabs[v]!=null){var x,_=g.tabs[v];if((!_.coverage||(x=e._lctf.coverageIndex(_.coverage,s))!=-1)&&g.ltype!=1){if(g.ltype==2){var w=null;if(_.fmt==1){var A=_.pairsets[x];for(h=0;h<A.length;h++)A[h].gid2==o&&(w=A[h])}else if(_.fmt==2){var R=e.U._getGlyphClass(s,_.classDef1),M=e.U._getGlyphClass(o,_.classDef2);w=_.matrix[R][M]}if(w){var P=0;return w.val1&&w.val1[2]&&(P+=w.val1[2]),w.val2&&w.val2[0]&&(P+=w.val2[0]),P}}}}}}}if(i.kern&&!a){var b=i.kern.glyph1.indexOf(s);if(b!=-1){var C=i.kern.rval[b].glyph2.indexOf(o);if(C!=-1)return i.kern.rval[b].vals[C]}}return 0},e.U._applySubs=function(i,s,o,a){for(var l=i.length-s-1,u=0;u<o.tabs.length;u++)if(o.tabs[u]!=null){var c,f=o.tabs[u];if(!f.coverage||(c=e._lctf.coverageIndex(f.coverage,i[s]))!=-1){if(o.ltype==1)i[s],f.fmt==1?i[s]=i[s]+f.delta:i[s]=f.newg[c];else if(o.ltype==4)for(var h=f.vals[c],m=0;m<h.length;m++){var y=h[m],g=y.chain.length;if(!(g>l)){for(var v=!0,x=0,_=0;_<g;_++){for(;i[s+x+(1+_)]==-1;)x++;y.chain[_]!=i[s+x+(1+_)]&&(v=!1)}if(v){for(i[s]=y.nglyph,_=0;_<g+x;_++)i[s+_+1]=-1;break}}}else if(o.ltype==5&&f.fmt==2)for(var w=e._lctf.getInterval(f.cDef,i[s]),A=f.cDef[w+2],R=f.scset[A],M=0;M<R.length;M++){var P=R[M],b=P.input;if(!(b.length>l)){for(v=!0,_=0;_<b.length;_++){var C=e._lctf.getInterval(f.cDef,i[s+1+_]);if(w==-1&&f.cDef[C+2]!=b[_]){v=!1;break}}if(v){var T=P.substLookupRecords;for(m=0;m<T.length;m+=2)T[m],T[m+1]}}}else if(o.ltype==6&&f.fmt==3){if(!e.U._glsCovered(i,f.backCvg,s-f.backCvg.length)||!e.U._glsCovered(i,f.inptCvg,s)||!e.U._glsCovered(i,f.ahedCvg,s+f.inptCvg.length))continue;var I=f.lookupRec;for(M=0;M<I.length;M+=2){w=I[M];var D=a[I[M+1]];e.U._applySubs(i,s+w,D,a)}}}}},e.U._glsCovered=function(i,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],i[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,o){for(var a={cmds:[],crds:[]},l=0,u=0;u<s.length;u++){var c=s[u];if(c!=-1){for(var f=u<s.length-1&&s[u+1]!=-1?s[u+1]:0,h=e.U.glyphToPath(i,c),m=0;m<h.crds.length;m+=2)a.crds.push(h.crds[m]+l),a.crds.push(h.crds[m+1]);for(o&&a.cmds.push(o),m=0;m<h.cmds.length;m++)a.cmds.push(h.cmds[m]);o&&a.cmds.push("X"),l+=i.hmtx.aWidth[c],u<s.length-1&&(l+=e.U.getPairAdjustment(i,c,f))}}return a},e.U.P={},e.U.P.moveTo=function(i,s,o){i.cmds.push("M"),i.crds.push(s,o)},e.U.P.lineTo=function(i,s,o){i.cmds.push("L"),i.crds.push(s,o)},e.U.P.curveTo=function(i,s,o,a,l,u,c){i.cmds.push("C"),i.crds.push(s,o,a,l,u,c)},e.U.P.qcurveTo=function(i,s,o,a,l){i.cmds.push("Q"),i.crds.push(s,o,a,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,o,a,l){for(var u=s.stack,c=s.nStems,f=s.haveWidth,h=s.width,m=s.open,y=0,g=s.x,v=s.y,x=0,_=0,w=0,A=0,R=0,M=0,P=0,b=0,C=0,T=0,I={val:0,size:0};y<i.length;){e.CFF.getCharString(i,y,I);var D=I.val;if(y+=I.size,D=="o1"||D=="o18")u.length%2!=0&&!f&&(h=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,f=!0;else if(D=="o3"||D=="o23")u.length%2!=0&&!f&&(h=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,f=!0;else if(D=="o4")u.length>1&&!f&&(h=u.shift()+a.nominalWidthX,f=!0),m&&e.U.P.closePath(l),v+=u.pop(),e.U.P.moveTo(l,g,v),m=!0;else if(D=="o5")for(;u.length>0;)g+=u.shift(),v+=u.shift(),e.U.P.lineTo(l,g,v);else if(D=="o6"||D=="o7")for(var z=u.length,N=D=="o6",J=0;J<z;J++){var Q=u.shift();N?g+=Q:v+=Q,N=!N,e.U.P.lineTo(l,g,v)}else if(D=="o8"||D=="o24"){z=u.length;for(var re=0;re+6<=z;)x=g+u.shift(),_=v+u.shift(),w=x+u.shift(),A=_+u.shift(),g=w+u.shift(),v=A+u.shift(),e.U.P.curveTo(l,x,_,w,A,g,v),re+=6;D=="o24"&&(g+=u.shift(),v+=u.shift(),e.U.P.lineTo(l,g,v))}else{if(D=="o11")break;if(D=="o1234"||D=="o1235"||D=="o1236"||D=="o1237")D=="o1234"&&(_=v,w=(x=g+u.shift())+u.shift(),T=A=_+u.shift(),M=A,b=v,g=(P=(R=(C=w+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(l,x,_,w,A,C,T),e.U.P.curveTo(l,R,M,P,b,g,v)),D=="o1235"&&(x=g+u.shift(),_=v+u.shift(),w=x+u.shift(),A=_+u.shift(),C=w+u.shift(),T=A+u.shift(),R=C+u.shift(),M=T+u.shift(),P=R+u.shift(),b=M+u.shift(),g=P+u.shift(),v=b+u.shift(),u.shift(),e.U.P.curveTo(l,x,_,w,A,C,T),e.U.P.curveTo(l,R,M,P,b,g,v)),D=="o1236"&&(x=g+u.shift(),_=v+u.shift(),w=x+u.shift(),T=A=_+u.shift(),M=A,P=(R=(C=w+u.shift())+u.shift())+u.shift(),b=M+u.shift(),g=P+u.shift(),e.U.P.curveTo(l,x,_,w,A,C,T),e.U.P.curveTo(l,R,M,P,b,g,v)),D=="o1237"&&(x=g+u.shift(),_=v+u.shift(),w=x+u.shift(),A=_+u.shift(),C=w+u.shift(),T=A+u.shift(),R=C+u.shift(),M=T+u.shift(),P=R+u.shift(),b=M+u.shift(),Math.abs(P-g)>Math.abs(b-v)?g=P+u.shift():v=b+u.shift(),e.U.P.curveTo(l,x,_,w,A,C,T),e.U.P.curveTo(l,R,M,P,b,g,v));else if(D=="o14"){if(u.length>0&&!f&&(h=u.shift()+o.nominalWidthX,f=!0),u.length==4){var G=u.shift(),j=u.shift(),Y=u.shift(),X=u.shift(),K=e.CFF.glyphBySE(o,Y),ce=e.CFF.glyphBySE(o,X);e.U._drawCFF(o.CharStrings[K],s,o,a,l),s.x=G,s.y=j,e.U._drawCFF(o.CharStrings[ce],s,o,a,l)}m&&(e.U.P.closePath(l),m=!1)}else if(D=="o19"||D=="o20")u.length%2!=0&&!f&&(h=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,f=!0,y+=c+7>>3;else if(D=="o21")u.length>2&&!f&&(h=u.shift()+a.nominalWidthX,f=!0),v+=u.pop(),g+=u.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,g,v),m=!0;else if(D=="o22")u.length>1&&!f&&(h=u.shift()+a.nominalWidthX,f=!0),g+=u.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,g,v),m=!0;else if(D=="o25"){for(;u.length>6;)g+=u.shift(),v+=u.shift(),e.U.P.lineTo(l,g,v);x=g+u.shift(),_=v+u.shift(),w=x+u.shift(),A=_+u.shift(),g=w+u.shift(),v=A+u.shift(),e.U.P.curveTo(l,x,_,w,A,g,v)}else if(D=="o26")for(u.length%2&&(g+=u.shift());u.length>0;)x=g,_=v+u.shift(),g=w=x+u.shift(),v=(A=_+u.shift())+u.shift(),e.U.P.curveTo(l,x,_,w,A,g,v);else if(D=="o27")for(u.length%2&&(v+=u.shift());u.length>0;)_=v,w=(x=g+u.shift())+u.shift(),A=_+u.shift(),g=w+u.shift(),v=A,e.U.P.curveTo(l,x,_,w,A,g,v);else if(D=="o10"||D=="o29"){var he=D=="o10"?a:o;if(u.length==0)console.debug("error: empty stack");else{var te=u.pop(),me=he.Subrs[te+he.Bias];s.x=g,s.y=v,s.nStems=c,s.haveWidth=f,s.width=h,s.open=m,e.U._drawCFF(me,s,o,a,l),g=s.x,v=s.y,c=s.nStems,f=s.haveWidth,h=s.width,m=s.open}}else if(D=="o30"||D=="o31"){var pe=u.length,oe=(re=0,D=="o31");for(re+=pe-(z=-3&pe);re<z;)oe?(_=v,w=(x=g+u.shift())+u.shift(),v=(A=_+u.shift())+u.shift(),z-re==5?(g=w+u.shift(),re++):g=w,oe=!1):(x=g,_=v+u.shift(),w=x+u.shift(),A=_+u.shift(),g=w+u.shift(),z-re==5?(v=A+u.shift(),re++):v=A,oe=!0),e.U.P.curveTo(l,x,_,w,A,g,v),re+=4}else{if((D+"").charAt(0)=="o")throw console.debug("Unknown operation: "+D,i),D;u.push(D)}}}s.x=g,s.y=v,s.nStems=c,s.haveWidth=f,s.width=h,s.open=m};var t=e,r={Typr:t};return n.Typr=t,n.default=r,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function QX(){return function(n){var e=Uint8Array,t=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(D,z){for(var N=new t(31),J=0;J<31;++J)N[J]=z+=1<<D[J-1];var Q=new r(N[30]);for(J=1;J<30;++J)for(var re=N[J];re<N[J+1];++re)Q[re]=re-N[J]<<5|J;return[N,Q]},l=a(i,2),u=l[0],c=l[1];u[28]=258,c[258]=28;for(var f=a(s,0)[0],h=new t(32768),m=0;m<32768;++m){var y=(43690&m)>>>1|(21845&m)<<1;y=(61680&(y=(52428&y)>>>2|(13107&y)<<2))>>>4|(3855&y)<<4,h[m]=((65280&y)>>>8|(255&y)<<8)>>>1}var g=function(D,z,N){for(var J=D.length,Q=0,re=new t(z);Q<J;++Q)++re[D[Q]-1];var G,j=new t(z);for(Q=0;Q<z;++Q)j[Q]=j[Q-1]+re[Q-1]<<1;if(N){G=new t(1<<z);var Y=15-z;for(Q=0;Q<J;++Q)if(D[Q])for(var X=Q<<4|D[Q],K=z-D[Q],ce=j[D[Q]-1]++<<K,he=ce|(1<<K)-1;ce<=he;++ce)G[h[ce]>>>Y]=X}else for(G=new t(J),Q=0;Q<J;++Q)D[Q]&&(G[Q]=h[j[D[Q]-1]++]>>>15-D[Q]);return G},v=new e(288);for(m=0;m<144;++m)v[m]=8;for(m=144;m<256;++m)v[m]=9;for(m=256;m<280;++m)v[m]=7;for(m=280;m<288;++m)v[m]=8;var x=new e(32);for(m=0;m<32;++m)x[m]=5;var _=g(v,9,1),w=g(x,5,1),A=function(D){for(var z=D[0],N=1;N<D.length;++N)D[N]>z&&(z=D[N]);return z},R=function(D,z,N){var J=z/8|0;return(D[J]|D[J+1]<<8)>>(7&z)&N},M=function(D,z){var N=z/8|0;return(D[N]|D[N+1]<<8|D[N+2]<<16)>>(7&z)},P=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],b=function(D,z,N){var J=new Error(z||P[D]);if(J.code=D,Error.captureStackTrace&&Error.captureStackTrace(J,b),!N)throw J;return J},C=function(D,z,N){var J=D.length;if(!J||N&&!N.l&&J<5)return z||new e(0);var Q=!z||N,re=!N||N.i;N||(N={}),z||(z=new e(3*J));var G,j=function(Ve){var rt=z.length;if(Ve>rt){var ft=new e(Math.max(2*rt,Ve));ft.set(z),z=ft}},Y=N.f||0,X=N.p||0,K=N.b||0,ce=N.l,he=N.d,te=N.m,me=N.n,pe=8*J;do{if(!ce){N.f=Y=R(D,X,1);var oe=R(D,X+1,3);if(X+=3,!oe){var U=D[(ze=((G=X)/8|0)+(7&G&&1)+4)-4]|D[ze-3]<<8,W=ze+U;if(W>J){re&&b(0);break}Q&&j(K+U),z.set(D.subarray(ze,W),K),N.b=K+=U,N.p=X=8*W;continue}if(oe==1)ce=_,he=w,te=9,me=5;else if(oe==2){var Z=R(D,X,31)+257,q=R(D,X+10,15)+4,se=Z+R(D,X+5,31)+1;X+=14;for(var ge=new e(se),Me=new e(19),Ce=0;Ce<q;++Ce)Me[o[Ce]]=R(D,X+3*Ce,7);X+=3*q;var Ke=A(Me),Re=(1<<Ke)-1,Oe=g(Me,Ke,1);for(Ce=0;Ce<se;){var ze,Ee=Oe[R(D,X,Re)];if(X+=15&Ee,(ze=Ee>>>4)<16)ge[Ce++]=ze;else{var $=0,O=0;for(ze==16?(O=3+R(D,X,3),X+=2,$=ge[Ce-1]):ze==17?(O=3+R(D,X,7),X+=3):ze==18&&(O=11+R(D,X,127),X+=7);O--;)ge[Ce++]=$}}var ae=ge.subarray(0,Z),Ae=ge.subarray(Z);te=A(ae),me=A(Ae),ce=g(ae,te,1),he=g(Ae,me,1)}else b(1);if(X>pe){re&&b(0);break}}Q&&j(K+131072);for(var ke=(1<<te)-1,Ue=(1<<me)-1,je=X;;je=X){var Ne=($=ce[M(D,X)&ke])>>>4;if((X+=15&$)>pe){re&&b(0);break}if($||b(2),Ne<256)z[K++]=Ne;else{if(Ne==256){je=X,ce=null;break}var Be=Ne-254;if(Ne>264){var nt=i[Ce=Ne-257];Be=R(D,X,(1<<nt)-1)+u[Ce],X+=nt}var $e=he[M(D,X)&Ue],et=$e>>>4;if($e||b(3),X+=15&$e,Ae=f[et],et>3&&(nt=s[et],Ae+=M(D,X)&(1<<nt)-1,X+=nt),X>pe){re&&b(0);break}Q&&j(K+131072);for(var Ge=K+Be;K<Ge;K+=4)z[K]=z[K-Ae],z[K+1]=z[K+1-Ae],z[K+2]=z[K+2-Ae],z[K+3]=z[K+3-Ae];K=Ge}}N.l=ce,N.p=je,N.b=K,ce&&(Y=1,N.m=te,N.d=he,N.n=me)}while(!Y);return K==z.length?z:function(Ve,rt,ft){(rt==null||rt<0)&&(rt=0),(ft==null||ft>Ve.length)&&(ft=Ve.length);var yt=new(Ve instanceof t?t:Ve instanceof r?r:e)(ft-rt);return yt.set(Ve.subarray(rt,ft)),yt}(z,0,K)},T=new e(0),I=typeof TextDecoder<"u"&&new TextDecoder;try{I.decode(T,{stream:!0})}catch{}return n.convert_streams=function(D){var z=new DataView(D),N=0;function J(){var Z=z.getUint16(N);return N+=2,Z}function Q(){var Z=z.getUint32(N);return N+=4,Z}function re(Z){U.setUint16(W,Z),W+=2}function G(Z){U.setUint32(W,Z),W+=4}for(var j={signature:Q(),flavor:Q(),length:Q(),numTables:J(),reserved:J(),totalSfntSize:Q(),majorVersion:J(),minorVersion:J(),metaOffset:Q(),metaLength:Q(),metaOrigLength:Q(),privOffset:Q(),privLength:Q()},Y=0;Math.pow(2,Y)<=j.numTables;)Y++;Y--;for(var X=16*Math.pow(2,Y),K=16*j.numTables-X,ce=12,he=[],te=0;te<j.numTables;te++)he.push({tag:Q(),offset:Q(),compLength:Q(),origLength:Q(),origChecksum:Q()}),ce+=16;var me,pe=new Uint8Array(12+16*he.length+he.reduce(function(Z,q){return Z+q.origLength+4},0)),oe=pe.buffer,U=new DataView(oe),W=0;return G(j.flavor),re(j.numTables),re(X),re(Y),re(K),he.forEach(function(Z){G(Z.tag),G(Z.origChecksum),G(ce),G(Z.origLength),Z.outOffset=ce,(ce+=Z.origLength)%4!=0&&(ce+=4-ce%4)}),he.forEach(function(Z){var q,se=D.slice(Z.offset,Z.offset+Z.compLength);if(Z.compLength!=Z.origLength){var ge=new Uint8Array(Z.origLength);q=new Uint8Array(se,2),C(q,ge)}else ge=new Uint8Array(se);pe.set(ge,Z.outOffset);var Me=0;(ce=Z.outOffset+Z.origLength)%4!=0&&(Me=4-ce%4),pe.set(new Uint8Array(Me).buffer,Z.outOffset+Z.origLength),me=ce+Me}),oe.slice(0,me)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function ZX(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,o=4,a=8,l=16,u=32;let c;function f(R){if(!c){const M={R:s,L:i,D:o,C:l,U:u,T:a};c=new Map;for(let P in r){let b=0;r[P].split(",").forEach(C=>{let[T,I]=C.split("+");T=parseInt(T,36),I=I?parseInt(I,36):0,c.set(b+=T,M[P]);for(let D=I;D--;)c.set(++b,M[P])})}}return c.get(R)||u}const h=1,m=2,y=3,g=4,v=[null,"isol","init","fina","medi"];function x(R){const M=new Uint8Array(R.length);let P=u,b=h,C=-1;for(let T=0;T<R.length;T++){const I=R.codePointAt(T);let D=f(I)|0,z=h;D&a||(P&(i|o|l)?D&(s|o|l)?(z=y,(b===h||b===y)&&M[C]++):D&(i|u)&&(b===m||b===g)&&M[C]--:P&(s|u)&&(b===m||b===g)&&M[C]--,b=M[T]=z,P=D,C=T,I>65535&&T++)}return M}function _(R,M){const P=[];for(let C=0;C<M.length;C++){const T=M.codePointAt(C);T>65535&&C++,P.push(n.U.codeToGlyph(R,T))}const b=R.GSUB;if(b){const{lookupList:C,featureList:T}=b;let I;const D=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,z=[];T.forEach(N=>{if(D.test(N.tag))for(let J=0;J<N.tab.length;J++){if(z[N.tab[J]])continue;z[N.tab[J]]=!0;const Q=C[N.tab[J]],re=/^(isol|init|fina|medi)$/.test(N.tag);re&&!I&&(I=x(M));for(let G=0;G<P.length;G++)(!I||!re||v[I[G]]===N.tag)&&n.U._applySubs(P,G,Q,C)}})}return P}function w(...R){for(let M=0;M<R.length;M++)if(typeof R[M]=="number")return R[M]}function A(R){const M=Object.create(null),P=R["OS/2"],b=R.hhea,C=R.head.unitsPerEm,T=w(P&&P.sTypoAscender,b&&b.ascender,C),I={unitsPerEm:C,ascender:T,descender:w(P&&P.sTypoDescender,b&&b.descender,0),capHeight:w(P&&P.sCapHeight,T),xHeight:w(P&&P.sxHeight,T),lineGap:w(P&&P.sTypoLineGap,b&&b.lineGap),forEachGlyph(D,z,N,J){let Q=0;const re=1/I.unitsPerEm*z,G=_(R,D);let j=0,Y=-1;return G.forEach((X,K)=>{if(X!==-1){let ce=M[X];if(!ce){const{cmds:he,crds:te}=n.U.glyphToPath(R,X);let me="",pe=0;for(let q=0,se=he.length;q<se;q++){const ge=t[he[q]];me+=he[q];for(let Me=1;Me<=ge;Me++)me+=(Me>1?",":"")+te[pe++]}let oe,U,W,Z;if(te.length){oe=U=1/0,W=Z=-1/0;for(let q=0,se=te.length;q<se;q+=2){let ge=te[q],Me=te[q+1];ge<oe&&(oe=ge),Me<U&&(U=Me),ge>W&&(W=ge),Me>Z&&(Z=Me)}}else oe=W=U=Z=0;ce=M[X]={index:X,advanceWidth:R.hmtx.aWidth[X],xMin:oe,yMin:U,xMax:W,yMax:Z,path:me,pathCommandCount:he.length}}Y!==-1&&(Q+=n.U.getPairAdjustment(R,Y,X)*re),J.call(null,ce,Q,j),ce.advanceWidth&&(Q+=ce.advanceWidth*re),N&&(Q+=N*z),Y=X}j+=D.codePointAt(j)>65535?2:1}),Q}};return I}return function(M){const P=new Uint8Array(M,0,4),b=n._bin.readASCII(P,0,4);if(b==="wOFF")M=e(M);else if(b==="wOF2")throw new Error("woff2 fonts not supported");return A(n.parse(M)[0])}}const qX=sg({name:"Typr Font Parser",dependencies:[YX,QX,ZX],init(n,e,t){const r=n(),i=e();return t(r,i)}}),Jf={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},eK=new qe;function bf(){return(self.performance||Date).now()}const fP=Object.create(null);function ok(n,e){n=rK({},n);const t=bf();if(n.font=iK(n.font||Jf.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||Jf.sdfGlyphSize,n.colorRanges!=null){let f={};for(let h in n.colorRanges)if(n.colorRanges.hasOwnProperty(h)){let m=n.colorRanges[h];typeof m!="number"&&(m=eK.set(m).getHex()),f[h]=m}n.colorRanges=f}Object.freeze(n);const{textureWidth:r,sdfExponent:i}=Jf,{sdfGlyphSize:s}=n,o=r/s*4;let a=fP[s];if(!a){const f=document.createElement("canvas");f.width=r,f.height=s*256/o,a=fP[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:f,sdfTexture:new xn(f,void 0,void 0,void 0,rn,rn),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,tK(a)}const{sdfTexture:l,sdfCanvas:u}=a;let c=a.glyphsByFont.get(n.font);c||a.glyphsByFont.set(n.font,c=new Map),oK(n).then(f=>{const{glyphIds:h,glyphPositions:m,fontSize:y,unitsPerEm:g,timings:v}=f,x=[],_=new Float32Array(h.length*4),w=y/g;let A=0,R=0;const M=bf();h.forEach((I,D)=>{let z=c.get(I);if(!z){const{path:re,pathBounds:G}=f.glyphData[I],j=Math.max(G[2]-G[0],G[3]-G[1])/s*(Jf.sdfMargin*s+.5),Y=a.glyphCount++,X=[G[0]-j,G[1]-j,G[2]+j,G[3]+j];c.set(I,z={path:re,atlasIndex:Y,sdfViewBox:X}),x.push(z)}const{sdfViewBox:N}=z,J=m[R++],Q=m[R++];_[A++]=J+N[0]*w,_[A++]=Q+N[1]*w,_[A++]=J+N[2]*w,_[A++]=Q+N[3]*w,h[D]=z.atlasIndex}),v.quads=(v.quads||0)+(bf()-M);const P=bf();v.sdf={};const b=u.height,C=Math.ceil(a.glyphCount/o),T=Math.pow(2,Math.ceil(Math.log2(C*s)));T>b&&(console.info(`Increasing SDF texture size ${b}->${T}`),KX(u,r,T),l.dispose()),Promise.all(x.map(I=>ak(I,a,n.gpuAccelerateSDF).then(({timing:D})=>{v.sdf[I.atlasIndex]=D}))).then(()=>{x.length&&!a.contextLost&&(lk(a),l.needsUpdate=!0),v.sdfTotal=bf()-P,v.total=bf()-t,e(Object.freeze({parameters:n,sdfTexture:l,sdfGlyphSize:s,sdfExponent:i,glyphBounds:_,glyphAtlasIndices:h,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,capHeight:f.capHeight,xHeight:f.xHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings}))})}),Promise.resolve().then(()=>{a.contextLost||XX(u)})}function ak({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:r,sdfCanvas:i,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=Jf,u=Math.max(t[2]-t[0],t[3]-t[1]),c=Math.floor(e/4),f=c%(a/r)*r,h=Math.floor(c/(a/r))*r,m=e%4;return HX(r,r,n,t,u,l,i,f,h,m,o)}function tK(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const r=[];n.glyphsByFont.forEach(i=>{i.forEach(s=>{r.push(ak(s,n,!0))})}),Promise.all(r).then(()=>{lk(n),n.sdfTexture.needsUpdate=!0})})}function nK({font:n,characters:e,sdfGlyphSize:t},r){let i=Array.isArray(e)?e.join(`
`):""+e;ok({font:n,sdfGlyphSize:t,text:i},r)}function rK(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let av;function iK(n){return av||(av=typeof document>"u"?{}:document.createElement("a")),av.href=n,av.href}function lk(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:r,height:i}=e,s=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==r*i*4)&&(o=new Uint8Array(r*i*4),t.image={width:r,height:i,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,o)}}const sK=sg({name:"Typesetter",dependencies:[Jf,qX,GX,DX],init(n,e,t,r){const{defaultFontURL:i}=n;return t(e,r(),{defaultFontURL:i})}}),oK=sg({name:"Typesetter",dependencies:[sK],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}}),dP={};function aK(n){let e=dP[n];if(!e){const t=new Za(1,1,n,n),r=t.clone(),i=t.attributes,s=r.attributes,o=new Lt,a=i.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new vt([...i[l].array,...s[l].array],i[l].itemSize))}),o.setIndex([...t.index.array,...r.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=dP[n]=o}return e}const lK="aTroikaGlyphBounds",hP="aTroikaGlyphIndex",uK="aTroikaGlyphColor";class cK extends ZA{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Qa,this.boundingBox=new Ya}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===fr?t/2:0,e===Gr?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=aK(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=t.attributes[r].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,r,i,s){Qx(this,lK,e,4),Qx(this,hP,t,1),Qx(this,uK,s,3),this._blockBounds=r,this._chunkedBounds=i,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:r}=this;if(t){const{PI:i,floor:s,min:o,max:a,sin:l,cos:u}=Math,c=i/2,f=i*2,h=Math.abs(t),m=e[0]/h,y=e[2]/h,g=s((m+c)/f)!==s((y+c)/f)?-h:o(l(m)*h,l(y)*h),v=s((m-c)/f)!==s((y-c)/f)?h:a(l(m)*h,l(y)*h),x=s((m+i)/f)!==s((y+i)/f)?h*2:a(h-u(m)*h,h-u(y)*h);r.min.set(g,e[1],t<0?-x:0),r.max.set(v,e[3],t<0?0:x)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(hP).count,r=this._chunkedBounds;if(r)for(let i=r.length;i--;){t=r[i].end;let s=r[i].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}}function Qx(n,e,t,r){const i=n.getAttribute(e);t?i&&i.array.length===t.length?(i.array.set(t),i.needsUpdate=!0):(n.setAttribute(e,new Ac(t,r)),delete n._maxInstanceCount,n.dispose()):i&&n.deleteAttribute(e)}const fK=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,dK=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,hK=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,pK=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function mK(n){const e=A2(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new De},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new jt(0,0,0,0)},uTroikaClipRect:{value:new jt(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new De},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new qe},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Pr},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:fK,vertexTransform:dK,fragmentDefs:hK,fragmentColorTransform:pK,customRewriter({vertexShader:t,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(ik,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const lM=new Pi({color:16777215,side:Gr,transparent:!0}),pP=8421504,mP=new bt,lv=new V,Zx=new V,op=[],gK=new V,qx="+x+y";function gP(n){return Array.isArray(n)?n[0]:n}let uk=()=>{const n=new Nn(new Za(1,1),lM);return uk=()=>n,n},ck=()=>{const n=new Nn(new Za(1,1,32,1),lM);return ck=()=>n,n};const vK={type:"syncstart"},yK={type:"synccomplete"},fk=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],_K=fk.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let dk=class extends Nn{constructor(){const e=new cK;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=pP,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=qx,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(vK),ok({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(i=>i&&i())})),this.dispatchEvent(yK),e&&e()})))}onBeforeRender(e,t,r,i,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=eo}onAfterRender(e,t,r,i,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=lM.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=mK(t),t.addEventListener("dispose",function r(){t.removeEventListener("dispose",r),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return gP(this.material).getDepthMaterial()}get customDistanceMaterial(){return gP(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,r=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:a,blockBounds:l}=i;r.uTroikaSDFTexture.value=a,r.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),r.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,r.uTroikaSDFExponent.value=i.sdfExponent,r.uTroikaTotalBounds.value.fromArray(l),r.uTroikaUseGlyphColors.value=!t&&!!i.glyphColors;let u=0,c=0,f=0,h,m,y,g=0,v=0;if(t){let{outlineWidth:_,outlineOffsetX:w,outlineOffsetY:A,outlineBlur:R,outlineOpacity:M}=this;u=this._parsePercent(_)||0,c=Math.max(0,this._parsePercent(R)||0),h=M,g=this._parsePercent(w)||0,v=this._parsePercent(A)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(y=this.strokeColor,r.uTroikaStrokeColor.value.set(y??pP),m=this.strokeOpacity,m==null&&(m=1)),h=this.fillOpacity;r.uTroikaDistanceOffset.value=u,r.uTroikaPositionOffset.value.set(g,v),r.uTroikaBlurRadius.value=c,r.uTroikaStrokeWidth.value=f,r.uTroikaStrokeOpacity.value=m,r.uTroikaFillOpacity.value=h??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let x=this.clipRect;if(x&&Array.isArray(x)&&x.length===4)r.uTroikaClipRect.value.fromArray(x);else{const _=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(l[0]-_,l[1]-_,l[2]+_,l[3]+_)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new qe;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||qx;if(o!==e._orientation){let a=r.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==qx&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,u,c,f,h]=l;lv.set(0,0,0)[c]=u==="-"?1:-1,Zx.set(0,0,0)[h]=f==="-"?-1:1,mP.lookAt(gK,lv.cross(Zx),Zx),a.setFromMatrix4(mP)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),r=t?parseFloat(t[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new De){t.copy(e);const r=this.curveRadius;return r&&(t.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),t}worldPositionToTextCoords(e,t=new De){return lv.copy(e),this.localPositionToTextCoords(this.worldToLocal(lv),t)}raycast(e,t){const{textRenderInfo:r,curveRadius:i}=this;if(r){const s=r.blockBounds,o=i?ck():uk(),a=o.geometry,{position:l,uv:u}=a.attributes;for(let c=0;c<u.count;c++){let f=s[0]+u.getX(c)*(s[2]-s[0]);const h=s[1]+u.getY(c)*(s[3]-s[1]);let m=0;i&&(m=i-Math.cos(f/i)*i,f=Math.sin(f/i)*i),l.setXYZ(c,f,h,m)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,op.length=0,o.raycast(e,op);for(let c=0;c<op.length;c++)op[c].object=this,t.push(op[c])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,_K.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}};fk.forEach(n=>{const e="_private_"+n;Object.defineProperty(dk.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const xK=n=>typeof n=="object"&&typeof n.then=="function",uv=[];function wK(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function SK(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of uv)if(wK(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=uv.indexOf(i);s!==-1&&uv.splice(s,1)},promise:(xK(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(uv.push(i),!t)throw i.promise}const bK=(n,e,t)=>SK(n,e,!1,t),vP=L.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:r,fontSize:i=1,children:s,characters:o,onSync:a,...l},u)=>{const c=vs(({invalidate:y})=>y),[f]=L.useState(()=>new dk),[h,m]=L.useMemo(()=>{const y=[];let g="";return L.Children.forEach(s,v=>{typeof v=="string"||typeof v=="number"?g+=v:y.push(v)}),[y,g]},[s]);return bK(()=>new Promise(y=>nK({font:r,characters:o},y)),["troika-text",r,o]),L.useLayoutEffect(()=>void f.sync(()=>{c(),a&&a(f)})),L.useEffect(()=>()=>f.dispose(),[f]),L.createElement("primitive",vn({object:f,ref:u,font:r,text:m,anchorX:e,anchorY:t,fontSize:i,sdfGlyphSize:n},l),h)});let cv=null,hk="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function pk(n,e,t){return r=>{t&&t(r),n&&(cv||(cv=new MX),cv.setDecoderPath(typeof n=="string"?n:hk),r.setDRACOLoader(cv)),e&&r.setMeshoptDecoder(typeof Kx=="function"?Kx():Kx)}}function Fc(n,e=!0,t=!0,r){return Yd(aM,n,pk(e,t,r))}Fc.preload=(n,e=!0,t=!0,r)=>Yd.preload(aM,n,pk(e,t,r));Fc.clear=n=>Yd.clear(aM,n);Fc.setDecoderPath=n=>{hk=n};function AK(n,e,t){const r=vs(h=>h.size),i=vs(h=>h.viewport),s=typeof n=="number"?n:r.width*i.dpr,o=typeof e=="number"?e:r.height*i.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:u,...c}=a,f=L.useMemo(()=>{const h=new Fn(s,o,{minFilter:rn,magFilter:rn,type:Qr,...c});return u&&(h.depthTexture=new p1(s,o,Yr)),h.samples=l,h},[]);return L.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),L.useEffect(()=>()=>f.dispose(),[]),f}const MK=n=>typeof n=="function",EK=L.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:r,children:i,...s},o)=>{const a=vs(({set:v})=>v),l=vs(({camera:v})=>v),u=vs(({size:v})=>v),c=L.useRef(null),f=L.useRef(null),h=AK(e);L.useLayoutEffect(()=>{s.manual||(c.current.aspect=u.width/u.height)},[u,s]),L.useLayoutEffect(()=>{c.current.updateProjectionMatrix()});let m=0,y=null;const g=MK(i);return so(v=>{g&&(t===1/0||m<t)&&(f.current.visible=!1,v.gl.setRenderTarget(h),y=v.scene.background,n&&(v.scene.background=n),v.gl.render(v.scene,c.current),v.scene.background=y,v.gl.setRenderTarget(null),f.current.visible=!0,m++)}),L.useLayoutEffect(()=>{if(r){const v=l;return a(()=>({camera:c.current})),()=>a(()=>({camera:v}))}},[c,r,a]),L.createElement(L.Fragment,null,L.createElement("perspectiveCamera",vn({ref:E1([c,o])},s),!g&&i),L.createElement("group",{ref:f},g&&i(h.texture)))});var fn={},CK={get exports(){return fn},set exports(n){fn=n}},TK="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",RK=TK,PK=RK;function mk(){}function gk(){}gk.resetWarningCache=mk;var BK=function(){function n(r,i,s,o,a,l){if(l!==PK){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:gk,resetWarningCache:mk};return t.PropTypes=t,t};CK.exports=BK();fn.func.isRequired,fn.arrayOf(fn.oneOfType([fn.element,fn.func])).isRequired;const yP=(n,e)=>{"updateRanges"in n?n.updateRanges[0]=e:n.updateRange=e};function IK(n){return typeof n=="function"}const _P=new bt,xP=new bt,fv=[],ap=new Nn;class DK extends bo{constructor(){super(),this.color=new qe("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,t){const r=this.instance.current;if(!r||!r.geometry||!r.material)return;ap.geometry=r.geometry;const i=r.matrixWorld,s=r.userData.instances.indexOf(this.instanceKey);if(!(s===-1||s>r.count)){r.getMatrixAt(s,_P),xP.multiplyMatrices(i,_P),ap.matrixWorld=xP,r.material instanceof zn?ap.material.side=r.material.side:ap.material.side=r.material[0].side,ap.raycast(e,fv);for(let o=0,a=fv.length;o<a;o++){const l=fv[o];l.instanceId=s,l.object=this,t.push(l)}fv.length=0}}}const vk=L.createContext(null),wP=new bt,SP=new bt,LK=new bt,bP=new V,AP=new Zn,MP=new V,yk=L.forwardRef(({context:n,children:e,...t},r)=>{L.useMemo(()=>tg({PositionMesh:DK}),[]);const i=L.useRef(),{subscribe:s,getParent:o}=L.useContext(n||vk);return L.useLayoutEffect(()=>s(i),[]),L.createElement("positionMesh",vn({instance:o(),instanceKey:i,ref:E1([r,i])},t),e)}),FK=L.forwardRef(({children:n,range:e,limit:t=1e3,frames:r=1/0,...i},s)=>{const[{context:o,instance:a}]=L.useState(()=>{const v=L.createContext(null);return{context:v,instance:L.forwardRef((x,_)=>L.createElement(yk,vn({context:v},x,{ref:_})))}}),l=L.useRef(null),[u,c]=L.useState([]),[[f,h]]=L.useState(()=>{const v=new Float32Array(t*16);for(let x=0;x<t;x++)LK.identity().toArray(v,x*16);return[v,new Float32Array([...new Array(t*3)].map(()=>1))]});L.useEffect(()=>{l.current.instanceMatrix.needsUpdate=!0});let m=0,y=0;so(()=>{if(r===1/0||m<r){l.current.updateMatrix(),l.current.updateMatrixWorld(),wP.copy(l.current.matrixWorld).invert(),y=Math.min(t,e!==void 0?e:t,u.length),l.current.count=y,yP(l.current.instanceMatrix,{offset:0,count:y*16}),yP(l.current.instanceColor,{offset:0,count:y*3});for(let v=0;v<u.length;v++){const x=u[v].current;x.matrixWorld.decompose(bP,AP,MP),SP.compose(bP,AP,MP).premultiply(wP),SP.toArray(f,v*16),l.current.instanceMatrix.needsUpdate=!0,x.color.toArray(h,v*3),l.current.instanceColor.needsUpdate=!0}m++}});const g=L.useMemo(()=>({getParent:()=>l,subscribe:v=>(c(x=>[...x,v]),()=>c(x=>x.filter(_=>_.current!==v.current)))}),[]);return L.createElement("instancedMesh",vn({userData:{instances:u},matrixAutoUpdate:!1,ref:E1([s,l]),args:[null,null,0],raycast:()=>null},i),L.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:f.length/16,array:f,itemSize:16,usage:qS}),L.createElement("instancedBufferAttribute",{attach:"instanceColor",count:h.length/3,array:h,itemSize:3,usage:qS}),IK(n)?L.createElement(o.Provider,{value:g},n(a)):L.createElement(vk.Provider,{value:g},n))});function kK(n,e){const t=n+"Geometry";return L.forwardRef(({args:r,children:i,...s},o)=>{const a=L.useRef(null);return L.useImperativeHandle(o,()=>a.current),L.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),L.createElement("mesh",vn({ref:a},s),L.createElement(t,{attach:"geometry",args:r}),i)})}const EP=kK("sphere"),OK=L.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:r=1,floatIntensity:i=1,floatingRange:s=[-.1,.1],...o},a)=>{const l=L.useRef(null),u=L.useRef(Math.random()*1e4);return so(c=>{var f,h;if(!e||t===0)return;const m=u.current+c.clock.getElapsedTime();l.current.rotation.x=Math.cos(m/4*t)/8*r,l.current.rotation.y=Math.sin(m/4*t)/8*r,l.current.rotation.z=Math.sin(m/4*t)/20*r;let y=Math.sin(m/4*t)/10;y=$s.mapLinear(y,-.1,.1,(f=s==null?void 0:s[0])!==null&&f!==void 0?f:-.1,(h=s==null?void 0:s[1])!==null&&h!==void 0?h:.1),l.current.position.y=y*i,l.current.updateMatrix()}),L.createElement("group",o,L.createElement("group",{ref:E1([l,a]),matrixAutoUpdate:!1},n))}),ew={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},UK="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",CP=n=>Array.isArray(n);function _k({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){var s;let o=null,a=!1,l;if(t){if(!(t in ew))throw new Error("Preset must be one of: "+Object.keys(ew).join(", "));n=ew[t],e=UK}if(a=CP(n),l=CP(n)?"cube":n.startsWith("data:application/exr")?"exr":n.startsWith("data:application/hdr")?"hdr":(s=n.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=a?aF:l==="hdr"?bX:l==="exr"?AX:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);const u=Yd(o,a?[n]:n,m=>{m.setPath==null||m.setPath(e),i&&i(m)}),c=a?u[0]:u;c.mapping=a?Va:_d;const f=3001,h=3e3;return"colorSpace"in c?c.colorSpace=r??a?"srgb":"srgb-linear":c.encoding=r??a?f:h,c}const NK=n=>n.current&&n.current.isScene,zK=n=>NK(n)?n.current:n;function uM(n,e,t,r,i=0){const s=zK(e||t),o=s.background,a=s.environment,l=s.backgroundBlurriness||0;return n!=="only"&&(s.environment=r),n&&(s.background=r),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=i),()=>{n!=="only"&&(s.environment=a),n&&(s.background=o),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=l)}}function cM({scene:n,background:e=!1,blur:t,map:r}){const i=vs(s=>s.scene);return L.useLayoutEffect(()=>{if(r)return uM(e,n,i,r,t)},[i,n,r,e,t]),null}function xk({background:n=!1,scene:e,blur:t,...r}){const i=_k(r),s=vs(o=>o.scene);return L.useLayoutEffect(()=>uM(n,e,s,i,t),[i,n,e,s,t]),null}function GK({children:n,near:e=1,far:t=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,scene:l,files:u,path:c,preset:f=void 0,extensions:h}){const m=vs(w=>w.gl),y=vs(w=>w.scene),g=L.useRef(null),[v]=L.useState(()=>new Ad),x=L.useMemo(()=>{const w=new bA(r);return w.texture.type=Qr,w},[r]);L.useLayoutEffect(()=>(i===1&&g.current.update(m,v),uM(o,l,y,x.texture,a)),[n,v,x.texture,l,y,o,i,m]);let _=1;return so(()=>{(i===1/0||_<i)&&(g.current.update(m,v),_++)}),L.createElement(L.Fragment,null,Uj(L.createElement(L.Fragment,null,n,L.createElement("cubeCamera",{ref:g,args:[e,t,x]}),u||f?L.createElement(xk,{background:!0,files:u,preset:f,path:c,extensions:h}):s?L.createElement(cM,{background:!0,map:s,extensions:h}):null),v))}function HK(n){var e,t,r,i;const s=_k(n),o=n.map||s;L.useMemo(()=>tg({GroundProjectedEnvImpl:WJ}),[]);const a=L.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,u=(t=n.ground)==null?void 0:t.radius,c=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return L.createElement(L.Fragment,null,L.createElement(cM,vn({},n,{map:o})),L.createElement("groundProjectedEnvImpl",{args:a,scale:c,height:l,radius:u}))}function VK(n){return n.ground?L.createElement(HK,n):n.map?L.createElement(cM,n):n.children?L.createElement(GK,n):L.createElement(xk,n)}/**
 * postprocessing v6.30.2 build Fri Mar 31 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rschen
 * @license Zlib
 */var WK=`#include <packing>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
uniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));
#if __VERSION__ < 300
float l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#else
float l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#endif
l0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}`,fM="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",jK=class extends wr{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{THREE_REVISION:Ka.replace(/\D+/g,""),MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new ct(null),luminanceBuffer1:new ct(null),minLuminance:new ct(.01),deltaTime:new ct(0),tau:new ct(1)},extensions:{shaderTextureLOD:!0},blending:qr,depthWrite:!1,depthTest:!1,fragmentShader:WK,vertexShader:fM}),this.toneMapped=!1}set luminanceBuffer0(n){this.uniforms.luminanceBuffer0.value=n}setLuminanceBuffer0(n){this.uniforms.luminanceBuffer0.value=n}set luminanceBuffer1(n){this.uniforms.luminanceBuffer1.value=n}setLuminanceBuffer1(n){this.uniforms.luminanceBuffer1.value=n}set mipLevel1x1(n){this.defines.MIP_LEVEL_1X1=n.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(n){this.mipLevel1x1=n}set deltaTime(n){this.uniforms.deltaTime.value=n}setDeltaTime(n){this.uniforms.deltaTime.value=n}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(n){this.uniforms.minLuminance.value=n}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(n){this.uniforms.minLuminance.value=n}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(n){this.uniforms.tau.value=n}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(n){this.uniforms.tau.value=n}},Bt={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},Yl={NONE:0,DEPTH:1,CONVOLUTION:2},gn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Qd={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},ba={REINHARD:0,REINHARD2:1,REINHARD2_ADAPTIVE:2,OPTIMIZED_CINEON:3,ACES_FILMIC:4},dv={DEFAULT:0,ESKIL:1},$K=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,JK="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",XK=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],wk=class extends wr{constructor(n=new jt){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new ct(null),texelSize:new ct(new jt),scale:new ct(1),kernel:new ct(0)},blending:qr,depthWrite:!1,depthTest:!1,fragmentShader:$K,vertexShader:JK}),this.toneMapped=!1,this.setTexelSize(n.x,n.y),this.kernelSize=Qd.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return XK[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,r=1/e;this.uniforms.texelSize.value.set(t,r,t*.5,r*.5)}},KK=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,Sk=class extends wr{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new ct(null),opacity:new ct(1)},blending:qr,depthWrite:!1,depthTest:!1,fragmentShader:KK,vertexShader:fM}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},YK=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);
#else
vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));
#endif
gl_FragColor=vec4(n[index],d[index]);}`,QK="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",ZK=class extends wr{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ct(null),normalBuffer:new ct(null),texelSize:new ct(new De)},blending:qr,depthWrite:!1,depthTest:!1,fragmentShader:YK,vertexShader:QK}),this.toneMapped=!1}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=du){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},qK=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <encodings_fragment>
}`,eY="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",tY=class extends wr{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new ct(null),texelSize:new ct(new De)},blending:qr,depthWrite:!1,depthTest:!1,fragmentShader:qK,vertexShader:eY}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},nY=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,rY="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",iY=class extends wr{constructor(n,e,t,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Ka.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new ct(null),depthBuffer:new ct(null),resolution:new ct(new De),texelSize:new ct(new De),cameraNear:new ct(.3),cameraFar:new ct(1e3),aspect:new ct(1),time:new ct(0)},blending:qr,depthWrite:!1,depthTest:!1,dithering:i}),this.toneMapped=!1,n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(r)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=du){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){var e,t,r,i,s;return this.fragmentShader=nY.replace(gn.FRAGMENT_HEAD,(e=n.get(gn.FRAGMENT_HEAD))!=null?e:"").replace(gn.FRAGMENT_MAIN_UV,(t=n.get(gn.FRAGMENT_MAIN_UV))!=null?t:"").replace(gn.FRAGMENT_MAIN_IMAGE,(r=n.get(gn.FRAGMENT_MAIN_IMAGE))!=null?r:""),this.vertexShader=rY.replace(gn.VERTEX_HEAD,(i=n.get(gn.VERTEX_HEAD))!=null?i:"").replace(gn.VERTEX_MAIN_SUPPORT,(s=n.get(gn.VERTEX_MAIN_SUPPORT))!=null?s:""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof yr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return gn}},sY=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,oY=class extends wr{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Ka.replace(/\D+/g,"")},uniforms:{inputBuffer:new ct(null),threshold:new ct(0),smoothing:new ct(1),range:new ct(null)},blending:qr,depthWrite:!1,depthTest:!1,fragmentShader:sY,vertexShader:fM}),this.toneMapped=!1,this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},aY=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec4 maskParams;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;float linearGradientMask(const in float x){return smoothstep(maskParams.x,maskParams.y,x)-smoothstep(maskParams.w,maskParams.z,x);}void main(){vec2 dUv=vOffset*(1.0-linearGradientMask(vUv2.y));vec4 sum=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y-dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y-dUv.y));gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,lY="uniform vec4 texelSize;uniform float kernel;uniform float scale;uniform float aspect;uniform vec2 rotation;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;void main(){vec2 uv=position.xy*0.5+0.5;vUv=uv;vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));vOffset=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;gl_Position=vec4(position.xy,1.0,1.0);}",uY=class extends wk{constructor({kernelSize:n=Qd.MEDIUM,offset:e=0,rotation:t=0,focusArea:r=.4,feather:i=.3}={}){super(),this.fragmentShader=aY,this.vertexShader=lY,this.kernelSize=n,this.uniforms.aspect=new ct(1),this.uniforms.rotation=new ct(new De),this.uniforms.maskParams=new ct(new jt),this._offset=e,this._focusArea=r,this._feather=i,this.rotation=t,this.updateParams()}updateParams(){const n=this.uniforms.maskParams.value,e=Math.max(this.focusArea,0),t=Math.max(e-this.feather,0);n.set(this.offset-e,this.offset-t,this.offset+e,this.offset+t)}get rotation(){return Math.acos(this.uniforms.rotation.value.x)}set rotation(n){this.uniforms.rotation.value.set(Math.cos(n),Math.sin(n))}get offset(){return this._offset}set offset(n){this._offset=n,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(n){this._focusArea=n,this.updateParams()}get feather(){return this._feather}set feather(n){this._feather=n,this.updateParams()}setSize(n,e){super.setSize(n,e),this.uniforms.aspect.value=n/e}},cY=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <encodings_fragment>
}`,fY="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",dY=class extends wr{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new ct(null),supportBuffer:new ct(null),texelSize:new ct(new De),radius:new ct(.85)},blending:qr,depthWrite:!1,depthTest:!1,fragmentShader:cY,vertexShader:fY}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},hY=new Gd,wl=null;function pY(){if(wl===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);wl=new Lt,wl.setAttribute!==void 0?(wl.setAttribute("position",new Qt(n,3)),wl.setAttribute("uv",new Qt(e,2))):(wl.addAttribute("position",new Qt(n,3)),wl.addAttribute("uv",new Qt(e,2)))}return wl}var ts=class{constructor(n="Pass",e=new Ad,t=hY){this.name=n,this.renderer=null,this.scene=e,this.camera=t,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(n){if(this.rtt===n){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!n}}set mainScene(n){}set mainCamera(n){}setRenderer(n){this.renderer=n}isEnabled(){return this.enabled}setEnabled(n){this.enabled=n}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(n){let e=this.screen;e!==null?e.material=n:(e=new Nn(pY(),n),e.frustumCulled=!1,this.scene===null&&(this.scene=new Ad),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(n){this.fullscreenMaterial=n}getDepthTexture(){return null}setDepthTexture(n,e=du){}render(n,e,t,r,i){throw new Error("Render method not implemented!")}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Fn||e instanceof zn||e instanceof xn||e instanceof ts)&&this[n].dispose()}}},bk=class extends ts{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new Sk,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new Fn(1,1,{minFilter:rn,magFilter:rn,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,r,i){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==vi?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n.outputEncoding===It&&(this.renderTarget.texture.encoding=It))}},mY=class extends ts{constructor(n,{minLuminance:e=.01,adaptationRate:t=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new jK,this.needsSwap=!1,this.renderTargetPrevious=new Fn(1,1,{minFilter:Sn,magFilter:Sn,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const r=this.fullscreenMaterial;r.luminanceBuffer0=this.renderTargetPrevious.texture,r.luminanceBuffer1=n,r.minLuminance=e,r.adaptationRate=t,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new bk(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(n){this.fullscreenMaterial.mipLevel1x1=n}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(n){this.fullscreenMaterial.adaptationRate=n}render(n,e,t,r,i){this.fullscreenMaterial.deltaTime=r,n.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),n.render(this.scene,this.camera),this.copyPass.render(n,this.renderTargetAdapted)}},gY=class extends ts{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,r,i){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},TP=new qe,Ak=class extends ts{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,r,i){const s=this.overrideClearColor,o=this.overrideClearAlpha,a=n.getClearAlpha(),l=s!==null,u=o>=0;l?(n.getClearColor(TP),n.setClearColor(s,u?o:a)):u&&n.setClearAlpha(o),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(TP,a):u&&n.setClearAlpha(a)}},Sl=-1,dr=class extends io{constructor(n,e=Sl,t=Sl,r=1){super(),this.resizable=n,this.baseSize=new De(1,1),this.preferredSize=new De(e,t),this.target=this.preferredSize,this.s=r,this.effectiveSize=new De,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,r=this.scale;e.width!==Sl?t.width=e.width:e.height!==Sl?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*r),e.height!==Sl?t.height=e.height:e.width!==Sl?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*r)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(Sl),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Sl}},tw=!1,RP=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Gr:t=this.materialsFlatShadedDoubleSide;break;case fr:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Gr:t=this.materialsDoubleSide;break;case fr:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof wr))return n.clone();const e=n.uniforms,t=new Map;for(const i in e){const s=e[i].value;s.isRenderTargetTexture&&(e[i].value=null,t.set(i,s))}const r=n.clone();for(const i of t)e[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=eo;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.side=fr,r}),this.materialsDoubleSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.side=Gr,r}),this.materialsFlatShaded=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=fr,r}),this.materialsFlatShadedDoubleSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=Gr,r})}}render(n,e,t){const r=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,tw){const i=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of i)s[0].material=s[1];this.meshCount!==i.size&&i.clear()}else{const i=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=i}n.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return tw}static set workaroundEnabled(n){tw=n}},Mk=class extends ts{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new Ak,this.overrideMaterialManager=t===null?null:new RP(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new RP(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,r,i){const s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,u=s.background,c=n.shadowMap.autoUpdate,f=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(f),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,o):n.render(s,o),o.layers.mask=l,s.background=u,n.shadowMap.autoUpdate=c}},vY=class extends ts{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=dr.AUTO_SIZE,height:r=dr.AUTO_SIZE,resolutionX:i=t,resolutionY:s=r}={}){super("DepthDownsamplingPass");const o=new ZK;o.normalBuffer=n,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Fn(1,1,{minFilter:Sn,magFilter:Sn,depthBuffer:!1,type:Yr}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const a=this.resolution=new dr(this,i,s,e);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=du){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,r,i){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const r=n.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function PP(n,e,t){for(const r of e){const i="$1"+n+r.charAt(0).toUpperCase()+r.slice(1),s=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(s,i))}}function yY(n,e,t){var r,i,s,o,a;let l=e.getFragmentShader(),u=e.getVertexShader();const c=l!==void 0&&/mainImage/.test(l),f=l!==void 0&&/mainUv/.test(l);if(t.attributes|=e.getAttributes(),l===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(f&&t.attributes&Yl.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!c&&!f)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const h=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,m=t.shaderParts;let y=(r=m.get(gn.FRAGMENT_HEAD))!=null?r:"",g=(i=m.get(gn.FRAGMENT_MAIN_UV))!=null?i:"",v=(s=m.get(gn.FRAGMENT_MAIN_IMAGE))!=null?s:"",x=(o=m.get(gn.VERTEX_HEAD))!=null?o:"",_=(a=m.get(gn.VERTEX_MAIN_SUPPORT))!=null?a:"";const w=new Set,A=new Set;if(f&&(g+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),u!==null&&/mainSupport/.test(u)){const P=/mainSupport *\([\w\s]*?uv\s*?\)/.test(u);_+=`	${n}MainSupport(`,_+=P?`vUv);
`:`);
`;for(const b of u.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const C of b[1].split(/\s*,\s*/))t.varyings.add(C),w.add(C),A.add(C);for(const b of u.matchAll(h))A.add(b[1])}for(const P of l.matchAll(h))A.add(P[1]);for(const P of e.defines.keys())A.add(P.replace(/\([\w\s,]*\)/g,""));for(const P of e.uniforms.keys())A.add(P);A.delete("while"),A.delete("for"),A.delete("if"),e.uniforms.forEach((P,b)=>t.uniforms.set(n+b.charAt(0).toUpperCase()+b.slice(1),P)),e.defines.forEach((P,b)=>t.defines.set(n+b.charAt(0).toUpperCase()+b.slice(1),P));const R=new Map([["fragment",l],["vertex",u]]);PP(n,A,t.defines),PP(n,A,R),l=R.get("fragment"),u=R.get("vertex");const M=e.blendMode;if(t.blendModes.set(M.blendFunction,M),c){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(v+=e.inputColorSpace===It?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==null?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const P=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;v+=`${n}MainImage(color0, UV, `,t.attributes&Yl.DEPTH&&P.test(l)&&(v+="depth, ",t.readDepth=!0),v+=`color1);
	`;const b=n+"BlendOpacity";t.uniforms.set(b,M.opacity),v+=`color0 = blend${M.blendFunction}(color0, color1, ${b});

	`,y+=`uniform float ${b};

`}if(y+=l+`
`,u!==null&&(x+=u+`
`),m.set(gn.FRAGMENT_HEAD,y),m.set(gn.FRAGMENT_MAIN_UV,g),m.set(gn.FRAGMENT_MAIN_IMAGE,v),m.set(gn.VERTEX_HEAD,x),m.set(gn.VERTEX_MAIN_SUPPORT,_),e.extensions!==null)for(const P of e.extensions)t.extensions.add(P)}}var _Y=class extends ts{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new iY(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new CY;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===Bt.DST)n.attributes|=o.getAttributes()&Yl.DEPTH;else{if(n.attributes&o.getAttributes()&Yl.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);yY("e"+e++,o,n)}let t=n.shaderParts.get(gn.FRAGMENT_HEAD),r=n.shaderParts.get(gn.FRAGMENT_MAIN_IMAGE),i=n.shaderParts.get(gn.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const o of n.blendModes.values())t+=o.getShaderCode().replace(s,`blend${o.blendFunction}`)+`
`;n.attributes&Yl.DEPTH?(n.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===It&&(r+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(gn.FRAGMENT_HEAD,t),n.shaderParts.set(gn.FRAGMENT_MAIN_IMAGE,r),n.shaderParts.set(gn.FRAGMENT_MAIN_UV,i),n.shaderParts.forEach((o,a,l)=>l.set(a,o==null?void 0:o.trim().replace(/^#/,`
#`))),this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=du){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,r,i){for(const s of this.effects)s.update(n,e,r);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=r*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const r of this.effects)r.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==vi&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},Ek=class extends ts{constructor({kernelSize:n=Qd.MEDIUM,resolutionScale:e=.5,width:t=dr.AUTO_SIZE,height:r=dr.AUTO_SIZE,resolutionX:i=t,resolutionY:s=r}={}){super("KawaseBlurPass"),this.renderTargetA=new Fn(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new dr(this,i,s,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new wk,this._blurMaterial.kernelSize=n,this.copyMaterial=new Sk}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,i){const s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,u=this.blurMaterial,c=u.kernelSequence;let f=e;this.fullscreenMaterial=u;for(let h=0,m=c.length;h<m;++h){const y=h&1?l:a;u.kernel=c[h],u.inputBuffer=f.texture,n.setRenderTarget(y),n.render(s,o),f=y}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=f.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const r=t.width,i=t.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==vi?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n.outputEncoding===It&&(this.renderTargetA.texture.encoding=It,this.renderTargetB.texture.encoding=It))}static get AUTO_SIZE(){return dr.AUTO_SIZE}},Ck=class extends ts{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:r=1,width:i=dr.AUTO_SIZE,height:s=dr.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("LuminancePass"),this.fullscreenMaterial=new oY(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new Fn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new dr(this,o,a,r);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,r,i){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==vi&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},xY=class extends ts{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new Ak(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,r,i){const s=n.getContext(),o=n.state.buffers,a=this.scene,l=this.camera,u=this.clearPass,c=this.inverted?0:1,f=1-c;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,c,4294967295),o.stencil.setClear(f),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(n,null):(u.render(n,e),u.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(a,l)):(n.setRenderTarget(e),n.render(a,l),n.setRenderTarget(t),n.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},wY=class extends ts{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Fn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new tY,this.upsamplingMaterial=new dY,this.resolution=new De}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const r=e.clone();r.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(r)}this.upsamplingMipmaps.push(e);for(let t=1,r=n-1;t<r;++t){const i=e.clone();i.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(i)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,r,i){const{scene:s,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:u,upsamplingMipmaps:c}=this;let f=e;this.fullscreenMaterial=a;for(let h=0,m=u.length;h<m;++h){const y=u[h];a.setSize(f.width,f.height),a.inputBuffer=f.texture,n.setRenderTarget(y),n.render(s,o),f=y}this.fullscreenMaterial=l;for(let h=c.length-1;h>=0;--h){const m=c[h];l.setSize(f.width,f.height),l.inputBuffer=f.texture,l.supportBuffer=u[h].texture,n.setRenderTarget(m),n.render(s,o),f=m}}setSize(n,e){const t=this.resolution;t.set(n,e);let r=t.width,i=t.height;for(let s=0,o=this.downsamplingMipmaps.length;s<o;++s)r=Math.round(r*.5),i=Math.round(i*.5),this.downsamplingMipmaps[s].setSize(r,i),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(r,i)}initialize(n,e,t){if(t!==void 0){const r=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const i of r)i.texture.type=t;if(t!==vi)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(n.outputEncoding===It)for(const i of r)i.texture.encoding=It}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},SY=class extends ts{constructor(n,e,{renderTarget:t,resolutionScale:r=1,width:i=dr.AUTO_SIZE,height:s=dr.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new Mk(n,e,new zA);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const u=l.getClearPass();u.overrideClearColor=new qe(7829503),u.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Fn(1,1,{minFilter:Sn,magFilter:Sn}),this.renderTarget.texture.name="NormalPass.Target");const c=this.resolution=new dr(this,o,a,r);c.addEventListener("change",f=>this.setSize(c.baseWidth,c.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,i){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},bY=class extends Ek{constructor({offset:n=0,rotation:e=0,focusArea:t=.4,feather:r=.3,kernelSize:i=Qd.MEDIUM,resolutionScale:s=.5,resolutionX:o=dr.AUTO_SIZE,resolutionY:a=dr.AUTO_SIZE}={}){super({kernelSize:i,resolutionScale:s,resolutionX:o,resolutionY:a}),this.blurMaterial=new uY({kernelSize:i,offset:n,rotation:e,focusArea:t,feather:r})}},nw=1/1e3,AY=1e3,MY=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*nw}get fixedDelta(){return this._fixedDelta*nw}set fixedDelta(n){this._fixedDelta=n*AY}get elapsed(){return this._elapsed*nw}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},EY=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,r,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new bk,this.depthTexture=null,this.passes=[],this.timer=new MY,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new De),r=e.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===vi&&e.outputEncoding===It&&(this.inputBuffer.texture.encoding=It,this.outputBuffer.texture.encoding=It,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const s of this.passes)s.initialize(e,r,i)}}replaceRenderer(e,t=!0){const r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),t&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){const e=this.depthTexture=new p1;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=ru,e.type=Jl):e.type=La,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,i){const s=this.renderer,o=s===null?new De:s.getDrawingBufferSize(new De),a={minFilter:rn,magFilter:rn,stencilBuffer:t,depthBuffer:e,type:r},l=new Fn(o.width,o.height,a);return i>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=i),r===vi&&s!==null&&s.outputEncoding===It&&(l.texture.encoding=It),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const r=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new De),o=i.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(i),e.setSize(s.width,s.height),e.initialize(i,o,a),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(e of r)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){const o=(l,u)=>l||u.needsDepthTexture;t.reduce(o,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,r=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,o=!1,a,l,u;e===void 0&&(this.timer.update(),e=this.timer.delta);for(const c of this.passes)c.enabled&&(c.render(t,i,s,e,o),c.needsSwap&&(o&&(r.renderToScreen=c.renderToScreen,a=t.getContext(),l=t.state.buffers.stencil,l.setFunc(a.NOTEQUAL,1,4294967295),r.render(t,i,s,e,o),l.setFunc(a.EQUAL,1,4294967295)),u=i,i=s,s=u),c instanceof xY?o=!0:c instanceof gY&&(o=!1))}setSize(e,t,r){const i=this.renderer,s=i.getSize(new De);(e===void 0||t===void 0)&&(e=s.width,t=s.height),(s.width!==e||s.height!==t)&&i.setSize(e,t,r);const o=i.getDrawingBufferSize(new De);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const a of this.passes)a.setSize(o.width,o.height)}reset(){const e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},CY=class{constructor(){this.shaderParts=new Map([[gn.FRAGMENT_HEAD,null],[gn.FRAGMENT_MAIN_UV,null],[gn.FRAGMENT_MAIN_IMAGE,null],[gn.VERTEX_HEAD,null],[gn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Yl.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Po}},TY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",RY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",PY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",BY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",IY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",DY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",LY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",FY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",kY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",OY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",UY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",NY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",zY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",GY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",HY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",VY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",WY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",jY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",$Y="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",JY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",XY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",KY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",YY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",QY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",ZY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",qY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",eQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",tQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",nQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",rQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",iQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",sQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",oQ=new Map([[Bt.ADD,TY],[Bt.ALPHA,RY],[Bt.AVERAGE,PY],[Bt.COLOR,BY],[Bt.COLOR_BURN,IY],[Bt.COLOR_DODGE,DY],[Bt.DARKEN,LY],[Bt.DIFFERENCE,FY],[Bt.DIVIDE,kY],[Bt.DST,null],[Bt.EXCLUSION,OY],[Bt.HARD_LIGHT,UY],[Bt.HARD_MIX,NY],[Bt.HUE,zY],[Bt.INVERT,GY],[Bt.INVERT_RGB,HY],[Bt.LIGHTEN,VY],[Bt.LINEAR_BURN,WY],[Bt.LINEAR_DODGE,jY],[Bt.LINEAR_LIGHT,$Y],[Bt.LUMINOSITY,JY],[Bt.MULTIPLY,XY],[Bt.NEGATION,KY],[Bt.NORMAL,YY],[Bt.OVERLAY,QY],[Bt.PIN_LIGHT,ZY],[Bt.REFLECT,qY],[Bt.SATURATION,eQ],[Bt.SCREEN,tQ],[Bt.SOFT_LIGHT,nQ],[Bt.SRC,rQ],[Bt.SUBTRACT,iQ],[Bt.VIVID_LIGHT,sQ]]),aQ=class extends io{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new ct(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return oQ.get(this.blendFunction)}},As=class extends io{constructor(n,e,{attributes:t=Yl.NONE,blendFunction:r=Bt.NORMAL,defines:i=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=a,this.defines=i,this.uniforms=s,this.extensions=o,this.blendMode=new aQ(r),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=Po,this._outputColorSpace=null}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=du){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Fn||e instanceof zn||e instanceof xn||e instanceof ts)&&this[n].dispose()}}},lQ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,uQ=class extends As{constructor({blendFunction:n=Bt.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:r=!1,intensity:i=1,radius:s=.85,levels:o=8,kernelSize:a=Qd.LARGE,resolutionScale:l=.5,width:u=dr.AUTO_SIZE,height:c=dr.AUTO_SIZE,resolutionX:f=u,resolutionY:h=c}={}){super("BloomEffect",lQ,{blendFunction:n,uniforms:new Map([["map",new ct(null)],["intensity",new ct(i)]])}),this.renderTarget=new Fn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Ek({kernelSize:a}),this.luminancePass=new Ck({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new wY,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const m=this.resolution=new dr(this,f,h,l);m.addEventListener("change",y=>this.setSize(m.baseWidth,m.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,i.renderTarget):this.blurPass.render(n,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,r)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,n.outputEncoding===It&&(this.renderTarget.texture.encoding=It))}},cQ="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(color+vec3(0.5),inputColor.a);}",fQ=class extends As{constructor({blendFunction:n=Bt.SRC,brightness:e=0,contrast:t=0}={}){super("BrightnessContrastEffect",cQ,{blendFunction:n,uniforms:new Map([["brightness",new ct(e)],["contrast",new ct(t)]])}),this.inputColorSpace=It}get brightness(){return this.uniforms.get("brightness").value}set brightness(n){this.uniforms.get("brightness").value=n}getBrightness(n){return this.brightness}setBrightness(n){this.brightness=n}get contrast(){return this.uniforms.get("contrast").value}set contrast(n){this.uniforms.get("contrast").value=n}getContrast(n){return this.contrast}setContrast(n){this.contrast=n}},dQ="uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}",hQ=class extends As{constructor({blendFunction:n,bits:e=16}={}){super("ColorDepthEffect",dQ,{blendFunction:n,uniforms:new Map([["factor",new ct(1)]])}),this.bits=0,this.bitDepth=e}get bitDepth(){return this.bits}set bitDepth(n){this.bits=n,this.uniforms.get("factor").value=Math.pow(2,n/3)}getBitDepth(){return this.bitDepth}setBitDepth(n){this.bitDepth=n}},pQ=`void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){
#ifdef INVERTED
vec3 color=vec3(1.0-depth);
#else
vec3 color=vec3(depth);
#endif
outputColor=vec4(color,inputColor.a);}`,mQ=class extends As{constructor({blendFunction:n=Bt.SRC,inverted:e=!1}={}){super("DepthEffect",pQ,{blendFunction:n,attributes:Yl.DEPTH}),this.inverted=e}get inverted(){return this.defines.has("INVERTED")}set inverted(n){this.inverted!==n&&(n?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED"),this.setChanged())}isInverted(){return this.inverted}setInverted(n){this.inverted=n}},gQ="uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}",vQ=class extends As{constructor({blendFunction:n,angle:e=Math.PI*.5,scale:t=1}={}){super("DotScreenEffect",gQ,{blendFunction:n,uniforms:new Map([["angle",new ct(new De)],["scale",new ct(t)]])}),this.angle=e}get angle(){return Math.acos(this.uniforms.get("angle").value.y)}set angle(n){this.uniforms.get("angle").value.set(Math.sin(n),Math.cos(n))}getAngle(){return this.angle}setAngle(n){this.angle=n}get scale(){return this.uniforms.get("scale").value}set scale(n){this.uniforms.get("scale").value=n}};new V;new bt;var yQ="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",_Q=class extends As{constructor({blendFunction:n=Bt.SRC,hue:e=0,saturation:t=0}={}){super("HueSaturationEffect",yQ,{blendFunction:n,uniforms:new Map([["hue",new ct(new V)],["saturation",new ct(t)]])}),this.hue=e}get saturation(){return this.uniforms.get("saturation").value}set saturation(n){this.uniforms.get("saturation").value=n}getSaturation(){return this.saturation}setSaturation(n){this.saturation=n}get hue(){const n=this.uniforms.get("hue").value;return Math.acos((n.x*3-1)/2)}set hue(n){const e=Math.sin(n),t=Math.cos(n);this.uniforms.get("hue").value.set((2*t+1)/3,(-Math.sqrt(3)*e-t+1)/3,(Math.sqrt(3)*e-t+1)/3)}getHue(){return this.hue}setHue(n){this.hue=n}};new qe;var xQ=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,wQ=class extends As{constructor({blendFunction:n=Bt.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",xQ,{blendFunction:n}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(n){this.premultiply!==n&&(n?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(n){this.premultiply=n}},SQ=`uniform float count;
#ifdef SCROLL
uniform float scrollSpeed;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float y=uv.y;
#ifdef SCROLL
y+=time*scrollSpeed;
#endif
vec2 sl=vec2(sin(y*count),cos(y*count));outputColor=vec4(sl.xyx,inputColor.a);}`,bQ=class extends As{constructor({blendFunction:n=Bt.OVERLAY,density:e=1.25,scrollSpeed:t=0}={}){super("ScanlineEffect",SQ,{blendFunction:n,uniforms:new Map([["count",new ct(0)],["scrollSpeed",new ct(0)]])}),this.resolution=new De,this.d=e,this.scrollSpeed=t}get density(){return this.d}set density(n){this.d=n,this.setSize(this.resolution.width,this.resolution.height)}getDensity(){return this.density}setDensity(n){this.density=n}get scrollSpeed(){return this.uniforms.get("scrollSpeed").value}set scrollSpeed(n){this.uniforms.get("scrollSpeed").value=n,n===0?this.defines.delete("SCROLL")&&this.setChanged():this.defines.has("SCROLL")||(this.defines.set("SCROLL","1"),this.setChanged())}setSize(n,e){this.resolution.set(n,e),this.uniforms.get("count").value=Math.round(e*this.density)}},AQ="uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}",MQ="uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}",EQ=Math.PI*.5,lp=new V,BP=new V,CQ=class extends As{constructor(n,e=new V,{speed:t=2,maxRadius:r=1,waveSize:i=.2,amplitude:s=.05}={}){super("ShockWaveEffect",AQ,{vertexShader:MQ,uniforms:new Map([["active",new ct(!1)],["center",new ct(new De(.5,.5))],["cameraDistance",new ct(1)],["size",new ct(1)],["radius",new ct(-i)],["maxRadius",new ct(r)],["waveSize",new ct(i)],["amplitude",new ct(s)]])}),this.position=e,this.speed=t,this.camera=n,this.screenPosition=this.uniforms.get("center").value,this.time=0,this.active=!1}set mainCamera(n){this.camera=n}get amplitude(){return this.uniforms.get("amplitude").value}set amplitude(n){this.uniforms.get("amplitude").value=n}get waveSize(){return this.uniforms.get("waveSize").value}set waveSize(n){this.uniforms.get("waveSize").value=n}get maxRadius(){return this.uniforms.get("maxRadius").value}set maxRadius(n){this.uniforms.get("maxRadius").value=n}get epicenter(){return this.position}set epicenter(n){this.position=n}getPosition(){return this.position}setPosition(n){this.position=n}getSpeed(){return this.speed}setSpeed(n){this.speed=n}explode(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}update(n,e,t){const r=this.position,i=this.camera,s=this.uniforms,o=s.get("active");if(this.active){const a=s.get("waveSize").value;i.getWorldDirection(lp),BP.copy(i.position).sub(r),o.value=lp.angleTo(BP)>EQ,o.value&&(s.get("cameraDistance").value=i.position.distanceTo(r),lp.copy(r).project(i),this.screenPosition.set((lp.x+1)*.5,(lp.y+1)*.5)),this.time+=t*this.speed;const l=this.time-a;s.get("radius").value=l,l>=(s.get("maxRadius").value+a)*2&&(this.active=!1,o.value=!1)}}},TQ="uniform vec3 weightsR;uniform vec3 weightsG;uniform vec3 weightsB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,weightsR),dot(inputColor.rgb,weightsG),dot(inputColor.rgb,weightsB));outputColor=vec4(color,inputColor.a);}",RQ=class extends As{constructor({blendFunction:n,intensity:e=1}={}){super("SepiaEffect",TQ,{blendFunction:n,uniforms:new Map([["weightsR",new ct(new V(.393,.769,.189))],["weightsG",new ct(new V(.349,.686,.168))],["weightsB",new ct(new V(.272,.534,.131))]])})}get intensity(){return this.blendMode.opacity.value}set intensity(n){this.blendMode.opacity.value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}get weightsR(){return this.uniforms.get("weightsR").value}get weightsG(){return this.uniforms.get("weightsG").value}get weightsB(){return this.uniforms.get("weightsB").value}},PQ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform vec2 maskParams;varying vec2 vUv2;float linearGradientMask(const in float x){return step(maskParams.x,x)-step(maskParams.y,x);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float mask=linearGradientMask(vUv2.y);vec4 texel=texture2D(map,uv);outputColor=mix(texel,inputColor,mask);}`,BQ="uniform vec2 rotation;varying vec2 vUv2;void mainSupport(const in vec2 uv){vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));}",IQ=class extends As{constructor({blendFunction:n,offset:e=0,rotation:t=0,focusArea:r=.4,feather:i=.3,kernelSize:s=Qd.MEDIUM,resolutionScale:o=.5,resolutionX:a=dr.AUTO_SIZE,resolutionY:l=dr.AUTO_SIZE}={}){super("TiltShiftEffect",PQ,{vertexShader:BQ,blendFunction:n,uniforms:new Map([["rotation",new ct(new De)],["maskParams",new ct(new De)],["map",new ct(null)]])}),this._offset=e,this._focusArea=r,this._feather=i,this.renderTarget=new Fn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="TiltShift.Target",this.uniforms.get("map").value=this.renderTarget.texture,this.blurPass=new bY({kernelSize:s,resolutionScale:o,resolutionX:a,resolutionY:l,offset:e,rotation:t,focusArea:r,feather:i});const u=this.resolution=new dr(this,a,l,o);u.addEventListener("change",c=>this.setSize(u.baseWidth,u.baseHeight)),this.rotation=t,this.updateParams()}updateParams(){const n=this.uniforms.get("maskParams").value,e=Math.max(this.focusArea-this.feather,0);n.set(this.offset-e,this.offset+e)}get rotation(){return Math.acos(this.uniforms.get("rotation").value.x)}set rotation(n){this.uniforms.get("rotation").value.set(Math.cos(n),Math.sin(n)),this.blurPass.blurMaterial.rotation=n}get offset(){return this._offset}set offset(n){this._offset=n,this.blurPass.blurMaterial.offset=n,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(n){this._focusArea=n,this.blurPass.blurMaterial.focusArea=n,this.updateParams()}get feather(){return this._feather}set feather(n){this._feather=n,this.blurPass.blurMaterial.feather=n,this.updateParams()}get bias(){return 0}set bias(n){}update(n,e,t){this.blurPass.render(n,e,this.renderTarget)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t)}initialize(n,e,t){this.blurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,n.outputEncoding===It&&(this.renderTarget.texture.encoding=It))}},DQ=`#include <tonemapping_pars_fragment>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
uniform lowp sampler2D luminanceBuffer;uniform float whitePoint;uniform float middleGrey;
#if TONE_MAPPING_MODE != 2
uniform float averageLuminance;
#endif
vec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);
#if TONE_MAPPING_MODE == 2
float lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));
#else
float lumAvg=averageLuminance;
#endif
float lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#if TONE_MAPPING_MODE == 1 || TONE_MAPPING_MODE == 2
outputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);
#else
outputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);
#endif
}`,LQ=class extends As{constructor({blendFunction:n=Bt.SRC,adaptive:e=!0,mode:t=e?ba.REINHARD2_ADAPTIVE:ba.REINHARD2,resolution:r=256,maxLuminance:i=16,whitePoint:s=i,middleGrey:o=.6,minLuminance:a=.01,averageLuminance:l=1,adaptationRate:u=1}={}){super("ToneMappingEffect",DQ,{blendFunction:n,uniforms:new Map([["luminanceBuffer",new ct(null)],["maxLuminance",new ct(i)],["whitePoint",new ct(s)],["middleGrey",new ct(o)],["averageLuminance",new ct(l)]])}),this.renderTargetLuminance=new Fn(1,1,{minFilter:Ro,depthBuffer:!1}),this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetLuminance.texture.name="Luminance",this.luminancePass=new Ck({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new mY(this.luminancePass.texture,{minLuminance:a,adaptationRate:u}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=r,this.mode=t}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(n){if(this.mode!==n){switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",n.toFixed(0)),n){case ba.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case ba.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)","OptimizedCineonToneMapping(texel)");break;case ba.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel");break}this.adaptiveLuminancePass.enabled=n===ba.REINHARD2_ADAPTIVE,this.setChanged()}}getMode(){return this.mode}setMode(n){this.mode=n}get whitePoint(){return this.uniforms.get("whitePoint").value}set whitePoint(n){this.uniforms.get("whitePoint").value=n}get middleGrey(){return this.uniforms.get("middleGrey").value}set middleGrey(n){this.uniforms.get("middleGrey").value=n}get averageLuminance(){return this.uniforms.get("averageLuminance").value}set averageLuminance(n){this.uniforms.get("averageLuminance").value=n}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(n){const e=Math.max(0,Math.ceil(Math.log2(n))),t=Math.pow(2,e);this.luminancePass.resolution.setPreferredSize(t,t),this.adaptiveLuminanceMaterial.mipLevel1x1=e}getResolution(){return this.resolution}setResolution(n){this.resolution=n}get adaptive(){return this.mode===ba.REINHARD2_ADAPTIVE}set adaptive(n){this.mode=n?ba.REINHARD2_ADAPTIVE:ba.REINHARD2}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(n){this.adaptiveLuminanceMaterial.adaptationRate=n}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(n){console.warn(this.name,"distinction was removed.")}update(n,e,t){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(n,e),this.adaptiveLuminancePass.render(n,null,null,t))}initialize(n,e,t){this.adaptiveLuminancePass.initialize(n,e,t)}},FQ=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,kQ=class extends As{constructor({blendFunction:n,technique:e=dv.DEFAULT,eskil:t=!1,offset:r=.5,darkness:i=.5}={}){super("VignetteEffect",FQ,{blendFunction:n,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new ct(r)],["darkness",new ct(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(n){this.technique!==n&&(this.defines.set("VIGNETTE_TECHNIQUE",n.toFixed(0)),this.setChanged())}get eskil(){return this.technique===dv.ESKIL}set eskil(n){this.technique=n?dv.ESKIL:dv.DEFAULT}getTechnique(){return this.technique}setTechnique(n){this.technique=n}get offset(){return this.uniforms.get("offset").value}set offset(n){this.uniforms.get("offset").value=n}getOffset(){return this.offset}setOffset(n){this.offset=n}get darkness(){return this.uniforms.get("darkness").value}set darkness(n){this.uniforms.get("darkness").value=n}getDarkness(){return this.darkness}setDarkness(n){this.darkness=n}};let up;function OQ(){if(up!==void 0)return up;try{var n;let e;const t=document.createElement("canvas");return up=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))===null||n===void 0||n.loseContext()),up}catch{return up=!1}}const Ms=function(n,e){return e===void 0&&(e=Bt.NORMAL),L.forwardRef(function(r,i){let{blendFunction:s,opacity:o,...a}=r;const l=vs(c=>c.invalidate),u=L.useMemo(()=>new n(a),[a]);return L.useLayoutEffect(()=>{u.blendMode.blendFunction=!s&&s!==0?e:s,o!==void 0&&(u.blendMode.opacity.value=o),l()},[s,u.blendMode,o]),le.createElement("primitive",{ref:i,object:u,dispose:null})})};Ms(uQ,Bt.ADD);Ms(fQ);Ms(hQ);Ms(mQ);const UQ=L.createContext(null),NQ=le.memo(L.forwardRef((n,e)=>{let{children:t,camera:r,scene:i,resolutionScale:s,enabled:o=!0,renderPriority:a=1,autoClear:l=!0,depthBuffer:u,disableNormalPass:c,stencilBuffer:f,multisampling:h=8,frameBufferType:m=Qr}=n;const{gl:y,scene:g,camera:v,size:x}=vs();i=i||g,r=r||v;const[_,w,A]=L.useMemo(()=>{const P=OQ(),b=new EY(y,{depthBuffer:u,stencilBuffer:f,multisampling:h>0&&P?h:0,frameBufferType:m});b.addPass(new Mk(i,r));let C=null,T=null;return c||(T=new SY(i,r),T.enabled=!1,b.addPass(T),s!==void 0&&P&&(C=new vY({normalBuffer:T.texture,resolutionScale:s}),C.enabled=!1,b.addPass(C))),[b,T,C]},[r,y,u,f,h,m,i,c,s]);L.useEffect(()=>_==null?void 0:_.setSize(x.width,x.height),[_,x]),so((P,b)=>{o&&(y.autoClear=l,_.render(b))},o?a:0);const R=L.useRef(null);L.useLayoutEffect(()=>{let P;return R.current&&R.current.__r3f&&_&&(P=new _Y(r,...R.current.__r3f.objects),P.renderToScreen=!0,_.addPass(P),w&&(w.enabled=!0),A&&(A.enabled=!0)),()=>{P&&(_==null||_.removePass(P)),w&&(w.enabled=!1),A&&(A.enabled=!1)}},[_,t,r,w,A]);const M=L.useMemo(()=>({composer:_,normalPass:w,downSamplingPass:A,resolutionScale:s,camera:r,scene:i}),[_,w,A,s,r,i]);return L.useImperativeHandle(e,()=>_,[_]),le.createElement(UQ.Provider,{value:M},le.createElement("group",{ref:R},t))}));Ms(vQ);Ms(_Q);const zQ=Ms(wQ,Bt.COLOR_DODGE);Ms(bQ,Bt.OVERLAY);Ms(RQ);Ms(LQ);Ms(kQ);Ms(CQ);Ms(IQ,Bt.ADD);function Ea(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Tk(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.11.5
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ys={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Rd={duration:.5,overwrite:!1,delay:0},dM,pi,_r,Js=1e8,Tn=1/Js,E2=Math.PI*2,GQ=E2/4,HQ=0,Rk=Math.sqrt,VQ=Math.cos,WQ=Math.sin,Vr=function(e){return typeof e=="string"},rr=function(e){return typeof e=="function"},ja=function(e){return typeof e=="number"},hM=function(e){return typeof e>"u"},ia=function(e){return typeof e=="object"},Yi=function(e){return e!==!1},pM=function(){return typeof window<"u"},hv=function(e){return rr(e)||Vr(e)},Pk=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},mi=Array.isArray,C2=/(?:-?\.?\d|\.)+/gi,Bk=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Xf=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,rw=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ik=/[+-]=-?[.\d]+/,Dk=/[^,'"\[\]\s]+/gi,jQ=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Jn,Us,T2,mM,ws={},My={},Lk,Fk=function(e){return(My=Cc(e,ws))&&es},gM=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Ey=function(e,t){return!t&&console.warn(e)},kk=function(e,t){return e&&(ws[e]=t)&&My&&(My[e]=t)||ws},Mm=function(){return 0},$Q={suppressEvents:!0,isStart:!0,kill:!1},Wv={suppressEvents:!0,kill:!1},JQ={suppressEvents:!0},vM={},Ql=[],R2={},Ok,ds={},iw={},IP=30,jv=[],yM="",_M=function(e){var t=e[0],r,i;if(ia(t)||rr(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=jv.length;i--&&!jv[i].targetTest(t););r=jv[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new aO(e[i],r)))||e.splice(i,1);return e},hc=function(e){return e._gsap||_M(Xs(e))[0]._gsap},Uk=function(e,t,r){return(r=e[t])&&rr(r)?e[t]():hM(r)&&e.getAttribute&&e.getAttribute(t)||r},Qi=function(e,t){return(e=e.split(",")).forEach(t)||e},lr=function(e){return Math.round(e*1e5)/1e5||0},Xr=function(e){return Math.round(e*1e7)/1e7||0},ld=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},XQ=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},Cy=function(){var e=Ql.length,t=Ql.slice(0),r,i;for(R2={},Ql.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},Nk=function(e,t,r,i){Ql.length&&!pi&&Cy(),e.render(t,r,i||pi&&t<0&&(e._initted||e._startAt)),Ql.length&&!pi&&Cy()},zk=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(Dk).length<2?t:Vr(e)?e.trim():e},Gk=function(e){return e},to=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},KQ=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},Cc=function(e,t){for(var r in t)e[r]=t[r];return e},DP=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=ia(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},Ty=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},Gp=function(e){var t=e.parent||Jn,r=e.keyframes?KQ(mi(e.keyframes)):to;if(Yi(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},YQ=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},Hk=function(e,t,r,i,s){r===void 0&&(r="_first"),i===void 0&&(i="_last");var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},R1=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},ou=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},pc=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},QQ=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},P2=function(e,t,r,i){return e._startAt&&(pi?e._startAt.revert(Wv):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},ZQ=function n(e){return!e||e._ts&&n(e.parent)},LP=function(e){return e._repeat?Pd(e._tTime,e=e.duration()+e._rDelay)*e:0},Pd=function(e,t){var r=Math.floor(e/=t);return e&&r===e?r-1:r},Ry=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},P1=function(e){return e._end=Xr(e._start+(e._tDur/Math.abs(e._ts||e._rts||Tn)||0))},B1=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Xr(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),P1(e),r._dirty||pc(r,e)),e},Vk=function(e,t){var r;if((t._time||t._initted&&!t._dur)&&(r=Ry(e.rawTime(),t),(!t._dur||og(0,t.totalDuration(),r)-t._tTime>Tn)&&t.render(r,!0)),pc(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Tn}},Yo=function(e,t,r,i){return t.parent&&ou(t),t._start=Xr((ja(r)?r:r||e!==Jn?ks(e,r,t):e._time)+t._delay),t._end=Xr(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Hk(e,t,"_first","_last",e._sort?"_start":0),B2(t)||(e._recent=t),i||Vk(e,t),e._ts<0&&B1(e,e._tTime),e},Wk=function(e,t){return(ws.ScrollTrigger||gM("scrollTrigger",t))&&ws.ScrollTrigger.create(t,e)},jk=function(e,t,r,i,s){if(wM(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!pi&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Ok!==hs.frame)return Ql.push(e),e._lazy=[s,i],1},qQ=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},B2=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},eZ=function(e,t,r,i){var s=e.ratio,o=t<0||!t&&(!e._start&&qQ(e)&&!(!e._initted&&B2(e))||(e._ts<0||e._dp._ts<0)&&!B2(e))?0:1,a=e._rDelay,l=0,u,c,f;if(a&&e._repeat&&(l=og(0,e._tDur,t),c=Pd(l,a),e._yoyo&&c&1&&(o=1-o),c!==Pd(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||pi||i||e._zTime===Tn||!t&&e._zTime){if(!e._initted&&jk(e,t,i,r,l))return;for(f=e._zTime,e._zTime=t||(r?Tn:0),r||(r=t&&!f),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,u=e._pt;u;)u.r(o,u.d),u=u._next;t<0&&P2(e,t,r,!0),e._onUpdate&&!r&&Ks(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&Ks(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&ou(e,1),!r&&!pi&&(Ks(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},tZ=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},Bd=function(e,t,r,i){var s=e._repeat,o=Xr(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Xr(o*(s+1)+e._rDelay*s):o,a>0&&!i&&B1(e,e._tTime=e._tDur*a),e.parent&&P1(e),r||pc(e.parent,e),e},FP=function(e){return e instanceof Vi?pc(e):Bd(e,e._dur)},nZ={_start:0,endTime:Mm,totalDuration:Mm},ks=function n(e,t,r){var i=e.labels,s=e._recent||nZ,o=e.duration()>=Js?s.endTime(!1):e._dur,a,l,u;return Vr(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),u=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(u?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),u&&r&&(l=l/100*(mi(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+l:o+l)):t==null?o:+t},Hp=function(e,t,r){var i=ja(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,l;if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Yi(l.vars.inherit)&&l.parent;o.immediateRender=Yi(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Tr(t[0],o,t[s+1])},gu=function(e,t){return e||e===0?t(e):t},og=function(e,t,r){return r<e?e:r>t?t:r},di=function(e,t){return!Vr(e)||!(t=jQ.exec(e))?"":t[1]},rZ=function(e,t,r){return gu(r,function(i){return og(e,t,i)})},I2=[].slice,$k=function(e,t){return e&&ia(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&ia(e[0]))&&!e.nodeType&&e!==Us},iZ=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return Vr(i)&&!t||$k(i,1)?(s=r).push.apply(s,Xs(i)):r.push(i)})||r},Xs=function(e,t,r){return _r&&!t&&_r.selector?_r.selector(e):Vr(e)&&!r&&(T2||!Id())?I2.call((t||mM).querySelectorAll(e),0):mi(e)?iZ(e,r):$k(e)?I2.call(e,0):e?[e]:[]},D2=function(e){return e=Xs(e)[0]||Ey("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return Xs(t,r.querySelectorAll?r:r===e?Ey("Invalid scope")||mM.createElement("div"):e)}},Jk=function(e){return e.sort(function(){return .5-Math.random()})},Xk=function(e){if(rr(e))return e;var t=ia(e)?e:{each:e},r=mc(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,u=t.axis,c=i,f=i;return Vr(i)?c=f={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(c=i[0],f=i[1]),function(h,m,y){var g=(y||t).length,v=o[g],x,_,w,A,R,M,P,b,C;if(!v){if(C=t.grid==="auto"?0:(t.grid||[1,Js])[1],!C){for(P=-Js;P<(P=y[C++].getBoundingClientRect().left)&&C<g;);C--}for(v=o[g]=[],x=l?Math.min(C,g)*c-.5:i%C,_=C===Js?0:l?g*f/C-.5:i/C|0,P=0,b=Js,M=0;M<g;M++)w=M%C-x,A=_-(M/C|0),v[M]=R=u?Math.abs(u==="y"?A:w):Rk(w*w+A*A),R>P&&(P=R),R<b&&(b=R);i==="random"&&Jk(v),v.max=P-b,v.min=b,v.v=g=(parseFloat(t.amount)||parseFloat(t.each)*(C>g?g-1:u?u==="y"?g/C:C:Math.max(C,g/C))||0)*(i==="edges"?-1:1),v.b=g<0?s-g:s,v.u=di(t.amount||t.each)||0,r=r&&g<0?iO(r):r}return g=(v[h]-v.min)/v.max||0,Xr(v.b+(r?r(g):g)*v.v)+v.u}},L2=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=Xr(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(ja(r)?0:di(r))}},Kk=function(e,t){var r=mi(e),i,s;return!r&&ia(e)&&(i=r=e.radius||Js,e.values?(e=Xs(e.values),(s=!ja(e[0]))&&(i*=i)):e=L2(e.increment)),gu(t,r?rr(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),u=Js,c=0,f=e.length,h,m;f--;)s?(h=e[f].x-a,m=e[f].y-l,h=h*h+m*m):h=Math.abs(e[f]-a),h<u&&(u=h,c=f);return c=!i||u<=i?e[c]:o,s||c===o||ja(o)?c:c+di(o)}:L2(e))},Yk=function(e,t,r,i){return gu(mi(e)?!t:r===!0?!!(r=0):!i,function(){return mi(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},sZ=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},oZ=function(e,t){return function(r){return e(parseFloat(r))+(t||di(r))}},aZ=function(e,t,r){return Zk(e,t,0,1,r)},Qk=function(e,t,r){return gu(r,function(i){return e[~~t(i)]})},lZ=function n(e,t,r){var i=t-e;return mi(e)?Qk(e,n(0,e.length),t):gu(r,function(s){return(i+(s-e)%i)%i+e})},uZ=function n(e,t,r){var i=t-e,s=i*2;return mi(e)?Qk(e,n(0,e.length-1),t):gu(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},Em=function(e){for(var t=0,r="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?Dk:C2),r+=e.substr(t,i-t)+Yk(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},Zk=function(e,t,r,i,s){var o=t-e,a=i-r;return gu(s,function(l){return r+((l-e)/o*a||0)})},cZ=function n(e,t,r,i){var s=isNaN(e+t)?0:function(m){return(1-m)*e+m*t};if(!s){var o=Vr(e),a={},l,u,c,f,h;if(r===!0&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(mi(e)&&!mi(t)){for(c=[],f=e.length,h=f-2,u=1;u<f;u++)c.push(n(e[u-1],e[u]));f--,s=function(y){y*=f;var g=Math.min(h,~~y);return c[g](y-g)},r=t}else i||(e=Cc(mi(e)?[]:{},e));if(!c){for(l in t)xM.call(a,e,l,"get",t[l]);s=function(y){return AM(y,a)||(o?e.p:e)}}}return gu(r,s)},kP=function(e,t,r){var i=e.labels,s=Js,o,a,l;for(o in i)a=i[o]-t,a<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Ks=function(e,t,r){var i=e.vars,s=i[t],o=_r,a=e._ctx,l,u,c;if(s)return l=i[t+"Params"],u=i.callbackScope||e,r&&Ql.length&&Cy(),a&&(_r=a),c=l?s.apply(u,l):s.call(u),_r=o,c},wp=function(e){return ou(e),e.scrollTrigger&&e.scrollTrigger.kill(!!pi),e.progress()<1&&Ks(e,"onInterrupt"),e},Kf,qk=[],eO=function(e){if(!pM()){qk.push(e);return}e=!e.name&&e.default||e;var t=e.name,r=rr(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:Mm,render:AM,add:xM,kill:EZ,modifier:MZ,rawVars:0},o={targetTest:0,get:0,getSetter:bM,aliases:{},register:0};if(Id(),e!==i){if(ds[t])return;to(i,to(Ty(e,s),o)),Cc(i.prototype,Cc(s,Ty(e,o))),ds[i.prop=t]=i,e.targetTest&&(jv.push(i),vM[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}kk(t,i),e.register&&e.register(es,i,Zi)},En=255,Sp={aqua:[0,En,En],lime:[0,En,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,En],navy:[0,0,128],white:[En,En,En],olive:[128,128,0],yellow:[En,En,0],orange:[En,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[En,0,0],pink:[En,192,203],cyan:[0,En,En],transparent:[En,En,En,0]},sw=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*En+.5|0},tO=function(e,t,r){var i=e?ja(e)?[e>>16,e>>8&En,e&En]:0:Sp.black,s,o,a,l,u,c,f,h,m,y;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Sp[e])i=Sp[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&En,i&En,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&En,e&En]}else if(e.substr(0,3)==="hsl"){if(i=y=e.match(C2),!t)l=+i[0]%360/360,u=+i[1]/100,c=+i[2]/100,o=c<=.5?c*(u+1):c+u-c*u,s=c*2-o,i.length>3&&(i[3]*=1),i[0]=sw(l+1/3,s,o),i[1]=sw(l,s,o),i[2]=sw(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(Bk),r&&i.length<4&&(i[3]=1),i}else i=e.match(C2)||Sp.transparent;i=i.map(Number)}return t&&!y&&(s=i[0]/En,o=i[1]/En,a=i[2]/En,f=Math.max(s,o,a),h=Math.min(s,o,a),c=(f+h)/2,f===h?l=u=0:(m=f-h,u=c>.5?m/(2-f-h):m/(f+h),l=f===s?(o-a)/m+(o<a?6:0):f===o?(a-s)/m+2:(s-o)/m+4,l*=60),i[0]=~~(l+.5),i[1]=~~(u*100+.5),i[2]=~~(c*100+.5)),r&&i.length<4&&(i[3]=1),i},nO=function(e){var t=[],r=[],i=-1;return e.split(Zl).forEach(function(s){var o=s.match(Xf)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},OP=function(e,t,r){var i="",s=(e+i).match(Zl),o=t?"hsla(":"rgba(",a=0,l,u,c,f;if(!s)return e;if(s=s.map(function(h){return(h=tO(h,t,1))&&o+(t?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),r&&(c=nO(e),l=r.c,l.join(i)!==c.c.join(i)))for(u=e.replace(Zl,"1").split(Xf),f=u.length-1;a<f;a++)i+=u[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:r).shift());if(!u)for(u=e.split(Zl),f=u.length-1;a<f;a++)i+=u[a]+s[a];return i+u[f]},Zl=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Sp)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),fZ=/hsl[a]?\(/,rO=function(e){var t=e.join(" "),r;if(Zl.lastIndex=0,Zl.test(t))return r=fZ.test(t),e[1]=OP(e[1],r),e[0]=OP(e[0],r,nO(e[1])),!0},Cm,hs=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,o=s,a=[],l,u,c,f,h,m,y=function g(v){var x=n()-i,_=v===!0,w,A,R,M;if(x>e&&(r+=x-t),i+=x,R=i-r,w=R-o,(w>0||_)&&(M=++f.frame,h=R-f.time*1e3,f.time=R=R/1e3,o+=w+(w>=s?4:s-w),A=1),_||(l=u(g)),A)for(m=0;m<a.length;m++)a[m](R,h,M,v)};return f={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(v){return h/(1e3/(v||60))},wake:function(){Lk&&(!T2&&pM()&&(Us=T2=window,mM=Us.document||{},ws.gsap=es,(Us.gsapVersions||(Us.gsapVersions=[])).push(es.version),Fk(My||Us.GreenSockGlobals||!Us.gsap&&Us||{}),c=Us.requestAnimationFrame,qk.forEach(eO)),l&&f.sleep(),u=c||function(v){return setTimeout(v,o-f.time*1e3+1|0)},Cm=1,y(2))},sleep:function(){(c?Us.cancelAnimationFrame:clearTimeout)(l),Cm=0,u=Mm},lagSmoothing:function(v,x){e=v||1/0,t=Math.min(x||33,e)},fps:function(v){s=1e3/(v||240),o=f.time*1e3+s},add:function(v,x,_){var w=x?function(A,R,M,P){v(A,R,M,P),f.remove(w)}:v;return f.remove(v),a[_?"unshift":"push"](w),Id(),w},remove:function(v,x){~(x=a.indexOf(v))&&a.splice(x,1)&&m>=x&&m--},_listeners:a},f}(),Id=function(){return!Cm&&hs.wake()},sn={},dZ=/^[\d.\-M][\d.\-,\s]/,hZ=/["']/g,pZ=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,l,u;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),t[i]=isNaN(u)?u.replace(hZ,"").trim():+u,i=l.substr(a+1).trim();return t},mZ=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},gZ=function(e){var t=(e+"").split("("),r=sn[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[pZ(t[1])]:mZ(e).split(",").map(zk)):sn._CE&&dZ.test(e)?sn._CE("",e):r},iO=function(e){return function(t){return 1-e(1-t)}},sO=function n(e,t){for(var r=e._first,i;r;)r instanceof Vi?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},mc=function(e,t){return e&&(rr(e)?e:sn[e]||gZ(e))||t},kc=function(e,t,r,i){r===void 0&&(r=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},o;return Qi(e,function(a){sn[a]=ws[a]=s,sn[o=a.toLowerCase()]=r;for(var l in s)sn[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=sn[a+"."+l]=s[l]}),s},oO=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},ow=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/E2*(Math.asin(1/i)||0),a=function(c){return c===1?1:i*Math.pow(2,-10*c)*WQ((c-o)*s)+1},l=e==="out"?a:e==="in"?function(u){return 1-a(1-u)}:oO(a);return s=E2/s,l.config=function(u,c){return n(e,u,c)},l},aw=function n(e,t){t===void 0&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:oO(r);return i.config=function(s){return n(e,s)},i};Qi("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;kc(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});sn.Linear.easeNone=sn.none=sn.Linear.easeIn;kc("Elastic",ow("in"),ow("out"),ow());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(a){return a<t?n*a*a:a<r?n*Math.pow(a-1.5/e,2)+.75:a<i?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};kc("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);kc("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});kc("Circ",function(n){return-(Rk(1-n*n)-1)});kc("Sine",function(n){return n===1?1:-VQ(n*GQ)+1});kc("Back",aw("in"),aw("out"),aw());sn.SteppedEase=sn.steps=ws.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,o=1-Tn;return function(a){return((i*og(0,o,a)|0)+s)*r}}};Rd.ease=sn["quad.out"];Qi("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return yM+=n+","+n+"Params,"});var aO=function(e,t){this.id=HQ++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Uk,this.set=t?t.getSetter:bM},Dd=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Bd(this,+t.duration,1,1),this.data=t.data,_r&&(this._ctx=_r,_r.data.push(this)),Cm||hs.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,Bd(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(Id(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(B1(this,r),!s._dp||s.parent||Vk(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Yo(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Tn||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),Nk(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+LP(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+LP(this),i):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?Pd(this._tTime,s)+1:1},e.timeScale=function(r){if(!arguments.length)return this._rts===-Tn?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?Ry(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Tn?0:this._rts,this.totalTime(og(-Math.abs(this._delay),this._tDur,i),!0),P1(this),QQ(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Id(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Tn&&(this._tTime-=Tn)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Yo(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(Yi(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ry(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=JQ);var i=pi;return pi=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),pi=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(i._ts||1),i=i._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,FP(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,FP(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(ks(this,r),Yi(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,Yi(i))},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Tn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Tn,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Tn)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=rr(r)?r:Gk,a=function(){var u=i.then;i.then=null,rr(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=u),s(o),i.then=u};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){wp(this)},n}();to(Dd.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Tn,_prom:0,_ps:!1,_rts:1});var Vi=function(n){Tk(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=Yi(r.sortChildren),Jn&&Yo(r.parent||Jn,Ea(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&Wk(Ea(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return Hp(0,arguments,this),this},t.from=function(i,s,o){return Hp(1,arguments,this),this},t.fromTo=function(i,s,o,a){return Hp(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,Gp(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Tr(i,s,ks(this,o),1),this},t.call=function(i,s,o){return Yo(this,Tr.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,l,u,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=u,o.onCompleteParams=c,o.parent=this,new Tr(i,o,ks(this,l)),this},t.staggerFrom=function(i,s,o,a,l,u,c){return o.runBackwards=1,Gp(o).immediateRender=Yi(o.immediateRender),this.staggerTo(i,s,o,a,l,u,c)},t.staggerFromTo=function(i,s,o,a,l,u,c,f){return a.startAt=o,Gp(a).immediateRender=Yi(a.immediateRender),this.staggerTo(i,s,a,l,u,c,f)},t.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,c=i<=0?0:Xr(i),f=this._zTime<0!=i<0&&(this._initted||!u),h,m,y,g,v,x,_,w,A,R,M,P;if(this!==Jn&&c>l&&i>=0&&(c=l),c!==this._tTime||o||f){if(a!==this._time&&u&&(c+=this._time-a,i+=this._time-a),h=c,A=this._start,w=this._ts,x=!w,f&&(u||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(M=this._yoyo,v=u+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(v*100+i,s,o);if(h=Xr(c%v),c===l?(g=this._repeat,h=u):(g=~~(c/v),g&&g===c/v&&(h=u,g--),h>u&&(h=u)),R=Pd(this._tTime,v),!a&&this._tTime&&R!==g&&this._tTime-R*v-this._dur<=0&&(R=g),M&&g&1&&(h=u-h,P=1),g!==R&&!this._lock){var b=M&&R&1,C=b===(M&&g&1);if(g<R&&(b=!b),a=b?0:u,this._lock=1,this.render(a||(P?0:Xr(g*v)),s,!u)._lock=0,this._tTime=c,!s&&this.parent&&Ks(this,"onRepeat"),this.vars.repeatRefresh&&!P&&(this.invalidate()._lock=1),a&&a!==this._time||x!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,C&&(this._lock=2,a=b?u:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!P&&this.invalidate()),this._lock=0,!this._ts&&!x)return this;sO(this,P)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(_=tZ(this,Xr(a),Xr(h)),_&&(c-=h-(h=_._start))),this._tTime=c,this._time=h,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&h&&!s&&!g&&(Ks(this,"onStart"),this._tTime!==c))return this;if(h>=a&&i>=0)for(m=this._first;m;){if(y=m._next,(m._act||h>=m._start)&&m._ts&&_!==m){if(m.parent!==this)return this.render(i,s,o);if(m.render(m._ts>0?(h-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(h-m._start)*m._ts,s,o),h!==this._time||!this._ts&&!x){_=0,y&&(c+=this._zTime=-Tn);break}}m=y}else{m=this._last;for(var T=i<0?i:h;m;){if(y=m._prev,(m._act||T<=m._end)&&m._ts&&_!==m){if(m.parent!==this)return this.render(i,s,o);if(m.render(m._ts>0?(T-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(T-m._start)*m._ts,s,o||pi&&(m._initted||m._startAt)),h!==this._time||!this._ts&&!x){_=0,y&&(c+=this._zTime=T?-Tn:Tn);break}}m=y}}if(_&&!s&&(this.pause(),_.render(h>=a?0:-Tn)._zTime=h>=a?1:-1,this._ts))return this._start=A,P1(this),this.render(i,s,o);this._onUpdate&&!s&&Ks(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&a)&&(A===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((i||!u)&&(c===l&&this._ts>0||!c&&this._ts<0)&&ou(this,1),!s&&!(i<0&&!a)&&(c||a||!l)&&(Ks(this,c===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(ja(s)||(s=ks(this,s,i)),!(i instanceof Dd)){if(mi(i))return i.forEach(function(a){return o.add(a,s)}),this;if(Vr(i))return this.addLabel(i,s);if(rr(i))i=Tr.delayedCall(0,i);else return this}return this!==i?Yo(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Js);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof Tr?s&&l.push(u):(o&&l.push(u),i&&l.push.apply(l,u.getChildren(!0,s,o)))),u=u._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return Vr(i)?this.removeLabel(i):rr(i)?this.killTweensOf(i):(R1(this,i),i===this._recent&&(this._recent=this._last),pc(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Xr(hs.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=ks(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=Tr.delayedCall(0,s||Mm,o);return a.data="isPause",this._hasPause=1,Yo(this,a,ks(this,i))},t.removePause=function(i){var s=this._first;for(i=ks(this,i);s;)s._start===i&&s.data==="isPause"&&ou(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)kl!==a[l]&&a[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=Xs(i),l=this._first,u=ja(s),c;l;)l instanceof Tr?XQ(l._targets,a)&&(u?(!kl||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(c=l.getTweensOf(a,s)).length&&o.push.apply(o,c),l=l._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=ks(o,i),l=s,u=l.startAt,c=l.onStart,f=l.onStartParams,h=l.immediateRender,m,y=Tr.to(o,to({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale())||Tn,onStart:function(){if(o.pause(),!m){var v=s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale());y._dur!==v&&Bd(y,v,0,1).render(y._time,!0,!0),m=1}c&&c.apply(y,f||[])}},s));return h?y.render(0):y},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,to({startAt:{time:ks(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),kP(this,ks(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),kP(this,ks(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Tn)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,u;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(u in l)l[u]>=o&&(l[u]+=i);return pc(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),pc(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,l=Js,u,c,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(f=o.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Yo(o,a,c-a._delay,1)._lock=0):l=c,c<0&&a._ts&&(s-=c,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=u;Bd(o,o===Jn&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(Jn._ts&&(Nk(Jn,Ry(i,Jn)),Ok=hs.frame),hs.frame>=IP){IP+=ys.autoSleep||120;var s=Jn._first;if((!s||!s._ts)&&ys.autoSleep&&hs._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||hs.sleep()}}},e}(Dd);to(Vi.prototype,{_lock:0,_hasPause:0,_forcing:0});var vZ=function(e,t,r,i,s,o,a){var l=new Zi(this._pt,e,t,0,1,hO,null,s),u=0,c=0,f,h,m,y,g,v,x,_;for(l.b=r,l.e=i,r+="",i+="",(x=~i.indexOf("random("))&&(i=Em(i)),o&&(_=[r,i],o(_,e,t),r=_[0],i=_[1]),h=r.match(rw)||[];f=rw.exec(i);)y=f[0],g=i.substring(u,f.index),m?m=(m+1)%5:g.substr(-5)==="rgba("&&(m=1),y!==h[c++]&&(v=parseFloat(h[c-1])||0,l._pt={_next:l._pt,p:g||c===1?g:",",s:v,c:y.charAt(1)==="="?ld(v,y)-v:parseFloat(y)-v,m:m&&m<4?Math.round:0},u=rw.lastIndex);return l.c=u<i.length?i.substring(u,i.length):"",l.fp=a,(Ik.test(i)||x)&&(l.e=0),this._pt=l,l},xM=function(e,t,r,i,s,o,a,l,u,c){rr(i)&&(i=i(s||0,e,o));var f=e[t],h=r!=="get"?r:rr(f)?u?e[t.indexOf("set")||!rr(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():f,m=rr(f)?u?SZ:fO:SM,y;if(Vr(i)&&(~i.indexOf("random(")&&(i=Em(i)),i.charAt(1)==="="&&(y=ld(h,i)+(di(h)||0),(y||y===0)&&(i=y))),!c||h!==i||F2)return!isNaN(h*i)&&i!==""?(y=new Zi(this._pt,e,t,+h||0,i-(h||0),typeof f=="boolean"?AZ:dO,0,m),u&&(y.fp=u),a&&y.modifier(a,this,e),this._pt=y):(!f&&!(t in e)&&gM(t,i),vZ.call(this,e,t,h,i,m,l||ys.stringFilter,u))},yZ=function(e,t,r,i,s){if(rr(e)&&(e=Vp(e,s,t,r,i)),!ia(e)||e.style&&e.nodeType||mi(e)||Pk(e))return Vr(e)?Vp(e,s,t,r,i):e;var o={},a;for(a in e)o[a]=Vp(e[a],s,t,r,i);return o},lO=function(e,t,r,i,s,o){var a,l,u,c;if(ds[e]&&(a=new ds[e]).init(s,a.rawVars?t[e]:yZ(t[e],i,s,o,r),r,i,o)!==!1&&(r._pt=l=new Zi(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==Kf))for(u=r._ptLookup[r._targets.indexOf(s)],c=a._props.length;c--;)u[a._props[c]]=l;return a},kl,F2,wM=function n(e,t,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,u=i.onUpdate,c=i.onUpdateParams,f=i.callbackScope,h=i.runBackwards,m=i.yoyoEase,y=i.keyframes,g=i.autoRevert,v=e._dur,x=e._startAt,_=e._targets,w=e.parent,A=w&&w.data==="nested"?w.vars.targets:_,R=e._overwrite==="auto"&&!dM,M=e.timeline,P,b,C,T,I,D,z,N,J,Q,re,G,j;if(M&&(!y||!s)&&(s="none"),e._ease=mc(s,Rd.ease),e._yEase=m?iO(mc(m===!0?s:m,Rd.ease)):0,m&&e._yoyo&&!e._repeat&&(m=e._yEase,e._yEase=e._ease,e._ease=m),e._from=!M&&!!i.runBackwards,!M||y&&!i.stagger){if(N=_[0]?hc(_[0]).harness:0,G=N&&i[N.prop],P=Ty(i,vM),x&&(x._zTime<0&&x.progress(1),t<0&&h&&a&&!g?x.render(-1,!0):x.revert(h&&v?Wv:$Q),x._lazy=0),o){if(ou(e._startAt=Tr.set(_,to({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!x&&Yi(l),startAt:null,delay:0,onUpdate:u,onUpdateParams:c,callbackScope:f,stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(pi||!a&&!g)&&e._startAt.revert(Wv),a&&v&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(h&&v&&!x){if(t&&(a=!1),C=to({overwrite:!1,data:"isFromStart",lazy:a&&!x&&Yi(l),immediateRender:a,stagger:0,parent:w},P),G&&(C[N.prop]=G),ou(e._startAt=Tr.set(_,C)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(pi?e._startAt.revert(Wv):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,Tn,Tn);else if(!t)return}for(e._pt=e._ptCache=0,l=v&&Yi(l)||l&&!v,b=0;b<_.length;b++){if(I=_[b],z=I._gsap||_M(_)[b]._gsap,e._ptLookup[b]=Q={},R2[z.id]&&Ql.length&&Cy(),re=A===_?b:A.indexOf(I),N&&(J=new N).init(I,G||P,e,re,A)!==!1&&(e._pt=T=new Zi(e._pt,I,J.name,0,1,J.render,J,0,J.priority),J._props.forEach(function(Y){Q[Y]=T}),J.priority&&(D=1)),!N||G)for(C in P)ds[C]&&(J=lO(C,P,e,re,I,A))?J.priority&&(D=1):Q[C]=T=xM.call(e,I,C,"get",P[C],re,A,0,i.stringFilter);e._op&&e._op[b]&&e.kill(I,e._op[b]),R&&e._pt&&(kl=e,Jn.killTweensOf(I,Q,e.globalTime(t)),j=!e.parent,kl=0),e._pt&&l&&(R2[z.id]=1)}D&&pO(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!j,y&&t<=0&&M.render(Js,!0,!0)},_Z=function(e,t,r,i,s,o,a){var l=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,c,f,h;if(!l)for(l=e._ptCache[t]=[],f=e._ptLookup,h=e._targets.length;h--;){if(u=f[h][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return F2=1,e.vars[t]="+=0",wM(e,a),F2=0,1;l.push(u)}for(h=l.length;h--;)c=l[h],u=c._pt||c,u.s=(i||i===0)&&!s?i:u.s+(i||0)+o*u.c,u.c=r-u.s,c.e&&(c.e=lr(r)+di(c.e)),c.b&&(c.b=u.s+di(c.b))},xZ=function(e,t){var r=e[0]?hc(e[0]).harness:0,i=r&&r.aliases,s,o,a,l;if(!i)return t;s=Cc({},t);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},wZ=function(e,t,r,i){var s=t.ease||i||"power1.inOut",o,a;if(mi(t))a=r[e]||(r[e]=[]),t.forEach(function(l,u){return a.push({t:u/(t.length-1)*100,v:l,e:s})});else for(o in t)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Vp=function(e,t,r,i,s){return rr(e)?e.call(t,r,i,s):Vr(e)&&~e.indexOf("random(")?Em(e):e},uO=yM+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",cO={};Qi(uO+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return cO[n]=1});var Tr=function(n){Tk(e,n);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=n.call(this,o?i:Gp(i))||this;var l=a.vars,u=l.duration,c=l.delay,f=l.immediateRender,h=l.stagger,m=l.overwrite,y=l.keyframes,g=l.defaults,v=l.scrollTrigger,x=l.yoyoEase,_=i.parent||Jn,w=(mi(r)||Pk(r)?ja(r[0]):"length"in i)?[r]:Xs(r),A,R,M,P,b,C,T,I;if(a._targets=w.length?_M(w):Ey("GSAP target "+r+" not found. https://greensock.com",!ys.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=m,y||h||hv(u)||hv(c)){if(i=a.vars,A=a.timeline=new Vi({data:"nested",defaults:g||{},targets:_&&_.data==="nested"?_.vars.targets:w}),A.kill(),A.parent=A._dp=Ea(a),A._start=0,h||hv(u)||hv(c)){if(P=w.length,T=h&&Xk(h),ia(h))for(b in h)~uO.indexOf(b)&&(I||(I={}),I[b]=h[b]);for(R=0;R<P;R++)M=Ty(i,cO),M.stagger=0,x&&(M.yoyoEase=x),I&&Cc(M,I),C=w[R],M.duration=+Vp(u,Ea(a),R,C,w),M.delay=(+Vp(c,Ea(a),R,C,w)||0)-a._delay,!h&&P===1&&M.delay&&(a._delay=c=M.delay,a._start+=c,M.delay=0),A.to(C,M,T?T(R,C,w):0),A._ease=sn.none;A.duration()?u=c=0:a.timeline=0}else if(y){Gp(to(A.vars.defaults,{ease:"none"})),A._ease=mc(y.ease||i.ease||"none");var D=0,z,N,J;if(mi(y))y.forEach(function(Q){return A.to(w,Q,">")}),A.duration();else{M={};for(b in y)b==="ease"||b==="easeEach"||wZ(b,y[b],M,y.easeEach);for(b in M)for(z=M[b].sort(function(Q,re){return Q.t-re.t}),D=0,R=0;R<z.length;R++)N=z[R],J={ease:N.e,duration:(N.t-(R?z[R-1].t:0))/100*u},J[b]=N.v,A.to(w,J,D),D+=J.duration;A.duration()<u&&A.to({},{duration:u-A.duration()})}}u||a.duration(u=A.duration())}else a.timeline=0;return m===!0&&!dM&&(kl=Ea(a),Jn.killTweensOf(w),kl=0),Yo(_,Ea(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(f||!u&&!y&&a._start===Xr(_._time)&&Yi(f)&&ZQ(Ea(a))&&_.data!=="nested")&&(a._tTime=-Tn,a.render(Math.max(0,-c)||0)),v&&Wk(Ea(a),v),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,l=this._tDur,u=this._dur,c=i<0,f=i>l-Tn&&!c?l:i<Tn?0:i,h,m,y,g,v,x,_,w,A;if(!u)eZ(this,i,s,o);else if(f!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(h=f,w=this.timeline,this._repeat){if(g=u+this._rDelay,this._repeat<-1&&c)return this.totalTime(g*100+i,s,o);if(h=Xr(f%g),f===l?(y=this._repeat,h=u):(y=~~(f/g),y&&y===f/g&&(h=u,y--),h>u&&(h=u)),x=this._yoyo&&y&1,x&&(A=this._yEase,h=u-h),v=Pd(this._tTime,g),h===a&&!o&&this._initted)return this._tTime=f,this;y!==v&&(w&&this._yEase&&sO(w,x),this.vars.repeatRefresh&&!x&&!this._lock&&(this._lock=o=1,this.render(Xr(g*y),!0).invalidate()._lock=0))}if(!this._initted){if(jk(this,c?i:h,o,s,f))return this._tTime=0,this;if(a!==this._time)return this;if(u!==this._dur)return this.render(i,s,o)}if(this._tTime=f,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=_=(A||this._ease)(h/u),this._from&&(this.ratio=_=1-_),h&&!a&&!s&&!y&&(Ks(this,"onStart"),this._tTime!==f))return this;for(m=this._pt;m;)m.r(_,m.d),m=m._next;w&&w.render(i<0?i:!h&&x?-Tn:w._dur*w._ease(h/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(c&&P2(this,i,s,o),Ks(this,"onUpdate")),this._repeat&&y!==v&&this.vars.onRepeat&&!s&&this.parent&&Ks(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(c&&!this._onUpdate&&P2(this,i,!0,!0),(i||!u)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&ou(this,1),!s&&!(c&&!a)&&(f||a||x)&&(Ks(this,f===l?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a){Cm||hs.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||wM(this,l),u=this._ease(l/this._dur),_Z(this,i,s,o,a,u,l)?this.resetTo(i,s,o,a):(B1(this,0),this.parent||Hk(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?wp(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,kl&&kl.vars.overwrite!==!0)._first||wp(this),this.parent&&o!==this.timeline.totalDuration()&&Bd(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?Xs(i):a,u=this._ptLookup,c=this._pt,f,h,m,y,g,v,x;if((!s||s==="all")&&YQ(a,l))return s==="all"&&(this._pt=0),wp(this);for(f=this._op=this._op||[],s!=="all"&&(Vr(s)&&(g={},Qi(s,function(_){return g[_]=1}),s=g),s=xZ(a,s)),x=a.length;x--;)if(~l.indexOf(a[x])){h=u[x],s==="all"?(f[x]=s,y=h,m={}):(m=f[x]=f[x]||{},y=s);for(g in y)v=h&&h[g],v&&((!("kill"in v.d)||v.d.kill(g)===!0)&&R1(this,v,"_pt"),delete h[g]),m!=="all"&&(m[g]=1)}return this._initted&&!this._pt&&c&&wp(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Hp(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return Hp(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return Jn.killTweensOf(i,s,o)},e}(Dd);to(Tr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Qi("staggerTo,staggerFrom,staggerFromTo",function(n){Tr[n]=function(){var e=new Vi,t=I2.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var SM=function(e,t,r){return e[t]=r},fO=function(e,t,r){return e[t](r)},SZ=function(e,t,r,i){return e[t](i.fp,r)},bZ=function(e,t,r){return e.setAttribute(t,r)},bM=function(e,t){return rr(e[t])?fO:hM(e[t])&&e.setAttribute?bZ:SM},dO=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},AZ=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},hO=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},AM=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},MZ=function(e,t,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},EZ=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?R1(this,t,"_pt"):t.dep||(r=1),t=i;return!r},CZ=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},pO=function(e){for(var t=e._pt,r,i,s,o;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},Zi=function(){function n(t,r,i,s,o,a,l,u,c){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||dO,this.d=l||this,this.set=u||SM,this.pr=c||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=CZ,this.m=r,this.mt=s,this.tween=i},n}();Qi(yM+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return vM[n]=1});ws.TweenMax=ws.TweenLite=Tr;ws.TimelineLite=ws.TimelineMax=Vi;Jn=new Vi({sortChildren:!1,defaults:Rd,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ys.stringFilter=rO;var Ld=[],$v={},TZ=[],UP=0,lw=function(e){return($v[e]||TZ).map(function(t){return t()})},k2=function(){var e=Date.now(),t=[];e-UP>2&&(lw("matchMediaInit"),Ld.forEach(function(r){var i=r.queries,s=r.conditions,o,a,l,u;for(a in i)o=Us.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,u=1);u&&(r.revert(),l&&t.push(r))}),lw("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r)}),UP=e,lw("matchMedia"))},mO=function(){function n(t,r){this.selector=r&&D2(r),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){rr(r)&&(s=i,i=r,r=rr);var o=this,a=function(){var u=_r,c=o.selector,f;return u&&u!==o&&u.data.push(o),s&&(o.selector=D2(s)),_r=o,f=i.apply(o,arguments),rr(f)&&o._r.push(f),_r=u,o.selector=c,o.isReverted=!1,f};return o.last=a,r===rr?a(o):r?o[r]=a:a},e.ignore=function(r){var i=_r;_r=null,r(this),_r=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof Tr&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r){var o=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(u){return o.splice(o.indexOf(u),1)}))}),o.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,u){return u.g-l.g||-1}).forEach(function(l){return l.t.revert(r)}),this.data.forEach(function(l){return!(l instanceof Dd)&&l.revert&&l.revert(r)}),this._r.forEach(function(l){return l(r,s)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),i){var a=Ld.indexOf(this);~a&&Ld.splice(a,1)}},e.revert=function(r){this.kill(r||{})},n}(),RZ=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(r,i,s){ia(r)||(r={matches:r});var o=new mO(0,s||this.scope),a=o.conditions={},l,u,c;this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(u in r)u==="all"?c=1:(l=Us.matchMedia(r[u]),l&&(Ld.indexOf(o)<0&&Ld.push(o),(a[u]=l.matches)&&(c=1),l.addListener?l.addListener(k2):l.addEventListener("change",k2)));return c&&i(o),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),Py={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return eO(i)})},timeline:function(e){return new Vi(e)},getTweensOf:function(e,t){return Jn.getTweensOf(e,t)},getProperty:function(e,t,r,i){Vr(e)&&(e=Xs(e)[0]);var s=hc(e||{}).get,o=r?Gk:zk;return r==="native"&&(r=""),e&&(t?o((ds[t]&&ds[t].get||s)(e,t,r,i)):function(a,l,u){return o((ds[a]&&ds[a].get||s)(e,a,l,u))})},quickSetter:function(e,t,r){if(e=Xs(e),e.length>1){var i=e.map(function(c){return es.quickSetter(c,t,r)}),s=i.length;return function(c){for(var f=s;f--;)i[f](c)}}e=e[0]||{};var o=ds[t],a=hc(e),l=a.harness&&(a.harness.aliases||{})[t]||t,u=o?function(c){var f=new o;Kf._pt=0,f.init(e,r?c+r:c,Kf,0,[e]),f.render(1,f),Kf._pt&&AM(1,Kf)}:a.set(e,l);return o?u:function(c){return u(e,l,r?c+r:c,a,1)}},quickTo:function(e,t,r){var i,s=es.to(e,Cc((i={},i[t]="+=0.1",i.paused=!0,i),r||{})),o=function(l,u,c){return s.resetTo(t,l,u,c)};return o.tween=s,o},isTweening:function(e){return Jn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=mc(e.ease,Rd.ease)),DP(Rd,e||{})},config:function(e){return DP(ys,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!ds[a]&&!ws[a]&&Ey(t+" effect requires "+a+" plugin.")}),iw[t]=function(a,l,u){return r(Xs(a),to(l||{},s),u)},o&&(Vi.prototype[t]=function(a,l,u){return this.add(iw[t](a,ia(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,t){sn[e]=mc(t)},parseEase:function(e,t){return arguments.length?mc(e,t):sn},getById:function(e){return Jn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new Vi(e),i,s;for(r.smoothChildTiming=Yi(e.smoothChildTiming),Jn.remove(r),r._dp=0,r._time=r._tTime=Jn._time,i=Jn._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Tr&&i.vars.onComplete===i._targets[0]))&&Yo(r,i,i._start-i._delay),i=s;return Yo(Jn,r,0),r},context:function(e,t){return e?new mO(e,t):_r},matchMedia:function(e){return new RZ(e)},matchMediaRefresh:function(){return Ld.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||k2()},addEventListener:function(e,t){var r=$v[e]||($v[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=$v[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:lZ,wrapYoyo:uZ,distribute:Xk,random:Yk,snap:Kk,normalize:aZ,getUnit:di,clamp:rZ,splitColor:tO,toArray:Xs,selector:D2,mapRange:Zk,pipe:sZ,unitize:oZ,interpolate:cZ,shuffle:Jk},install:Fk,effects:iw,ticker:hs,updateRoot:Vi.updateRoot,plugins:ds,globalTimeline:Jn,core:{PropTween:Zi,globals:kk,Tween:Tr,Timeline:Vi,Animation:Dd,getCache:hc,_removeLinkedListItem:R1,reverting:function(){return pi},context:function(e){return e&&_r&&(_r.data.push(e),e._ctx=_r),_r},suppressOverwrites:function(e){return dM=e}}};Qi("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Py[n]=Tr[n]});hs.add(Vi.updateRoot);Kf=Py.to({},{duration:0});var PZ=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},BZ=function(e,t){var r=e._targets,i,s,o;for(i in t)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=PZ(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))},uw=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,u;if(Vr(s)&&(l={},Qi(s,function(c){return l[c]=1}),s=l),t){l={};for(u in s)l[u]=t(s[u]);s=l}BZ(a,s)}}}},es=Py.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,l;this.tween=r;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)pi?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},uw("roundProps",L2),uw("modifiers"),uw("snap",Kk))||Py;Tr.version=Vi.version=es.version="3.11.5";Lk=1;pM()&&Id();sn.Power0;sn.Power1;sn.Power2;sn.Power3;sn.Power4;sn.Linear;sn.Quad;sn.Cubic;sn.Quart;sn.Quint;sn.Strong;sn.Elastic;sn.Back;sn.SteppedEase;sn.Bounce;sn.Sine;sn.Expo;sn.Circ;/*!
 * CSSPlugin 3.11.5
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var NP,Ol,ud,MM,oc,zP,EM,IZ=function(){return typeof window<"u"},$a={},Ju=180/Math.PI,cd=Math.PI/180,Af=Math.atan2,GP=1e8,CM=/([A-Z])/g,DZ=/(left|right|width|margin|padding|x)/i,LZ=/[\s,\(]\S/,Qo={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},O2=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},FZ=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},kZ=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},OZ=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},gO=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},vO=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},UZ=function(e,t,r){return e.style[t]=r},NZ=function(e,t,r){return e.style.setProperty(t,r)},zZ=function(e,t,r){return e._gsap[t]=r},GZ=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},HZ=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},VZ=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},Kn="transform",Co=Kn+"Origin",WZ=function n(e,t){var r=this,i=this.target,s=i.style;if(e in $a){if(this.tfm=this.tfm||{},e!=="transform")e=Qo[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return r.tfm[o]=Ta(i,o)}):this.tfm[e]=i._gsap.x?i._gsap[e]:Ta(i,e);else return Qo.transform.split(",").forEach(function(o){return n.call(r,o,t)});if(this.props.indexOf(Kn)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Co,t,"")),e=Kn}(s||t)&&this.props.push(e,t,s[e])},yO=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},jZ=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(CM,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=EM(),(!s||!s.isStart)&&!r[Kn]&&(yO(r),i.uncache=1)}},_O=function(e,t){var r={target:e,props:[],revert:jZ,save:WZ};return e._gsap||es.core.getCache(e),t&&t.split(",").forEach(function(i){return r.save(i)}),r},xO,U2=function(e,t){var r=Ol.createElementNS?Ol.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ol.createElement(e);return r.style?r:Ol.createElement(e)},na=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(CM,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,Fd(t)||t,1)||""},HP="O,Moz,ms,Ms,Webkit".split(","),Fd=function(e,t,r){var i=t||oc,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(HP[o]+e in s););return o<0?null:(o===3?"ms":o>=0?HP[o]:"")+e},N2=function(){IZ()&&window.document&&(NP=window,Ol=NP.document,ud=Ol.documentElement,oc=U2("div")||{style:{}},U2("div"),Kn=Fd(Kn),Co=Kn+"Origin",oc.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",xO=!!Fd("perspective"),EM=es.core.reverting,MM=1)},cw=function n(e){var t=U2("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText,o;if(ud.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),ud.removeChild(t),this.style.cssText=s,o},VP=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},wO=function(e){var t;try{t=e.getBBox()}catch{t=cw.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===cw||(t=cw.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+VP(e,["x","cx","x1"])||0,y:+VP(e,["y","cy","y1"])||0,width:0,height:0}:t},SO=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&wO(e))},Tm=function(e,t){if(t){var r=e.style;t in $a&&t!==Co&&(t=Kn),r.removeProperty?((t.substr(0,2)==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(t.replace(CM,"-$1").toLowerCase())):r.removeAttribute(t)}},Ul=function(e,t,r,i,s,o){var a=new Zi(e._pt,t,r,0,1,o?vO:gO);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},WP={deg:1,rad:1,turn:1},$Z={grid:1,flex:1},au=function n(e,t,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=oc.style,l=DZ.test(t),u=e.tagName.toLowerCase()==="svg",c=(u?"client":"offset")+(l?"Width":"Height"),f=100,h=i==="px",m=i==="%",y,g,v,x;return i===o||!s||WP[i]||WP[o]?s:(o!=="px"&&!h&&(s=n(e,t,r,"px")),x=e.getCTM&&SO(e),(m||o==="%")&&($a[t]||~t.indexOf("adius"))?(y=x?e.getBBox()[l?"width":"height"]:e[c],lr(m?s/y*f:s/100*y)):(a[l?"width":"height"]=f+(h?o:i),g=~t.indexOf("adius")||i==="em"&&e.appendChild&&!u?e:e.parentNode,x&&(g=(e.ownerSVGElement||{}).parentNode),(!g||g===Ol||!g.appendChild)&&(g=Ol.body),v=g._gsap,v&&m&&v.width&&l&&v.time===hs.time&&!v.uncache?lr(s/v.width*f):((m||o==="%")&&!$Z[na(g,"display")]&&(a.position=na(e,"position")),g===e&&(a.position="static"),g.appendChild(oc),y=oc[c],g.removeChild(oc),a.position="absolute",l&&m&&(v=hc(g),v.time=hs.time,v.width=g[c]),lr(h?y*s/f:y&&s?f/y*s:0))))},Ta=function(e,t,r,i){var s;return MM||N2(),t in Qo&&t!=="transform"&&(t=Qo[t],~t.indexOf(",")&&(t=t.split(",")[0])),$a[t]&&t!=="transform"?(s=Pm(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:Iy(na(e,Co))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=By[t]&&By[t](e,t,r)||na(e,t)||Uk(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?au(e,t,s,r)+r:s},JZ=function(e,t,r,i){if(!r||r==="none"){var s=Fd(t,e,1),o=s&&na(e,s,1);o&&o!==r?(t=s,r=o):t==="borderColor"&&(r=na(e,"borderTopColor"))}var a=new Zi(this._pt,e.style,t,0,1,hO),l=0,u=0,c,f,h,m,y,g,v,x,_,w,A,R;if(a.b=r,a.e=i,r+="",i+="",i==="auto"&&(e.style[t]=i,i=na(e,t)||i,e.style[t]=r),c=[r,i],rO(c),r=c[0],i=c[1],h=r.match(Xf)||[],R=i.match(Xf)||[],R.length){for(;f=Xf.exec(i);)v=f[0],_=i.substring(l,f.index),y?y=(y+1)%5:(_.substr(-5)==="rgba("||_.substr(-5)==="hsla(")&&(y=1),v!==(g=h[u++]||"")&&(m=parseFloat(g)||0,A=g.substr((m+"").length),v.charAt(1)==="="&&(v=ld(m,v)+A),x=parseFloat(v),w=v.substr((x+"").length),l=Xf.lastIndex-w.length,w||(w=w||ys.units[t]||A,l===i.length&&(i+=w,a.e+=w)),A!==w&&(m=au(e,t,g,w)||0),a._pt={_next:a._pt,p:_||u===1?_:",",s:m,c:x-m,m:y&&y<4||t==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=t==="display"&&i==="none"?vO:gO;return Ik.test(i)&&(a.e=0),this._pt=a,a},jP={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},XZ=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=jP[r]||r,t[1]=jP[i]||i,t.join(" ")},KZ=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,o=r._gsap,a,l,u;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)a=s[u],$a[a]&&(l=1,a=a==="transformOrigin"?Co:Kn),Tm(r,a);l&&(Tm(r,Kn),o&&(o.svg&&r.removeAttribute("transform"),Pm(r,1),o.uncache=1,yO(i)))}},By={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new Zi(e._pt,t,r,0,0,KZ);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},Rm=[1,0,0,1,0,0],bO={},AO=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},$P=function(e){var t=na(e,Kn);return AO(t)?Rm:t.substr(7).match(Bk).map(lr)},TM=function(e,t){var r=e._gsap||hc(e),i=e.style,s=$P(e),o,a,l,u;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Rm:s):(s===Rm&&!e.offsetParent&&e!==ud&&!r.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(u=1,a=e.nextElementSibling,ud.appendChild(e)),s=$P(e),l?i.display=l:Tm(e,"display"),u&&(a?o.insertBefore(e,a):o?o.appendChild(e):ud.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},z2=function(e,t,r,i,s,o){var a=e._gsap,l=s||TM(e,!0),u=a.xOrigin||0,c=a.yOrigin||0,f=a.xOffset||0,h=a.yOffset||0,m=l[0],y=l[1],g=l[2],v=l[3],x=l[4],_=l[5],w=t.split(" "),A=parseFloat(w[0])||0,R=parseFloat(w[1])||0,M,P,b,C;r?l!==Rm&&(P=m*v-y*g)&&(b=A*(v/P)+R*(-g/P)+(g*_-v*x)/P,C=A*(-y/P)+R*(m/P)-(m*_-y*x)/P,A=b,R=C):(M=wO(e),A=M.x+(~w[0].indexOf("%")?A/100*M.width:A),R=M.y+(~(w[1]||w[0]).indexOf("%")?R/100*M.height:R)),i||i!==!1&&a.smooth?(x=A-u,_=R-c,a.xOffset=f+(x*m+_*g)-x,a.yOffset=h+(x*y+_*v)-_):a.xOffset=a.yOffset=0,a.xOrigin=A,a.yOrigin=R,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[Co]="0px 0px",o&&(Ul(o,a,"xOrigin",u,A),Ul(o,a,"yOrigin",c,R),Ul(o,a,"xOffset",f,a.xOffset),Ul(o,a,"yOffset",h,a.yOffset)),e.setAttribute("data-svg-origin",A+" "+R)},Pm=function(e,t){var r=e._gsap||new aO(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),u=na(e,Co)||"0",c,f,h,m,y,g,v,x,_,w,A,R,M,P,b,C,T,I,D,z,N,J,Q,re,G,j,Y,X,K,ce,he,te;return c=f=h=g=v=x=_=w=A=0,m=y=1,r.svg=!!(e.getCTM&&SO(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[Kn]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Kn]!=="none"?l[Kn]:"")),i.scale=i.rotate=i.translate="none"),P=TM(e,r.svg),r.svg&&(r.uncache?(G=e.getBBox(),u=r.xOrigin-G.x+"px "+(r.yOrigin-G.y)+"px",re=""):re=!t&&e.getAttribute("data-svg-origin"),z2(e,re||u,!!re||r.originIsAbsolute,r.smooth!==!1,P)),R=r.xOrigin||0,M=r.yOrigin||0,P!==Rm&&(I=P[0],D=P[1],z=P[2],N=P[3],c=J=P[4],f=Q=P[5],P.length===6?(m=Math.sqrt(I*I+D*D),y=Math.sqrt(N*N+z*z),g=I||D?Af(D,I)*Ju:0,_=z||N?Af(z,N)*Ju+g:0,_&&(y*=Math.abs(Math.cos(_*cd))),r.svg&&(c-=R-(R*I+M*z),f-=M-(R*D+M*N))):(te=P[6],ce=P[7],Y=P[8],X=P[9],K=P[10],he=P[11],c=P[12],f=P[13],h=P[14],b=Af(te,K),v=b*Ju,b&&(C=Math.cos(-b),T=Math.sin(-b),re=J*C+Y*T,G=Q*C+X*T,j=te*C+K*T,Y=J*-T+Y*C,X=Q*-T+X*C,K=te*-T+K*C,he=ce*-T+he*C,J=re,Q=G,te=j),b=Af(-z,K),x=b*Ju,b&&(C=Math.cos(-b),T=Math.sin(-b),re=I*C-Y*T,G=D*C-X*T,j=z*C-K*T,he=N*T+he*C,I=re,D=G,z=j),b=Af(D,I),g=b*Ju,b&&(C=Math.cos(b),T=Math.sin(b),re=I*C+D*T,G=J*C+Q*T,D=D*C-I*T,Q=Q*C-J*T,I=re,J=G),v&&Math.abs(v)+Math.abs(g)>359.9&&(v=g=0,x=180-x),m=lr(Math.sqrt(I*I+D*D+z*z)),y=lr(Math.sqrt(Q*Q+te*te)),b=Af(J,Q),_=Math.abs(b)>2e-4?b*Ju:0,A=he?1/(he<0?-he:he):0),r.svg&&(re=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!AO(na(e,Kn)),re&&e.setAttribute("transform",re))),Math.abs(_)>90&&Math.abs(_)<270&&(s?(m*=-1,_+=g<=0?180:-180,g+=g<=0?180:-180):(y*=-1,_+=_<=0?180:-180)),t=t||r.uncache,r.x=c-((r.xPercent=c&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=f-((r.yPercent=f&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=h+o,r.scaleX=lr(m),r.scaleY=lr(y),r.rotation=lr(g)+a,r.rotationX=lr(v)+a,r.rotationY=lr(x)+a,r.skewX=_+a,r.skewY=w+a,r.transformPerspective=A+o,(r.zOrigin=parseFloat(u.split(" ")[2])||0)&&(i[Co]=Iy(u)),r.xOffset=r.yOffset=0,r.force3D=ys.force3D,r.renderTransform=r.svg?QZ:xO?MO:YZ,r.uncache=0,r},Iy=function(e){return(e=e.split(" "))[0]+" "+e[1]},fw=function(e,t,r){var i=di(t);return lr(parseFloat(t)+parseFloat(au(e,"x",r+"px",i)))+i},YZ=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,MO(e,t)},Gu="0deg",cp="0px",Hu=") ",MO=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,u=r.rotation,c=r.rotationY,f=r.rotationX,h=r.skewX,m=r.skewY,y=r.scaleX,g=r.scaleY,v=r.transformPerspective,x=r.force3D,_=r.target,w=r.zOrigin,A="",R=x==="auto"&&e&&e!==1||x===!0;if(w&&(f!==Gu||c!==Gu)){var M=parseFloat(c)*cd,P=Math.sin(M),b=Math.cos(M),C;M=parseFloat(f)*cd,C=Math.cos(M),o=fw(_,o,P*C*-w),a=fw(_,a,-Math.sin(M)*-w),l=fw(_,l,b*C*-w+w)}v!==cp&&(A+="perspective("+v+Hu),(i||s)&&(A+="translate("+i+"%, "+s+"%) "),(R||o!==cp||a!==cp||l!==cp)&&(A+=l!==cp||R?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Hu),u!==Gu&&(A+="rotate("+u+Hu),c!==Gu&&(A+="rotateY("+c+Hu),f!==Gu&&(A+="rotateX("+f+Hu),(h!==Gu||m!==Gu)&&(A+="skew("+h+", "+m+Hu),(y!==1||g!==1)&&(A+="scale("+y+", "+g+Hu),_.style[Kn]=A||"translate(0, 0)"},QZ=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,u=r.skewX,c=r.skewY,f=r.scaleX,h=r.scaleY,m=r.target,y=r.xOrigin,g=r.yOrigin,v=r.xOffset,x=r.yOffset,_=r.forceCSS,w=parseFloat(o),A=parseFloat(a),R,M,P,b,C;l=parseFloat(l),u=parseFloat(u),c=parseFloat(c),c&&(c=parseFloat(c),u+=c,l+=c),l||u?(l*=cd,u*=cd,R=Math.cos(l)*f,M=Math.sin(l)*f,P=Math.sin(l-u)*-h,b=Math.cos(l-u)*h,u&&(c*=cd,C=Math.tan(u-c),C=Math.sqrt(1+C*C),P*=C,b*=C,c&&(C=Math.tan(c),C=Math.sqrt(1+C*C),R*=C,M*=C)),R=lr(R),M=lr(M),P=lr(P),b=lr(b)):(R=f,b=h,M=P=0),(w&&!~(o+"").indexOf("px")||A&&!~(a+"").indexOf("px"))&&(w=au(m,"x",o,"px"),A=au(m,"y",a,"px")),(y||g||v||x)&&(w=lr(w+y-(y*R+g*P)+v),A=lr(A+g-(y*M+g*b)+x)),(i||s)&&(C=m.getBBox(),w=lr(w+i/100*C.width),A=lr(A+s/100*C.height)),C="matrix("+R+","+M+","+P+","+b+","+w+","+A+")",m.setAttribute("transform",C),_&&(m.style[Kn]=C)},ZZ=function(e,t,r,i,s){var o=360,a=Vr(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Ju:1),u=l-i,c=i+u+"deg",f,h;return a&&(f=s.split("_")[1],f==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),f==="cw"&&u<0?u=(u+o*GP)%o-~~(u/o)*o:f==="ccw"&&u>0&&(u=(u-o*GP)%o-~~(u/o)*o)),e._pt=h=new Zi(e._pt,t,r,i,u,FZ),h.e=c,h.u="deg",e._props.push(r),h},JP=function(e,t){for(var r in t)e[r]=t[r];return e},qZ=function(e,t,r){var i=JP({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,l,u,c,f,h,m,y;i.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),o[Kn]=t,a=Pm(r,1),Tm(r,Kn),r.setAttribute("transform",u)):(u=getComputedStyle(r)[Kn],o[Kn]=t,a=Pm(r,1),o[Kn]=u);for(l in $a)u=i[l],c=a[l],u!==c&&s.indexOf(l)<0&&(m=di(u),y=di(c),f=m!==y?au(r,l,u,y):parseFloat(u),h=parseFloat(c),e._pt=new Zi(e._pt,a,l,f,h-f,O2),e._pt.u=y||0,e._props.push(l));JP(a,i)};Qi("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});By[e>1?"border"+n:n]=function(a,l,u,c,f){var h,m;if(arguments.length<4)return h=o.map(function(y){return Ta(a,y,u)}),m=h.join(" "),m.split(h[0]).length===5?h[0]:m;h=(c+"").split(" "),m={},o.forEach(function(y,g){return m[y]=h[g]=h[g]||h[(g-1)/2|0]}),a.init(l,m,f)}});var EO={name:"css",register:N2,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var o=this._props,a=e.style,l=r.vars.startAt,u,c,f,h,m,y,g,v,x,_,w,A,R,M,P,b;MM||N2(),this.styles=this.styles||_O(e),b=this.styles.props,this.tween=r;for(g in t)if(g!=="autoRound"&&(c=t[g],!(ds[g]&&lO(g,t,r,i,e,s)))){if(m=typeof c,y=By[g],m==="function"&&(c=c.call(r,i,e,s),m=typeof c),m==="string"&&~c.indexOf("random(")&&(c=Em(c)),y)y(this,e,g,c,r)&&(P=1);else if(g.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(g)+"").trim(),c+="",Zl.lastIndex=0,Zl.test(u)||(v=di(u),x=di(c)),x?v!==x&&(u=au(e,g,u,x)+x):v&&(c+=v),this.add(a,"setProperty",u,c,i,s,0,0,g),o.push(g),b.push(g,0,a[g]);else if(m!=="undefined"){if(l&&g in l?(u=typeof l[g]=="function"?l[g].call(r,i,e,s):l[g],Vr(u)&&~u.indexOf("random(")&&(u=Em(u)),di(u+"")||(u+=ys.units[g]||di(Ta(e,g))||""),(u+"").charAt(1)==="="&&(u=Ta(e,g))):u=Ta(e,g),h=parseFloat(u),_=m==="string"&&c.charAt(1)==="="&&c.substr(0,2),_&&(c=c.substr(2)),f=parseFloat(c),g in Qo&&(g==="autoAlpha"&&(h===1&&Ta(e,"visibility")==="hidden"&&f&&(h=0),b.push("visibility",0,a.visibility),Ul(this,a,"visibility",h?"inherit":"hidden",f?"inherit":"hidden",!f)),g!=="scale"&&g!=="transform"&&(g=Qo[g],~g.indexOf(",")&&(g=g.split(",")[0]))),w=g in $a,w){if(this.styles.save(g),A||(R=e._gsap,R.renderTransform&&!t.parseTransform||Pm(e,t.parseTransform),M=t.smoothOrigin!==!1&&R.smooth,A=this._pt=new Zi(this._pt,a,Kn,0,1,R.renderTransform,R,0,-1),A.dep=1),g==="scale")this._pt=new Zi(this._pt,R,"scaleY",R.scaleY,(_?ld(R.scaleY,_+f):f)-R.scaleY||0,O2),this._pt.u=0,o.push("scaleY",g),g+="X";else if(g==="transformOrigin"){b.push(Co,0,a[Co]),c=XZ(c),R.svg?z2(e,c,0,M,0,this):(x=parseFloat(c.split(" ")[2])||0,x!==R.zOrigin&&Ul(this,R,"zOrigin",R.zOrigin,x),Ul(this,a,g,Iy(u),Iy(c)));continue}else if(g==="svgOrigin"){z2(e,c,1,M,0,this);continue}else if(g in bO){ZZ(this,R,g,h,_?ld(h,_+c):c);continue}else if(g==="smoothOrigin"){Ul(this,R,"smooth",R.smooth,c);continue}else if(g==="force3D"){R[g]=c;continue}else if(g==="transform"){qZ(this,c,e);continue}}else g in a||(g=Fd(g)||g);if(w||(f||f===0)&&(h||h===0)&&!LZ.test(c)&&g in a)v=(u+"").substr((h+"").length),f||(f=0),x=di(c)||(g in ys.units?ys.units[g]:v),v!==x&&(h=au(e,g,u,x)),this._pt=new Zi(this._pt,w?R:a,g,h,(_?ld(h,_+f):f)-h,!w&&(x==="px"||g==="zIndex")&&t.autoRound!==!1?OZ:O2),this._pt.u=x||0,v!==x&&x!=="%"&&(this._pt.b=u,this._pt.r=kZ);else if(g in a)JZ.call(this,e,g,u,_?_+c:c);else if(g in e)this.add(e,g,u||e[g],_?_+c:c,i,s);else if(g!=="parseTransform"){gM(g,c);continue}w||(g in a?b.push(g,0,a[g]):b.push(g,1,u||e[g])),o.push(g)}}P&&pO(this)},render:function(e,t){if(t.tween._time||!EM())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:Ta,aliases:Qo,getSetter:function(e,t,r){var i=Qo[t];return i&&i.indexOf(",")<0&&(t=i),t in $a&&t!==Co&&(e._gsap.x||Ta(e,"x"))?r&&zP===r?t==="scale"?GZ:zZ:(zP=r||{})&&(t==="scale"?HZ:VZ):e.style&&!hM(e.style[t])?UZ:~t.indexOf("-")?NZ:bM(e,t)},core:{_removeProperty:Tm,_getMatrix:TM}};es.utils.checkPrefix=Fd;es.core.getStyleSaver=_O;(function(n,e,t,r){var i=Qi(n+","+e+","+t,function(s){$a[s]=1});Qi(e,function(s){ys.units[s]="deg",bO[s]=1}),Qo[i[13]]=n+","+e,Qi(r,function(s){var o=s.split(":");Qo[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Qi("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){ys.units[n]="px"});es.registerPlugin(EO);var Jv=es.registerPlugin(EO)||es;Jv.core.Tween;const CO=L.createContext(),eq=({children:n})=>{const[e,t]=L.useState(!1),[r,i]=L.useState(!1),[s,o]=L.useState(!1);return Pt(CO.Provider,{value:{play:e,setPlay:t,end:r,setEnd:i,hasScroll:s,setHasScroll:o},children:n})},RM=()=>{const n=L.useContext(CO);if(n===void 0)throw new Error("usePlay must be used within a PlayProvider");return n},TO=n=>n.replace("#include <common>",`#include <common>
  float exponentialEasing(float x, float a) {
  
    float epsilon = 0.00001;
    float min_param_a = 0.0 + epsilon;
    float max_param_a = 1.0 - epsilon;
    a = max(min_param_a, min(max_param_a, a));
    
    if (a < 0.5){
      // emphasis
      a = 2.0*(a);
      float y = pow(x, a);
      return y;
    } else {
      // de-emphasis
      a = 2.0*(a-0.5);
      float y = pow(x, 1.0/(1.0-a));
      return y;
    }
  }`).replace("vec4 diffuseColor = vec4( diffuse, opacity );",`
float fadeDist = 350.0;
float dist = length(vViewPosition);

float fadeOpacity = smoothstep(fadeDist, 0.0, dist);
fadeOpacity = exponentialEasing(fadeOpacity, 0.93);
vec4 diffuseColor = vec4( diffuse, fadeOpacity * opacity );`),RO=n=>{n.fragmentShader=TO(n.fragmentShader)},XP=n=>{n.fragmentShader=TO(n.fragmentShader).replace("#include <output_fragment>","gl_FragColor = diffuseColor;")},tq=6;function nq(n){const{nodes:e,materials:t}=Fc("./models/airplane/model.glb"),r=L.useRef();return so((i,s)=>{r.current.rotation.x+=s*tq}),$i("group",{...n,dispose:null,children:[Pt("mesh",{geometry:e.PUSHILIN_Plane_Circle000.geometry,children:Pt("meshStandardMaterial",{color:"white"})}),Pt("mesh",{ref:r,geometry:e.PUSHILIN_Plane_Helix.geometry,material:t.plane,position:[1.09,.23,0],children:Pt("meshStandardMaterial",{color:"white"})})]})}Fc.preload("./models/airplane/model.glb");var PO=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],rq=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],BO=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],iq=PO,sq=iq.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),G2=BO;G2=G2.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)});var oq=G2.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),aq=vq,lq=PO,KP=rq,uq=BO,cq=sq,fq=oq,vo=999,YP=9999,dw=0,hw=1,QP=2,ZP=3,qP=4,fp=5,dq=6,hq=7,pq=8,eB=9,mq=10,tB=11,gq=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function vq(n){var e=0,t=0,r=vo,i,s,o=[],a=[],l=1,u=0,c=0,f=!1,h=!1,m="",y;n=n||{};var g=uq,v=lq;n.version==="300 es"&&(g=fq,v=cq);for(var x={},_={},e=0;e<g.length;e++)x[g[e]]=!0;for(var e=0;e<v.length;e++)_[v[e]]=!0;return function(re){return a=[],re!==null?A(re):R()};function w(re){re.length&&a.push({type:gq[r],data:re,position:c,line:l,column:u})}function A(re){e=0,re.toString&&(re=re.toString()),m+=re.replace(/\r\n/g,`
`),y=m.length;for(var G;i=m[e],e<y;){switch(G=e,r){case dw:e=T();break;case hw:e=C();break;case QP:e=b();break;case ZP:e=I();break;case qP:e=N();break;case tB:e=z();break;case fp:e=J();break;case YP:e=Q();break;case eB:e=P();break;case vo:e=M();break}if(G!==e)switch(m[G]){case`
`:u=0,++l;break;default:++u;break}}return t+=e,m=m.slice(e),a}function R(re){return o.length&&w(o.join("")),r=mq,w("(eof)"),a}function M(){return o=o.length?[]:o,s==="/"&&i==="*"?(c=t+e-1,r=dw,s=i,e+1):s==="/"&&i==="/"?(c=t+e-1,r=hw,s=i,e+1):i==="#"?(r=QP,c=t+e,e):/\s/.test(i)?(r=eB,c=t+e,e):(f=/\d/.test(i),h=/[^\w_]/.test(i),c=t+e,r=f?qP:h?ZP:YP,e)}function P(){return/[^\s]/g.test(i)?(w(o.join("")),r=vo,e):(o.push(i),s=i,e+1)}function b(){return(i==="\r"||i===`
`)&&s!=="\\"?(w(o.join("")),r=vo,e):(o.push(i),s=i,e+1)}function C(){return b()}function T(){return i==="/"&&s==="*"?(o.push(i),w(o.join("")),r=vo,e+1):(o.push(i),s=i,e+1)}function I(){if(s==="."&&/\d/.test(i))return r=fp,e;if(s==="/"&&i==="*")return r=dw,e;if(s==="/"&&i==="/")return r=hw,e;if(i==="."&&o.length){for(;D(o););return r=fp,e}if(i===";"||i===")"||i==="("){if(o.length)for(;D(o););return w(i),r=vo,e+1}var re=o.length===2&&i!=="=";if(/[\w_\d\s]/.test(i)||re){for(;D(o););return r=vo,e}return o.push(i),s=i,e+1}function D(re){var G=0,j,Y;do{if(j=KP.indexOf(re.slice(0,re.length+G).join("")),Y=KP[j],j===-1){if(G--+re.length>0)continue;Y=re.slice(0,1).join("")}return w(Y),c+=Y.length,o=o.slice(Y.length),o.length}while(1)}function z(){return/[^a-fA-F0-9]/.test(i)?(w(o.join("")),r=vo,e):(o.push(i),s=i,e+1)}function N(){return i==="."||/[eE]/.test(i)?(o.push(i),r=fp,s=i,e+1):i==="x"&&o.length===1&&o[0]==="0"?(r=tB,o.push(i),s=i,e+1):/[^\d]/.test(i)?(w(o.join("")),r=vo,e):(o.push(i),s=i,e+1)}function J(){return i==="f"&&(o.push(i),s=i,e+=1),/[eE]/.test(i)||(i==="-"||i==="+")&&/[eE]/.test(s)?(o.push(i),s=i,e+1):/[^\d]/.test(i)?(w(o.join("")),r=vo,e):(o.push(i),s=i,e+1)}function Q(){if(/[^\d\w_]/.test(i)){var re=o.join("");return _[re]?r=pq:x[re]?r=hq:r=dq,w(o.join("")),r=vo,e}return o.push(i),s=i,e+1}}var yq=aq,H2=_q;function _q(n,e){var t=yq(e),r=[];return r=r.concat(t(n)),r=r.concat(t(null)),r}var pw,nB;function xq(){if(nB)return pw;nB=1,pw=n;function n(e){for(var t=!1,r=0,i=0;i<e.length;i++)switch(t=t||e[i].type==="keyword"&&e[i].data==="for",e[i].data){case"(":e[i].depth=t?r++:r;break;case"{":e[i].depth=t?r:r++,t=!1;break;case"}":e[i].depth=--r;break;default:e[i].depth=r}for(var i=0;i<e.length;i++){var s=e[i],o=i+1;if(!(s.type!=="ident"&&s.type!=="keyword")&&(a(),e[o].type==="ident"&&(a(),o++,e[o].data==="("))){for(;e[o]&&e[o].data!==";"&&e[o].data!=="{";)e[o++].depth++;e[o]&&e[o].data==="{"&&e[o].depth++}}return e;function a(){for(;e[o]&&(e[o].type==="whitespace"||e[o].data==="["||e[o].data==="]"||e[o].data==="integer");)o++}}return pw}var mw,rB;function wq(){if(rB)return mw;rB=1,mw=n;function n(e){var t=[0],r=t[0],i=0;if(!e||!e.length)return e;if(!("depth"in e[0]))throw new Error("glsl-token-scope: No scope depth defined on tokens! Use glsl-token-depth on these tokens first");for(var s=0;s<e.length;s++){var o=e[s],a=o.depth;a>i?t.push(++r):a<i&&t.splice(-1,1),o.scope=t[t.length-1],o.stack=t.slice(),i=o.depth}return e}return mw}var gw,iB;function Sq(){if(iB)return gw;iB=1,gw=n;function n(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.property=!1,r.type==="ident"){for(var i=t;e[--i]&&e[i].type==="whitespace";);e[i]&&e[i].type==="operator"&&e[i].data==="."&&(r.property=!0)}}return e}return gw}var vw,sB;function bq(){return sB||(sB=1,vw={"<<=":!0,">>=":!0,"++":!0,"--":!0,"+=":!0,"-=":!0,"*=":!0,"/=":!0,"%=":!0,"&=":!0,"^=":!0,"|=":!0,"=":!0}),vw}var yw,oB;function Aq(){return oB||(oB=1,yw={precision:!0,highp:!0,mediump:!0,lowp:!0,attribute:!0,const:!0,uniform:!0,varying:!0,break:!0,continue:!0,do:!0,for:!0,while:!0,if:!0,else:!0,in:!0,out:!0,inout:!0,true:!0,false:!0,return:!0}),yw}var _w,aB;function Mq(){if(aB)return _w;aB=1;var n=bq(),e=Aq();_w=t;function t(r){for(var i=0,s=0;s<r.length;s++){var o=r[s],a=o.type;o.assignment=!1,o.declaration=!1,!(a!=="ident"&&a!=="builtin")&&(i=s+1,c(),r[i].type==="operator"&&n[r[i].data]&&(o.assignment=!0))}for(var s=0;s<r.length;s++){var l=r[s],a=l.type,u=l.data;if(l.declaration=!1,a==="keyword"){if(e[u])continue}else if(a!=="ident")continue;if(i=s+1,f(),r[i].type==="ident"){if(r[i++].declaration=!0,f(),r[i].data==="("){for(i++,c();r[i]&&r[i].data!==")"&&!(r[i].type!=="keyword"&&r[i].type!=="ident");)i++,c(),r[i].type==="ident"&&(r[i++].declaration=!0,c(),f(),c(),r[i].data===","&&(i++,c()));s=i;continue}for(;r[i]&&r[i].data!==";";)r[i].data===","?(i++,c(),(r[i].declaration=r[i].type==="ident")&&i++):(c(),h(),c(),i++);s=i}}for(var s=0;s<r.length;s++){var o=r[s];if(o.type==="keyword"&&o.data==="struct"&&(i=s+1,c(),r[i].type==="ident"&&(i++,c(),r[i++].data==="{"))){for(c();r[i].type==="ident"||r[i].type==="keyword";){do i++,c(),r[i].structMember=!0,r[i].declaration=!1,i++,f();while(r[i].data===",");r[i].data===";"&&i++,c()}if(i++,c(),r[i].type==="ident")for(r[i].declaration=!0,c();r[++i].data===",";)c(),i++,c(),r[i].type==="ident"&&(r[i].declaration=!0),c()}}return r;function c(m){for(;r[i]&&r[i].type==="whitespace";)i++}function f(){for(;r[i]&&(r[i].type==="integer"||r[i].data==="["||r[i].data==="]"||r[i].type==="whitespace");)i++}function h(){if(r[i]&&r[i].data==="("){var m=0;do{if(r[i].data===";")break;r[i].data==="("&&m++,r[i].data===")"&&m--}while(m&&r[++i])}}}return _w}var lB=Eq;function Eq(n,e){xq()(n),wq()(n),Sq()(n),Mq()(n);for(var t=Tq(n),r=e||Cq(),i={},s=0;s<n.length;s++){var o=n[s],a=o.stack,l=o.data;if(o.descoped=!1,o.type==="ident"&&!o.property&&!o.structMember){for(var u=!1,c=a.length-1;c>=0;c--){var f=t[a[c]];if(f&&f[l]){if(u=!0,c)break;o.descoped=o.data,o.data=i[l]=i[l]||r(l,o)||o.data}}u||(o.descoped=o.data,o.data=i[l]=i[l]||r(l,o)||o.data)}}return n}function Cq(){var n=0;return function(t){return t+"_"+(n++).toString(36)}}function Tq(n){for(var e={},t=0;t<n.length;t++){var r=n[t];r.declaration&&(e[r.scope]=e[r.scope]||{},e[r.scope][r.data]=r)}return e}var Wp=Rq;function Rq(n){for(var e=[],t=0;t<n.length;t++)n[t].type!=="eof"&&e.push(n[t].data);return e.join("")}var V2=Pq;function Pq(n){var e=null,t=null,r=0,i=0,s=0,o=0,a=0,l=[],u,c,f;for(u=0,c;u<n.length;u++)if(f=n[u],f.data==="{"){if(r&&r++||(c=m(u,bl(")"),bl()),c<0)||(o=c,c=m(c,bl("("),bl(")")),c<0)||(a=c,c=m(c,dp),c<0)||n[c].type!=="ident"||(t=n[c].data,c=m(c,dp),c<0))continue;r=1,i=u,e=n[c].data,s=c;var h=m(c,dp);switch(n[h]&&n[h].data){case"lowp":case"highp":case"mediump":s=h}}else if(r&&f.data==="}"){if(--r)continue;l.push({name:t,type:e,body:[i+1,u],args:[a,o+1],outer:[s,u+1]})}for(u=0;u<n.length;u++)if(f=n[u],f.data===";"){if(c=m(u,bl(")"),bl()),c<0||(o=c,c=m(c,bl("("),bl(")")),c<0)||(a=c,c=m(c,dp),c<0)||n[c].type!=="ident"||(t=n[c].data,c=m(c,dp),c<0)||n[c].type==="operator"||n[c].data==="return")continue;e=n[c].data,l.push({name:t,type:e,body:!1,args:[a,o+1],outer:[c,u+1]})}return l.sort(function(y,g){return y.outer[0]-g.outer[0]});function m(y,g,v){for(var x=y-1;x>=0;x--){if(g(n[x]))return x;if(v&&v(n[x]))return-1}return-1}}function bl(n){return function(e){return e.type==="operator"&&(!n||e.data===n)}}function dp(n){return n.type!=="whitespace"}function pv(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var W2={},Bq={get exports(){return W2},set exports(n){W2=n}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,s){function o(u,c){if(!i[u]){if(!r[u]){var f=typeof pv=="function"&&pv;if(!c&&f)return f(u,!0);if(a)return a(u,!0);throw new Error("Cannot find module '"+u+"'")}c=i[u]={exports:{}},r[u][0].call(c.exports,function(h){var m=r[u][1][h];return o(m||h)},c,c.exports,t,r,i,s)}return i[u].exports}for(var a=typeof pv=="function"&&pv,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,r,i){(function(s,o,a,l,u,c,f,h,m){var y=t("crypto");function g(M,P){P=_(M,P);var b;return(b=P.algorithm!=="passthrough"?y.createHash(P.algorithm):new R).write===void 0&&(b.write=b.update,b.end=b.update),A(P,b).dispatch(M),b.update||b.end(""),b.digest?b.digest(P.encoding==="buffer"?void 0:P.encoding):(M=b.read(),P.encoding!=="buffer"?M.toString(P.encoding):M)}(i=r.exports=g).sha1=function(M){return g(M)},i.keys=function(M){return g(M,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},i.MD5=function(M){return g(M,{algorithm:"md5",encoding:"hex"})},i.keysMD5=function(M){return g(M,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var v=y.getHashes?y.getHashes().slice():["sha1","md5"],x=(v.push("passthrough"),["buffer","hex","binary","base64"]);function _(M,P){var b={};if(b.algorithm=(P=P||{}).algorithm||"sha1",b.encoding=P.encoding||"hex",b.excludeValues=!!P.excludeValues,b.algorithm=b.algorithm.toLowerCase(),b.encoding=b.encoding.toLowerCase(),b.ignoreUnknown=P.ignoreUnknown===!0,b.respectType=P.respectType!==!1,b.respectFunctionNames=P.respectFunctionNames!==!1,b.respectFunctionProperties=P.respectFunctionProperties!==!1,b.unorderedArrays=P.unorderedArrays===!0,b.unorderedSets=P.unorderedSets!==!1,b.unorderedObjects=P.unorderedObjects!==!1,b.replacer=P.replacer||void 0,b.excludeKeys=P.excludeKeys||void 0,M===void 0)throw new Error("Object argument required.");for(var C=0;C<v.length;++C)v[C].toLowerCase()===b.algorithm.toLowerCase()&&(b.algorithm=v[C]);if(v.indexOf(b.algorithm)===-1)throw new Error('Algorithm "'+b.algorithm+'"  not supported. supported values: '+v.join(", "));if(x.indexOf(b.encoding)===-1&&b.algorithm!=="passthrough")throw new Error('Encoding "'+b.encoding+'"  not supported. supported values: '+x.join(", "));return b}function w(M){if(typeof M=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(M))!=null}function A(M,P,b){b=b||[];function C(T){return P.update?P.update(T,"utf8"):P.write(T,"utf8")}return{dispatch:function(T){return this["_"+((T=M.replacer?M.replacer(T):T)===null?"null":typeof T)](T)},_object:function(T){var I,D=Object.prototype.toString.call(T),z=/\[object (.*)\]/i.exec(D);if(z=(z=z?z[1]:"unknown:["+D+"]").toLowerCase(),0<=(D=b.indexOf(T)))return this.dispatch("[CIRCULAR:"+D+"]");if(b.push(T),a!==void 0&&a.isBuffer&&a.isBuffer(T))return C("buffer:"),C(T);if(z==="object"||z==="function"||z==="asyncfunction")return D=Object.keys(T),M.unorderedObjects&&(D=D.sort()),M.respectType===!1||w(T)||D.splice(0,0,"prototype","__proto__","constructor"),M.excludeKeys&&(D=D.filter(function(N){return!M.excludeKeys(N)})),C("object:"+D.length+":"),I=this,D.forEach(function(N){I.dispatch(N),C(":"),M.excludeValues||I.dispatch(T[N]),C(",")});if(!this["_"+z]){if(M.ignoreUnknown)return C("["+z+"]");throw new Error('Unknown object type "'+z+'"')}this["_"+z](T)},_array:function(T,N){N=N!==void 0?N:M.unorderedArrays!==!1;var D=this;if(C("array:"+T.length+":"),!N||T.length<=1)return T.forEach(function(J){return D.dispatch(J)});var z=[],N=T.map(function(J){var Q=new R,re=b.slice();return A(M,Q,re).dispatch(J),z=z.concat(re.slice(b.length)),Q.read().toString()});return b=b.concat(z),N.sort(),this._array(N,!1)},_date:function(T){return C("date:"+T.toJSON())},_symbol:function(T){return C("symbol:"+T.toString())},_error:function(T){return C("error:"+T.toString())},_boolean:function(T){return C("bool:"+T.toString())},_string:function(T){C("string:"+T.length+":"),C(T.toString())},_function:function(T){C("fn:"),w(T)?this.dispatch("[native]"):this.dispatch(T.toString()),M.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(T.name)),M.respectFunctionProperties&&this._object(T)},_number:function(T){return C("number:"+T.toString())},_xml:function(T){return C("xml:"+T.toString())},_null:function(){return C("Null")},_undefined:function(){return C("Undefined")},_regexp:function(T){return C("regex:"+T.toString())},_uint8array:function(T){return C("uint8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint8clampedarray:function(T){return C("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(T))},_int8array:function(T){return C("int8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint16array:function(T){return C("uint16array:"),this.dispatch(Array.prototype.slice.call(T))},_int16array:function(T){return C("int16array:"),this.dispatch(Array.prototype.slice.call(T))},_uint32array:function(T){return C("uint32array:"),this.dispatch(Array.prototype.slice.call(T))},_int32array:function(T){return C("int32array:"),this.dispatch(Array.prototype.slice.call(T))},_float32array:function(T){return C("float32array:"),this.dispatch(Array.prototype.slice.call(T))},_float64array:function(T){return C("float64array:"),this.dispatch(Array.prototype.slice.call(T))},_arraybuffer:function(T){return C("arraybuffer:"),this.dispatch(new Uint8Array(T))},_url:function(T){return C("url:"+T.toString())},_map:function(T){return C("map:"),T=Array.from(T),this._array(T,M.unorderedSets!==!1)},_set:function(T){return C("set:"),T=Array.from(T),this._array(T,M.unorderedSets!==!1)},_file:function(T){return C("file:"),this.dispatch([T.name,T.size,T.type,T.lastModfied])},_blob:function(){if(M.ignoreUnknown)return C("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return C("domwindow")},_bigint:function(T){return C("bigint:"+T.toString())},_process:function(){return C("process")},_timer:function(){return C("timer")},_pipe:function(){return C("pipe")},_tcp:function(){return C("tcp")},_udp:function(){return C("udp")},_tty:function(){return C("tty")},_statwatcher:function(){return C("statwatcher")},_securecontext:function(){return C("securecontext")},_connection:function(){return C("connection")},_zlib:function(){return C("zlib")},_context:function(){return C("context")},_nodescript:function(){return C("nodescript")},_httpparser:function(){return C("httpparser")},_dataview:function(){return C("dataview")},_signal:function(){return C("signal")},_fsevent:function(){return C("fsevent")},_tlswrap:function(){return C("tlswrap")}}}function R(){return{buf:"",write:function(M){this.buf+=M},end:function(M){this.buf+=M},read:function(){return this.buf}}}i.writeToStream=function(M,P,b){return b===void 0&&(b=P,P={}),A(P=_(M,P),b).dispatch(M)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,r,i){(function(s,o,a,l,u,c,f,h,m){(function(y){var g=typeof Uint8Array<"u"?Uint8Array:Array,v="+".charCodeAt(0),x="/".charCodeAt(0),_="0".charCodeAt(0),w="a".charCodeAt(0),A="A".charCodeAt(0),R="-".charCodeAt(0),M="_".charCodeAt(0);function P(b){return b=b.charCodeAt(0),b===v||b===R?62:b===x||b===M?63:b<_?-1:b<_+10?b-_+26+26:b<A+26?b-A:b<w+26?b-w+26:void 0}y.toByteArray=function(b){var C,T;if(0<b.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var I=b.length,I=b.charAt(I-2)==="="?2:b.charAt(I-1)==="="?1:0,D=new g(3*b.length/4-I),z=0<I?b.length-4:b.length,N=0;function J(Q){D[N++]=Q}for(C=0;C<z;C+=4,0)J((16711680&(T=P(b.charAt(C))<<18|P(b.charAt(C+1))<<12|P(b.charAt(C+2))<<6|P(b.charAt(C+3))))>>16),J((65280&T)>>8),J(255&T);return I==2?J(255&(T=P(b.charAt(C))<<2|P(b.charAt(C+1))>>4)):I==1&&(J((T=P(b.charAt(C))<<10|P(b.charAt(C+1))<<4|P(b.charAt(C+2))>>2)>>8&255),J(255&T)),D},y.fromByteArray=function(b){var C,T,I,D,z=b.length%3,N="";function J(Q){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Q)}for(C=0,I=b.length-z;C<I;C+=3)T=(b[C]<<16)+(b[C+1]<<8)+b[C+2],N+=J((D=T)>>18&63)+J(D>>12&63)+J(D>>6&63)+J(63&D);switch(z){case 1:N=(N+=J((T=b[b.length-1])>>2))+J(T<<4&63)+"==";break;case 2:N=(N=(N+=J((T=(b[b.length-2]<<8)+b[b.length-1])>>10))+J(T>>4&63))+J(T<<2&63)+"="}return N}})(i===void 0?this.base64js={}:i)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,r,i){(function(s,o,v,l,u,c,f,h,m){var y=t("base64-js"),g=t("ieee754");function v(U,W,Z){if(!(this instanceof v))return new v(U,W,Z);var q,se,ge,Me,Ce=typeof U;if(W==="base64"&&Ce=="string")for(U=(Me=U).trim?Me.trim():Me.replace(/^\s+|\s+$/g,"");U.length%4!=0;)U+="=";if(Ce=="number")q=G(U);else if(Ce=="string")q=v.byteLength(U,W);else{if(Ce!="object")throw new Error("First argument needs to be a number, array or string.");q=G(U.length)}if(v._useTypedArrays?se=v._augment(new Uint8Array(q)):((se=this).length=q,se._isBuffer=!0),v._useTypedArrays&&typeof U.byteLength=="number")se._set(U);else if(j(Me=U)||v.isBuffer(Me)||Me&&typeof Me=="object"&&typeof Me.length=="number")for(ge=0;ge<q;ge++)v.isBuffer(U)?se[ge]=U.readUInt8(ge):se[ge]=U[ge];else if(Ce=="string")se.write(U,0,W);else if(Ce=="number"&&!v._useTypedArrays&&!Z)for(ge=0;ge<q;ge++)se[ge]=0;return se}function x(U,W,Z,q){return v._charsWritten=ce(function(se){for(var ge=[],Me=0;Me<se.length;Me++)ge.push(255&se.charCodeAt(Me));return ge}(W),U,Z,q)}function _(U,W,Z,q){return v._charsWritten=ce(function(se){for(var ge,Me,Ce=[],Ke=0;Ke<se.length;Ke++)Me=se.charCodeAt(Ke),ge=Me>>8,Me=Me%256,Ce.push(Me),Ce.push(ge);return Ce}(W),U,Z,q)}function w(U,W,Z){var q="";Z=Math.min(U.length,Z);for(var se=W;se<Z;se++)q+=String.fromCharCode(U[se]);return q}function A(U,W,Z,ge){ge||(oe(typeof Z=="boolean","missing or invalid endian"),oe(W!=null,"missing offset"),oe(W+1<U.length,"Trying to read beyond buffer length"));var se,ge=U.length;if(!(ge<=W))return Z?(se=U[W],W+1<ge&&(se|=U[W+1]<<8)):(se=U[W]<<8,W+1<ge&&(se|=U[W+1])),se}function R(U,W,Z,ge){ge||(oe(typeof Z=="boolean","missing or invalid endian"),oe(W!=null,"missing offset"),oe(W+3<U.length,"Trying to read beyond buffer length"));var se,ge=U.length;if(!(ge<=W))return Z?(W+2<ge&&(se=U[W+2]<<16),W+1<ge&&(se|=U[W+1]<<8),se|=U[W],W+3<ge&&(se+=U[W+3]<<24>>>0)):(W+1<ge&&(se=U[W+1]<<16),W+2<ge&&(se|=U[W+2]<<8),W+3<ge&&(se|=U[W+3]),se+=U[W]<<24>>>0),se}function M(U,W,Z,q){if(q||(oe(typeof Z=="boolean","missing or invalid endian"),oe(W!=null,"missing offset"),oe(W+1<U.length,"Trying to read beyond buffer length")),!(U.length<=W))return q=A(U,W,Z,!0),32768&q?-1*(65535-q+1):q}function P(U,W,Z,q){if(q||(oe(typeof Z=="boolean","missing or invalid endian"),oe(W!=null,"missing offset"),oe(W+3<U.length,"Trying to read beyond buffer length")),!(U.length<=W))return q=R(U,W,Z,!0),2147483648&q?-1*(4294967295-q+1):q}function b(U,W,Z,q){return q||(oe(typeof Z=="boolean","missing or invalid endian"),oe(W+3<U.length,"Trying to read beyond buffer length")),g.read(U,W,Z,23,4)}function C(U,W,Z,q){return q||(oe(typeof Z=="boolean","missing or invalid endian"),oe(W+7<U.length,"Trying to read beyond buffer length")),g.read(U,W,Z,52,8)}function T(U,W,Z,q,se){if(se||(oe(W!=null,"missing value"),oe(typeof q=="boolean","missing or invalid endian"),oe(Z!=null,"missing offset"),oe(Z+1<U.length,"trying to write beyond buffer length"),te(W,65535)),se=U.length,!(se<=Z))for(var ge=0,Me=Math.min(se-Z,2);ge<Me;ge++)U[Z+ge]=(W&255<<8*(q?ge:1-ge))>>>8*(q?ge:1-ge)}function I(U,W,Z,q,se){if(se||(oe(W!=null,"missing value"),oe(typeof q=="boolean","missing or invalid endian"),oe(Z!=null,"missing offset"),oe(Z+3<U.length,"trying to write beyond buffer length"),te(W,4294967295)),se=U.length,!(se<=Z))for(var ge=0,Me=Math.min(se-Z,4);ge<Me;ge++)U[Z+ge]=W>>>8*(q?ge:3-ge)&255}function D(U,W,Z,q,se){se||(oe(W!=null,"missing value"),oe(typeof q=="boolean","missing or invalid endian"),oe(Z!=null,"missing offset"),oe(Z+1<U.length,"Trying to write beyond buffer length"),me(W,32767,-32768)),U.length<=Z||T(U,0<=W?W:65535+W+1,Z,q,se)}function z(U,W,Z,q,se){se||(oe(W!=null,"missing value"),oe(typeof q=="boolean","missing or invalid endian"),oe(Z!=null,"missing offset"),oe(Z+3<U.length,"Trying to write beyond buffer length"),me(W,2147483647,-2147483648)),U.length<=Z||I(U,0<=W?W:4294967295+W+1,Z,q,se)}function N(U,W,Z,q,se){se||(oe(W!=null,"missing value"),oe(typeof q=="boolean","missing or invalid endian"),oe(Z!=null,"missing offset"),oe(Z+3<U.length,"Trying to write beyond buffer length"),pe(W,34028234663852886e22,-34028234663852886e22)),U.length<=Z||g.write(U,W,Z,q,23,4)}function J(U,W,Z,q,se){se||(oe(W!=null,"missing value"),oe(typeof q=="boolean","missing or invalid endian"),oe(Z!=null,"missing offset"),oe(Z+7<U.length,"Trying to write beyond buffer length"),pe(W,17976931348623157e292,-17976931348623157e292)),U.length<=Z||g.write(U,W,Z,q,52,8)}i.Buffer=v,i.SlowBuffer=v,i.INSPECT_MAX_BYTES=50,v.poolSize=8192,v._useTypedArrays=function(){try{var U=new ArrayBuffer(0),W=new Uint8Array(U);return W.foo=function(){return 42},W.foo()===42&&typeof W.subarray=="function"}catch{return!1}}(),v.isEncoding=function(U){switch(String(U).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.isBuffer=function(U){return!(U==null||!U._isBuffer)},v.byteLength=function(U,W){var Z;switch(U+="",W||"utf8"){case"hex":Z=U.length/2;break;case"utf8":case"utf-8":Z=X(U).length;break;case"ascii":case"binary":case"raw":Z=U.length;break;case"base64":Z=K(U).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Z=2*U.length;break;default:throw new Error("Unknown encoding")}return Z},v.concat=function(U,W){if(oe(j(U),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),U.length===0)return new v(0);if(U.length===1)return U[0];if(typeof W!="number")for(se=W=0;se<U.length;se++)W+=U[se].length;for(var Z=new v(W),q=0,se=0;se<U.length;se++){var ge=U[se];ge.copy(Z,q),q+=ge.length}return Z},v.prototype.write=function(U,W,Z,q){isFinite(W)?isFinite(Z)||(q=Z,Z=void 0):(Ke=q,q=W,W=Z,Z=Ke),W=Number(W)||0;var se,ge,Me,Ce,Ke=this.length-W;switch((!Z||Ke<(Z=Number(Z)))&&(Z=Ke),q=String(q||"utf8").toLowerCase()){case"hex":se=function(Re,Oe,ze,Ee){ze=Number(ze)||0;var $=Re.length-ze;(!Ee||$<(Ee=Number(Ee)))&&(Ee=$),oe(($=Oe.length)%2==0,"Invalid hex string"),$/2<Ee&&(Ee=$/2);for(var O=0;O<Ee;O++){var ae=parseInt(Oe.substr(2*O,2),16);oe(!isNaN(ae),"Invalid hex string"),Re[ze+O]=ae}return v._charsWritten=2*O,O}(this,U,W,Z);break;case"utf8":case"utf-8":ge=this,Me=W,Ce=Z,se=v._charsWritten=ce(X(U),ge,Me,Ce);break;case"ascii":case"binary":se=x(this,U,W,Z);break;case"base64":ge=this,Me=W,Ce=Z,se=v._charsWritten=ce(K(U),ge,Me,Ce);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":se=_(this,U,W,Z);break;default:throw new Error("Unknown encoding")}return se},v.prototype.toString=function(U,W,Z){var q,se,ge,Me,Ce=this;if(U=String(U||"utf8").toLowerCase(),W=Number(W)||0,(Z=Z!==void 0?Number(Z):Ce.length)===W)return"";switch(U){case"hex":q=function(Ke,Re,Oe){var ze=Ke.length;(!Re||Re<0)&&(Re=0),(!Oe||Oe<0||ze<Oe)&&(Oe=ze);for(var Ee="",$=Re;$<Oe;$++)Ee+=Y(Ke[$]);return Ee}(Ce,W,Z);break;case"utf8":case"utf-8":q=function(Ke,Re,Oe){var ze="",Ee="";Oe=Math.min(Ke.length,Oe);for(var $=Re;$<Oe;$++)Ke[$]<=127?(ze+=he(Ee)+String.fromCharCode(Ke[$]),Ee=""):Ee+="%"+Ke[$].toString(16);return ze+he(Ee)}(Ce,W,Z);break;case"ascii":case"binary":q=w(Ce,W,Z);break;case"base64":se=Ce,Me=Z,q=(ge=W)===0&&Me===se.length?y.fromByteArray(se):y.fromByteArray(se.slice(ge,Me));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":q=function(Ke,Re,Oe){for(var ze=Ke.slice(Re,Oe),Ee="",$=0;$<ze.length;$+=2)Ee+=String.fromCharCode(ze[$]+256*ze[$+1]);return Ee}(Ce,W,Z);break;default:throw new Error("Unknown encoding")}return q},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},v.prototype.copy=function(U,W,Z,q){if(W=W||0,(q=q||q===0?q:this.length)!==(Z=Z||0)&&U.length!==0&&this.length!==0){oe(Z<=q,"sourceEnd < sourceStart"),oe(0<=W&&W<U.length,"targetStart out of bounds"),oe(0<=Z&&Z<this.length,"sourceStart out of bounds"),oe(0<=q&&q<=this.length,"sourceEnd out of bounds"),q>this.length&&(q=this.length);var se=(q=U.length-W<q-Z?U.length-W+Z:q)-Z;if(se<100||!v._useTypedArrays)for(var ge=0;ge<se;ge++)U[ge+W]=this[ge+Z];else U._set(this.subarray(Z,Z+se),W)}},v.prototype.slice=function(U,W){var Z=this.length;if(U=re(U,Z,0),W=re(W,Z,Z),v._useTypedArrays)return v._augment(this.subarray(U,W));for(var q=W-U,se=new v(q,void 0,!0),ge=0;ge<q;ge++)se[ge]=this[ge+U];return se},v.prototype.get=function(U){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(U)},v.prototype.set=function(U,W){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(U,W)},v.prototype.readUInt8=function(U,W){if(W||(oe(U!=null,"missing offset"),oe(U<this.length,"Trying to read beyond buffer length")),!(U>=this.length))return this[U]},v.prototype.readUInt16LE=function(U,W){return A(this,U,!0,W)},v.prototype.readUInt16BE=function(U,W){return A(this,U,!1,W)},v.prototype.readUInt32LE=function(U,W){return R(this,U,!0,W)},v.prototype.readUInt32BE=function(U,W){return R(this,U,!1,W)},v.prototype.readInt8=function(U,W){if(W||(oe(U!=null,"missing offset"),oe(U<this.length,"Trying to read beyond buffer length")),!(U>=this.length))return 128&this[U]?-1*(255-this[U]+1):this[U]},v.prototype.readInt16LE=function(U,W){return M(this,U,!0,W)},v.prototype.readInt16BE=function(U,W){return M(this,U,!1,W)},v.prototype.readInt32LE=function(U,W){return P(this,U,!0,W)},v.prototype.readInt32BE=function(U,W){return P(this,U,!1,W)},v.prototype.readFloatLE=function(U,W){return b(this,U,!0,W)},v.prototype.readFloatBE=function(U,W){return b(this,U,!1,W)},v.prototype.readDoubleLE=function(U,W){return C(this,U,!0,W)},v.prototype.readDoubleBE=function(U,W){return C(this,U,!1,W)},v.prototype.writeUInt8=function(U,W,Z){Z||(oe(U!=null,"missing value"),oe(W!=null,"missing offset"),oe(W<this.length,"trying to write beyond buffer length"),te(U,255)),W>=this.length||(this[W]=U)},v.prototype.writeUInt16LE=function(U,W,Z){T(this,U,W,!0,Z)},v.prototype.writeUInt16BE=function(U,W,Z){T(this,U,W,!1,Z)},v.prototype.writeUInt32LE=function(U,W,Z){I(this,U,W,!0,Z)},v.prototype.writeUInt32BE=function(U,W,Z){I(this,U,W,!1,Z)},v.prototype.writeInt8=function(U,W,Z){Z||(oe(U!=null,"missing value"),oe(W!=null,"missing offset"),oe(W<this.length,"Trying to write beyond buffer length"),me(U,127,-128)),W>=this.length||(0<=U?this.writeUInt8(U,W,Z):this.writeUInt8(255+U+1,W,Z))},v.prototype.writeInt16LE=function(U,W,Z){D(this,U,W,!0,Z)},v.prototype.writeInt16BE=function(U,W,Z){D(this,U,W,!1,Z)},v.prototype.writeInt32LE=function(U,W,Z){z(this,U,W,!0,Z)},v.prototype.writeInt32BE=function(U,W,Z){z(this,U,W,!1,Z)},v.prototype.writeFloatLE=function(U,W,Z){N(this,U,W,!0,Z)},v.prototype.writeFloatBE=function(U,W,Z){N(this,U,W,!1,Z)},v.prototype.writeDoubleLE=function(U,W,Z){J(this,U,W,!0,Z)},v.prototype.writeDoubleBE=function(U,W,Z){J(this,U,W,!1,Z)},v.prototype.fill=function(U,W,Z){if(W=W||0,Z=Z||this.length,oe(typeof(U=typeof(U=U||0)=="string"?U.charCodeAt(0):U)=="number"&&!isNaN(U),"value is not a number"),oe(W<=Z,"end < start"),Z!==W&&this.length!==0){oe(0<=W&&W<this.length,"start out of bounds"),oe(0<=Z&&Z<=this.length,"end out of bounds");for(var q=W;q<Z;q++)this[q]=U}},v.prototype.inspect=function(){for(var U=[],W=this.length,Z=0;Z<W;Z++)if(U[Z]=Y(this[Z]),Z===i.INSPECT_MAX_BYTES){U[Z+1]="...";break}return"<Buffer "+U.join(" ")+">"},v.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(v._useTypedArrays)return new v(this).buffer;for(var U=new Uint8Array(this.length),W=0,Z=U.length;W<Z;W+=1)U[W]=this[W];return U.buffer};var Q=v.prototype;function re(U,W,Z){return typeof U!="number"?Z:W<=(U=~~U)?W:0<=U||0<=(U+=W)?U:0}function G(U){return(U=~~Math.ceil(+U))<0?0:U}function j(U){return(Array.isArray||function(W){return Object.prototype.toString.call(W)==="[object Array]"})(U)}function Y(U){return U<16?"0"+U.toString(16):U.toString(16)}function X(U){for(var W=[],Z=0;Z<U.length;Z++){var q=U.charCodeAt(Z);if(q<=127)W.push(U.charCodeAt(Z));else for(var se=Z,ge=(55296<=q&&q<=57343&&Z++,encodeURIComponent(U.slice(se,Z+1)).substr(1).split("%")),Me=0;Me<ge.length;Me++)W.push(parseInt(ge[Me],16))}return W}function K(U){return y.toByteArray(U)}function ce(U,W,Z,q){for(var se=0;se<q&&!(se+Z>=W.length||se>=U.length);se++)W[se+Z]=U[se];return se}function he(U){try{return decodeURIComponent(U)}catch{return String.fromCharCode(65533)}}function te(U,W){oe(typeof U=="number","cannot write a non-number as a number"),oe(0<=U,"specified a negative value for writing an unsigned value"),oe(U<=W,"value is larger than maximum value for type"),oe(Math.floor(U)===U,"value has a fractional component")}function me(U,W,Z){oe(typeof U=="number","cannot write a non-number as a number"),oe(U<=W,"value larger than maximum allowed value"),oe(Z<=U,"value smaller than minimum allowed value"),oe(Math.floor(U)===U,"value has a fractional component")}function pe(U,W,Z){oe(typeof U=="number","cannot write a non-number as a number"),oe(U<=W,"value larger than maximum allowed value"),oe(Z<=U,"value smaller than minimum allowed value")}function oe(U,W){if(!U)throw new Error(W||"Failed assertion")}v._augment=function(U){return U._isBuffer=!0,U._get=U.get,U._set=U.set,U.get=Q.get,U.set=Q.set,U.write=Q.write,U.toString=Q.toString,U.toLocaleString=Q.toString,U.toJSON=Q.toJSON,U.copy=Q.copy,U.slice=Q.slice,U.readUInt8=Q.readUInt8,U.readUInt16LE=Q.readUInt16LE,U.readUInt16BE=Q.readUInt16BE,U.readUInt32LE=Q.readUInt32LE,U.readUInt32BE=Q.readUInt32BE,U.readInt8=Q.readInt8,U.readInt16LE=Q.readInt16LE,U.readInt16BE=Q.readInt16BE,U.readInt32LE=Q.readInt32LE,U.readInt32BE=Q.readInt32BE,U.readFloatLE=Q.readFloatLE,U.readFloatBE=Q.readFloatBE,U.readDoubleLE=Q.readDoubleLE,U.readDoubleBE=Q.readDoubleBE,U.writeUInt8=Q.writeUInt8,U.writeUInt16LE=Q.writeUInt16LE,U.writeUInt16BE=Q.writeUInt16BE,U.writeUInt32LE=Q.writeUInt32LE,U.writeUInt32BE=Q.writeUInt32BE,U.writeInt8=Q.writeInt8,U.writeInt16LE=Q.writeInt16LE,U.writeInt16BE=Q.writeInt16BE,U.writeInt32LE=Q.writeInt32LE,U.writeInt32BE=Q.writeInt32BE,U.writeFloatLE=Q.writeFloatLE,U.writeFloatBE=Q.writeFloatBE,U.writeDoubleLE=Q.writeDoubleLE,U.writeDoubleBE=Q.writeDoubleBE,U.fill=Q.fill,U.inspect=Q.inspect,U.toArrayBuffer=Q.toArrayBuffer,U}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,r,i){(function(s,o,y,l,u,c,f,h,m){var y=t("buffer").Buffer,g=4,v=new y(g);v.fill(0),r.exports={hash:function(x,_,w,A){for(var R=_(function(T,I){T.length%g!=0&&(D=T.length+(g-T.length%g),T=y.concat([T,v],D));for(var D,z=[],N=I?T.readInt32BE:T.readInt32LE,J=0;J<T.length;J+=g)z.push(N.call(T,J));return z}(x=y.isBuffer(x)?x:new y(x),A),8*x.length),_=A,M=new y(w),P=_?M.writeInt32BE:M.writeInt32LE,b=0;b<R.length;b++)P.call(M,R[b],4*b,!0);return M}}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,r,i){(function(s,o,y,l,u,c,f,h,m){var y=t("buffer").Buffer,g=t("./sha"),v=t("./sha256"),x=t("./rng"),_={sha1:g,sha256:v,md5:t("./md5")},w=64,A=new y(w);function R(T,I){var D=_[T=T||"sha1"],z=[];return D||M("algorithm:",T,"is not yet supported"),{update:function(N){return y.isBuffer(N)||(N=new y(N)),z.push(N),N.length,this},digest:function(N){var J=y.concat(z),J=I?function(Q,re,G){y.isBuffer(re)||(re=new y(re)),y.isBuffer(G)||(G=new y(G)),re.length>w?re=Q(re):re.length<w&&(re=y.concat([re,A],w));for(var j=new y(w),Y=new y(w),X=0;X<w;X++)j[X]=54^re[X],Y[X]=92^re[X];return G=Q(y.concat([j,G])),Q(y.concat([Y,G]))}(D,I,J):D(J);return z=null,N?J.toString(N):J}}}function M(){var T=[].slice.call(arguments).join(" ");throw new Error([T,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}A.fill(0),i.createHash=function(T){return R(T)},i.createHmac=R,i.randomBytes=function(T,I){if(!I||!I.call)return new y(x(T));try{I.call(this,void 0,new y(x(T)))}catch(D){I(D)}};var P,b=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],C=function(T){i[T]=function(){M("sorry,",T,"is not implemented yet")}};for(P in b)C(b[P])}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,r,i){(function(s,o,a,l,u,c,f,h,m){var y=t("./helpers");function g(M,P){M[P>>5]|=128<<P%32,M[14+(P+64>>>9<<4)]=P;for(var b=1732584193,C=-271733879,T=-1732584194,I=271733878,D=0;D<M.length;D+=16){var z=b,N=C,J=T,Q=I,b=x(b,C,T,I,M[D+0],7,-680876936),I=x(I,b,C,T,M[D+1],12,-389564586),T=x(T,I,b,C,M[D+2],17,606105819),C=x(C,T,I,b,M[D+3],22,-1044525330);b=x(b,C,T,I,M[D+4],7,-176418897),I=x(I,b,C,T,M[D+5],12,1200080426),T=x(T,I,b,C,M[D+6],17,-1473231341),C=x(C,T,I,b,M[D+7],22,-45705983),b=x(b,C,T,I,M[D+8],7,1770035416),I=x(I,b,C,T,M[D+9],12,-1958414417),T=x(T,I,b,C,M[D+10],17,-42063),C=x(C,T,I,b,M[D+11],22,-1990404162),b=x(b,C,T,I,M[D+12],7,1804603682),I=x(I,b,C,T,M[D+13],12,-40341101),T=x(T,I,b,C,M[D+14],17,-1502002290),b=_(b,C=x(C,T,I,b,M[D+15],22,1236535329),T,I,M[D+1],5,-165796510),I=_(I,b,C,T,M[D+6],9,-1069501632),T=_(T,I,b,C,M[D+11],14,643717713),C=_(C,T,I,b,M[D+0],20,-373897302),b=_(b,C,T,I,M[D+5],5,-701558691),I=_(I,b,C,T,M[D+10],9,38016083),T=_(T,I,b,C,M[D+15],14,-660478335),C=_(C,T,I,b,M[D+4],20,-405537848),b=_(b,C,T,I,M[D+9],5,568446438),I=_(I,b,C,T,M[D+14],9,-1019803690),T=_(T,I,b,C,M[D+3],14,-187363961),C=_(C,T,I,b,M[D+8],20,1163531501),b=_(b,C,T,I,M[D+13],5,-1444681467),I=_(I,b,C,T,M[D+2],9,-51403784),T=_(T,I,b,C,M[D+7],14,1735328473),b=w(b,C=_(C,T,I,b,M[D+12],20,-1926607734),T,I,M[D+5],4,-378558),I=w(I,b,C,T,M[D+8],11,-2022574463),T=w(T,I,b,C,M[D+11],16,1839030562),C=w(C,T,I,b,M[D+14],23,-35309556),b=w(b,C,T,I,M[D+1],4,-1530992060),I=w(I,b,C,T,M[D+4],11,1272893353),T=w(T,I,b,C,M[D+7],16,-155497632),C=w(C,T,I,b,M[D+10],23,-1094730640),b=w(b,C,T,I,M[D+13],4,681279174),I=w(I,b,C,T,M[D+0],11,-358537222),T=w(T,I,b,C,M[D+3],16,-722521979),C=w(C,T,I,b,M[D+6],23,76029189),b=w(b,C,T,I,M[D+9],4,-640364487),I=w(I,b,C,T,M[D+12],11,-421815835),T=w(T,I,b,C,M[D+15],16,530742520),b=A(b,C=w(C,T,I,b,M[D+2],23,-995338651),T,I,M[D+0],6,-198630844),I=A(I,b,C,T,M[D+7],10,1126891415),T=A(T,I,b,C,M[D+14],15,-1416354905),C=A(C,T,I,b,M[D+5],21,-57434055),b=A(b,C,T,I,M[D+12],6,1700485571),I=A(I,b,C,T,M[D+3],10,-1894986606),T=A(T,I,b,C,M[D+10],15,-1051523),C=A(C,T,I,b,M[D+1],21,-2054922799),b=A(b,C,T,I,M[D+8],6,1873313359),I=A(I,b,C,T,M[D+15],10,-30611744),T=A(T,I,b,C,M[D+6],15,-1560198380),C=A(C,T,I,b,M[D+13],21,1309151649),b=A(b,C,T,I,M[D+4],6,-145523070),I=A(I,b,C,T,M[D+11],10,-1120210379),T=A(T,I,b,C,M[D+2],15,718787259),C=A(C,T,I,b,M[D+9],21,-343485551),b=R(b,z),C=R(C,N),T=R(T,J),I=R(I,Q)}return Array(b,C,T,I)}function v(M,P,b,C,T,I){return R((P=R(R(P,M),R(C,I)))<<T|P>>>32-T,b)}function x(M,P,b,C,T,I,D){return v(P&b|~P&C,M,P,T,I,D)}function _(M,P,b,C,T,I,D){return v(P&C|b&~C,M,P,T,I,D)}function w(M,P,b,C,T,I,D){return v(P^b^C,M,P,T,I,D)}function A(M,P,b,C,T,I,D){return v(b^(P|~C),M,P,T,I,D)}function R(M,P){var b=(65535&M)+(65535&P);return(M>>16)+(P>>16)+(b>>16)<<16|65535&b}r.exports=function(M){return y.hash(M,g,16)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,r,i){(function(s,o,a,l,u,c,f,h,m){r.exports=function(y){for(var g,v=new Array(y),x=0;x<y;x++)!(3&x)&&(g=4294967296*Math.random()),v[x]=g>>>((3&x)<<3)&255;return v}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,r,i){(function(s,o,a,l,u,c,f,h,m){var y=t("./helpers");function g(_,w){_[w>>5]|=128<<24-w%32,_[15+(w+64>>9<<4)]=w;for(var A,R,M,P=Array(80),b=1732584193,C=-271733879,T=-1732584194,I=271733878,D=-1009589776,z=0;z<_.length;z+=16){for(var N=b,J=C,Q=T,re=I,G=D,j=0;j<80;j++){P[j]=j<16?_[z+j]:x(P[j-3]^P[j-8]^P[j-14]^P[j-16],1);var Y=v(v(x(b,5),(Y=C,R=T,M=I,(A=j)<20?Y&R|~Y&M:!(A<40)&&A<60?Y&R|Y&M|R&M:Y^R^M)),v(v(D,P[j]),(A=j)<20?1518500249:A<40?1859775393:A<60?-1894007588:-899497514)),D=I,I=T,T=x(C,30),C=b,b=Y}b=v(b,N),C=v(C,J),T=v(T,Q),I=v(I,re),D=v(D,G)}return Array(b,C,T,I,D)}function v(_,w){var A=(65535&_)+(65535&w);return(_>>16)+(w>>16)+(A>>16)<<16|65535&A}function x(_,w){return _<<w|_>>>32-w}r.exports=function(_){return y.hash(_,g,20,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,r,i){(function(s,o,a,l,u,c,f,h,m){function y(w,A){var R=(65535&w)+(65535&A);return(w>>16)+(A>>16)+(R>>16)<<16|65535&R}function g(w,A){var R,M=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),P=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),b=new Array(64);w[A>>5]|=128<<24-A%32,w[15+(A+64>>9<<4)]=A;for(var C,T,I=0;I<w.length;I+=16){for(var D=P[0],z=P[1],N=P[2],J=P[3],Q=P[4],re=P[5],G=P[6],j=P[7],Y=0;Y<64;Y++)b[Y]=Y<16?w[Y+I]:y(y(y((T=b[Y-2],x(T,17)^x(T,19)^_(T,10)),b[Y-7]),(T=b[Y-15],x(T,7)^x(T,18)^_(T,3))),b[Y-16]),R=y(y(y(y(j,x(T=Q,6)^x(T,11)^x(T,25)),Q&re^~Q&G),M[Y]),b[Y]),C=y(x(C=D,2)^x(C,13)^x(C,22),D&z^D&N^z&N),j=G,G=re,re=Q,Q=y(J,R),J=N,N=z,z=D,D=y(R,C);P[0]=y(D,P[0]),P[1]=y(z,P[1]),P[2]=y(N,P[2]),P[3]=y(J,P[3]),P[4]=y(Q,P[4]),P[5]=y(re,P[5]),P[6]=y(G,P[6]),P[7]=y(j,P[7])}return P}var v=t("./helpers"),x=function(w,A){return w>>>A|w<<32-A},_=function(w,A){return w>>>A};r.exports=function(w){return v.hash(w,g,32,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,r,i){(function(s,o,a,l,u,c,f,h,m){i.read=function(y,g,v,x,I){var w,A,R=8*I-x-1,M=(1<<R)-1,P=M>>1,b=-7,C=v?I-1:0,T=v?-1:1,I=y[g+C];for(C+=T,w=I&(1<<-b)-1,I>>=-b,b+=R;0<b;w=256*w+y[g+C],C+=T,b-=8);for(A=w&(1<<-b)-1,w>>=-b,b+=x;0<b;A=256*A+y[g+C],C+=T,b-=8);if(w===0)w=1-P;else{if(w===M)return A?NaN:1/0*(I?-1:1);A+=Math.pow(2,x),w-=P}return(I?-1:1)*A*Math.pow(2,w-x)},i.write=function(y,g,v,x,_,D){var A,R,M=8*D-_-1,P=(1<<M)-1,b=P>>1,C=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=x?0:D-1,I=x?1:-1,D=g<0||g===0&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(R=isNaN(g)?1:0,A=P):(A=Math.floor(Math.log(g)/Math.LN2),g*(x=Math.pow(2,-A))<1&&(A--,x*=2),2<=(g+=1<=A+b?C/x:C*Math.pow(2,1-b))*x&&(A++,x/=2),P<=A+b?(R=0,A=P):1<=A+b?(R=(g*x-1)*Math.pow(2,_),A+=b):(R=g*Math.pow(2,b-1)*Math.pow(2,_),A=0));8<=_;y[v+T]=255&R,T+=I,R/=256,_-=8);for(A=A<<_|R,M+=_;0<M;y[v+T]=255&A,T+=I,A/=256,M-=8);y[v+T-I]|=128*D}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,r,i){(function(s,o,a,l,u,c,f,h,m){var y,g,v;function x(){}(s=r.exports={}).nextTick=(g=typeof window<"u"&&window.setImmediate,v=typeof window<"u"&&window.postMessage&&window.addEventListener,g?function(_){return window.setImmediate(_)}:v?(y=[],window.addEventListener("message",function(_){var w=_.source;w!==window&&w!==null||_.data!=="process-tick"||(_.stopPropagation(),0<y.length&&y.shift()())},!0),function(_){y.push(_),window.postMessage("process-tick","*")}):function(_){setTimeout(_,0)}),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=x,s.addListener=x,s.once=x,s.off=x,s.removeListener=x,s.removeAllListeners=x,s.emit=x,s.binding=function(_){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(_){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(Bq);var Rn={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive"};const Iq={[`${Rn.normal}`]:{"#include <beginnormal_vertex>":`
    vec3 objectNormal = ${Rn.normal};
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `},[`${Rn.position}`]:{"#include <begin_vertex>":`
    vec3 transformed = ${Rn.position};
  `},[`${Rn.positionRaw}`]:{"#include <begin_vertex>":`
    vec4 csm_positionUnprojected = ${Rn.positionRaw};
    mat4x4 csm_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_unprojectMatrix = csm_unprojectMatrix * instanceMatrix;
    #endif
    csm_positionUnprojected = inverse(csm_unprojectMatrix) * csm_positionUnprojected;
    vec3 transformed = csm_positionUnprojected.xyz;
  `},[`${Rn.pointSize}`]:{"gl_PointSize = size;":`
    gl_PointSize = ${Rn.pointSize};
    `},[`${Rn.diffuseColor}`]:{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = ${Rn.diffuseColor};
  `},[`${Rn.fragColor}`]:{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = ${Rn.fragColor};
  `},[`${Rn.emissive}`]:{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = ${Rn.emissive};
    `},[`${Rn.roughness}`]:{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = ${Rn.roughness};
    `},[`${Rn.metalness}`]:{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = ${Rn.metalness};
    `}},Dq={[`${Rn.position}`]:{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = projectionMatrix * modelViewMatrix * vec4( ${Rn.position}, 1.0 );
  `},[`${Rn.positionRaw}`]:{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = ${Rn.position};
  `},[`${Rn.diffuseColor}`]:{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = ${Rn.diffuseColor};
  `},[`${Rn.fragColor}`]:{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = ${Rn.fragColor};
  `}},Lq=`

#ifdef IS_VERTEX
    vec3 csm_Position = position;
    vec4 csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);
    vec3 csm_Normal = normal;
#else
    #if defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL
        vec4 csm_DiffuseColor = vec4(1., 0., 1., 1.);
        vec4 csm_FragColor = vec4(1., 0., 1., 1.);
    #else
        #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL
            vec3 csm_Emissive = emissive;
            float csm_Roughness = roughness;
            float csm_Metalness = metalness;
        #endif
        
        #ifdef USE_MAP
            vec4 _csm_sampledDiffuseColor = texture2D(map, vUv);

            #ifdef DECODE_VIDEO_TEXTURE
            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)
            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);
            #endif

            vec4 csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;
            vec4 csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;
        #else
            vec4 csm_DiffuseColor = vec4(diffuse, opacity);
            vec4 csm_FragColor = vec4(diffuse, opacity);
        #endif
    #endif
#endif
`,Fq=(n,e,t)=>n.split(e).join(t),kq=function(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},Oq=(n,e)=>new RegExp(`\\b${kq(e)}\\b`).test(n);function Uq(n){try{new n}catch(e){if(e.message.indexOf("is not a constructor")>=0)return!1}return!0}class Nq extends zn{constructor({baseMaterial:e,fragmentShader:t,vertexShader:r,uniforms:i,patchMap:s,cacheKey:o,...a}){let l;if(Uq(e)?l=new e(a):(l=e,Object.assign(l,a)),l.type==="RawShaderMaterial")throw new Error("CustomShaderMaterial does not support RawShaderMaterial");super(),this.uniforms=i||{},this._customPatchMap=s||{},this._fs=t||"",this._vs=r||"",this._cacheKey=o,this._base=e,this._type=l.type,this._instanceID=$s.generateUUID();for(const u in l){let c=u;u.startsWith("_")&&(c=u.split("_")[1]),this[c]===void 0&&(this[c]=0),this[c]=l[c]}this.update({fragmentShader:t,vertexShader:r,uniforms:i,cacheKey:o})}update(e){const t=(e==null?void 0:e.uniforms)||{},r=(e==null?void 0:e.fragmentShader)||this._fs,i=(e==null?void 0:e.vertexShader)||this._vs,s=Object.values(t).reduce((o,{value:a})=>o+JSON.stringify(a),"");this.uuid=(e==null||e.cacheKey==null?void 0:e.cacheKey())||W2([r,i,s,this._instanceID]),this.generateMaterial({fragmentShader:r,vertexShader:i,uniforms:t})}clone(){const e=new this.constructor({baseMaterial:this._base,fragmentShader:this._fs,vertexShader:this._vs,patchMap:this._customPatchMap,uniforms:this.uniforms,cacheKey:this._cacheKey});for(const t in this)t!=="uuid"&&(e[t]=this[t]);return e}generateMaterial({fragmentShader:e,vertexShader:t,uniforms:r}){const i=this.parseShader(e),s=this.parseShader(t);this.uniforms=r||{},this.customProgramCacheKey=()=>this.uuid,this.onBeforeCompile=o=>{if(i){const a=this.patchShader(i,o.fragmentShader);o.fragmentShader=this.getMaterialDefine()+a}if(s){const a=this.patchShader(s,o.vertexShader);o.vertexShader=`#define IS_VERTEX;
`+a,o.vertexShader=this.getMaterialDefine()+o.vertexShader}o.uniforms={...o.uniforms,...this.uniforms},this.uniforms=o.uniforms},this.needsUpdate=!0}getMaterialDefine(){return`#define IS_${this._type.toUpperCase()};
`}getPatchMapForMaterial(){switch(this._type){case"ShaderMaterial":return Dq;default:return Iq}}patchShader(e,t){let r=t;const i={...this.getPatchMapForMaterial(),...this._customPatchMap};return Object.keys(i).forEach(s=>{Object.keys(i[s]).forEach(o=>{Oq(e.main,s)&&(r=Fq(r,o,i[s][o]))})}),r=r.replace("void main() {",`
          ${e.header}
          void main() {
            ${Lq}
            ${e.main}
          `),r=e.defines+r,r}parseShader(e){if(!e)return;const t=e.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,""),r=H2(t),i=V2(r),s=i.map(l=>l.name).indexOf("main"),o=Wp(r.slice(0,s>=0?i[s].outer[0]:void 0)),a=s>=0?this.getShaderFromIndex(r,i[s].body):"";return{defines:"",header:o,main:a}}getShaderFromIndex(e,t){return Wp(e.slice(t[0],t[1]))}}function IO(...n){return e=>n.forEach(t=>function(r,i){typeof r=="function"?r(i):r!=null&&(r.current=i)}(t,e))}function I1(...n){return L.useCallback(IO(...n),n)}const Zd=L.forwardRef((n,e)=>{const{children:t,...r}=n;return L.Children.toArray(t).some(uB)?L.createElement(L.Fragment,null,L.Children.map(t,i=>uB(i)?L.createElement(j2,vn({},r,{ref:e}),i.props.children):i)):L.createElement(j2,vn({},r,{ref:e}),t)});Zd.displayName="Slot";const j2=L.forwardRef((n,e)=>{const{children:t,...r}=n;return L.isValidElement(t)?L.cloneElement(t,{...zq(r,t.props),ref:IO(e,t.ref)}):L.Children.count(t)>1?L.Children.only(null):null});j2.displayName="SlotClone";const DO=({children:n})=>L.createElement(L.Fragment,null,n);function uB(n){return L.isValidElement(n)&&n.type===DO}function zq(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?t[r]=(...o)=>{s==null||s(...o),i==null||i(...o)}:r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const Gq=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((n,e)=>({...n,[e]:L.forwardRef((t,r)=>{const{asChild:i,...s}=t,o=i?Zd:e;return L.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),L.createElement(o,vn({},s,{ref:r}))})}),{}),Bm=Boolean(globalThis==null?void 0:globalThis.document)?L.useLayoutEffect:()=>{},Hq=L.forwardRef((n,e)=>{var t,r;const{containerRef:i,style:s,...o}=n,a=(t=i==null?void 0:i.current)!==null&&t!==void 0?t:globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,[,l]=L.useState({});return Bm(()=>{l({})},[]),a?IL.createPortal(L.createElement(Gq.div,vn({"data-radix-portal":""},o,{ref:e,style:a===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...s}:void 0})),a):null}),Vq=Hq;var cB=Object.prototype.hasOwnProperty;function Dy(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&Dy(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(cB.call(n,t)&&++r&&!cB.call(e,t)||!(t in e)||!Dy(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}var D1=function(e,t,r,i){this.name=e,this.fn=t,this.args=r,this.modifiers=i};D1.prototype._test=function(e){var t=this.fn;try{fd(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return fd(this.modifiers.slice(),t,this)(e)}catch{return!1}};D1.prototype._check=function(e){try{fd(this.modifiers.slice(),this.fn,this)(e)}catch{if(fd(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!fd(this.modifiers.slice(),this.fn,this)(e))throw null};D1.prototype._testAsync=function(e){var t=this;return new Promise(function(r,i){FO(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function LO(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function fd(n,e,t){if(n.length){var r=n.shift(),i=fd(n,e,t);return r.perform(i,t)}else return LO(e)}function FO(n,e,t){if(n.length){var r=n.shift(),i=FO(n,e,t);return r.performAsync(i,t)}else return function(s){return Promise.resolve(LO(e,"async")(s))}}var Wq=function(e,t,r){this.name=e,this.perform=t,this.performAsync=r},PM=function(n){function e(t,r,i,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=r,this.cause=i,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),sa=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};sa.prototype._applyRule=function(e,t){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new D1(t,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};sa.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new Wq(t,e.simple,e.async)),this};sa.prototype._clone=function(){return new sa(this.chain.slice(),this.nextRuleModifiers.slice())};sa.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};sa.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){t.push(new PM(r,e,i))}}),t};sa.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(r){throw new PM(t,e,r)}})};sa.prototype.testAsync=function(e){var t=this;return new Promise(function(r,i){kO(e,t.chain.slice(),r,i)})};function kO(n,e,t,r){if(e.length){var i=e.shift();i._testAsync(n).then(function(){kO(n,e,t,r)},function(s){r(new PM(i,n,s))})}else t(n)}var fB=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function jq(n,e){return e===void 0&&(e=!1),{simple:function(t){return fB(t,e)||n.check(t)===void 0},async:function(t){return fB(t,e)||n.testAsync(t)}}}function ji(){return typeof Proxy<"u"?OO(new sa):$2(new sa)}var Im={};ji.extend=function(n){Object.assign(Im,n)};ji.clearCustomRules=function(){Im={}};function OO(n){return new Proxy(n,{get:function(t,r){if(r in t)return t[r];var i=OO(n._clone());if(r in Ly)return i._applyModifier(Ly[r],r);if(r in Im)return i._applyRule(Im[r],r);if(r in J2)return i._applyRule(J2[r],r)}})}function $2(n){var e=function(i,s){return Object.keys(i).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var u=$2(s._clone()),c=u._applyRule(i[o],o).apply(void 0,a);return c}}),s},t=e(J2,n),r=e(Im,t);return Object.keys(Ly).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=$2(r._clone());return s._applyModifier(Ly[i],i)}})}),r}var Ly={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return mv(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(mv(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&mv(e).every(n)}},async:function(n){return function(e){return Promise.all(mv(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return dB(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(r){return dB(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r:r}).catch(function(){return!1})}}}};function dB(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function mv(n){return typeof n=="string"?n.split(""):n}var J2={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||$q;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return Mf("string")},boolean:function(){return Mf("boolean")},undefined:function(){return Mf("undefined")},null:function(){return Mf("null")},array:function(){return Mf("array")},object:function(){return Mf("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return Jq(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(r){return r.test(t)})}},optional:jq};function Mf(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function $q(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function Jq(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(r){var i=n[r];try{i.check((e||{})[r])}catch(s){s.target=r,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],r=Object.keys(n).map(function(i){var s=n[i];return s.testAsync((e||{})[i]).catch(function(o){o.target=i,t.push(o)})});return Promise.all(r).then(function(){if(t.length>0)throw t;return!0})}}}var wn="colors",Mi="sizes",mt="space",Xq={gap:mt,gridGap:mt,columnGap:mt,gridColumnGap:mt,rowGap:mt,gridRowGap:mt,inset:mt,insetBlock:mt,insetBlockEnd:mt,insetBlockStart:mt,insetInline:mt,insetInlineEnd:mt,insetInlineStart:mt,margin:mt,marginTop:mt,marginRight:mt,marginBottom:mt,marginLeft:mt,marginBlock:mt,marginBlockEnd:mt,marginBlockStart:mt,marginInline:mt,marginInlineEnd:mt,marginInlineStart:mt,padding:mt,paddingTop:mt,paddingRight:mt,paddingBottom:mt,paddingLeft:mt,paddingBlock:mt,paddingBlockEnd:mt,paddingBlockStart:mt,paddingInline:mt,paddingInlineEnd:mt,paddingInlineStart:mt,top:mt,right:mt,bottom:mt,left:mt,scrollMargin:mt,scrollMarginTop:mt,scrollMarginRight:mt,scrollMarginBottom:mt,scrollMarginLeft:mt,scrollMarginX:mt,scrollMarginY:mt,scrollMarginBlock:mt,scrollMarginBlockEnd:mt,scrollMarginBlockStart:mt,scrollMarginInline:mt,scrollMarginInlineEnd:mt,scrollMarginInlineStart:mt,scrollPadding:mt,scrollPaddingTop:mt,scrollPaddingRight:mt,scrollPaddingBottom:mt,scrollPaddingLeft:mt,scrollPaddingX:mt,scrollPaddingY:mt,scrollPaddingBlock:mt,scrollPaddingBlockEnd:mt,scrollPaddingBlockStart:mt,scrollPaddingInline:mt,scrollPaddingInlineEnd:mt,scrollPaddingInlineStart:mt,fontSize:"fontSizes",background:wn,backgroundColor:wn,backgroundImage:wn,borderImage:wn,border:wn,borderBlock:wn,borderBlockEnd:wn,borderBlockStart:wn,borderBottom:wn,borderBottomColor:wn,borderColor:wn,borderInline:wn,borderInlineEnd:wn,borderInlineStart:wn,borderLeft:wn,borderLeftColor:wn,borderRight:wn,borderRightColor:wn,borderTop:wn,borderTopColor:wn,caretColor:wn,color:wn,columnRuleColor:wn,fill:wn,outline:wn,outlineColor:wn,stroke:wn,textDecorationColor:wn,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Mi,minBlockSize:Mi,maxBlockSize:Mi,inlineSize:Mi,minInlineSize:Mi,maxInlineSize:Mi,width:Mi,minWidth:Mi,maxWidth:Mi,height:Mi,minHeight:Mi,maxHeight:Mi,flexBasis:Mi,gridTemplateColumns:Mi,gridTemplateRows:Mi,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},Kq=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,qd=()=>{const n=Object.create(null);return(e,t,...r)=>{const i=(s=>JSON.stringify(s,Kq))(e);return i in n?n[i]:n[i]=t(e,...r)}},gc=Symbol.for("sxs.internal"),BM=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),hB=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:Yq}=Object.prototype,X2=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),Qq=/\s+(?![^()]*\))/,Ef=n=>e=>n(...typeof e=="string"?String(e).split(Qq):[e]),pB={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:Ef((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:Ef((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:Ef((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:Ef((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:Ef((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:Ef((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},xw=/([\d.]+)([^]*)/,Zq=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),t),[]):e,qq=(n,e)=>n in eee&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${X2(n)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${X2(n)}:${r}fit-content`)+s):String(e),eee={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Ja=n=>n?n+"-":"",UO=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?Ja(e)+(a.includes("$")?"":Ja(t))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),tee=/\s*,\s*(?![^()]*\))/,nee=Object.prototype.toString,Yf=(n,e,t,r,i)=>{let s,o,a;const l=(u,c,f)=>{let h,m;const y=g=>{for(h in g){const _=h.charCodeAt(0)===64,w=_&&Array.isArray(g[h])?g[h]:[g[h]];for(m of w){const A=/[A-Z]/.test(x=h)?x:x.replace(/-[^]/g,M=>M[1].toUpperCase()),R=typeof m=="object"&&m&&m.toString===nee&&(!r.utils[A]||!c.length);if(A in r.utils&&!R){const M=r.utils[A];if(M!==o){o=M,y(M(m)),o=null;continue}}else if(A in pB){const M=pB[A];if(M!==a){a=M,y(M(m)),a=null;continue}}if(_&&(v=h.slice(1)in r.media?"@media "+r.media[h.slice(1)]:h,h=v.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(M,P,b,C,T,I)=>{const D=xw.test(P),z=.0625*(D?-1:1),[N,J]=D?[C,P]:[P,C];return"("+(b[0]==="="?"":b[0]===">"===D?"max-":"min-")+N+":"+(b[0]!=="="&&b.length===1?J.replace(xw,(Q,re,G)=>Number(re)+z*(b===">"?1:-1)+G):J)+(T?") and ("+(T[0]===">"?"min-":"max-")+N+":"+(T.length===1?I.replace(xw,(Q,re,G)=>Number(re)+z*(T===">"?-1:1)+G):I):"")+")"})),R){const M=_?f.concat(h):[...f],P=_?[...c]:Zq(c,h.split(tee));s!==void 0&&i(mB(...s)),s=void 0,l(m,P,M)}else s===void 0&&(s=[[],c,f]),h=_||h.charCodeAt(0)!==36?h:`--${Ja(r.prefix)}${h.slice(1).replace(/\$/g,"-")}`,m=R?m:typeof m=="number"?m&&A in ree?String(m)+"px":String(m):UO(qq(A,m??""),r.prefix,r.themeMap[A]),s[0].push(`${_?`${h} `:`${X2(h)}:`}${m}`)}}var v,x};y(u),s!==void 0&&i(mB(...s)),s=void 0};l(n,e,t)},mB=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,ree={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},gB=n=>String.fromCharCode(n+(n>25?39:97)),vc=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=gB(t%52)+r;return gB(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),bp=["themed","global","styled","onevar","resonevar","allvar","inline"],iee=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},see=n=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===s)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const u in a)delete a[u]}const i=Object(n).styleSheets||[];for(const a of i)if(iee(a)){for(let l=0,u=a.cssRules;u[l];++l){const c=Object(u[l]);if(c.type!==1)continue;const f=Object(u[l+1]);if(f.type!==4)continue;++l;const{cssText:h}=c;if(!h.startsWith("--sxs"))continue;const m=h.slice(14,-3).trim().split(/\s+/),y=bp[m[0]];y&&(e||(e={sheet:a,reset:r,rules:{},toString:t}),e.rules[y]={group:f,index:l,cache:new Set(m)})}if(e)break}if(!e){const a=(l,u)=>({type:u,cssRules:[],insertRule(c,f){this.cssRules.splice(f,0,a(c,{import:3,undefined:1}[(c.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,c=>c.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:t}}const{sheet:s,rules:o}=e;for(let a=bp.length-1;a>=0;--a){const l=bp[a];if(!o[l]){const u=bp[a+1],c=o[u]?o[u].index:s.cssRules.length;s.insertRule("@media{}",c),s.insertRule(`--sxs{--sxs:${a}}`,c),o[l]={group:s.cssRules[c+1],index:c,cache:new Set([a])}}oee(o[l])}};return r(),e},oee=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},hp=Symbol(),aee=qd(),vB=(n,e)=>aee(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[gc]){r.type==null&&(r.type=i[gc].type);for(const s of i[gc].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(lee(i,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),uee(n,r,e)}),lee=({variants:n,compoundVariants:e,defaultVariants:t,...r},i)=>{const s=`${Ja(i.prefix)}c-${vc(r)}`,o=[],a=[],l=Object.create(null),u=[];for(const h in t)l[h]=String(t[h]);if(typeof n=="object"&&n)for(const h in n){c=l,f=h,Yq.call(c,f)||(l[h]="undefined");const m=n[h];for(const y in m){const g={[h]:String(y)};String(y)==="undefined"&&u.push(h);const v=m[y],x=[g,v,!hB(v)];o.push(x)}}var c,f;if(typeof e=="object"&&e)for(const h of e){let{css:m,...y}=h;m=typeof m=="object"&&m||{};for(const v in y)y[v]=String(y[v]);const g=[y,m,!hB(m)];a.push(g)}return[s,r,o,a,l,u]},uee=(n,e,t)=>{const[r,i,s,o]=cee(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function h(){for(let m=0;m<h[hp].length;m++){const[y,g]=h[hp][m];f.rules[y].apply(g)}return h[hp]=[],null}return h[hp]=[],h.rules={},bp.forEach(m=>h.rules[m]={apply:y=>h[hp].push([m,y])}),h})(t):null,l=(a||t).rules,u=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,c=f=>{f=typeof f=="object"&&f||fee;const{css:h,...m}=f,y={};for(const x in s)if(delete m[x],x in f){let _=f[x];typeof _=="object"&&_?y[x]={"@initial":s[x],..._}:(_=String(_),y[x]=_!=="undefined"||o.has(x)?_:s[x])}else y[x]=s[x];const g=new Set([...i]);for(const[x,_,w,A]of e.composers){t.rules.styled.cache.has(x)||(t.rules.styled.cache.add(x),Yf(_,[`.${x}`],[],n,P=>{l.styled.apply(P)}));const R=yB(w,y,n.media),M=yB(A,y,n.media,!0);for(const P of R)if(P!==void 0)for(const[b,C,T]of P){const I=`${x}-${vc(C)}-${b}`;g.add(I);const D=(T?t.rules.resonevar:t.rules.onevar).cache,z=T?l.resonevar:l.onevar;D.has(I)||(D.add(I),Yf(C,[`.${I}`],[],n,N=>{z.apply(N)}))}for(const P of M)if(P!==void 0)for(const[b,C]of P){const T=`${x}-${vc(C)}-${b}`;g.add(T),t.rules.allvar.cache.has(T)||(t.rules.allvar.cache.add(T),Yf(C,[`.${T}`],[],n,I=>{l.allvar.apply(I)}))}}if(typeof h=="object"&&h){const x=`${r}-i${vc(h)}-css`;g.add(x),t.rules.inline.cache.has(x)||(t.rules.inline.cache.add(x),Yf(h,[`.${x}`],[],n,_=>{l.inline.apply(_)}))}for(const x of String(f.className||"").trim().split(/\s+/))x&&g.add(x);const v=m.className=[...g].join(" ");return{type:e.type,className:v,selector:u,props:m,toString:()=>v,deferredInjector:a}};return BM(c,{className:r,selector:u,[gc]:e,toString:()=>(t.rules.styled.cache.has(r)||c(),r)})},cee=n=>{let e="";const t=[],r={},i=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),i.push(...a);for(const l in o){const u=o[l];(r[l]===void 0||u!=="undefined"||a.includes(u))&&(r[l]=u)}}return[e,t,r,new Set(i)]},yB=(n,e,t,r)=>{const i=[];e:for(let[s,o,a]of n){if(a)continue;let l,u=0,c=!1;for(l in s){const f=s[l];let h=e[l];if(h!==f){if(typeof h!="object"||!h)continue e;{let m,y,g=0;for(const v in h){if(f===String(h[v])){if(v!=="@initial"){const x=v.slice(1);(y=y||[]).push(x in t?t[x]:v.replace(/^@media ?/,"")),c=!0}u+=g,m=!0}++g}if(y&&y.length&&(o={["@media "+y.join(", ")]:o}),!m)continue e}}}(i[u]=i[u]||[]).push([r?"cv":`${l}-${s[l]}`,o,c])}return i},fee={},dee=qd(),hee=(n,e)=>dee(n,()=>(...t)=>{const r=()=>{for(let i of t){i=typeof i=="object"&&i||{};let s=vc(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}Yf(i,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return BM(r,{toString:r})}),pee=qd(),mee=(n,e)=>pee(n,()=>t=>{const r=`${Ja(n.prefix)}k-${vc(t)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];Yf(t,[],[],n,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(o)}return r};return BM(i,{get name(){return i()},toString:i})}),gee=class{constructor(n,e,t,r){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Ja(this.prefix)+Ja(this.scale)+this.token}toString(){return this.computedValue}},vee=qd(),yee=(n,e)=>vee(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const i=`.${t=(t=typeof t=="string"?t:"")||`${Ja(n.prefix)}t-${vc(r)}`}`,s={},o=[];for(const l in r){s[l]={};for(const u in r[l]){const c=`--${Ja(n.prefix)}${l}-${u}`,f=UO(String(r[l][u]),n.prefix,l);s[l][u]=new gee(u,f,l,n.prefix),o.push(`${c}:${f}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:i,toString:a}}),_ee=qd(),xee=qd(),wee=n=>{const e=(t=>{let r=!1;const i=_ee(t,s=>{r=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,u=typeof s.theme=="object"&&s.theme||{},c={prefix:o,media:a,theme:u,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...Xq},utils:typeof s.utils=="object"&&s.utils||{}},f=see(l),h={css:vB(c,f),globalCss:hee(c,f),keyframes:mee(c,f),createTheme:yee(c,f),reset(){f.reset(),h.theme.toString()},theme:{},sheet:f,config:c,prefix:o,getCssText:f.toString,toString:f.toString};return String(h.theme=h.createTheme(u)),h});return r||i.reset(),i})(n);return e.styled=(({config:t,sheet:r})=>xee(t,()=>{const i=vB(t,r);return(...s)=>{const o=i(...s),a=o[gc].type,l=le.forwardRef((u,c)=>{const f=u&&u.as||a,{props:h,deferredInjector:m}=o(u);return delete h.as,h.ref=c,m?le.createElement(le.Fragment,null,le.createElement(f,h),le.createElement(m,null)):le.createElement(f,h)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[gc]=o[gc],l}}))(e),e};const See=YN["useId".toString()]||(()=>{});let bee=0;function Aee(n){const[e,t]=L.useState(See());return Bm(()=>{n||t(r=>r??String(bee++))},[n]),n||(e?`radix-${e}`:"")}const Mee=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((n,e)=>({...n,[e]:L.forwardRef((t,r)=>{const{asChild:i,...s}=t,o=i?Zd:e;return L.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),t.as&&console.error(Eee),L.createElement(o,vn({},s,{ref:r}))})}),{}),Eee="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",Cee=L.forwardRef((n,e)=>L.createElement(Mee.span,vn({},n,{ref:e,style:{...n.style,position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}}))),Tee=Cee,NO=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((n,e)=>({...n,[e]:L.forwardRef((t,r)=>{const{asChild:i,...s}=t,o=i?Zd:e;return L.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),t.as&&console.error(Ree),L.createElement(o,vn({},s,{ref:r}))})}),{}),Ree="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",Pee=L.forwardRef((n,e)=>{var t,r;const{containerRef:i,style:s,...o}=n,a=(t=i==null?void 0:i.current)!==null&&t!==void 0?t:globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,[,l]=L.useState({});return Bm(()=>{l({})},[]),a?IL.createPortal(L.createElement(NO.div,vn({"data-radix-portal":""},o,{ref:e,style:a===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...s}:void 0})),a):null}),Bee=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((n,e)=>({...n,[e]:L.forwardRef((t,r)=>{const{asChild:i,...s}=t,o=i?Zd:e;return L.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),t.as&&console.error(Iee),L.createElement(o,vn({},s,{ref:r}))})}),{}),Iee="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",Dee=L.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return L.createElement(Bee.svg,vn({},s,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:L.createElement("polygon",{points:"0,0 30,0 15,10"}))}),Lee=Dee,zO=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((n,e)=>({...n,[e]:L.forwardRef((t,r)=>{const{asChild:i,...s}=t,o=i?Zd:e;return L.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),t.as&&console.error(Fee),L.createElement(o,vn({},s,{ref:r}))})}),{}),Fee="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element";function _B(n){const[e,t]=L.useState(void 0);return L.useEffect(()=>{if(n){const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else{const l=n.getBoundingClientRect();o=l.width,a=l.height}t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>{t(void 0),r.unobserve(n)}}},[n]),e}function kee(n,e){const t=Xu.get(n);return t===void 0?(Xu.set(n,{rect:{},callbacks:[e]}),Xu.size===1&&(K2=requestAnimationFrame(GO))):(t.callbacks.push(e),e(n.getBoundingClientRect())),()=>{const r=Xu.get(n);if(r===void 0)return;const i=r.callbacks.indexOf(e);i>-1&&r.callbacks.splice(i,1),r.callbacks.length===0&&(Xu.delete(n),Xu.size===0&&cancelAnimationFrame(K2))}}let K2;const Xu=new Map;function GO(){const n=[];Xu.forEach((e,t)=>{const r=t.getBoundingClientRect();var i,s;i=e.rect,s=r,(i.width!==s.width||i.height!==s.height||i.top!==s.top||i.right!==s.right||i.bottom!==s.bottom||i.left!==s.left)&&(e.rect=r,n.push(e))}),n.forEach(e=>{e.callbacks.forEach(t=>t(e.rect))}),K2=requestAnimationFrame(GO)}function HO(n){const[e,t]=L.useState();return L.useEffect(()=>{if(n){const r=kee(n,t);return()=>{t(void 0),r()}}},[n]),e}function VO(n,e=[]){let t=[];const r=()=>{const i=t.map(s=>L.createContext(s));return function(s){const o=(s==null?void 0:s[n])||i;return L.useMemo(()=>({[`__scope${n}`]:{...s,[n]:o}}),[s,o])}};return r.scopeName=n,[function(i,s){const o=L.createContext(s),a=t.length;function l(u){const{scope:c,children:f,...h}=u,m=(c==null?void 0:c[n][a])||o,y=L.useMemo(()=>h,Object.values(h));return L.createElement(m.Provider,{value:y},f)}return t=[...t,s],l.displayName=i+"Provider",[l,function(u,c){const f=(c==null?void 0:c[n][a])||o,h=L.useContext(f);if(h)return h;if(s!==void 0)return s;throw new Error(`\`${u}\` must be used within \`${i}\``)}]},Oee(r,...e)]}function Oee(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(i){const s=r.reduce((o,{useScope:a,scopeName:l})=>({...o,...a(i)[`__scope${l}`]}),{});return L.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return t.scopeName=e.scopeName,t}function Uee({anchorRect:n,popperSize:e,arrowSize:t,arrowOffset:r=0,side:i,sideOffset:s=0,align:o,alignOffset:a=0,shouldAvoidCollisions:l=!0,collisionBoundariesRect:u,collisionTolerance:c=0}){if(!n||!e||!u)return{popperStyles:Nee,arrowStyles:ww};const f=function(P,b,C=0,T=0,I){const D=I?I.height:0,z=xB(b,P,"x"),N=xB(b,P,"y"),J=N.before-C-D,Q=N.after+C+D,re=z.before-C-D,G=z.after+C+D;return{top:{start:{x:z.start+T,y:J},center:{x:z.center,y:J},end:{x:z.end-T,y:J}},right:{start:{x:G,y:N.start+T},center:{x:G,y:N.center},end:{x:G,y:N.end-T}},bottom:{start:{x:z.start+T,y:Q},center:{x:z.center,y:Q},end:{x:z.end-T,y:Q}},left:{start:{x:re,y:N.start+T},center:{x:re,y:N.center},end:{x:re,y:N.end-T}}}}(e,n,s,a,t),h=f[i][o];if(l===!1){const P=wB(h);let b=ww;return t&&(b=bB({popperSize:e,arrowSize:t,arrowOffset:r,side:i,align:o})),{popperStyles:{...P,"--radix-popper-transform-origin":SB(e,i,o,r,t)},arrowStyles:b,placedSide:i,placedAlign:o}}const m=DOMRect.fromRect({...e,...h}),y=(g=u,v=c,DOMRect.fromRect({width:g.width-2*v,height:g.height-2*v,x:g.left+v,y:g.top+v}));var g,v;const x=MB(m,y),_=f[AB(i)][o],w=function(P,b,C){const T=AB(P);return b[P]&&!C[T]?T:P}(i,x,MB(DOMRect.fromRect({...e,..._}),y)),A=function(P,b,C,T,I){const D=C==="top"||C==="bottom",z=D?"left":"top",N=D?"right":"bottom",J=D?"width":"height",Q=b[J]>P[J];return(T==="start"||T==="center")&&(I[z]&&Q||I[N]&&!Q)?"end":(T==="end"||T==="center")&&(I[N]&&Q||I[z]&&!Q)?"start":T}(e,n,i,o,x),R=wB(f[w][A]);let M=ww;return t&&(M=bB({popperSize:e,arrowSize:t,arrowOffset:r,side:w,align:A})),{popperStyles:{...R,"--radix-popper-transform-origin":SB(e,w,A,r,t)},arrowStyles:M,placedSide:w,placedAlign:A}}function xB(n,e,t){const r=n[t==="x"?"left":"top"],i=t==="x"?"width":"height",s=n[i],o=e[i];return{before:r-o,start:r,center:r+(s-o)/2,end:r+s-o,after:r+s}}function wB(n){return{position:"absolute",top:0,left:0,minWidth:"max-content",willChange:"transform",transform:`translate3d(${Math.round(n.x+window.scrollX)}px, ${Math.round(n.y+window.scrollY)}px, 0)`}}function SB(n,e,t,r,i){const s=e==="top"||e==="bottom",o=i?i.width:0,a=i?i.height:0,l=o/2+r;let u="",c="";return s?(u={start:`${l}px`,center:"center",end:n.width-l+"px"}[t],c=e==="top"?`${n.height+a}px`:-a+"px"):(u=e==="left"?`${n.width+a}px`:-a+"px",c={start:`${l}px`,center:"center",end:n.height-l+"px"}[t]),`${u} ${c}`}const Nee={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)"},ww={position:"absolute",opacity:0};function bB({popperSize:n,arrowSize:e,arrowOffset:t,side:r,align:i}){const s=(n.width-e.width)/2,o=(n.height-e.width)/2,a={top:0,right:90,bottom:180,left:-90}[r],l=Math.max(e.width,e.height),u={width:`${l}px`,height:`${l}px`,transform:`rotate(${a}deg)`,willChange:"transform",position:"absolute",[r]:"100%",direction:zee(r,i)};return r!=="top"&&r!=="bottom"||(i==="start"&&(u.left=`${t}px`),i==="center"&&(u.left=`${s}px`),i==="end"&&(u.right=`${t}px`)),r!=="left"&&r!=="right"||(i==="start"&&(u.top=`${t}px`),i==="center"&&(u.top=`${o}px`),i==="end"&&(u.bottom=`${t}px`)),u}function zee(n,e){return(n!=="top"&&n!=="right"||e!=="end")&&(n!=="bottom"&&n!=="left"||e==="end")?"ltr":"rtl"}function AB(n){return{top:"bottom",right:"left",bottom:"top",left:"right"}[n]}function MB(n,e){return{top:n.top<e.top,right:n.right>e.right,bottom:n.bottom>e.bottom,left:n.left<e.left}}const[WO,jO]=VO("Popper"),[Gee,$O]=WO("Popper"),Hee=n=>{const{__scopePopper:e,children:t}=n,[r,i]=L.useState(null);return L.createElement(Gee,{scope:e,anchor:r,onAnchorChange:i},t)},Vee=L.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=$O("PopperAnchor",t),o=L.useRef(null),a=I1(e,o);return L.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:L.createElement(zO.div,vn({},i,{ref:a}))}),[Wee,jee]=WO("PopperContent"),$ee=L.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:i,align:s="center",alignOffset:o,collisionTolerance:a,avoidCollisions:l=!0,...u}=n,c=$O("PopperContent",t),[f,h]=L.useState(),m=HO(c.anchor),[y,g]=L.useState(null),v=_B(y),[x,_]=L.useState(null),w=_B(x),A=I1(e,D=>g(D)),R=function(){const[D,z]=L.useState(void 0);return L.useEffect(()=>{let N;function J(){z({width:window.innerWidth,height:window.innerHeight})}function Q(){window.clearTimeout(N),N=window.setTimeout(J,100)}return J(),window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]),D}(),M=R?DOMRect.fromRect({...R,x:0,y:0}):void 0,{popperStyles:P,arrowStyles:b,placedSide:C,placedAlign:T}=Uee({anchorRect:m,popperSize:v,arrowSize:w,arrowOffset:f,side:r,sideOffset:i,align:s,alignOffset:o,shouldAvoidCollisions:l,collisionBoundariesRect:M,collisionTolerance:a}),I=C!==void 0;return L.createElement("div",{style:P,"data-radix-popper-content-wrapper":""},L.createElement(Wee,{scope:t,arrowStyles:b,onArrowChange:_,onArrowOffsetChange:h},L.createElement(zO.div,vn({"data-side":C,"data-align":T},u,{style:{...u.style,animation:I?void 0:"none"},ref:A}))))}),Jee=L.forwardRef(function(n,e){const{__scopePopper:t,offset:r,...i}=n,s=jee("PopperArrow",t),{onArrowOffsetChange:o}=s;return L.useEffect(()=>o(r),[o,r]),L.createElement("span",{style:{...s.arrowStyles,pointerEvents:"none"}},L.createElement("span",{ref:s.onArrowChange,style:{display:"inline-block",verticalAlign:"top",pointerEvents:"auto"}},L.createElement(Lee,vn({},i,{ref:e,style:{...i.style,display:"block"}}))))}),Xee=Hee,Kee=Vee,Yee=$ee,Qee=Jee,JO=n=>{const{present:e,children:t}=n,r=function(o){const[a,l]=L.useState(),u=L.useRef({}),c=L.useRef(o),f=L.useRef("none"),h=o?"mounted":"unmounted",[m,y]=function(g,v){return L.useReducer((x,_)=>{const w=v[x][_];return w??x},g)}(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L.useEffect(()=>{const g=gv(u.current);f.current=m==="mounted"?g:"none"},[m]),Bm(()=>{const g=u.current,v=c.current;if(v!==o){const x=f.current,_=gv(g);o?y("MOUNT"):_==="none"||(g==null?void 0:g.display)==="none"?y("UNMOUNT"):y(v&&x!==_?"ANIMATION_OUT":"UNMOUNT"),c.current=o}},[o,y]),Bm(()=>{if(a){const g=x=>{const _=gv(u.current).includes(x.animationName);x.target===a&&_&&y("ANIMATION_END")},v=x=>{x.target===a&&(f.current=gv(u.current))};return a.addEventListener("animationstart",v),a.addEventListener("animationcancel",g),a.addEventListener("animationend",g),()=>{a.removeEventListener("animationstart",v),a.removeEventListener("animationcancel",g),a.removeEventListener("animationend",g)}}},[a,y]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:L.useCallback(g=>{g&&(u.current=getComputedStyle(g)),l(g)},[])}}(e),i=typeof t=="function"?t({present:r.isPresent}):L.Children.only(t),s=I1(r.ref,i.ref);return typeof t=="function"||r.isPresent?L.cloneElement(i,{ref:s}):null};function gv(n){return(n==null?void 0:n.animationName)||"none"}JO.displayName="Presence";function EB(n){const e=L.useRef(n);return L.useEffect(()=>{e.current=n},[n]),e.current}function Y2(n){const e=L.useRef(n);return L.useEffect(()=>{e.current=n}),L.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function Zee(n){const e=Y2(n);L.useEffect(()=>{const t=r=>{r.key==="Escape"&&e(r)};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e])}function qee({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=function({defaultProp:l,onChange:u}){const c=L.useState(l),[f]=c,h=L.useRef(f),m=Y2(u);return L.useEffect(()=>{h.current!==f&&(m(f),h.current=f)},[f,h,m]),c}({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=Y2(t);return[o,L.useCallback(l=>{if(s){const u=l,c=typeof l=="function"?u(n):l;c!==n&&a(c)}else i(l)},[s,n,i,a])]}function Cf(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}const[XO,Doe]=VO("Tooltip",[jO]),L1=jO(),ete=700,[Loe,tte]=XO("TooltipProvider",{isOpenDelayed:!0,delayDuration:ete,onOpen:()=>{},onClose:()=>{}}),[nte,F1]=XO("Tooltip"),rte=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:s,delayDuration:o}=n,a=tte("Tooltip",e),l=L1(e),[u,c]=L.useState(null),f=Aee(),h=L.useRef(0),m=o??a.delayDuration,y=L.useRef(!1),{onOpen:g,onClose:v}=a,[x=!1,_]=qee({prop:r,defaultProp:i,onChange:M=>{M&&(document.dispatchEvent(new CustomEvent("tooltip.open")),g()),s==null||s(M)}}),w=L.useMemo(()=>x?y.current?"delayed-open":"instant-open":"closed",[x]),A=L.useCallback(()=>{window.clearTimeout(h.current),y.current=!1,_(!0)},[_]),R=L.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{y.current=!0,_(!0)},m)},[m,_]);return L.useEffect(()=>()=>window.clearTimeout(h.current),[]),L.createElement(Xee,l,L.createElement(nte,{scope:e,contentId:f,open:x,stateAttribute:w,trigger:u,onTriggerChange:c,onTriggerEnter:L.useCallback(()=>{a.isOpenDelayed?R():A()},[a.isOpenDelayed,R,A]),onOpen:L.useCallback(A,[A]),onClose:L.useCallback(()=>{window.clearTimeout(h.current),_(!1),v()},[_,v])},t))},ite=L.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=F1("TooltipTrigger",t),s=L1(t),o=I1(e,i.onTriggerChange),a=L.useRef(!1),l=L.useCallback(()=>a.current=!1,[]);return L.useEffect(()=>()=>document.removeEventListener("mouseup",l),[l]),L.createElement(Kee,vn({asChild:!0},s),L.createElement(NO.button,vn({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:o,onMouseEnter:Cf(n.onMouseEnter,i.onTriggerEnter),onMouseLeave:Cf(n.onMouseLeave,i.onClose),onMouseDown:Cf(n.onMouseDown,()=>{i.onClose(),a.current=!0,document.addEventListener("mouseup",l,{once:!0})}),onFocus:Cf(n.onFocus,()=>{a.current||i.onOpen()}),onBlur:Cf(n.onBlur,i.onClose),onClick:Cf(n.onClick,i.onClose)})))}),ste=L.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=F1("TooltipContent",n.__scopeTooltip);return L.createElement(JO,{present:t||i.open},L.createElement(ote,vn({ref:e},r)))}),ote=L.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,portalled:s=!0,...o}=n,a=F1("TooltipContent",t),l=L1(t),u=s?Pee:L.Fragment,{onClose:c}=a;return Zee(()=>c()),L.useEffect(()=>(document.addEventListener("tooltip.open",c),()=>document.removeEventListener("tooltip.open",c)),[c]),L.createElement(u,null,L.createElement(lte,{__scopeTooltip:t}),L.createElement(Yee,vn({"data-state":a.stateAttribute},l,o,{ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)"}}),L.createElement(DO,null,r),L.createElement(Tee,{id:a.contentId,role:"tooltip"},i||r)))}),ate=L.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=L1(t);return L.createElement(Qee,vn({},i,r,{ref:e}))});function lte(n){const{__scopeTooltip:e}=n,t=F1("CheckTriggerMoved",e),r=HO(t.trigger),i=r==null?void 0:r.left,s=EB(i),o=r==null?void 0:r.top,a=EB(o),l=t.onClose;return L.useEffect(()=>{(s!==void 0&&s!==i||a!==void 0&&a!==o)&&l()},[l,s,a,i,o]),null}const ute=rte,cte=ite,fte=ste,dte=ate;function hte(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Bn(n,e){if(n==null)return{};var t=hte(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}let Wn;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(Wn||(Wn={}));const pte={[Wn.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[Wn.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Wn.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[Wn.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Wn.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[Wn.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[Wn.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[Wn.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[Wn.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[Wn.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Wn.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function KO(n,e,...t){const[r,...i]=pte[e](...t);console[n]("LEVA: "+r,...i)}const Ba=KO.bind(null,"warn"),mte=KO.bind(null,"log"),gte=["value"],vte=["schema"],yte=["value"],YO=[],Tc={};function CB(n){let{value:e}=n,t=Bn(n,gte);for(let r of YO){const i=r(e,t);if(i)return i}}function el(n,e){let{schema:t}=e,r=Bn(e,vte);if(n in Tc){Ba(Wn.ALREADY_REGISTERED_TYPE,n);return}YO.push((i,s)=>t(i,s)&&n),Tc[n]=r}function Sw(n,e,t,r){const{normalize:i}=Tc[n];if(i)return i(e,t,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=Bn(e,yte);return{value:s,settings:o}}function _te(n,e,t,r,i,s){const{sanitize:o}=Tc[n];return o?o(e,t,r,i,s):e}function TB(n,e,t){const{format:r}=Tc[n];return r?r(e,t):e}function xte(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ut(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?RB(Object(t),!0).forEach(function(r){xte(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):RB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const lu=(n,e,t)=>n>t?t:n<e?e:n,wte=n=>{if(n===""||typeof n=="number")return n;try{const e=Al(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},Ste=Math.log(10);function PB(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/Ste)+1,r=Math.floor(Math.log10(Math.abs(n))),i=Math.pow(10,r-t);return Math.max(i,.001)}const Fy=(n,e,t)=>t===e?0:(lu(n,e,t)-e)/(t-e),ky=(n,e,t)=>n*(t-e)+e,bte=()=>"_"+Math.random().toString(36).substr(2,9),BB=/\(([0-9+\-*/^ .]+)\)/,IB=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,DB=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,LB=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,FB=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,kB=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Al(n){if(isNaN(Number(n)))if(BB.test(n)){const e=n.replace(BB,(t,r)=>String(Al(r)));return Al(e)}else if(IB.test(n)){const e=n.replace(IB,(t,r,i)=>String(Math.pow(Number(r),Number(i))));return Al(e)}else if(DB.test(n)){const e=n.replace(DB,(t,r,i)=>String(Number(r)*Number(i)));return Al(e)}else if(LB.test(n)){const e=n.replace(LB,(t,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return Al(e)}else if(FB.test(n)){const e=n.replace(FB,(t,r,i)=>String(Number(r)+Number(i)));return Al(e)}else if(kB.test(n)){const e=n.replace(kB,(t,r,i)=>String(Number(r)-Number(i)));return Al(e)}else return Number(n);return Number(n)}function Ate(n,e){const t=Ut({},n);return e.forEach(r=>r in n&&delete t[r]),t}function Mte(n,e){return n.reduce((t,r,i)=>Object.assign(t,{[e[i]]:r}),{})}function QO(n){return Object.prototype.toString.call(n)==="[object Object]"}const Ete=n=>QO(n)&&Object.keys(n).length===0;let ra;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(ra||(ra={}));let Bo;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(Bo||(Bo={}));const Cte=["type","__customInput"],Tte=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],Rte=["type"];function ZO(n,e,t={},r){var i,s;if(typeof n!="object"||Array.isArray(n))return{type:r,input:n,options:Ut({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:R,__customInput:M}=n,P=Bn(n,Cte);return ZO(M,e,P,R)}const{render:o,label:a,optional:l,order:u=0,disabled:c,hint:f,onChange:h,onEditStart:m,onEditEnd:y,transient:g}=n,v=Bn(n,Tte),x=Ut({render:o,key:e,label:a??e,hint:f,transient:g??!!h,onEditStart:m,onEditEnd:y,disabled:c,optional:l,order:u},t);let{type:_}=v,w=Bn(v,Rte);if(_=r??_,_ in ra)return{type:_,input:w,options:x};let A;return r&&QO(w)&&"value"in w?A=w.value:A=Ete(w)?void 0:w,{type:_,input:A,options:Ut(Ut({},x),{},{onChange:h,optional:(i=x.optional)!==null&&i!==void 0?i:!1,disabled:(s=x.disabled)!==null&&s!==void 0?s:!1})}}function Pte(n,e,t,r){const i=ZO(n,e),{type:s,input:o,options:a}=i;if(s)return s in ra?i:{type:s,input:Sw(s,o,t,r),options:a};let l=CB(o);return l?{type:l,input:Sw(l,o,t,r),options:a}:(l=CB({value:o}),l?{type:l,input:Sw(l,{value:o},t,r),options:a}:!1)}function OB(n,e,t,r,i){const{value:s,type:o,settings:a}=n;n.value=qO({type:o,value:s,settings:a},e,t,r),n.fromPanel=i}const Bte=function(e,t,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=r};function qO({type:n,value:e,settings:t},r,i,s){const o=n!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=_te(n,o,t,e,i,s)}catch(l){throw new Bte(`The value \`${r}\` did not result in a correct value.`,e,l)}return Dy(a,e)?e:a}const eU=(n,e,t=!1)=>{let r=0;return function(){const i=arguments,s=t&&!r,o=()=>n.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,e),s&&o()}},tU=n=>n.shiftKey?5:n.altKey?1/5:1,Ite=["value"],Dte=["min","max"],Lte=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},nU=(n,{min:e=-1/0,max:t=1/0,suffix:r})=>{const i=parseFloat(n);if(n===""||isNaN(i))throw Error("Invalid number");const s=lu(i,e,t);return r?s+r:s},Fte=(n,{pad:e=0,suffix:t})=>{const r=parseFloat(n).toFixed(e);return t?r+t:r},rU=n=>{let{value:e}=n,t=Bn(n,Ite);const{min:r=-1/0,max:i=1/0}=t,s=Bn(t,Dte);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=lu(o,r,i);let l=t.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const u=l?PB(l)*10:PB(o);l=l||u/10;const c=Math.round(lu(Math.log10(1/u),0,2));return{value:a?o+a:o,settings:Ut({initialValue:o,step:l,pad:c,min:r,max:i,suffix:a},s)}},iU=(n,{step:e,initialValue:t})=>{const r=Math.round((n-t)/e);return t+r*e};var sU=Object.freeze({__proto__:null,schema:Lte,sanitize:nU,format:Fte,normalize:rU,sanitizeStep:iU});function Sr(){return Sr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Sr.apply(this,arguments)}const oU=L.createContext({});function _i(){return L.useContext(oU)}const aU=L.createContext(null),lU=L.createContext(null),uU=L.createContext(null);function ag(){return L.useContext(lU)}function kte(){return L.useContext(uU)}const Ote=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function vv(n,e){const[t,r]=n.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),r&&(i.backgroundColor=r),i}const pp={$inputStyle:()=>n=>vv(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>vv(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>vv(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>vv(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:Ct,css:Foe,createTheme:koe,globalCss:Ute,keyframes:Ooe}=wee({prefix:"leva",theme:Ote(),utils:Ut(Ut({},pp),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":pp.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":pp.$focusStyle()(n)}),$hover:n=>({"&:hover":pp.$hoverStyle()(n)}),$active:n=>({"&:active":pp.$activeStyle()(n)})})}),Nte=Ute({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function Oa(n,e){const{theme:t}=L.useContext(aU);if(!(n in t)||!(e in t[n]))return Ba(Wn.THEME_ERROR,n,e),"";let r=e;for(;;){let i=t[n][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const cU=Ct("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),fU=Ct("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${cU}`]:{paddingLeft:0}}),zte=Ct(fU,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),Gte=Ct("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),Hte=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],Vte=["onUpdate"];function IM(n){let{innerLabel:e,value:t,onUpdate:r,onChange:i,onKeyDown:s,type:o,id:a,inputType:l="text",rows:u=0}=n,c=Bn(n,Hte);const{id:f,emitOnEditStart:h,emitOnEditEnd:m,disabled:y}=_i(),g=a||f,v=L.useRef(null),x=u>0,_=x?"textarea":"input",w=L.useCallback(M=>P=>{const b=P.currentTarget.value;M(b)},[]);le.useEffect(()=>{const M=v.current,P=w(b=>{r(b),m()});return M==null||M.addEventListener("blur",P),()=>M==null?void 0:M.removeEventListener("blur",P)},[w,r,m]);const A=L.useCallback(M=>{M.key==="Enter"&&w(r)(M)},[w,r]),R=Object.assign({as:_},x?{rows:u}:{},c);return le.createElement(Gte,{textArea:x},e&&typeof e=="string"?le.createElement(fU,null,e):e,le.createElement(cU,Sr({levaType:o,ref:v,id:g,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:w(i),onFocus:()=>h(),onKeyPress:A,onKeyDown:s,disabled:y},R)))}function Wte(n){let{onUpdate:e}=n,t=Bn(n,Vte);const r=L.useCallback(s=>e(wte(s)),[e]),i=L.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return le.createElement(IM,Sr({},t,{onUpdate:r,onKeyDown:i,type:"number"}))}const Oy=Ct("div",{}),Q2=Ct("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),jte=Ct("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${Q2}::after`]:{opacity:.6},[`${Oy}:hover > & + ${Q2}::after`]:{opacity:.6},[`${Oy}:hover > & > svg`]:{opacity:1}}),dU=Ct("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${Oy}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),hU=Ct("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${dU} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),pU=Ct(hU,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),$te=Ct("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),Jte=Ct("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),Z2=Ct("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),Xte=Ct("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${Z2}`]:{pointerEvents:"auto"}}}}}),mU=Ct("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),Kte=Ct("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),Yte=Ct(dte,{fill:"$toolTipBackground"});function DM({children:n}){const{className:e}=L.useContext(aU);return le.createElement(Vq,{className:e},n)}const Qte=["align"];function Zte(){const{id:n,disable:e,disabled:t}=_i();return le.createElement(le.Fragment,null,le.createElement(Jte,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),le.createElement("label",{htmlFor:n+"__disable"}))}function qte(n){const{id:e,optional:t,hint:r}=_i(),i=n.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof n.children=="string"?{title:n.children}:null;return le.createElement(le.Fragment,null,t&&le.createElement(Zte,null),r!==void 0?le.createElement(ute,null,le.createElement(cte,{asChild:!0},le.createElement(Z2,Sr({},i,n))),le.createElement(fte,{side:"top",sideOffset:2},le.createElement(Kte,null,r,le.createElement(Yte,null)))):le.createElement(Z2,Sr({},i,s,n)))}function ko(n){let{align:e}=n,t=Bn(n,Qte);const{value:r,label:i,key:s,disabled:o}=_i(),{hideCopyButton:a}=kte(),l=!a&&s!==void 0,[u,c]=L.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),c(!0)}catch{Ba(Wn.CLIPBOARD_ERROR,{[s]:r})}};return le.createElement($te,{align:e,onPointerLeave:()=>c(!1)},le.createElement(qte,t),l&&!o&&le.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},u?le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},le.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),le.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):le.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},le.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),le.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const ene=["toggled"],tne=Ct("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function LM(n){let{toggled:e}=n,t=Bn(n,ene);return le.createElement(tne,Sr({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),le.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const nne=["input"];function oo(n){let{input:e}=n,t=Bn(n,nne);return e?le.createElement(pU,t):le.createElement(hU,t)}function gU({value:n,type:e,settings:t,setValue:r}){const[i,s]=L.useState(TB(e,n,t)),o=L.useRef(n),a=L.useRef(t);a.current=t;const l=L.useCallback(c=>s(TB(e,c,a.current)),[e]),u=L.useCallback(c=>{try{r(c)}catch(f){const{type:h,previousValue:m}=f;if(h!=="LEVA_ERROR")throw f;l(m)}},[l,r]);return L.useEffect(()=>{Dy(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:i,onChange:s,onUpdate:u}}function lg(n,e){const{emitOnEditStart:t,emitOnEditEnd:r}=_i();return CJ(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function rne(n){const e=L.useRef(null),t=L.useRef(null),r=L.useRef(!1);return L.useEffect(()=>{const i=eU(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[n]),L.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function vU(){const n=L.useRef(null),e=L.useRef({x:0,y:0}),t=L.useCallback(r=>{Object.assign(e.current,r),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const ine=["__refCount"],bw=(n,e)=>{if(!n[e])return null;const t=n[e];return Bn(t,ine)};function sne(n){const e=ag(),[t,r]=L.useState(bw(e.getData(),n)),i=L.useCallback(u=>e.setValueAtPath(n,u,!0),[n,e]),s=L.useCallback(u=>e.setSettingsAtPath(n,u),[n,e]),o=L.useCallback(u=>e.disableInputAtPath(n,u),[n,e]),a=L.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=L.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return L.useEffect(()=>{r(bw(e.getData(),n));const u=e.useStore.subscribe(c=>bw(c.data,n),r,{equalityFn:tk});return()=>u()},[e,n]),[t,{set:i,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const one=Ct("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),yU=Ct("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),q2=Ct("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),_U=Ct("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),xU=Ct("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function ane({value:n,min:e,max:t,onDrag:r,step:i,initialValue:s}){const o=L.useRef(null),a=L.useRef(null),l=L.useRef(0),u=Oa("sizes","scrubberWidth"),c=lg(({event:h,first:m,xy:[y],movement:[g],memo:v})=>{if(m){const{width:_,left:w}=o.current.getBoundingClientRect();l.current=_-parseFloat(u),v=(h==null?void 0:h.target)===a.current?n:ky((y-w)/_,e,t)}const x=v+ky(g/l.current,0,t-e);return r(iU(x,{step:i,initialValue:s})),v}),f=Fy(n,e,t);return le.createElement(_U,Sr({ref:o},c()),le.createElement(yU,null,le.createElement(xU,{style:{left:0,right:`${(1-f)*100}%`}})),le.createElement(q2,{ref:a,style:{left:`calc(${f} * (100% - ${u}))`}}))}const lne=le.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:r})=>{const[i,s]=L.useState(!1),o=lg(({active:a,delta:[l],event:u,memo:c=0})=>(s(a),c+=l/2,Math.abs(c)>=1&&(e(f=>parseFloat(f)+Math.floor(c)*t*tU(u)),c=0),c));return le.createElement(zte,Sr({dragging:i,title:n.length>1?n:""},o()),n.slice(0,r))});function wU({label:n,id:e,displayValue:t,onUpdate:r,onChange:i,settings:s,innerLabelTrim:o=1}){const a=o>0&&le.createElement(lne,{label:n,step:s.step,onUpdate:r,innerLabelTrim:o});return le.createElement(Wte,{id:e,value:String(t),onUpdate:r,onChange:i,innerLabel:a})}function une(){const n=_i(),{label:e,value:t,onUpdate:r,settings:i,id:s}=n,{min:o,max:a}=i,l=a!==1/0&&o!==-1/0;return le.createElement(oo,{input:!0},le.createElement(ko,null,e),le.createElement(one,{hasRange:l},l&&le.createElement(ane,Sr({value:parseFloat(t),onDrag:r},i)),le.createElement(wU,Sr({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:cne}=sU,fne=Bn(sU,["sanitizeStep"]);var dne=Ut({component:une},fne);const hne=(n,e)=>ji().schema({options:ji().passesAnyOf(ji().object(),ji().array())}).test(e),pne=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},mne=(n,{values:e})=>e.indexOf(n),gne=n=>{let{value:e,options:t}=n,r,i;return Array.isArray(t)?(i=t,r=t.map(s=>String(s))):(i=Object.values(t),r=Object.keys(t)),"value"in n?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var vne=Object.freeze({__proto__:null,schema:hne,sanitize:pne,format:mne,normalize:gne});const yne=Ct("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),eb=Ct("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),_ne=Ct("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${eb}:focus + &`]:{$focusStyle:""},[`${eb}:hover + &`]:{$hoverStyle:""}});function xne({displayValue:n,value:e,onUpdate:t,id:r,settings:i,disabled:s}){const{keys:o,values:a}=i,l=L.useRef();return e===a[n]&&(l.current=o[n]),le.createElement(yne,null,le.createElement(eb,{id:r,value:n,onChange:u=>t(a[Number(u.currentTarget.value)]),disabled:s},o.map((u,c)=>le.createElement("option",{key:u,value:c},u))),le.createElement(_ne,null,l.current),le.createElement(LM,{toggled:!0}))}function wne(){const{label:n,value:e,displayValue:t,onUpdate:r,id:i,disabled:s,settings:o}=_i();return le.createElement(oo,{input:!0},le.createElement(ko,null,n),le.createElement(xne,{id:i,value:e,displayValue:t,onUpdate:r,settings:o,disabled:s}))}var Sne=Ut({component:wne},vne);const bne=n=>ji().string().test(n),Ane=n=>{if(typeof n!="string")throw Error("Invalid string");return n},Mne=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var Ene=Object.freeze({__proto__:null,schema:bne,sanitize:Ane,normalize:Mne});const Cne=["displayValue","onUpdate","onChange","editable"],Tne=Ct("div",{whiteSpace:"pre-wrap"});function Rne(n){let{displayValue:e,onUpdate:t,onChange:r,editable:i=!0}=n,s=Bn(n,Cne);return i?le.createElement(IM,Sr({value:e,onUpdate:t,onChange:r},s)):le.createElement(Tne,null,e)}function Pne(){const{label:n,settings:e,displayValue:t,onUpdate:r,onChange:i}=_i();return le.createElement(oo,{input:!0},le.createElement(ko,null,n),le.createElement(Rne,Sr({displayValue:t,onUpdate:r,onChange:i},e)))}var Bne=Ut({component:Pne},Ene);const Ine=n=>ji().boolean().test(n),Dne=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var Lne=Object.freeze({__proto__:null,schema:Ine,sanitize:Dne});const Fne=Ct("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function kne({value:n,onUpdate:e,id:t,disabled:r}){return le.createElement(Fne,null,le.createElement("input",{id:t,type:"checkbox",checked:n,onChange:i=>e(i.currentTarget.checked),disabled:r}),le.createElement("label",{htmlFor:t},le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},le.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function One(){const{label:n,value:e,onUpdate:t,disabled:r,id:i}=_i();return le.createElement(oo,{input:!0},le.createElement(ko,null,n),le.createElement(kne,{value:e,onUpdate:t,id:i,disabled:r}))}var Une=Ut({component:One},Lne);const Nne=["locked"];function zne({value:n,id:e,valueKey:t,settings:r,onUpdate:i,innerLabelTrim:s}){const o=L.useRef(n[t]);o.current=n[t];const a=L.useCallback(u=>i({[t]:qO({type:"NUMBER",value:o.current,settings:r},u)}),[i,r,t]),l=gU({type:"NUMBER",value:n[t],settings:r,setValue:a});return le.createElement(wU,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const Gne=Ct("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function Hne(n){let{locked:e}=n,t=Bn(n,Nne);return le.createElement("svg",Sr({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?le.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):le.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function FM({value:n,onUpdate:e,settings:t,innerLabelTrim:r}){const{id:i,setSettings:s}=_i(),{lock:o,locked:a}=t;return le.createElement(Gne,{withLock:o},o&&le.createElement(Hne,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,u)=>le.createElement(zne,{id:u===0?i:`${i}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:r})))}const SU=(n,e)=>{const t={};let r=0,i=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=rU(Ut({value:o},e[s])).settings,r=Math.max(r,t[s].step),i=Math.min(i,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=r,t[s].pad=i)}return t},Vne=["lock"],Wne=["value"];function jne(n){const e=ji().array().length(n).every.number(),t=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===n&&i.every(s=>isFinite(s))};return r=>e.test(r)||t(r)}function $ne(n){return Array.isArray(n)?"array":"object"}function jp(n,e,t){return $ne(n)===e?n:e==="array"?Object.values(n):Mte(n,t)}const Jne=(n,e,t)=>{const r=jp(n,"object",e.keys);for(let o in r)r[o]=nU(r[o],e[o]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const o=jp(t,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],u=o[a],c=u!==0?l/u:1;for(let f in o)f===a?s[a]=l:s[f]=o[f]*c}else s=Ut(Ut({},o),r)}return jp(s,e.format,e.keys)},Xne=(n,e)=>jp(n,"object",e.keys),Kne=n=>!!n&&("step"in n||"min"in n||"max"in n);function Yne(n,e,t=[]){const{lock:r=!1}=e,i=Bn(e,Vne),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=jp(n,"object",o),l=Kne(i)?o.reduce((c,f)=>Object.assign(c,{[f]:i}),{}):i,u=SU(a,l);return{value:s==="array"?n:a,settings:Ut(Ut({},u),{},{format:s,keys:o,lock:r,locked:!1})}}function bU(n){return{schema:jne(n.length),normalize:e=>{let{value:t}=e,r=Bn(e,Wne);return Yne(t,r,n)},format:(e,t)=>Xne(e,t),sanitize:(e,t,r)=>Jne(e,t,r)}}var Qne={grad:.9,turn:360,rad:360/(2*Math.PI)},Aa=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},zr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Ys=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},AU=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},UB=function(n){return{r:Ys(n.r,0,255),g:Ys(n.g,0,255),b:Ys(n.b,0,255),a:Ys(n.a)}},Aw=function(n){return{r:zr(n.r),g:zr(n.g),b:zr(n.b),a:zr(n.a,3)}},Zne=/^#([0-9a-f]{3,8})$/i,yv=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},MU=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},EU=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),u=s%6;return{r:255*[r,a,o,o,l,r][u],g:255*[l,r,r,a,o,o][u],b:255*[o,o,l,r,r,a][u],a:i}},NB=function(n){return{h:AU(n.h),s:Ys(n.s,0,100),l:Ys(n.l,0,100),a:Ys(n.a)}},zB=function(n){return{h:zr(n.h),s:zr(n.s),l:zr(n.l),a:zr(n.a,3)}},GB=function(n){return EU((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},$p=function(n){return{h:(e=MU(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},qne=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ere=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,tre=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nre=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,tb={string:[[function(n){var e=Zne.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?zr(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?zr(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=tre.exec(n)||nre.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:UB({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=qne.exec(n)||ere.exec(n);if(!e)return null;var t,r,i=NB({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(Qne[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return GB(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return Aa(e)&&Aa(t)&&Aa(r)?UB({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!Aa(e)||!Aa(t)||!Aa(r))return null;var o=NB({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return GB(o)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!Aa(e)||!Aa(t)||!Aa(r))return null;var o=function(a){return{h:AU(a.h),s:Ys(a.s,0,100),v:Ys(a.v,0,100),a:Ys(a.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return EU(o)},"hsv"]]},HB=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},CU=function(n){return typeof n=="string"?HB(n.trim(),tb.string):typeof n=="object"&&n!==null?HB(n,tb.object):[null,void 0]},rre=function(n){return CU(n)[1]},Mw=function(n,e){var t=$p(n);return{h:t.h,s:Ys(t.s+100*e,0,100),l:t.l,a:t.a}},Ew=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},VB=function(n,e){var t=$p(n);return{h:t.h,s:t.s,l:Ys(t.l+100*e,0,100),a:t.a}},nb=function(){function n(e){this.parsed=CU(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return zr(Ew(this.rgba),2)},n.prototype.isDark=function(){return Ew(this.rgba)<.5},n.prototype.isLight=function(){return Ew(this.rgba)>=.5},n.prototype.toHex=function(){return e=Aw(this.rgba),t=e.r,r=e.g,i=e.b,o=(s=e.a)<1?yv(zr(255*s)):"","#"+yv(t)+yv(r)+yv(i)+o;var e,t,r,i,s,o},n.prototype.toRgb=function(){return Aw(this.rgba)},n.prototype.toRgbString=function(){return e=Aw(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return zB($p(this.rgba))},n.prototype.toHslString=function(){return e=zB($p(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=MU(this.rgba),{h:zr(e.h),s:zr(e.s),v:zr(e.v),a:zr(e.a,3)};var e},n.prototype.invert=function(){return Ti({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Ti(Mw(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Ti(Mw(this.rgba,-e))},n.prototype.grayscale=function(){return Ti(Mw(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Ti(VB(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Ti(VB(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Ti({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):zr(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=$p(this.rgba);return typeof e=="number"?Ti({h:e,s:t.s,l:t.l,a:t.a}):zr(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Ti(e).toHex()},n}(),Ti=function(n){return n instanceof nb?n:new nb(n)},WB=[],ire=function(n){n.forEach(function(e){WB.indexOf(e)<0&&(e(nb,tb),WB.push(e))})};function sre(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=r[this.toHex()];if(u)return u;if(o!=null&&o.closest){var c=this.toRgb(),f=1/0,h="black";if(!s.length)for(var m in t)s[m]=new n(t[m]).toRgb();for(var y in t){var g=(a=c,l=s[y],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));g<f&&(f=g,h=y)}return h}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function eh(){return(eh=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function kM(n,e){if(n==null)return{};var t,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e.indexOf(t=s[r])>=0||(i[t]=n[t]);return i}function rb(n){var e=L.useRef(n),t=L.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var kd=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},Jp=function(n){return"touches"in n},ib=function(n){return n&&n.ownerDocument.defaultView||self},jB=function(n,e,t){var r=n.getBoundingClientRect(),i=Jp(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:kd((i.pageX-(r.left+ib(n).pageXOffset))/r.width),top:kd((i.pageY-(r.top+ib(n).pageYOffset))/r.height)}},$B=function(n){!Jp(n)&&n.preventDefault()},OM=le.memo(function(n){var e=n.onMove,t=n.onKey,r=kM(n,["onMove","onKey"]),i=L.useRef(null),s=rb(e),o=rb(t),a=L.useRef(null),l=L.useRef(!1),u=L.useMemo(function(){var m=function(v){$B(v),(Jp(v)?v.touches.length>0:v.buttons>0)&&i.current?s(jB(i.current,v,a.current)):g(!1)},y=function(){return g(!1)};function g(v){var x=l.current,_=ib(i.current),w=v?_.addEventListener:_.removeEventListener;w(x?"touchmove":"mousemove",m),w(x?"touchend":"mouseup",y)}return[function(v){var x=v.nativeEvent,_=i.current;if(_&&($B(x),!function(A,R){return R&&!Jp(A)}(x,l.current)&&_)){if(Jp(x)){l.current=!0;var w=x.changedTouches||[];w.length&&(a.current=w[0].identifier)}_.focus(),s(jB(_,x,a.current)),g(!0)}},function(v){var x=v.which||v.keyCode;x<37||x>40||(v.preventDefault(),o({left:x===39?.05:x===37?-.05:0,top:x===40?.05:x===38?-.05:0}))},g]},[o,s]),c=u[0],f=u[1],h=u[2];return L.useEffect(function(){return h},[h]),le.createElement("div",eh({},r,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))}),ug=function(n){return n.filter(Boolean).join(" ")},UM=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,s=ug(["react-colorful__pointer",n.className]);return le.createElement("div",{className:s,style:{top:100*i+"%",left:100*t+"%"}},le.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Bi=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},TU=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:Bi(n.h),s:Bi(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:Bi(i/2),a:Bi(r,2)}},sb=function(n){var e=TU(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},Cw=function(n){var e=TU(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},RU=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),u=s%6;return{r:Bi(255*[r,a,o,o,l,r][u]),g:Bi(255*[l,r,r,a,o,o][u]),b:Bi(255*[o,o,l,r,r,a][u]),a:Bi(i,2)}},PU=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:Bi(60*(a<0?a+6:a)),s:Bi(s?o/s*100:0),v:Bi(s/255*100),a:i}},BU=le.memo(function(n){var e=n.hue,t=n.onChange,r=ug(["react-colorful__hue",n.className]);return le.createElement("div",{className:r},le.createElement(OM,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:kd(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":Bi(e),"aria-valuemax":"360","aria-valuemin":"0"},le.createElement(UM,{className:"react-colorful__hue-pointer",left:e/360,color:sb({h:e,s:100,v:100,a:1})})))}),IU=le.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:sb({h:e.h,s:100,v:100,a:1})};return le.createElement("div",{className:"react-colorful__saturation",style:r},le.createElement(OM,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:kd(e.s+100*i.left,0,100),v:kd(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Bi(e.s)+"%, Brightness "+Bi(e.v)+"%"},le.createElement(UM,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:sb(e)})))}),NM=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function DU(n,e,t){var r=rb(t),i=L.useState(function(){return n.toHsva(e)}),s=i[0],o=i[1],a=L.useRef({color:e,hsva:s});L.useEffect(function(){if(!n.equal(e,a.current.color)){var u=n.toHsva(e);a.current={hsva:u,color:e},o(u)}},[e,n]),L.useEffect(function(){var u;NM(s,a.current.hsva)||n.equal(u=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:u},r(u))},[s,n,r]);var l=L.useCallback(function(u){o(function(c){return Object.assign({},c,u)})},[]);return[s,l]}var ore=typeof window<"u"?L.useLayoutEffect:L.useEffect,are=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},JB=new Map,LU=function(n){ore(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!JB.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,JB.set(e,t);var r=are();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},lre=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=kM(n,["className","colorModel","color","onChange"]),a=L.useRef(null);LU(a);var l=DU(t,i,s),u=l[0],c=l[1],f=ug(["react-colorful",e]);return le.createElement("div",eh({},o,{ref:a,className:f}),le.createElement(IU,{hsva:u,onChange:c}),le.createElement(BU,{hue:u.h,onChange:c,className:"react-colorful__last-control"}))},ure=function(n){var e=n.className,t=n.hsva,r=n.onChange,i={backgroundImage:"linear-gradient(90deg, "+Cw(Object.assign({},t,{a:0}))+", "+Cw(Object.assign({},t,{a:1}))+")"},s=ug(["react-colorful__alpha",e]),o=Bi(100*t.a);return le.createElement("div",{className:s},le.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),le.createElement(OM,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:kd(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},le.createElement(UM,{className:"react-colorful__alpha-pointer",left:t.a,color:Cw(t)})))},cre=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=kM(n,["className","colorModel","color","onChange"]),a=L.useRef(null);LU(a);var l=DU(t,i,s),u=l[0],c=l[1],f=ug(["react-colorful",e]);return le.createElement("div",eh({},o,{ref:a,className:f}),le.createElement(IU,{hsva:u,onChange:c}),le.createElement(BU,{hue:u.h,onChange:c}),le.createElement(ure,{hsva:u,onChange:c,className:"react-colorful__last-control"}))},fre={defaultColor:{r:0,g:0,b:0,a:1},toHsva:PU,fromHsva:RU,equal:NM},dre=function(n){return le.createElement(cre,eh({},n,{colorModel:fre}))},hre={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return PU({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=RU(n)).r,g:e.g,b:e.b};var e},equal:NM},pre=function(n){return le.createElement(lre,eh({},n,{colorModel:hre}))};function th(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function nh(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function mre(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function gre(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(mre(arguments[e]));return n}var vre=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function cg(n,e){var t=yre(n);if(typeof t.path!="string"){var r=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function yre(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var r=e.split(".").pop().toLowerCase(),i=vre.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var _re=[".DS_Store","Thumbs.db"];function xre(n){return th(this,void 0,void 0,function(){return nh(this,function(e){return Uy(n)&&wre(n)?[2,Mre(n.dataTransfer,n.type)]:Sre(n)?[2,bre(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Are(n)]:[2,[]]})})}function wre(n){return Uy(n.dataTransfer)}function Sre(n){return Uy(n)&&Uy(n.target)}function Uy(n){return typeof n=="object"&&n!==null}function bre(n){return ob(n.target.files).map(function(e){return cg(e)})}function Are(n){return th(this,void 0,void 0,function(){var e;return nh(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(r){return r.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(r){return cg(r)})]}})})}function Mre(n,e){return th(this,void 0,void 0,function(){var t,r;return nh(this,function(i){switch(i.label){case 0:return n===null?[2,[]]:n.items?(t=ob(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(Ere))]):[3,2];case 1:return r=i.sent(),[2,XB(FU(r))];case 2:return[2,XB(ob(n.files).map(function(s){return cg(s)}))]}})})}function XB(n){return n.filter(function(e){return _re.indexOf(e.name)===-1})}function ob(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r)}return e}function Ere(n){if(typeof n.webkitGetAsEntry!="function")return KB(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?kU(e):KB(n)}function FU(n){return n.reduce(function(e,t){return gre(e,Array.isArray(t)?FU(t):[t])},[])}function KB(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=cg(e);return Promise.resolve(t)}function Cre(n){return th(this,void 0,void 0,function(){return nh(this,function(e){return[2,n.isDirectory?kU(n):Tre(n)]})})}function kU(n){var e=n.createReader();return new Promise(function(t,r){var i=[];function s(){var o=this;e.readEntries(function(a){return th(o,void 0,void 0,function(){var l,u,c;return nh(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=f.sent(),t(l),[3,4];case 3:return u=f.sent(),r(u),[3,4];case 4:return[3,6];case 5:c=Promise.all(a.map(Cre)),i.push(c),s(),f.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function Tre(n){return th(this,void 0,void 0,function(){return nh(this,function(e){return[2,new Promise(function(t,r){n.file(function(i){var s=cg(i,n.fullPath);t(s)},function(i){r(i)})})]})})}var Rre=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function YB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function QB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YB(Object(t),!0).forEach(function(r){OU(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):YB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function OU(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZB(n,e){return Dre(n)||Ire(n,e)||Bre(n,e)||Pre()}function Pre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bre(n,e){if(n){if(typeof n=="string")return qB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qB(n,e)}}function qB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ire(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function Dre(n){if(Array.isArray(n))return n}var Lre="file-invalid-type",Fre="file-too-large",kre="file-too-small",Ore="too-many-files",Ure=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:Lre,message:"File type must be ".concat(t)}},eI=function(e){return{code:Fre,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},tI=function(e){return{code:kre,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Nre={code:Ore,message:"Too many files"};function UU(n,e){var t=n.type==="application/x-moz-file"||Rre(n,e);return[t,t?null:Ure(e)]}function NU(n,e,t){if(mp(n.size))if(mp(e)&&mp(t)){if(n.size>t)return[!1,eI(t)];if(n.size<e)return[!1,tI(e)]}else{if(mp(e)&&n.size<e)return[!1,tI(e)];if(mp(t)&&n.size>t)return[!1,eI(t)]}return[!0,null]}function mp(n){return n!=null}function zre(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=UU(a,t),u=ZB(l,1),c=u[0],f=NU(a,r,i),h=ZB(f,1),m=h[0];return c&&m})}function Ny(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function _v(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function nI(n){n.preventDefault()}function Gre(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function Hre(n){return n.indexOf("Edge/")!==-1}function Vre(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Gre(n)||Hre(n)}function Jo(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!Ny(r)&&a&&a.apply(void 0,[r].concat(s)),Ny(r)})}}function Wre(){return"showOpenFilePicker"in window}function jre(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return QB(QB({},e),{},OU({},t,[]))},{}):{}}]}function $re(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function Jre(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var Xre=["children"],Kre=["open"],Yre=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Qre=["refKey","onChange","onClick"];function Zre(n){return tie(n)||eie(n)||zU(n)||qre()}function qre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eie(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function tie(n){if(Array.isArray(n))return ab(n)}function Tw(n,e){return iie(n)||rie(n,e)||zU(n,e)||nie()}function nie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zU(n,e){if(n){if(typeof n=="string")return ab(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ab(n,e)}}function ab(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function rie(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function iie(n){if(Array.isArray(n))return n}function rI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Vn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rI(Object(t),!0).forEach(function(r){lb(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function lb(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zy(n,e){if(n==null)return{};var t=sie(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function sie(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var zM=L.forwardRef(function(n,e){var t=n.children,r=zy(n,Xre),i=HU(r),s=i.open,o=zy(i,Kre);return L.useImperativeHandle(e,function(){return{open:s}},[s]),le.createElement(L.Fragment,null,t(Vn(Vn({},o),{},{open:s})))});zM.displayName="Dropzone";var GU={disabled:!1,getFilesFromEvent:xre,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};zM.defaultProps=GU;zM.propTypes={children:fn.func,accept:fn.oneOfType([fn.string,fn.arrayOf(fn.string)]),multiple:fn.bool,preventDropOnDocument:fn.bool,noClick:fn.bool,noKeyboard:fn.bool,noDrag:fn.bool,noDragEventsBubbling:fn.bool,minSize:fn.number,maxSize:fn.number,maxFiles:fn.number,disabled:fn.bool,getFilesFromEvent:fn.func,onFileDialogCancel:fn.func,onFileDialogOpen:fn.func,useFsAccessApi:fn.bool,onDragEnter:fn.func,onDragLeave:fn.func,onDragOver:fn.func,onDrop:fn.func,onDropAccepted:fn.func,onDropRejected:fn.func,validator:fn.func};var ub={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function HU(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Vn(Vn({},GU),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,u=e.onDragEnter,c=e.onDragLeave,f=e.onDragOver,h=e.onDrop,m=e.onDropAccepted,y=e.onDropRejected,g=e.onFileDialogCancel,v=e.onFileDialogOpen,x=e.useFsAccessApi,_=e.preventDropOnDocument,w=e.noClick,A=e.noKeyboard,R=e.noDrag,M=e.noDragEventsBubbling,P=e.validator,b=L.useMemo(function(){return typeof v=="function"?v:iI},[v]),C=L.useMemo(function(){return typeof g=="function"?g:iI},[g]),T=L.useRef(null),I=L.useRef(null),D=L.useReducer(oie,ub),z=Tw(D,2),N=z[0],J=z[1],Q=N.isFocused,re=N.isFileDialogActive,G=N.draggedFiles,j=L.useRef(typeof window<"u"&&window.isSecureContext&&x&&Wre()),Y=function(){!j.current&&re&&setTimeout(function(){if(I.current){var ae=I.current.files;ae.length||(J({type:"closeDialog"}),C())}},300)};L.useEffect(function(){return window.addEventListener("focus",Y,!1),function(){window.removeEventListener("focus",Y,!1)}},[I,re,C,j]);var X=L.useRef([]),K=function(ae){T.current&&T.current.contains(ae.target)||(ae.preventDefault(),X.current=[])};L.useEffect(function(){return _&&(document.addEventListener("dragover",nI,!1),document.addEventListener("drop",K,!1)),function(){_&&(document.removeEventListener("dragover",nI),document.removeEventListener("drop",K))}},[T,_]);var ce=L.useCallback(function(O){O.preventDefault(),O.persist(),Ce(O),X.current=[].concat(Zre(X.current),[O.target]),_v(O)&&Promise.resolve(i(O)).then(function(ae){Ny(O)&&!M||(J({draggedFiles:ae,isDragActive:!0,type:"setDraggedFiles"}),u&&u(O))})},[i,u,M]),he=L.useCallback(function(O){O.preventDefault(),O.persist(),Ce(O);var ae=_v(O);if(ae&&O.dataTransfer)try{O.dataTransfer.dropEffect="copy"}catch{}return ae&&f&&f(O),!1},[f,M]),te=L.useCallback(function(O){O.preventDefault(),O.persist(),Ce(O);var ae=X.current.filter(function(ke){return T.current&&T.current.contains(ke)}),Ae=ae.indexOf(O.target);Ae!==-1&&ae.splice(Ae,1),X.current=ae,!(ae.length>0)&&(J({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),_v(O)&&c&&c(O))},[T,c,M]),me=L.useCallback(function(O,ae){var Ae=[],ke=[];O.forEach(function(Ue){var je=UU(Ue,t),Ne=Tw(je,2),Be=Ne[0],nt=Ne[1],$e=NU(Ue,o,s),et=Tw($e,2),Ge=et[0],Ve=et[1],rt=P?P(Ue):null;if(Be&&Ge&&!rt)Ae.push(Ue);else{var ft=[nt,Ve];rt&&(ft=ft.concat(rt)),ke.push({file:Ue,errors:ft.filter(function(yt){return yt})})}}),(!a&&Ae.length>1||a&&l>=1&&Ae.length>l)&&(Ae.forEach(function(Ue){ke.push({file:Ue,errors:[Nre]})}),Ae.splice(0)),J({acceptedFiles:Ae,fileRejections:ke,type:"setFiles"}),h&&h(Ae,ke,ae),ke.length>0&&y&&y(ke,ae),Ae.length>0&&m&&m(Ae,ae)},[J,a,t,o,s,l,h,m,y,P]),pe=L.useCallback(function(O){O.preventDefault(),O.persist(),Ce(O),X.current=[],_v(O)&&Promise.resolve(i(O)).then(function(ae){Ny(O)&&!M||me(ae,O)}),J({type:"reset"})},[i,me,M]),oe=L.useCallback(function(){if(j.current){J({type:"openDialog"}),b();var O={multiple:a,types:jre(t)};window.showOpenFilePicker(O).then(function(ae){return i(ae)}).then(function(ae){me(ae,null),J({type:"closeDialog"})}).catch(function(ae){$re(ae)?(C(ae),J({type:"closeDialog"})):Jre(ae)&&(j.current=!1,I.current&&(I.current.value=null,I.current.click()))});return}I.current&&(J({type:"openDialog"}),b(),I.current.value=null,I.current.click())},[J,b,C,x,me,t,a]),U=L.useCallback(function(O){!T.current||!T.current.isEqualNode(O.target)||(O.key===" "||O.key==="Enter"||O.keyCode===32||O.keyCode===13)&&(O.preventDefault(),oe())},[T,oe]),W=L.useCallback(function(){J({type:"focus"})},[]),Z=L.useCallback(function(){J({type:"blur"})},[]),q=L.useCallback(function(){w||(Vre()?setTimeout(oe,0):oe())},[w,oe]),se=function(ae){return r?null:ae},ge=function(ae){return A?null:se(ae)},Me=function(ae){return R?null:se(ae)},Ce=function(ae){M&&ae.stopPropagation()},Ke=L.useMemo(function(){return function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ae=O.refKey,Ae=ae===void 0?"ref":ae,ke=O.role,Ue=O.onKeyDown,je=O.onFocus,Ne=O.onBlur,Be=O.onClick,nt=O.onDragEnter,$e=O.onDragOver,et=O.onDragLeave,Ge=O.onDrop,Ve=zy(O,Yre);return Vn(Vn(lb({onKeyDown:ge(Jo(Ue,U)),onFocus:ge(Jo(je,W)),onBlur:ge(Jo(Ne,Z)),onClick:se(Jo(Be,q)),onDragEnter:Me(Jo(nt,ce)),onDragOver:Me(Jo($e,he)),onDragLeave:Me(Jo(et,te)),onDrop:Me(Jo(Ge,pe)),role:typeof ke=="string"&&ke!==""?ke:"button"},Ae,T),!r&&!A?{tabIndex:0}:{}),Ve)}},[T,U,W,Z,q,ce,he,te,pe,A,R,r]),Re=L.useCallback(function(O){O.stopPropagation()},[]),Oe=L.useMemo(function(){return function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ae=O.refKey,Ae=ae===void 0?"ref":ae,ke=O.onChange,Ue=O.onClick,je=zy(O,Qre),Ne=lb({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:se(Jo(ke,pe)),onClick:se(Jo(Ue,Re)),tabIndex:-1},Ae,I);return Vn(Vn({},Ne),je)}},[I,t,a,pe,r]),ze=G.length,Ee=ze>0&&zre({files:G,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),$=ze>0&&!Ee;return Vn(Vn({},N),{},{isDragAccept:Ee,isDragReject:$,isFocused:Q&&!r,getRootProps:Ke,getInputProps:Oe,rootRef:T,inputRef:I,open:se(oe)})}function oie(n,e){switch(e.type){case"focus":return Vn(Vn({},n),{},{isFocused:!0});case"blur":return Vn(Vn({},n),{},{isFocused:!1});case"openDialog":return Vn(Vn({},ub),{},{isFileDialogActive:!0});case"closeDialog":return Vn(Vn({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,r=e.draggedFiles;return Vn(Vn({},n),{},{draggedFiles:r,isDragActive:t});case"setFiles":return Vn(Vn({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Vn({},ub);default:return n}}function iI(){}/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var aie=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var lie=aie;function sI(n){return lie(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var VU=function(e){var t,r;return!(sI(e)===!1||(t=e.constructor,typeof t!="function")||(r=t.prototype,sI(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var uie=VU,GM=function(e){return uie(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var cie=function(e,t,r){for(var i in e)if(t.call(r,e[i],i,e)===!1)break},fie=GM,die=cie;function WU(n,e){for(var t=arguments.length,r=0;++r<t;){var i=arguments[r];cb(i)&&die(i,hie,n)}return n}function hie(n,e){if(pie(e)){var t=this[e];cb(n)&&cb(t)?WU(t,n):this[e]=n}}function cb(n){return fie(n)&&!Array.isArray(n)}function pie(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var mie=WU;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var gie=function(n,e,t,r,i){if(!vie(n)||!e)return n;if(e=xv(e),t&&(e+="."+xv(t)),r&&(e+="."+xv(r)),i&&(e+="."+xv(i)),e in n)return n[e];for(var s=e.split("."),o=s.length,a=-1;n&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];n=n[l]}return n};function vie(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function xv(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var yie=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,r=Object(n),i=arguments.length,s=0;++s<i;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var u=a[l];t.call(o,u)&&(r[u]=o[u])}return r},_ie=GM,xie=yie,wie=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");oI(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];bie(t)&&(t=Aie(t)),oI(t)&&(Sie(n,t),xie(n,t))}return n};function Sie(n,e){for(var t in e)Mie(e,t)&&(n[t]=e[t])}function bie(n){return n&&typeof n=="string"}function Aie(n){var e={};for(var t in n)e[t]=n[t];return e}function oI(n){return n&&typeof n=="object"||_ie(n)}function Mie(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Eie=wie,Cie=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var r=Eie({sep:"."},e),i=r.quotes||['"',"'","`"],s;r.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(s=r.brackets);var o=[],a=[],l=[""],u=r.sep,c=n.length,f=-1,h;function m(){if(s&&a.length)return s[a[a.length-1]]}for(;++f<c;){var y=n[f],g=n[f+1],v={val:y,idx:f,arr:l,str:n};if(o.push(v),y==="\\"){v.val=Rie(r,n,f)===!0?y+g:g,v.escaped=!0,typeof t=="function"&&t(v),l[l.length-1]+=v.val,f++;continue}if(s&&s[y]){a.push(y);var x=m(),_=f+1;if(n.indexOf(x,_+1)!==-1)for(;a.length&&_<c;){var w=n[++_];if(w==="\\"){w++;continue}if(i.indexOf(w)!==-1){_=fb(n,w,_+1);continue}if(x=m(),a.length&&n.indexOf(x,_+1)===-1)break;if(s[w]){a.push(w);continue}x===w&&a.pop()}if(h=_,h===-1){l[l.length-1]+=y;continue}y=n.slice(f,h+1),v.val=y,v.idx=f=h}if(i.indexOf(y)!==-1){if(h=fb(n,y,f+1),h===-1){l[l.length-1]+=y;continue}Tie(y,r)===!0?y=n.slice(f,h+1):y=n.slice(f+1,h),v.val=y,v.idx=f=h}if(typeof t=="function"&&(t(v,o),y=v.val,f=v.idx),v.val===u&&v.split!==!1){l.push("");continue}l[l.length-1]+=v.val}return l};function fb(n,e,t,r){var i=n.indexOf(e,t);return n.charAt(i-1)==="\\"?fb(n,e,i+1):i}function Tie(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function Rie(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Pie=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},aI=Pie,Bie=function(e){aI(e)||(e={});for(var t=arguments.length,r=1;r<t;r++){var i=arguments[r];aI(i)&&Iie(e,i)}return e};function Iie(n,e){for(var t in e)Die(e,t)&&(n[t]=e[t])}function Die(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Lie=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Fie=Cie,kie=Bie,lI=VU,uI=Lie,Oie=function(n,e,t){if(!uI(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var r=Fie(e,{sep:".",brackets:!0}).filter(Uie),i=r.length,s=-1,o=n;++s<i;){var a=r[s];if(s!==i-1){uI(o[a])||(o[a]={}),o=o[a];continue}lI(o[a])&&lI(t)?o[a]=kie({},o[a],t):o[a]=t}return n};function Uie(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var Rw=GM,cI=mie,Nie=gie,fI=Oie,zie=function(e,t,r){if(!Rw(e))throw new TypeError("expected an object");if(typeof t!="string"||r==null)return cI.apply(null,arguments);if(typeof r=="string")return fI(e,t,r),e;var i=Nie(e,t);return Rw(r)&&Rw(i)&&(r=cI({},i,r)),fI(e,t,r),e};const HM=(...n)=>n.filter(Boolean).join(".");function Gie(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function Hie(n){const e=L.useRef(null),t=L.useRef(null),r=L.useRef(!0);return L.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),L.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(i)}},[n]),{wrapperRef:e,contentRef:t}}const Vie=n=>{const[e,t]=L.useState(n.getVisiblePaths());return L.useEffect(()=>{t(n.getVisiblePaths());const r=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:tk});return()=>r()},[n]),e};function jU(n=3){const e=L.useRef(null),t=L.useRef(null),[r,i]=L.useState(!1),s=L.useCallback(()=>i(!0),[]),o=L.useCallback(()=>i(!1),[]);return L.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:u}=e.current.getBoundingClientRect(),{height:c}=t.current.getBoundingClientRect(),f=a+c>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=u+"px",f==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,r]),{popinRef:e,wrapperRef:t,shown:r,show:s,hide:o}}ire([sre]);const Wie={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};ji.extend({color:()=>n=>Ti(n).isValid()});const jie=n=>ji().color().test(n);function $U(n,{format:e,hasAlpha:t,isString:r}){const i=Wie[e]+(r&&e!=="hex"?"String":""),s=n[i]();return typeof s=="object"&&!t?Ate(s,["a"]):s}const JU=(n,e)=>{const t=Ti(n);if(!t.isValid())throw Error("Invalid color");return $U(t,e)},$ie=(n,e)=>$U(Ti(n),Ut(Ut({},e),{},{isString:!0,format:"hex"})),Jie=({value:n})=>{const e=rre(n),t=e==="name"?"hex":e,r=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),i={format:t,hasAlpha:r,isString:typeof n=="string"};return{value:JU(n,i),settings:i}};var Xie=Object.freeze({__proto__:null,schema:jie,sanitize:JU,format:$ie,normalize:Jie});const Kie=Ct("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Yie=Ct("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Qie=Ct("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function dI(n,e){return e!=="rgb"?Ti(n).toRgb():n}function Zie({value:n,displayValue:e,settings:t,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=_i(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:u,shown:c,show:f,hide:h}=jU(),m=L.useRef(0),[y,g]=L.useState(()=>dI(n,o)),v=a?dre:pre,x=()=>{g(dI(n,o)),f(),i()},_=()=>{h(),s(),window.clearTimeout(m.current)},w=()=>{m.current=window.setTimeout(_,500)};return L.useEffect(()=>()=>window.clearTimeout(m.current),[]),le.createElement(le.Fragment,null,le.createElement(Kie,{ref:l,active:c,onClick:()=>x(),style:{color:e}}),c&&le.createElement(DM,null,le.createElement(mU,{onPointerUp:_}),le.createElement(Qie,{ref:u,onMouseEnter:()=>window.clearTimeout(m.current),onMouseLeave:A=>A.buttons===0&&w()},le.createElement(v,{color:y,onChange:r}))))}function qie(){const{value:n,displayValue:e,label:t,onChange:r,onUpdate:i,settings:s}=_i();return le.createElement(oo,{input:!0},le.createElement(ko,null,t),le.createElement(Yie,null,le.createElement(Zie,{value:n,displayValue:e,onChange:r,onUpdate:i,settings:s}),le.createElement(IM,{value:e,onChange:r,onUpdate:i})))}var ese=Ut({component:qie},Xie);function tse(){const{label:n,displayValue:e,onUpdate:t,settings:r}=_i();return le.createElement(oo,{input:!0},le.createElement(ko,null,n),le.createElement(FM,{value:e,settings:r,onUpdate:t}))}var nse=Ut({component:tse},bU(["x","y","z"]));const rse=Ct("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),ise=Ct("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function sse({value:n,settings:e,onUpdate:t}){const r=L.useRef(),i=L.useRef(0),s=L.useRef(0),o=L.useRef(1),[a,l]=L.useState(!1),[u,c]=L.useState(!1),[f,h]=vU(),m=L.useRef(null),y=L.useRef(null);L.useLayoutEffect(()=>{if(a){const{top:D,left:z,width:N,height:J}=m.current.getBoundingClientRect();y.current.style.left=z+N/2+"px",y.current.style.top=D+J/2+"px"}},[a]);const{keys:[g,v],joystick:x}=e,_=x==="invertY"?1:-1,{[g]:{step:w},[v]:{step:A}}=e,R=Oa("sizes","joystickWidth"),M=Oa("sizes","joystickHeight"),P=parseFloat(R)*.8/2,b=parseFloat(M)*.8/2,C=L.useCallback(()=>{r.current||(c(!0),i.current&&h({x:i.current*P}),s.current&&h({y:s.current*-b}),r.current=window.setInterval(()=>{t(D=>{const z=w*i.current*o.current,N=_*A*s.current*o.current;return Array.isArray(D)?{[g]:D[0]+z,[v]:D[1]+N}:{[g]:D[g]+z,[v]:D[v]+N}})},16))},[P,b,t,h,w,A,g,v,_]),T=L.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,c(!1)},[]);L.useEffect(()=>{function D(z){o.current=tU(z)}return window.addEventListener("keydown",D),window.addEventListener("keyup",D),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",D),window.removeEventListener("keyup",D)}},[]);const I=lg(({first:D,active:z,delta:[N,J],movement:[Q,re]})=>{D&&l(!0);const G=lu(Q,-P,P),j=lu(re,-b,b);i.current=Math.abs(Q)>Math.abs(G)?Math.sign(Q-G):0,s.current=Math.abs(re)>Math.abs(j)?Math.sign(j-re):0;let Y=n[g],X=n[v];z?(i.current||(Y+=N*w*o.current,h({x:G})),s.current||(X-=_*J*A*o.current,h({y:j})),i.current||s.current?C():T(),t({[g]:Y,[v]:X})):(l(!1),i.current=0,s.current=0,h({x:0,y:0}),T())});return le.createElement(rse,Sr({ref:m},I()),a&&le.createElement(DM,null,le.createElement(ise,{ref:y,isOutOfBounds:u},le.createElement("div",null),le.createElement("span",{ref:f}))))}const ose=Ct("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function ase(){const{label:n,displayValue:e,onUpdate:t,settings:r}=_i();return le.createElement(oo,{input:!0},le.createElement(ko,null,n),le.createElement(ose,{withJoystick:!!r.joystick},r.joystick&&le.createElement(sse,{value:e,settings:r,onUpdate:t}),le.createElement(FM,{value:e,settings:r,onUpdate:t})))}const lse=["joystick"],XU=bU(["x","y"]),use=n=>{let{joystick:e=!0}=n,t=Bn(n,lse);const{value:r,settings:i}=XU.normalize(t);return{value:r,settings:Ut(Ut({},i),{},{joystick:e})}};var cse=Ut(Ut({component:ase},XU),{},{normalize:use});const fse=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},dse=(n,e)=>typeof e=="object"&&"image"in e,hse=({image:n})=>({value:n});var pse=Object.freeze({__proto__:null,sanitize:fse,schema:dse,normalize:hse});const mse=Ct("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),gse=Ct("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),vse=Ct("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),yse=Ct("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),_se=Ct("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),xse=Ct("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function wse(){const{label:n,value:e,onUpdate:t,disabled:r}=_i(),{popinRef:i,wrapperRef:s,shown:o,show:a,hide:l}=jU(),u=L.useCallback(y=>{y.length&&t(y[0])},[t]),c=L.useCallback(y=>{y.stopPropagation(),t(void 0)},[t]),{getRootProps:f,getInputProps:h,isDragAccept:m}=HU({maxFiles:1,accept:"image/*",onDrop:u,disabled:r});return le.createElement(oo,{input:!0},le.createElement(ko,null,n),le.createElement(mse,null,le.createElement(vse,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&le.createElement(DM,null,le.createElement(mU,{onPointerUp:l,style:{cursor:"pointer"}}),le.createElement(yse,{ref:s,style:{backgroundImage:`url(${e})`}})),le.createElement(gse,f({isDragAccept:m}),le.createElement("input",h()),le.createElement(_se,null,m?"drop image":"click or drop")),le.createElement(xse,{onClick:c,disabled:!e})))}var Sse=Ut({component:wse},pse);const hI=ji().number(),bse=(n,e)=>ji().array().length(2).every.number().test(n)&&ji().schema({min:hI,max:hI}).test(e),Gy=n=>({min:n[0],max:n[1]}),KU=(n,{bounds:[e,t]},r)=>{const i=Array.isArray(n)?Gy(n):n,s={min:r[0],max:r[1]},{min:o,max:a}=Ut(Ut({},s),i);return[lu(Number(o),e,Math.max(e,a)),lu(Number(a),Math.min(t,o),t)]},Ase=({value:n,min:e,max:t})=>{const r={min:e,max:t},i=SU(Gy(n),{min:r,max:r}),s=[e,t],o=Ut(Ut({},i),{},{bounds:s});return{value:KU(Gy(n),o,n),settings:o}};var Mse=Object.freeze({__proto__:null,schema:bse,format:Gy,sanitize:KU,normalize:Ase});const Ese=["value","bounds","onDrag"],Cse=["bounds"],Tse=Ct("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function Rse(n){let{value:e,bounds:[t,r],onDrag:i}=n,s=Bn(n,Ese);const o=L.useRef(null),a=L.useRef(null),l=L.useRef(null),u=L.useRef(0),c=Oa("sizes","scrubberWidth"),f=lg(({event:y,first:g,xy:[v],movement:[x],memo:_={}})=>{if(g){const{width:A,left:R}=o.current.getBoundingClientRect();u.current=A-parseFloat(c);const M=(y==null?void 0:y.target)===a.current||(y==null?void 0:y.target)===l.current;_.pos=ky((v-R)/A,t,r);const P=Math.abs(_.pos-e.min)-Math.abs(_.pos-e.max);_.key=P<0||P===0&&_.pos<=e.min?"min":"max",M&&(_.pos=e[_.key])}const w=_.pos+ky(x/u.current,0,r-t);return i({[_.key]:cne(w,s[_.key])}),_}),h=`calc(${Fy(e.min,t,r)} * (100% - ${c} - 8px) + 4px)`,m=`calc(${1-Fy(e.max,t,r)} * (100% - ${c} - 8px) + 4px)`;return le.createElement(_U,Sr({ref:o},f()),le.createElement(yU,null,le.createElement(xU,{style:{left:h,right:m}})),le.createElement(q2,{position:"left",ref:a,style:{left:h}}),le.createElement(q2,{position:"right",ref:l,style:{right:m}}))}function Pse(){const{label:n,displayValue:e,onUpdate:t,settings:r}=_i(),i=Bn(r,Cse);return le.createElement(le.Fragment,null,le.createElement(oo,{input:!0},le.createElement(ko,null,n),le.createElement(Tse,null,le.createElement(Rse,Sr({value:e},r,{onDrag:t})),le.createElement(FM,{value:e,settings:i,onUpdate:t,innerLabelTrim:0}))))}var Bse=Ut({component:Pse},Mse);const Ise=()=>{const n=new Map;return{on:(e,t)=>{let r=n.get(e);r===void 0&&(r=new Set,n.set(e,r)),r.add(t)},off:(e,t)=>{const r=n.get(e);r!==void 0&&(r.delete(t),r.size===0&&n.delete(e))},emit:(e,...t)=>{const r=n.get(e);if(r!==void 0)for(const i of r)i(...t)}}},Dse=["type","value"],Lse=["onChange","transient","onEditStart","onEditEnd"],Fse=function(){const e=M1(TJ(()=>({data:{}}))),t=Ise();this.storeId=bte(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(r).forEach(([c,f])=>{f.render&&a.some(h=>h.indexOf(c)===0)&&!f.render(this.get)&&l.push(c+".")});const u=[];return i.forEach(c=>{c in o&&o[c].__refCount>0&&l.every(f=>c.indexOf(f)===-1)&&(!o[c].render||o[c].render(this.get))&&u.push(c)}),u},this.setOrderedPaths=o=>{o.forEach(a=>i.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(u=>{if(u in l){const c=l[u];c.__refCount--,c.__refCount===0&&c.type in ra&&delete l[u]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>r[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([c,f])=>{let h=u[c];if(h){const{type:m,value:y}=f,g=Bn(f,Dse);m!==h.type?Ba(Wn.INPUT_TYPE_OVERRIDE,m):((h.__refCount===0||a)&&Object.assign(h,g),h.__refCount++)}else u[c]=Ut(Ut({},f),{},{__refCount:1})}),{data:u}})},this.setValueAtPath=(o,a,l)=>{e.setState(u=>{const c=u.data;return OB(c[o],a,o,this,l),{data:c}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].settings=Ut(Ut({},u[o].settings),a),{data:u}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].disabled=a,{data:u}})},this.set=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([c,f])=>{try{OB(u[c],f,void 0,void 0,a)}catch{}}),{data:u}})},this.getInput=o=>{try{return this.getData()[o]}catch{Ba(Wn.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,Ut(Ut({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,Ut(Ut({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const u={};return Object.entries(o).forEach(([c,f])=>{if(c==="")return Ba(Wn.EMPTY_KEY);let h=HM(a,c);if(f.type===ra.FOLDER){const m=s(f.schema,h,l);Object.assign(u,m),h in r||(r[h]=f.settings)}else if(c in l)Ba(Wn.DUPLICATE_KEYS,c,h,l[c].path);else{const m=Pte(f,c,h,u);if(m){const{type:y,options:g,input:v}=m,{onChange:x,transient:_,onEditStart:w,onEditEnd:A}=g,R=Bn(g,Lse);u[h]=Ut(Ut(Ut({type:y},R),v),{},{fromPanel:!0}),l[c]={path:h,onChange:x,transient:_,onEditStart:w,onEditEnd:A}}else Ba(Wn.UNKNOWN_INPUT,h,f)}}),u};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}};new Fse;const pI=n=>"__levaInput"in n,kse=(n,e)=>{const t={},r=e?e.toLowerCase():null;return n.forEach(i=>{const[s,o]=Gie(i);(!r||s.toLowerCase().indexOf(r)>-1)&&zie(t,o,{[s]:{__levaInput:!0,path:i}})}),t},Ose=["type","label","path","valueKey","value","settings","setValue","disabled"];function Use(n){let{type:e,label:t,path:r,valueKey:i,value:s,settings:o,setValue:a,disabled:l}=n,u=Bn(n,Ose);const{displayValue:c,onChange:f,onUpdate:h}=gU({type:e,value:s,settings:o,setValue:a}),m=Tc[e].component;return m?le.createElement(oU.Provider,{value:Ut({key:i,path:r,id:""+r,label:t,displayValue:c,value:s,onChange:f,onUpdate:h,settings:o,setValue:a,disabled:l},u)},le.createElement(Xte,{disabled:l},le.createElement(m,null))):(Ba(Wn.NO_COMPONENT_FOR_TYPE,e,r),null)}const Nse=Ct("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function zse({onClick:n,settings:e,label:t}){const r=ag();return le.createElement(oo,null,le.createElement(Nse,{disabled:e.disabled,onClick:()=>n(r.get)},t))}const Gse=Ct("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),Hse=Ct("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),Vse=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(t=e.label),r=e.opts),{label:t,opts:r}};function Wse(n){const{label:e,opts:t}=Vse(n),r=ag();return le.createElement(oo,{input:!!e},e&&le.createElement(ko,null,e),le.createElement(Gse,null,Object.entries(t).map(([i,s])=>le.createElement(Hse,{key:i,onClick:()=>s(r.get)},i))))}const jse=Ct("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),YU=100;function $se(n,e){n.push(e),n.length>YU&&n.shift()}const Jse=L.forwardRef(function({initialValue:n},e){const t=Oa("colors","highlight3"),r=Oa("colors","elevation2"),i=Oa("colors","highlight1"),[s,o]=L.useMemo(()=>[Ti(i).alpha(.4).toRgbString(),Ti(i).alpha(.1).toRgbString()],[i]),a=L.useRef([n]),l=L.useRef(n),u=L.useRef(n),c=L.useRef(),f=L.useCallback((y,g)=>{if(!y)return;const{width:v,height:x}=y,_=new Path2D,w=v/YU,A=x*.05;for(let P=0;P<a.current.length;P++){const b=Fy(a.current[P],l.current,u.current),C=w*P,T=x-b*(x-A*2)-A;_.lineTo(C,T)}g.clearRect(0,0,v,x);const R=new Path2D(_);R.lineTo(w*(a.current.length+1),x),R.lineTo(0,x),R.lineTo(0,0);const M=g.createLinearGradient(0,0,0,x);M.addColorStop(0,s),M.addColorStop(1,o),g.fillStyle=M,g.fill(R),g.strokeStyle=r,g.lineJoin="round",g.lineWidth=14,g.stroke(_),g.strokeStyle=t,g.lineWidth=2,g.stroke(_)},[t,r,s,o]),[h,m]=rne(f);return L.useImperativeHandle(e,()=>({frame:y=>{(l.current===void 0||y<l.current)&&(l.current=y),(u.current===void 0||y>u.current)&&(u.current=y),$se(a.current,y),c.current=requestAnimationFrame(()=>f(h.current,m.current))}}),[h,m,f]),L.useEffect(()=>()=>cancelAnimationFrame(c.current),[]),le.createElement(jse,{ref:h})}),mI=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),Xse=L.forwardRef(function({initialValue:n},e){const[t,r]=L.useState(mI(n));return L.useImperativeHandle(e,()=>({frame:i=>r(mI(i))}),[]),le.createElement("div",null,t)});function gI(n){return typeof n=="function"?n():n.current}function Kse({label:n,objectOrFn:e,settings:t}){const r=L.useRef(),i=L.useRef(gI(e));return L.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(gI(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),le.createElement(oo,{input:!0},le.createElement(ko,{align:"top"},n),t.graph?le.createElement(Jse,{ref:r,initialValue:i.current}):le.createElement(Xse,{ref:r,initialValue:i.current}))}const Yse=["type","label","key"],Qse={[ra.BUTTON]:zse,[ra.BUTTON_GROUP]:Wse,[ra.MONITOR]:Kse},Zse=le.memo(({path:n})=>{const[e,{set:t,setSettings:r,disable:i,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=sne(n);if(!e)return null;const{type:l,label:u,key:c}=e,f=Bn(e,Yse);if(l in ra){const h=Qse[l];return le.createElement(h,Sr({label:u,path:n},f))}return l in Tc?le.createElement(Use,Sr({key:s+n,type:l,label:u,storeId:s,path:n,valueKey:c,setValue:t,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:a},f)):(mte(Wn.UNSUPPORTED_INPUT,l,n),null)});function qse({toggle:n,toggled:e,name:t}){return le.createElement(jte,{onClick:()=>n()},le.createElement(LM,{toggled:e}),le.createElement("div",null,t))}const eoe=({name:n,path:e,tree:t})=>{const r=ag(),i=HM(e,n),{collapsed:s,color:o}=r.getFolderSettings(i),[a,l]=L.useState(!s),u=L.useRef(null),c=Oa("colors","folderWidgetColor"),f=Oa("colors","folderTextColor");return L.useLayoutEffect(()=>{u.current.style.setProperty("--leva-colors-folderWidgetColor",o||c),u.current.style.setProperty("--leva-colors-folderTextColor",o||f)},[o,c,f]),le.createElement(Oy,{ref:u},le.createElement(qse,{name:n,toggled:a,toggle:()=>l(h=>!h)}),le.createElement(QU,{parent:i,tree:t,toggled:a}))},QU=le.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:o,contentRef:a}=Hie(s),l=ag(),u=([f,h])=>{var m;return(pI(h)?(m=l.getInput(h.path))===null||m===void 0?void 0:m.order:l.getFolderSettings(HM(r,f)).order)||0},c=Object.entries(i).sort((f,h)=>u(f)-u(h));return le.createElement(Q2,{ref:o,isRoot:n,fill:e,flat:t},le.createElement(dU,{ref:a,isRoot:n,toggled:s},c.map(([f,h])=>pI(h)?le.createElement(Zse,{key:h.path,valueKey:h.valueKey,path:h.path}):le.createElement(eoe,{key:f,name:f,path:r,tree:h}))))}),toe=Ct("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${pU}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),ZU=40,Hy=Ct("i",{$flexCenter:"",width:ZU,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),noe=Ct("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),roe=Ct("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Hy}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),ioe=Ct("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),soe=Ct("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:ZU}}}}),ooe=le.forwardRef(({setFilter:n,toggle:e},t)=>{const[r,i]=L.useState(""),s=L.useMemo(()=>eU(n,250),[n]),o=()=>{n(""),i("")},a=l=>{const u=l.currentTarget.value;e(!0),i(u)};return L.useEffect(()=>{s(r)},[r,s]),le.createElement(le.Fragment,null,le.createElement(ioe,{ref:t,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),le.createElement(Hy,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},le.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function aoe({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:r,toggle:i,toggled:s,title:o,drag:a,filterEnabled:l,from:u}){const[c,f]=L.useState(!1),h=L.useRef(null);L.useEffect(()=>{var y,g;c?(y=h.current)===null||y===void 0||y.focus():(g=h.current)===null||g===void 0||g.blur()},[c]);const m=lg(({offset:[y,g],first:v,last:x})=>{e({x:y,y:g}),v&&t({x:y,y:g}),x&&r({x:y,y:g})},{filterTaps:!0,from:({offset:[y,g]})=>[(u==null?void 0:u.x)||y,(u==null?void 0:u.y)||g]});return L.useEffect(()=>{const y=g=>{g.key==="L"&&g.shiftKey&&g.metaKey&&f(v=>!v)};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[]),le.createElement(le.Fragment,null,le.createElement(noe,{mode:a?"drag":void 0},le.createElement(Hy,{active:!s,onClick:()=>i()},le.createElement(LM,{toggled:s,width:12,height:8})),le.createElement(soe,Sr({},a?m():{},{drag:a,filterEnabled:l}),o===void 0&&a?le.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},le.createElement("circle",{cx:"2",cy:"2",r:"2"}),le.createElement("circle",{cx:"14",cy:"2",r:"2"}),le.createElement("circle",{cx:"26",cy:"2",r:"2"}),le.createElement("circle",{cx:"2",cy:"12",r:"2"}),le.createElement("circle",{cx:"14",cy:"12",r:"2"}),le.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&le.createElement(Hy,{active:c,onClick:()=>f(y=>!y)},le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},le.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),le.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),le.createElement(roe,{toggled:c},le.createElement(ooe,{ref:h,setFilter:n,toggle:i})))}le.memo(({store:n,rootClass:e,fill:t=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:u})=>{var c,f;const h=Vie(n),[m,y]=L.useState(""),g=L.useMemo(()=>kse(h,m),[h,m]),[v,x]=vU(),_=i||h.length>0,w=typeof o=="object"&&o.title||void 0,A=typeof o=="object"&&(c=o.drag)!==null&&c!==void 0?c:!0,R=typeof o=="object"&&(f=o.filter)!==null&&f!==void 0?f:!0,M=typeof o=="object"&&o.position||void 0,P=typeof o=="object"&&o.onDrag||void 0,b=typeof o=="object"&&o.onDragStart||void 0,C=typeof o=="object"&&o.onDragEnd||void 0;return le.useEffect(()=>{x({x:M==null?void 0:M.x,y:M==null?void 0:M.y})},[M,x]),Nte(),le.createElement(uU.Provider,{value:{hideCopyButton:a}},le.createElement(toe,{ref:v,className:e,fill:t,flat:r,oneLineLabels:s,hideTitleBar:!o,style:{display:_?"block":"none"}},o&&le.createElement(aoe,{onDrag:T=>{x(T),P==null||P(T)},onDragStart:T=>b==null?void 0:b(T),onDragEnd:T=>C==null?void 0:C(T),setFilter:y,toggle:T=>u(I=>T??!I),toggled:l,title:w,drag:A,filterEnabled:R,from:M}),_&&le.createElement(lU.Provider,{value:n},le.createElement(QU,{isRoot:!0,fill:t,flat:r,tree:g,toggled:l}))))});el(Bo.SELECT,Sne);el(Bo.IMAGE,Sse);el(Bo.NUMBER,dne);el(Bo.COLOR,ese);el(Bo.STRING,Bne);el(Bo.BOOLEAN,Une);el(Bo.INTERVAL,Bse);el(Bo.VECTOR3D,nse);el(Bo.VECTOR2D,cse);function vI(n){return typeof n=="string"?new qe(n).convertLinearToSRGB():n}function loe(n){switch(n){case"alpha":return{min:0,max:1};case"scale":return{min:0};case"map":return{image:void 0};default:return{}}}function uoe({color:n,alpha:e,lighting:t,name:r,...i}={}){return[{color:n,alpha:e,lighting:t,name:r},i]}function qU(n){return n instanceof V||n instanceof De||n instanceof jt||n instanceof Pr||n instanceof bt}function yI(n){return qU(n)?n.toArray():n instanceof qe?"#"+n.clone().convertLinearToSRGB().getHexString():n instanceof xn?n.image.src:n}const coe={normal:"normal",add:"add",subtract:"subtract",multiply:"multiply",lighten:"lighten",darken:"darken",divide:"divide",overlay:"overlay",screen:"screen",softlight:"softlight",negation:"negation",reflect:"reflect"},eN={perlin:"perlin",simplex:"simplex",cell:"cell",curl:"curl",white:"white"},VM={local:"local",world:"world",uv:"uv"},foe={phong:UA,physical:Lo,toon:NA,basic:Pi,lambert:GA,standard:Xd};class tl{constructor(e,t,r){this.uuid=$s.generateUUID().replace(/-/g,"_"),this.name="LayerMaterial",this.mode="normal",this.visible=!0;const s=Object.getOwnPropertyNames(e).filter(a=>a.startsWith("u_")).reduce((a,l)=>{var u;let c=(u=Object.getOwnPropertyDescriptor(e,l))==null?void 0:u.value;return(qU(c)||c instanceof qe)&&(c=c.clone()),{...a,[l.slice(1)]:c}},{});for(const a in s){const l=a.split("_")[1];(t==null?void 0:t[l])!==void 0&&(s[a]=t[l])}t&&Object.keys(t).map(a=>{t[a]!==void 0&&(this[a]=t[a])}),this.uniforms={},this.schema=[];const o={};Object.keys(s).map(a=>{const l=a.split("_")[1];this.uniforms[`u_${this.uuid}_${l}`]={value:vI(s[a])},this.schema.push({value:s[a],label:l}),o[l]={set:u=>{this.uniforms[`u_${this.uuid}_${l}`].value=vI(u)},get:()=>this.uniforms[`u_${this.uuid}_${l}`].value}}),t!=null&&t.name&&(this.name=t.name),t!=null&&t.mode&&(this.mode=t.mode),t!=null&&t.visible&&(this.visible=t.visible),Object.defineProperties(this,o),this.vertexShader="",this.fragmentShader="",this.vertexVariables="",this.fragmentVariables="",this.onParse=r,this.buildShaders(e),this.schema.push({value:this.mode,label:"mode",options:Object.values(coe)}),this.schema.push({value:this.visible,label:"visible"})}buildShaders(e){var t;const r=Object.getOwnPropertyNames(e).filter(c=>c==="fragmentShader"||c==="vertexShader").reduce((c,f)=>{var h;return{...c,[f]:(h=Object.getOwnPropertyDescriptor(e,f))==null?void 0:h.value}},{}),i={vert:H2(r.vertexShader||""),frag:H2(r.fragmentShader||"")},s={vert:lB(i.vert,this.renameTokens.bind(this)),frag:lB(i.frag,this.renameTokens.bind(this))},o={vert:V2(s.vert),frag:V2(s.frag)},a={vert:o.vert.map(c=>c.name).indexOf("main"),frag:o.frag.map(c=>c.name).indexOf("main")},l={vert:a.vert>=0?Wp(s.vert.slice(0,o.vert[a.vert].outer[0])):"",frag:a.frag>=0?Wp(s.frag.slice(0,o.frag[a.frag].outer[0])):""},u={vert:a.vert>=0?this.getShaderFromIndex(s.vert,o.vert[a.vert].body):"",frag:a.frag>=0?this.getShaderFromIndex(s.frag,o.frag[a.frag].body):""};this.vertexShader=this.processFinal(u.vert,!0),this.fragmentShader=this.processFinal(u.frag),this.vertexVariables=l.vert,this.fragmentVariables=l.frag,(t=this.onParse)==null||t.call(this,this),this.schema=this.schema.filter((c,f)=>{const h=c.label;return f===this.schema.findIndex(m=>m.label===h)})}renameTokens(e){if(e.startsWith("u_")){const t=e.slice(2);return`u_${this.uuid}_${t}`}else if(e.startsWith("v_")){const t=e.slice(2);return`v_${this.uuid}_${t}`}else if(e.startsWith("f_")){const t=e.slice(2);return`f_${this.uuid}_${t}`}else return e}processFinal(e,t){const r=e.replace(/\sf_/gm,` f_${this.uuid}_`).replace(/\(f_/gm,`(f_${this.uuid}_`),i=r.match(/^.*return.*$/gm);let s=r.replace(/^.*return.*$/gm,"");if(i!=null&&i[0]){const o=i[0].replace("return","").trim().replace(";",""),a=this.getBlendMode(o,"lamina_finalColor");s+=t?`lamina_finalPosition = ${o};`:`lamina_finalColor = ${a};`}return s}getShaderFromIndex(e,t){return Wp(e.slice(t[0],t[1]))}getBlendMode(e,t){switch(this.mode){default:case"normal":return`lamina_blend_alpha(${t}, ${e}, ${e}.a)`;case"add":return`lamina_blend_add(${t}, ${e}, ${e}.a)`;case"subtract":return`lamina_blend_subtract(${t}, ${e}, ${e}.a)`;case"multiply":return`lamina_blend_multiply(${t}, ${e}, ${e}.a)`;case"lighten":return`lamina_blend_lighten(${t}, ${e}, ${e}.a)`;case"darken":return`lamina_blend_darken(${t}, ${e}, ${e}.a)`;case"divide":return`lamina_blend_divide(${t}, ${e}, ${e}.a)`;case"overlay":return`lamina_blend_overlay(${t}, ${e}, ${e}.a)`;case"screen":return`lamina_blend_screen(${t}, ${e}, ${e}.a)`;case"softlight":return`lamina_blend_softlight(${t}, ${e}, ${e}.a)`;case"reflect":return`lamina_blend_reflect(${t}, ${e}, ${e}.a)`;case"negation":return`lamina_blend_negation(${t}, ${e}, ${e}.a)`}}getSchema(){return this.schema.map(({label:t,options:r,...i})=>({label:t,options:r,...loe(t),...i,value:yI(this[t])}))}serialize(){const e=this.constructor.name.split("$")[0];let t=Object.keys(this);t=t.filter(s=>!["uuid","uniforms","schema","fragmentShader","vertexShader","fragmentVariables","vertexVariables","attribs","events","__r3f","onParse"].includes(s));const r={};t.forEach(s=>{r[s]=this[s]});const i={};for(const s in this.uniforms){const o=s.replace(`u_${this.uuid}_`,"");i[o]=yI(this.uniforms[s].value)}return{constructor:e,properties:{...i,...r}}}}class no extends tl{constructor(e){super(no,{name:"Depth",...e},t=>{t.schema.push({value:t.mapping,label:"mapping",options:["vector","world","camera"]});const r=no.getMapping(t.uuid,t.mapping);t.fragmentShader=t.fragmentShader.replace("lamina_mapping_template",r)}),this.mapping="vector"}static getMapping(e,t){switch(t){default:case"vector":return`length(v_${e}_worldPosition - u_${e}_origin)`;case"world":return`length(v_${e}_position - vec3(0.))`;case"camera":return`length(v_${e}_worldPosition - cameraPosition)`}}}no.u_near=2;no.u_far=10;no.u_origin=new V(0,0,0);no.u_colorA="white";no.u_colorB="black";no.u_alpha=1;no.vertexShader=`
  varying vec3 v_worldPosition;
  varying vec3 v_position;

  void main() {
    v_worldPosition = (vec4(position, 1.0) * modelMatrix).xyz;
    v_position = position;
  }
  `;no.fragmentShader=`   
    uniform float u_alpha;
    uniform float u_near;
    uniform float u_far;
    uniform float u_isVector;
    uniform vec3 u_origin;
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;

    varying vec3 v_worldPosition;
    varying vec3 v_position;

    void main() {
      float f_dist = lamina_mapping_template;
      float f_depth = (f_dist - u_near) / (u_far - u_near);
			vec3 f_depthColor =  mix(u_colorB, u_colorA, 1.0 - clamp(f_depth, 0., 1.));
  
  
      return vec4(f_depthColor, u_alpha);
    }
  `;class rh extends tl{constructor(e){super(rh,{name:"Color",...e})}}rh.u_color="red";rh.u_alpha=1;rh.fragmentShader=`   
    uniform vec3 u_color;
    uniform float u_alpha;

    void main() {
      return vec4(u_color, u_alpha);
    }
  `;class qi extends tl{constructor(e){super(qi,{name:"noise",...e},t=>{t.schema.push({value:t.type,label:"type",options:Object.values(eN)}),t.schema.push({value:t.mapping,label:"mapping",options:Object.values(VM)});const r=qi.getNoiseFunction(t.type),i=qi.getMapping(t.mapping);t.vertexShader=t.vertexShader.replace("lamina_mapping_template",i),t.fragmentShader=t.fragmentShader.replace("lamina_noise_template",r)}),this.type="perlin",this.mapping="local"}static getNoiseFunction(e){switch(e){default:case"perlin":return"lamina_noise_perlin";case"simplex":return"lamina_noise_simplex";case"cell":return"lamina_noise_worley";case"white":return"lamina_noise_white";case"curl":return"lamina_noise_swirl"}}static getMapping(e){switch(e){default:case"local":return"position";case"world":return"(modelMatrix * vec4(position,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}qi.u_colorA="#666666";qi.u_colorB="#666666";qi.u_colorC="#FFFFFF";qi.u_colorD="#FFFFFF";qi.u_alpha=1;qi.u_scale=1;qi.u_offset=new V(0,0,0);qi.vertexShader=`
    varying vec3 v_position;

    void main() {
        v_position = lamina_mapping_template;
    }
  `;qi.fragmentShader=`   
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;
    uniform vec3 u_colorC;
    uniform vec3 u_colorD;
    uniform vec3 u_offset;

    uniform float u_alpha;
    uniform float u_scale;

    varying vec3 v_position;


    void main() {
        float f_n = lamina_noise_template((v_position + u_offset) * u_scale);

        float f_step1 = 0.;
        float f_step2 = 0.2;
        float f_step3 = 0.6;
        float f_step4 = 1.;

        vec3 f_color = mix(u_colorA, u_colorB, smoothstep(f_step1, f_step2, f_n));
        f_color = mix(f_color, u_colorC, smoothstep(f_step2, f_step3, f_n));
        f_color = mix(f_color, u_colorD, smoothstep(f_step3, f_step4, f_n));

        return vec4(f_color, u_alpha);
    }
  `;class Oo extends tl{constructor(e){super(Oo,{name:"Fresnel",...e})}}Oo.u_color="white";Oo.u_alpha=1;Oo.u_bias=0;Oo.u_intensity=1;Oo.u_power=2;Oo.u_factor=1;Oo.vertexShader=`
    varying vec3 v_worldPosition;
    varying vec3 v_worldNormal;

    void main() {
        v_worldPosition = vec3(-viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2]);
        v_worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );
        
    }
  `;Oo.fragmentShader=`   
    uniform vec3 u_color;
    uniform float u_alpha;
    uniform float u_bias;
    uniform float u_intensity;
    uniform float u_power;
    uniform float u_factor;

    varying vec3 v_worldPosition;
    varying vec3 v_worldNormal;

    void main() {
        float f_a = (u_factor  + dot(v_worldPosition, v_worldNormal));
        float f_fresnel = u_bias + u_intensity * pow(abs(f_a), u_power);

        f_fresnel = clamp(f_fresnel, 0.0, 1.0);
        return vec4(f_fresnel * u_color, u_alpha);
    }
  `;class ro extends tl{constructor(e){super(ro,{name:"Gradient",...e},t=>{t.schema.push({value:t.axes,label:"axes",options:["x","y","z"]}),t.schema.push({value:t.mapping,label:"mapping",options:Object.values(VM)});const r=ro.getMapping(t.mapping);t.vertexShader=t.vertexShader.replace("lamina_mapping_template",r||"local"),t.fragmentShader=t.fragmentShader.replace("axes_template",t.axes||"x")}),this.axes="x",this.mapping="local"}static getMapping(e){switch(e){default:case"local":return"position";case"world":return"(modelMatrix * vec4(position,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}ro.u_colorA="white";ro.u_colorB="black";ro.u_alpha=1;ro.u_start=1;ro.u_end=-1;ro.u_contrast=1;ro.vertexShader=`
		varying vec3 v_position;

		vod main() {
      v_position = lamina_mapping_template;
		}
  `;ro.fragmentShader=`   
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;
    uniform vec3 u_axis;
    uniform float u_alpha;
    uniform float u_start;
    uniform float u_end;
    uniform float u_contrast;

		varying vec3 v_position;

    void main() {

      float f_step = smoothstep(u_start, u_end, v_position.axes_template * u_contrast);
      vec3 f_color = mix(u_colorA, u_colorB, f_step);

      return vec4(f_color, u_alpha);
    }
  `;class Oc extends tl{constructor(e){super(Oc,{name:"Matcap",...e})}}Oc.u_alpha=1;Oc.u_map=void 0;Oc.vertexShader=`
    varying vec3 v_position;
    varying vec3 v_normal;
    
    void main() {
      v_position = normalize( vec3( modelViewMatrix * vec4( position, 1.0 ) ) );
      v_normal = normalize( normalMatrix * normal );
    }
    `;Oc.fragmentShader=` 
		uniform sampler2D u_map;  
		uniform float u_alpha;  
		varying vec3 v_position;
		varying vec3 v_normal;

		
    void main() {
			vec3 f_r = reflect( v_position, v_normal );
			float f_m = 2. * sqrt( pow( f_r.x, 2. ) + pow( f_r.y, 2. ) + pow( f_r.z + 1., 2. ) );
			vec2 f_vN = f_r.xy / f_m + .5;

			vec3 f_base = texture2D(u_map, f_vN).rgb;

      return vec4(f_base, u_alpha);
    }
  `;class Uc extends tl{constructor(e){super(Uc,{name:"Texture",...e})}}Uc.u_alpha=1;Uc.u_map=void 0;Uc.vertexShader=`
    varying vec2 v_uv;
    
    void main() {
        v_uv = uv;
    }
    `;Uc.fragmentShader=` 
		uniform sampler2D u_map;  
		uniform float u_alpha;  
		varying vec2 v_uv;

    void main() {
			vec4 f_color = texture2D(u_map, v_uv);
      return vec4(f_color.rgb, f_color.a * u_alpha);
    }
  `;class Ua extends tl{constructor(e){super(Ua,{name:"Displace",...e},t=>{t.schema.push({value:t.type,label:"type",options:Object.values(eN)}),t.schema.push({value:t.mapping,label:"mapping",options:Object.values(VM)});const r=Ua.getNoiseFunction(t.type),i=Ua.getMapping(t.mapping);t.vertexVariables=t.vertexVariables.replace("lamina_mapping_template",i),t.vertexVariables=t.vertexVariables.replace("lamina_noise_template",r)}),this.type="perlin",this.mapping="local"}static getNoiseFunction(e){switch(e){default:case"perlin":return"lamina_noise_perlin";case"simplex":return"lamina_noise_simplex";case"cell":return"lamina_noise_worley";case"white":return"lamina_noise_white";case"curl":return"lamina_noise_swirl"}}static getMapping(e){switch(e){default:case"local":return"p";case"world":return"(modelMatrix * vec4(p,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}Ua.u_strength=1;Ua.u_scale=1;Ua.u_offset=new V(0,0,0);Ua.vertexShader=`
       
      uniform float u_strength;
      uniform float u_scale;
      uniform vec3 u_offset;

      vec3 displace(vec3 p) {
				vec3 f_position = lamina_mapping_template;
        float f_n = lamina_noise_template((f_position + u_offset) * u_scale) * u_strength;
        vec3 f_newPosition = p + (f_n * normal);

				return f_newPosition;
      }

      
			vec3 orthogonal(vec3 v) {
  		  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)
  		  : vec3(0.0, -v.z, v.y));
  		}
  		vec3 recalcNormals(vec3 newPos) {
  		  float offset = 0.001;
  		  vec3 tangent = orthogonal(normal);
  		  vec3 bitangent = normalize(cross(normal, tangent));
  		  vec3 neighbour1 = position + tangent * offset;
  		  vec3 neighbour2 = position + bitangent * offset;
  		  vec3 displacedNeighbour1 = displace(neighbour1);
  		  vec3 displacedNeighbour2 = displace(neighbour2);
  		  vec3 displacedTangent = displacedNeighbour1 - newPos;
  		  vec3 displacedBitangent = displacedNeighbour2 - newPos;
  		  return normalize(cross(displacedTangent, displacedBitangent));
  		}
  
  
      void main() {
       
				vec3 f_newPosition = displace(position);
        lamina_finalNormal = recalcNormals(f_newPosition);

        return f_newPosition;
      }
    `;class Nc extends tl{constructor(e){super(Nc,{name:"Normal",...e})}}Nc.u_alpha=1;Nc.u_direction=new V(1,1,1);Nc.vertexShader=`   
  varying vec3 v_normals; 

  void main() {
    v_normals = normal;
  }
`;Nc.fragmentShader=`   
  	uniform float u_alpha;
  	uniform vec3 u_color;
  	uniform vec3 u_direction;

		varying vec3 v_normals;

    void main() {
			vec3 f_normalColor = vec3(1.);
      f_normalColor.x = v_normals.x * u_direction.x;
      f_normalColor.y = v_normals.y * u_direction.y;
      f_normalColor.z = v_normals.z * u_direction.z;

      return vec4(f_normalColor, u_alpha);
    }
  `;var doe=`
vec4 lamina_blend_add(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(min(x.xyz + y.xyz, 1.0) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec3 lamina_blend_alpha(const in vec3 x, const in vec3 y, const in float opacity) {

	return y * opacity + x * (1.0 - opacity);

}

vec4 lamina_blend_alpha(const in vec4 x, const in vec4 y, const in float opacity) {

	float a = min(y.a, opacity);

	return vec4(lamina_blend_alpha(x.rgb, y.rgb, a), x.a);

}
vec4 lamina_blend_average(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((x.xyz + y.xyz) * 0.5 * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_color_burn(const in float x, const in float y) {

	return (y == 0.0) ? y : max(1.0 - (1.0 - x) / y, 0.0);

}

vec4 lamina_blend_color_burn(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_color_burn(x.r, y.r),
		lamina_blend_color_burn(x.g, y.g),
		lamina_blend_color_burn(x.b, y.b),
		lamina_blend_color_burn(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_color_dodge(const in float x, const in float y) {

	return (y == 1.0) ? y : min(x / (1.0 - y), 1.0);

}

vec4 lamina_blend_color_dodge(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_color_dodge(x.r, y.r),
		lamina_blend_color_dodge(x.g, y.g),
		lamina_blend_color_dodge(x.b, y.b),
		lamina_blend_color_dodge(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_darken(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(min(x.xyz, y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_difference(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(abs(x.xyz - y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_divide(const in float x, const in float y) {

	return (y > 0.0) ? min(x / y, 1.0) : 1.0;

}

vec4 lamina_blend_divide(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_divide(x.r, y.r),
		lamina_blend_divide(x.g, y.g),
		lamina_blend_divide(x.b, y.b),
		lamina_blend_divide(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_exclusion(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((x.xyz + y.xyz - 2.0 * x.xyz * y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_lighten(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(max(x.xyz, y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_multiply(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4( x.xyz * y.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_negation(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((1.0 - abs(1.0 - x.xyz - y.xyz)) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_normal(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(y.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_overlay(const in float x, const in float y) {

	return (x < 0.5) ? (2.0 * x * y) : (1.0 - 2.0 * (1.0 - x) * (1.0 - y));

}

vec4 lamina_blend_overlay(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_overlay(x.r, y.r),
		lamina_blend_overlay(x.g, y.g),
		lamina_blend_overlay(x.b, y.b),
		lamina_blend_overlay(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_reflect(const in float x, const in float y) {

	return (y == 1.0) ? y : min(x * x / (1.0 - y), 1.0);

}

vec4 lamina_blend_reflect(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_reflect(x.r, y.r),
		lamina_blend_reflect(x.g, y.g),
		lamina_blend_reflect(x.b, y.b),
		lamina_blend_reflect(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_screen(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((1.0 - (1.0 - x.xyz) * (1.0 - y.xyz)) * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_softlight(const in float x, const in float y) {

	return (y < 0.5) ?
		(2.0 * x * y + x * x * (1.0 - 2.0 * y)) :
		(sqrt(x) * (2.0 * y - 1.0) + 2.0 * x * (1.0 - y));

}

vec4 lamina_blend_softlight(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_softlight(x.r, y.r),
		lamina_blend_softlight(x.g, y.g),
		lamina_blend_softlight(x.b, y.b),
		lamina_blend_softlight(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_subtract(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(max(x.xyz + y.xyz - 1.0, 0.0) * opacity + x.xyz * (1.0 - opacity), x.a);

}

`,_I=`

// From: https://gist.github.com/patriciogonzalezvivo/670c22f3966e662d2f83
// Huge thanks to the creators of these algorithms

float lamina_noise_mod289(float x){return x - floor(x * (1.0 / 289.0)) * 289.0;}
vec4 lamina_noise_mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}
vec4 lamina_noise_perm(vec4 x){return lamina_noise_mod289(((x * 34.0) + 1.0) * x);}
vec4 lamina_noise_permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }
vec4 lamina_noise_taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }


float lamina_noise_white(vec2 p) {
  return fract(1e4 * sin(17.0 * p.x + p.y * 0.1) *
               (0.1 + abs(sin(p.y * 13.0 + p.x))));
}

float lamina_noise_white(vec3 p) {
  return lamina_noise_white(p.xy);
}


vec3 lamina_noise_fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }

float lamina_noise_perlin(vec3 P) {
  vec3 Pi0 = floor(P);        // Integer part for indexing
  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
  Pi0 = mod(Pi0, 289.0);
  Pi1 = mod(Pi1, 289.0);
  vec3 Pf0 = fract(P);        // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = lamina_noise_permute(lamina_noise_permute(ix) + iy);
  vec4 ixy0 = lamina_noise_permute(ixy + iz0);
  vec4 ixy1 = lamina_noise_permute(ixy + iz1);

  vec4 gx0 = ixy0 / 7.0;
  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 / 7.0;
  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);

  vec4 norm0 = lamina_noise_taylorInvSqrt(
      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = lamina_noise_taylorInvSqrt(
      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = lamina_noise_fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),
                 fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
  return lamina_normalize(2.2 * n_xyz);
}

float lamina_noise_simplex(vec3 v) {
  const vec2 C = vec2(1.0 / 6.0, 1.0 / 3.0);
  const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);

  // First corner
  vec3 i = floor(v + dot(v, C.yyy));
  vec3 x0 = v - i + dot(i, C.xxx);

  // Other corners
  vec3 g = step(x0.yzx, x0.xyz);
  vec3 l = 1.0 - g;
  vec3 i1 = min(g.xyz, l.zxy);
  vec3 i2 = max(g.xyz, l.zxy);

  //  x0 = x0 - 0. + 0.0 * C
  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
  vec3 x3 = x0 - 1. + 3.0 * C.xxx;

  // Permutations
  i = mod(i, 289.0);
  vec4 p = lamina_noise_permute(lamina_noise_permute(lamina_noise_permute(i.z + vec4(0.0, i1.z, i2.z, 1.0)) + i.y +
                             vec4(0.0, i1.y, i2.y, 1.0)) +
                    i.x + vec4(0.0, i1.x, i2.x, 1.0));

  // Gradients
  // ( N*N points uniformly over a square, mapped onto an octahedron.)
  float n_ = 1.0 / 7.0; // N=7
  vec3 ns = n_ * D.wyz - D.xzx;

  vec4 j = p - 49.0 * floor(p * ns.z * ns.z); //  mod(p,N*N)

  vec4 x_ = floor(j * ns.z);
  vec4 y_ = floor(j - 7.0 * x_); // mod(j,N)

  vec4 x = x_ * ns.x + ns.yyyy;
  vec4 y = y_ * ns.x + ns.yyyy;
  vec4 h = 1.0 - abs(x) - abs(y);

  vec4 b0 = vec4(x.xy, y.xy);
  vec4 b1 = vec4(x.zw, y.zw);

  vec4 s0 = floor(b0) * 2.0 + 1.0;
  vec4 s1 = floor(b1) * 2.0 + 1.0;
  vec4 sh = -step(h, vec4(0.0));

  vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;
  vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;

  vec3 p0 = vec3(a0.xy, h.x);
  vec3 p1 = vec3(a0.zw, h.y);
  vec3 p2 = vec3(a1.xy, h.z);
  vec3 p3 = vec3(a1.zw, h.w);

  // Normalise gradients
  vec4 norm =
      lamina_noise_taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));
  p0 *= norm.x;
  p1 *= norm.y;
  p2 *= norm.z;
  p3 *= norm.w;

  // Mix final noise value
  vec4 m =
      max(0.6 - vec4(dot(x0, x0), dot(x1, x1), dot(x2, x2), dot(x3, x3)), 0.0);
  m = m * m;
  return lamina_normalize(42.0 *
         dot(m * m, vec4(dot(p0, x0), dot(p1, x1), dot(p2, x2), dot(p3, x3))));
}

vec3 lamina_noise_simplex3(vec3 x) {
  float s = lamina_noise_simplex(vec3(x));
  float s1 = lamina_noise_simplex(vec3(x.y - 19.1, x.z + 33.4, x.x + 47.2));
  float s2 = lamina_noise_simplex(vec3(x.z + 74.2, x.x - 124.5, x.y + 99.4));
  vec3 c = vec3(s, s1, s2);
  return c;
}

vec3 lamina_noise_curl(vec3 p) {
  const float e = .1;
  vec3 dx = vec3(e, 0.0, 0.0);
  vec3 dy = vec3(0.0, e, 0.0);
  vec3 dz = vec3(0.0, 0.0, e);

  vec3 p_x0 = lamina_noise_simplex3(p - dx);
  vec3 p_x1 = lamina_noise_simplex3(p + dx);
  vec3 p_y0 = lamina_noise_simplex3(p - dy);
  vec3 p_y1 = lamina_noise_simplex3(p + dy);
  vec3 p_z0 = lamina_noise_simplex3(p - dz);
  vec3 p_z1 = lamina_noise_simplex3(p + dz);

  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;
  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;
  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;

  const float divisor = 1.0 / (2.0 * e);
  return normalize(vec3(x, y, z) * divisor);
}

vec3 lamina_permute(vec3 x) {
  return mod((34.0 * x + 1.0) * x, 289.0);
}

vec3 lamina_dist(vec3 x, vec3 y, vec3 z,  bool manhattanDistance) {
  return manhattanDistance ?  abs(x) + abs(y) + abs(z) :  (x * x + y * y + z * z);
}

// From: https://github.com/Erkaman/glsl-worley
float lamina_noise_worley(vec3 P) {
  float jitter = 1.;
  bool manhattanDistance = false; 

  float K = 0.142857142857; // 1/7
  float Ko = 0.428571428571; // 1/2-K/2
  float  K2 = 0.020408163265306; // 1/(7*7)
  float Kz = 0.166666666667; // 1/6
  float Kzo = 0.416666666667; // 1/2-1/6*2

	vec3 Pi = mod(floor(P), 289.0);
 	vec3 Pf = fract(P) - 0.5;

	vec3 Pfx = Pf.x + vec3(1.0, 0.0, -1.0);
	vec3 Pfy = Pf.y + vec3(1.0, 0.0, -1.0);
	vec3 Pfz = Pf.z + vec3(1.0, 0.0, -1.0);

	vec3 p = lamina_permute(Pi.x + vec3(-1.0, 0.0, 1.0));
	vec3 p1 = lamina_permute(p + Pi.y - 1.0);
	vec3 p2 = lamina_permute(p + Pi.y);
	vec3 p3 = lamina_permute(p + Pi.y + 1.0);

	vec3 p11 = lamina_permute(p1 + Pi.z - 1.0);
	vec3 p12 = lamina_permute(p1 + Pi.z);
	vec3 p13 = lamina_permute(p1 + Pi.z + 1.0);

	vec3 p21 = lamina_permute(p2 + Pi.z - 1.0);
	vec3 p22 = lamina_permute(p2 + Pi.z);
	vec3 p23 = lamina_permute(p2 + Pi.z + 1.0);

	vec3 p31 = lamina_permute(p3 + Pi.z - 1.0);
	vec3 p32 = lamina_permute(p3 + Pi.z);
	vec3 p33 = lamina_permute(p3 + Pi.z + 1.0);

	vec3 ox11 = fract(p11*K) - Ko;
	vec3 oy11 = mod(floor(p11*K), 7.0)*K - Ko;
	vec3 oz11 = floor(p11*K2)*Kz - Kzo; // p11 < 289 guaranteed

	vec3 ox12 = fract(p12*K) - Ko;
	vec3 oy12 = mod(floor(p12*K), 7.0)*K - Ko;
	vec3 oz12 = floor(p12*K2)*Kz - Kzo;

	vec3 ox13 = fract(p13*K) - Ko;
	vec3 oy13 = mod(floor(p13*K), 7.0)*K - Ko;
	vec3 oz13 = floor(p13*K2)*Kz - Kzo;

	vec3 ox21 = fract(p21*K) - Ko;
	vec3 oy21 = mod(floor(p21*K), 7.0)*K - Ko;
	vec3 oz21 = floor(p21*K2)*Kz - Kzo;

	vec3 ox22 = fract(p22*K) - Ko;
	vec3 oy22 = mod(floor(p22*K), 7.0)*K - Ko;
	vec3 oz22 = floor(p22*K2)*Kz - Kzo;

	vec3 ox23 = fract(p23*K) - Ko;
	vec3 oy23 = mod(floor(p23*K), 7.0)*K - Ko;
	vec3 oz23 = floor(p23*K2)*Kz - Kzo;

	vec3 ox31 = fract(p31*K) - Ko;
	vec3 oy31 = mod(floor(p31*K), 7.0)*K - Ko;
	vec3 oz31 = floor(p31*K2)*Kz - Kzo;

	vec3 ox32 = fract(p32*K) - Ko;
	vec3 oy32 = mod(floor(p32*K), 7.0)*K - Ko;
	vec3 oz32 = floor(p32*K2)*Kz - Kzo;

	vec3 ox33 = fract(p33*K) - Ko;
	vec3 oy33 = mod(floor(p33*K), 7.0)*K - Ko;
	vec3 oz33 = floor(p33*K2)*Kz - Kzo;

	vec3 dx11 = Pfx + jitter*ox11;
	vec3 dy11 = Pfy.x + jitter*oy11;
	vec3 dz11 = Pfz.x + jitter*oz11;

	vec3 dx12 = Pfx + jitter*ox12;
	vec3 dy12 = Pfy.x + jitter*oy12;
	vec3 dz12 = Pfz.y + jitter*oz12;

	vec3 dx13 = Pfx + jitter*ox13;
	vec3 dy13 = Pfy.x + jitter*oy13;
	vec3 dz13 = Pfz.z + jitter*oz13;

	vec3 dx21 = Pfx + jitter*ox21;
	vec3 dy21 = Pfy.y + jitter*oy21;
	vec3 dz21 = Pfz.x + jitter*oz21;

	vec3 dx22 = Pfx + jitter*ox22;
	vec3 dy22 = Pfy.y + jitter*oy22;
	vec3 dz22 = Pfz.y + jitter*oz22;

	vec3 dx23 = Pfx + jitter*ox23;
	vec3 dy23 = Pfy.y + jitter*oy23;
	vec3 dz23 = Pfz.z + jitter*oz23;

	vec3 dx31 = Pfx + jitter*ox31;
	vec3 dy31 = Pfy.z + jitter*oy31;
	vec3 dz31 = Pfz.x + jitter*oz31;

	vec3 dx32 = Pfx + jitter*ox32;
	vec3 dy32 = Pfy.z + jitter*oy32;
	vec3 dz32 = Pfz.y + jitter*oz32;

	vec3 dx33 = Pfx + jitter*ox33;
	vec3 dy33 = Pfy.z + jitter*oy33;
	vec3 dz33 = Pfz.z + jitter*oz33;

	vec3 d11 = lamina_dist(dx11, dy11, dz11, manhattanDistance);
	vec3 d12 = lamina_dist(dx12, dy12, dz12, manhattanDistance);
	vec3 d13 = lamina_dist(dx13, dy13, dz13, manhattanDistance);
	vec3 d21 = lamina_dist(dx21, dy21, dz21, manhattanDistance);
	vec3 d22 = lamina_dist(dx22, dy22, dz22, manhattanDistance);
	vec3 d23 = lamina_dist(dx23, dy23, dz23, manhattanDistance);
	vec3 d31 = lamina_dist(dx31, dy31, dz31, manhattanDistance);
	vec3 d32 = lamina_dist(dx32, dy32, dz32, manhattanDistance);
	vec3 d33 = lamina_dist(dx33, dy33, dz33, manhattanDistance);

	vec3 d1a = min(d11, d12);
	d12 = max(d11, d12);
	d11 = min(d1a, d13); // Smallest now not in d12 or d13
	d13 = max(d1a, d13);
	d12 = min(d12, d13); // 2nd smallest now not in d13
	vec3 d2a = min(d21, d22);
	d22 = max(d21, d22);
	d21 = min(d2a, d23); // Smallest now not in d22 or d23
	d23 = max(d2a, d23);
	d22 = min(d22, d23); // 2nd smallest now not in d23
	vec3 d3a = min(d31, d32);
	d32 = max(d31, d32);
	d31 = min(d3a, d33); // Smallest now not in d32 or d33
	d33 = max(d3a, d33);
	d32 = min(d32, d33); // 2nd smallest now not in d33
	vec3 da = min(d11, d21);
	d21 = max(d11, d21);
	d11 = min(da, d31); // Smallest now in d11
	d31 = max(da, d31); // 2nd smallest now not in d31
	d11.xy = (d11.x < d11.y) ? d11.xy : d11.yx;
	d11.xz = (d11.x < d11.z) ? d11.xz : d11.zx; // d11.x now smallest
	d12 = min(d12, d21); // 2nd smallest now not in d21
	d12 = min(d12, d22); // nor in d22
	d12 = min(d12, d31); // nor in d31
	d12 = min(d12, d32); // nor in d32
	d11.yz = min(d11.yz,d12.xy); // nor in d12.yz
	d11.y = min(d11.y,d12.z); // Only two more to go
	d11.y = min(d11.y,d11.z); // Done! (Phew!)

  vec2 F = sqrt(d11.xy);
	return F.x; // F1, F2

}

float lamina_noise_swirl(vec3 position) {
    float scale = 0.1;
    float freq = 4. * scale;
    float t = 1.;

    vec3 pos = (position * scale) + lamina_noise_curl(position * 7. * scale);

    float worley1 = 1. - lamina_noise_worley((pos * (freq * 2.)) +  (t * 2.));
    float worley2 = 1. - lamina_noise_worley((pos * (freq * 4.)) +  (t * 4.));
    float worley3 = 1. - lamina_noise_worley((pos * (freq * 8.)) +  (t * 8.));
    float worley4 = 1. - lamina_noise_worley((pos * (freq * 16.)) +  (t * 16.));
    
    float fbm1 = worley1 * .625 + worley2 * .25 + worley3 * .125;
    float fbm2 = worley2 * .625 + worley3 * .25 + worley4 * .125;
    float fbm3 = worley3 * .75 + worley4 * .25;

    vec3 curlWorleyFbm = vec3(fbm1, fbm2, fbm3);
    float curlWorley = curlWorleyFbm.r * .625 + curlWorleyFbm.g * .25 + 
        curlWorleyFbm.b * .125;

    return curlWorley;
}
  
  
`,xI=`

float lamina_map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

float lamina_normalize(float v) { return lamina_map(v, -1.0, 1.0, 0.0, 1.0); }
`;class tN extends Nq{constructor({color:e,alpha:t,lighting:r,layers:i,name:s,...o}={}){super({baseMaterial:foe[r||"basic"],...o}),this.name="LayerMaterial",this.layers=[],this.lighting="basic";const a=e||"white",l=t??1;this.uniforms={u_lamina_color:{value:typeof a=="string"?new qe(a).convertSRGBToLinear():a},u_lamina_alpha:{value:l}},this.layers=i||this.layers,this.lighting=r||this.lighting,this.name=s||this.name,this.refresh()}genShaders(){let e="",t="",r="",i="",s={};return this.layers.filter(o=>o.visible).forEach(o=>{e+=o.vertexVariables+`
`,t+=o.fragmentVariables+`
`,r+=o.vertexShader+`
`,i+=o.fragmentShader+`
`,s={...s,...o.uniforms}}),s={...s,...this.uniforms},{uniforms:s,vertexShader:`
        ${xI}
        ${_I}
        ${e}

        void main() {
          vec3 lamina_finalPosition = position;
          vec3 lamina_finalNormal = normal;

          ${r}

          csm_Position = lamina_finalPosition;
          csm_Normal = lamina_finalNormal;
        }
        `,fragmentShader:`
        ${xI}
        ${_I}
        ${doe}
        ${t}

        uniform vec3 u_lamina_color;
        uniform float u_lamina_alpha;

        void main() {
          vec4 lamina_finalColor = vec4(u_lamina_color, u_lamina_alpha);

          ${i}

          csm_DiffuseColor = lamina_finalColor;
         
        }
        `}}refresh(){const{uniforms:e,fragmentShader:t,vertexShader:r}=this.genShaders();super.update({fragmentShader:t,vertexShader:r,uniforms:e})}serialize(){return{constructor:"LayerMaterial",properties:{color:this.color,alpha:this.alpha,name:this.name,lighting:this.lighting}}}set color(e){var t,r;(t=this.uniforms)!=null&&(r=t.u_lamina_color)!=null&&r.value&&(this.uniforms.u_lamina_color.value=typeof e=="string"?new qe(e).convertSRGBToLinear():e)}get color(){var e,t;return(e=this.uniforms)==null||(t=e.u_lamina_color)==null?void 0:t.value}set alpha(e){this.uniforms.u_lamina_alpha.value=e}get alpha(){return this.uniforms.u_lamina_alpha.value}}tg({LayerMaterial:tN});tg({LayerMaterial:tN,Depth_:no,Color_:rh,Noise_:qi,Fresnel_:Oo,Gradient_:ro,Matcap_:Oc,Texture_:Uc,Displace_:Ua,Normal_:Nc});const wI=le.forwardRef(({children:n,...e},t)=>{const r=le.useRef(null);L.useImperativeHandle(t,()=>r.current),le.useLayoutEffect(()=>{r.current.layers=r.current.__r3f.objects,r.current.refresh()},[n]);const[i,s]=L.useMemo(()=>uoe(e),[e]);return le.createElement("layerMaterial",vn({args:[i],ref:r},s),n)});function hoe(n){return[{mode:n==null?void 0:n.mode,visible:n==null?void 0:n.visible,type:n==null?void 0:n.type,mapping:n==null?void 0:n.mapping,map:n==null?void 0:n.map,axes:n==null?void 0:n.axes}]}const SI=le.forwardRef((n,e)=>le.createElement("gradient_",vn({ref:e,args:hoe(n)},n))),poe=({backgroundColors:n})=>{const r=L.useRef(),i=L.useRef();return so(()=>{r.current.colorA=new qe(n.current.colorA),r.current.colorB=new qe(n.current.colorB),i.current.colorA=new qe(n.current.colorA),i.current.colorB=new qe(n.current.colorB)}),$i(vb,{children:[Pt(EP,{scale:[500,500,500],"rotation-y":Math.PI/2,children:Pt(wI,{color:"#ffffff",side:fr,children:Pt(SI,{ref:r,axes:"y",start:.2,end:-.5})})}),Pt(VK,{resolution:256,frames:1/0,children:Pt(EP,{scale:[100,100,100],"rotation-y":Math.PI/2,"rotation-x":Math.PI,children:Pt(wI,{color:"#ffffff",side:fr,children:Pt(SI,{ref:i,axes:"y",start:.2,end:-.5})})})})]})};function moe({sceneOpacity:n,...e}){const{nodes:t,materials:r}=Fc("./models/cloud/model.gltf"),i=L.useRef();return so(()=>{i.current.opacity=n.current}),Pt("group",{...e,dispose:null,children:Pt("mesh",{geometry:t.Mball001.geometry,children:Pt("meshStandardMaterial",{ref:i,onBeforeCompile:RO,envMapIntensity:2,transparent:!0})})})}Fc.preload("./models/cloud/model.gltf");const goe=240,voe=.1,yoe=()=>{const n=L.useRef();let e={x:0,y:0,z:0},t=0;const r=()=>{e={x:$s.randFloatSpread(8),y:$s.randFloatSpread(5),z:$s.randFloatSpread(8)},t=$s.randFloat(16,20)};return r(),so((i,s)=>{n.current&&(n.current.position.z+=t*s,n.current.position.z>5&&(r(),n.current.position.z=e.z))}),Pt(yk,{ref:n,color:"white",position:[e.x,e.y,e.z],"rotation-y":Math.PI/2})},_oe=()=>{const n=L.useRef(),e=zF(),t=L.useRef(0);return so((r,i)=>{e.offset-t.current>5e-4&&(n.current.opacity=voe),t.current=e.offset,n.current.opacity>0&&(n.current.opacity-=i*.2)}),Pt("group",{children:$i(FK,{children:[Pt("planeGeometry",{args:[1,.004]}),Pt("meshBasicMaterial",{ref:n,side:Gr,blending:_y,opacity:0,transparent:!0}),Array(goe).fill().map((r,i)=>Pt(yoe,{},i))]})})},xoe=({title:n,subtitle:e,...t})=>$i("group",{...t,children:[!!n&&$i(vP,{color:"white",anchorX:"left",anchorY:"bottom",fontSize:.52,maxWidth:2.5,lineHeight:1,font:"./fonts/DMSerifDisplay-Regular.ttf",children:[n,Pt("meshStandardMaterial",{color:"white",onBeforeCompile:XP})]}),$i(vP,{color:"white",anchorX:"left",anchorY:"top",fontSize:.2,maxWidth:2.5,font:"./fonts/Inter-Regular.ttf",children:[e,Pt("meshStandardMaterial",{color:"white",onBeforeCompile:XP})]})]}),woe=1e3,Vu=250,Soe=.008,boe=.02,bI=35,Pw=42,Aoe=()=>{const n=L.useMemo(()=>[new V(0,0,0),new V(0,0,-Vu),new V(100,0,-2*Vu),new V(-100,0,-3*Vu),new V(100,0,-4*Vu),new V(0,0,-5*Vu),new V(0,0,-6*Vu),new V(0,0,-7*Vu)],[]),e=L.useRef(0),t=L.useRef(),r=L.useMemo(()=>new IA(n,!1,"catmullrom",.5),[]),i=L.useMemo(()=>[{cameraRailDist:-1,position:new V(n[1].x-3,n[1].y,n[1].z),subtitle:`Welcome to AmsR Group,
Have a seat and enjoy the ride!`},{cameraRailDist:1.5,position:new V(n[2].x+2,n[2].y,n[2].z),title:"Members",subtitle:`Vishnu Kashyap , Shiva Giri , 
        Saurabh Gupta , Nitesh Mishra & Aryan Maurya`},{cameraRailDist:-1,position:new V(n[3].x-3,n[3].y,n[3].z),title:"Stacks / Tech...",subtitle:`I'am use Top best stacks like Bun , Vite , Reactjs , Firebase , Javascript , 
        TailwindCSS & some other ...`},{cameraRailDist:1.5,position:new V(n[4].x+3.5,n[4].y,n[4].z-12),title:": Works : ",subtitle:"Documentation/Synopsys pptx chart by Vishnu+Shiva+Saurabh+Nitesh &&& Build+Deploy+maintenance+test+SEO+UI/UX by Aryan"}],[]),s=L.useMemo(()=>[{position:new V(-3.5,-3.2,-7)},{position:new V(3.5,-4,-10)},{scale:new V(4,4,4),position:new V(-18,.2,-68),rotation:new Er(-Math.PI/5,Math.PI/6,0)},{scale:new V(2.5,2.5,2.5),position:new V(10,-1.2,-52)},{scale:new V(4,4,4),position:new V(n[1].x+10,n[1].y-4,n[1].z+64)},{scale:new V(3,3,3),position:new V(n[1].x-20,n[1].y+4,n[1].z+28),rotation:new Er(0,Math.PI/7,0)},{rotation:new Er(0,Math.PI/7,Math.PI/5),scale:new V(5,5,5),position:new V(n[1].x-13,n[1].y+4,n[1].z-62)},{rotation:new Er(Math.PI/2,Math.PI/2,Math.PI/3),scale:new V(5,5,5),position:new V(n[1].x+54,n[1].y+2,n[1].z-82)},{scale:new V(5,5,5),position:new V(n[1].x+8,n[1].y-14,n[1].z-22)},{scale:new V(3,3,3),position:new V(n[2].x+6,n[2].y-7,n[2].z+50)},{scale:new V(2,2,2),position:new V(n[2].x-2,n[2].y+4,n[2].z-26)},{scale:new V(4,4,4),position:new V(n[2].x+12,n[2].y+1,n[2].z-86),rotation:new Er(Math.PI/4,0,Math.PI/3)},{scale:new V(3,3,3),position:new V(n[3].x+3,n[3].y-10,n[3].z+50)},{scale:new V(3,3,3),position:new V(n[3].x-10,n[3].y,n[3].z+30),rotation:new Er(Math.PI/4,0,Math.PI/5)},{scale:new V(4,4,4),position:new V(n[3].x-20,n[3].y-5,n[3].z-8),rotation:new Er(Math.PI,0,Math.PI/5)},{scale:new V(5,5,5),position:new V(n[3].x+0,n[3].y-5,n[3].z-98),rotation:new Er(0,Math.PI/3,0)},{scale:new V(2,2,2),position:new V(n[4].x+3,n[4].y-10,n[4].z+2)},{scale:new V(3,3,3),position:new V(n[4].x+24,n[4].y-6,n[4].z-42),rotation:new Er(Math.PI/4,0,Math.PI/5)},{scale:new V(3,3,3),position:new V(n[4].x-4,n[4].y+9,n[4].z-62),rotation:new Er(Math.PI/3,0,Math.PI/3)},{scale:new V(3,3,3),position:new V(n[7].x+12,n[7].y-5,n[7].z+60),rotation:new Er(-Math.PI/4,-Math.PI/6,0)},{scale:new V(3,3,3),position:new V(n[7].x-12,n[7].y+5,n[7].z+120),rotation:new Er(Math.PI/4,Math.PI/6,0)}],[]),o=L.useMemo(()=>{const R=new Kl;return R.moveTo(0,-.08),R.lineTo(0,.08),R},[r]),a=L.useRef(),l=L.useRef(),u=L.useRef(),c=zF(),f=L.useRef(0),{play:h,setHasScroll:m,end:y,setEnd:g}=RM();so((R,M)=>{if(window.innerWidth>window.innerHeight?(u.current.fov=30,u.current.position.z=5):(u.current.fov=80,u.current.position.z=2),f.current<=0&&c.offset>0&&m(!0),h&&!y&&e.current<1&&(e.current=$s.lerp(e.current,1,M*.1)),y&&e.current>0&&(e.current=$s.lerp(e.current,0,M)),t.current.opacity=e.current,y)return;const P=Math.max(0,c.offset);let b=1,C=!0;if(i.forEach(X=>{const K=X.position.distanceTo(a.current.position);if(K<Pw){b=Math.max(K/Pw,.1);const ce=new V((1-K/Pw)*X.cameraRailDist,0,0);l.current.position.lerp(ce,M),C=!1}}),C){const X=new V(0,0,0);l.current.position.lerp(X,M)}let T=$s.lerp(f.current,P,M*b);T=Math.min(T,1),T=Math.max(T,0),f.current=T,x.current.seek(T*x.current.duration());const I=r.getPoint(T);a.current.position.lerp(I,M*24);const D=r.getPoint(Math.min(T+Soe,1)),z=a.current.getWorldDirection(new V),N=new V().subVectors(I,D).normalize(),J=z.lerp(N,M*24);a.current.lookAt(a.current.position.clone().add(J));const Q=r.getTangent(T+boe),re=new bo;re.position.copy(I),re.lookAt(re.position.clone().add(N)),Q.applyAxisAngle(new V(0,1,0),-re.rotation.y);let G=Math.atan2(-Q.z,Q.x);G=-Math.PI/2+G;let j=G*180/Math.PI;j*=2.4,j<0&&(j=Math.max(j,-bI)),j>0&&(j=Math.min(j,bI)),G=j*Math.PI/180;const Y=new Zn().setFromEuler(new Er(v.current.rotation.x,v.current.rotation.y,G));v.current.quaternion.slerp(Y,M*2),a.current.position.z<n[n.length-1].z+100&&(g(!0),A.current.play())});const v=L.useRef(),x=L.useRef(),_=L.useRef({colorA:"#3535cc",colorB:"#abaadd"}),w=L.useRef(),A=L.useRef();return L.useLayoutEffect(()=>{x.current=Jv.timeline(),x.current.to(_.current,{duration:1,colorA:"#6f35cc",colorB:"#ffad30"}),x.current.to(_.current,{duration:1,colorA:"#424242",colorB:"#ffcc00"}),x.current.to(_.current,{duration:1,colorA:"#81318b",colorB:"#55ab8f"}),x.current.pause(),w.current=Jv.timeline(),w.current.pause(),w.current.from(v.current.position,{duration:3,z:5,y:-2}),A.current=Jv.timeline(),A.current.pause(),A.current.to(v.current.position,{duration:10,z:-250,y:10},0),A.current.to(l.current.position,{duration:8,y:12},0),A.current.to(v.current.position,{duration:1,z:-1e3})},[]),L.useEffect(()=>{h&&w.current.play()},[h]),L.useMemo(()=>$i(vb,{children:[Pt("directionalLight",{position:[0,3,1],intensity:.1}),$i("group",{ref:a,children:[Pt(_oe,{}),Pt(poe,{backgroundColors:_}),Pt("group",{ref:l,children:Pt(EK,{ref:u,position:[0,0,5],fov:30,makeDefault:!0})}),Pt("group",{ref:v,children:Pt(OK,{floatIntensity:1,speed:1.5,rotationIntensity:.5,children:Pt(nq,{"rotation-y":Math.PI/2,scale:[.2,.2,.2],"position-y":.1})})})]}),i.map((R,M)=>L.createElement(xoe,{...R,key:M})),Pt("group",{"position-y":-2,children:$i("mesh",{children:[Pt("extrudeGeometry",{args:[o,{steps:woe,bevelEnabled:!1,extrudePath:r}]}),Pt("meshStandardMaterial",{color:"white",ref:t,transparent:!0,envMapIntensity:2,onBeforeCompile:RO})]})}),s.map((R,M)=>L.createElement(moe,{sceneOpacity:e,...R,key:M}))]}),[])},Moe=()=>{const{progress:n}=i$(),{play:e,end:t,setPlay:r,hasScroll:i}=RM();return $i("div",{className:`overlay ${e?"overlay--disable":""}
    ${i?"overlay--scrolled":""}`,children:[Pt("div",{className:`loader ${n===100?"loader--disappear":""}`}),n===100&&$i("div",{className:`intro ${e?"intro--disappear":""}`,children:[$i("h1",{className:"logo",children:["AmsR Group",Pt("div",{className:"spinner",children:Pt("div",{className:"spinner__image"})})]}),Pt("p",{className:"intro__scroll",children:"Scroll to begin the journey"}),Pt("button",{className:"explore",onClick:()=>{r(!0)},children:"Explore"})]}),Pt("div",{className:`outro ${t?"outro--appear":""}`,children:Pt("p",{className:"outro__text",children:"Wish you had a great flight with us..."})})]})};function Eoe(){const{play:n,end:e}=RM(),t=L.useMemo(()=>Pt(NQ,{children:Pt(zQ,{opacity:.08})}),[]);return $i(vb,{children:[$i(r$,{children:[Pt("color",{attach:"background",args:["#ececec"]}),Pt(L$,{pages:n&&!e?20:0,damping:.5,style:{top:"10px",left:"0px",bottom:"10px",right:"10px",width:"auto",height:"auto",animation:"fadeIn 2.4s ease-in-out 1.2s forwards",opacity:0},children:Pt(Aoe,{})}),t]}),Pt(Moe,{})]})}Bw.createRoot(document.getElementById("root")).render(Pt(le.StrictMode,{children:Pt(eq,{children:Pt(Eoe,{})})}));
